(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))m(p);new MutationObserver(p=>{for(const E of p)if(E.type==="childList")for(const y of E.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&m(y)}).observe(document,{childList:!0,subtree:!0});function c(p){const E={};return p.integrity&&(E.integrity=p.integrity),p.referrerPolicy&&(E.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?E.credentials="include":p.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function m(p){if(p.ep)return;p.ep=!0;const E=c(p);fetch(p.href,E)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qs(e){const t=Object.create(null);for(const c of e.split(","))t[c]=1;return c=>c in t}const ve={},Ct=[],qe=()=>{},Ji=()=>!1,us=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Gs=e=>e.startsWith("onUpdate:"),De=Object.assign,Xs=(e,t)=>{const c=e.indexOf(t);c>-1&&e.splice(c,1)},ln=Object.prototype.hasOwnProperty,ge=(e,t)=>ln.call(e,t),ce=Array.isArray,wt=e=>Kt(e)==="[object Map]",fs=e=>Kt(e)==="[object Set]",pi=e=>Kt(e)==="[object Date]",he=e=>typeof e=="function",Ce=e=>typeof e=="string",Xe=e=>typeof e=="symbol",Se=e=>e!==null&&typeof e=="object",Yi=e=>(Se(e)||he(e))&&he(e.then)&&he(e.catch),Zi=Object.prototype.toString,Kt=e=>Zi.call(e),cn=e=>Kt(e).slice(8,-1),Qi=e=>Kt(e)==="[object Object]",Js=e=>Ce(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Tt=qs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ds=e=>{const t=Object.create(null);return c=>t[c]||(t[c]=e(c))},hn=/-\w/g,at=ds(e=>e.replace(hn,t=>t.slice(1).toUpperCase())),un=/\B([A-Z])/g,mt=ds(e=>e.replace(un,"-$1").toLowerCase()),er=ds(e=>e.charAt(0).toUpperCase()+e.slice(1)),Es=ds(e=>e?`on${er(e)}`:""),ot=(e,t)=>!Object.is(e,t),Jt=(e,...t)=>{for(let c=0;c<e.length;c++)e[c](...t)},tr=(e,t,c,m=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:m,value:c})},_s=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let gi;const ps=()=>gi||(gi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ys(e){if(ce(e)){const t={};for(let c=0;c<e.length;c++){const m=e[c],p=Ce(m)?pn(m):Ys(m);if(p)for(const E in p)t[E]=p[E]}return t}else if(Ce(e)||Se(e))return e}const fn=/;(?![^(]*\))/g,dn=/:([^]+)/,_n=/\/\*[^]*?\*\//g;function pn(e){const t={};return e.replace(_n,"").split(fn).forEach(c=>{if(c){const m=c.split(dn);m.length>1&&(t[m[0].trim()]=m[1].trim())}}),t}function Ft(e){let t="";if(Ce(e))t=e;else if(ce(e))for(let c=0;c<e.length;c++){const m=Ft(e[c]);m&&(t+=m+" ")}else if(Se(e))for(const c in e)e[c]&&(t+=c+" ");return t.trim()}const gn="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vn=qs(gn);function sr(e){return!!e||e===""}function mn(e,t){if(e.length!==t.length)return!1;let c=!0;for(let m=0;c&&m<e.length;m++)c=gs(e[m],t[m]);return c}function gs(e,t){if(e===t)return!0;let c=pi(e),m=pi(t);if(c||m)return c&&m?e.getTime()===t.getTime():!1;if(c=Xe(e),m=Xe(t),c||m)return e===t;if(c=ce(e),m=ce(t),c||m)return c&&m?mn(e,t):!1;if(c=Se(e),m=Se(t),c||m){if(!c||!m)return!1;const p=Object.keys(e).length,E=Object.keys(t).length;if(p!==E)return!1;for(const y in e){const s=e.hasOwnProperty(y),o=t.hasOwnProperty(y);if(s&&!o||!s&&o||!gs(e[y],t[y]))return!1}}return String(e)===String(t)}function Sn(e,t){return e.findIndex(c=>gs(c,t))}const ir=e=>!!(e&&e.__v_isRef===!0),pt=e=>Ce(e)?e:e==null?"":ce(e)||Se(e)&&(e.toString===Zi||!he(e.toString))?ir(e)?pt(e.value):JSON.stringify(e,rr,2):String(e),rr=(e,t)=>ir(t)?rr(e,t.value):wt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((c,[m,p],E)=>(c[xs(m,E)+" =>"]=p,c),{})}:fs(t)?{[`Set(${t.size})`]:[...t.values()].map(c=>xs(c))}:Xe(t)?xs(t):Se(t)&&!ce(t)&&!Qi(t)?String(t):t,xs=(e,t="")=>{var c;return Xe(e)?`Symbol(${(c=e.description)!=null?c:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Te;class bn{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Te,!t&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,c;if(this.scopes)for(t=0,c=this.scopes.length;t<c;t++)this.scopes[t].pause();for(t=0,c=this.effects.length;t<c;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,c;if(this.scopes)for(t=0,c=this.scopes.length;t<c;t++)this.scopes[t].resume();for(t=0,c=this.effects.length;t<c;t++)this.effects[t].resume()}}run(t){if(this._active){const c=Te;try{return Te=this,t()}finally{Te=c}}}on(){++this._on===1&&(this.prevScope=Te,Te=this)}off(){this._on>0&&--this._on===0&&(Te=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let c,m;for(c=0,m=this.effects.length;c<m;c++)this.effects[c].stop();for(this.effects.length=0,c=0,m=this.cleanups.length;c<m;c++)this.cleanups[c]();if(this.cleanups.length=0,this.scopes){for(c=0,m=this.scopes.length;c<m;c++)this.scopes[c].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const p=this.parent.scopes.pop();p&&p!==this&&(this.parent.scopes[this.index]=p,p.index=this.index)}this.parent=void 0}}}function Cn(){return Te}let me;const Ls=new WeakSet;class nr{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Te&&Te.active&&Te.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ls.has(this)&&(Ls.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ar(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vi(this),lr(this);const t=me,c=$e;me=this,$e=!0;try{return this.fn()}finally{cr(this),me=t,$e=c,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ei(t);this.deps=this.depsTail=void 0,vi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ls.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Is(this)&&this.run()}get dirty(){return Is(this)}}let or=0,Mt,Bt;function ar(e,t=!1){if(e.flags|=8,t){e.next=Bt,Bt=e;return}e.next=Mt,Mt=e}function Zs(){or++}function Qs(){if(--or>0)return;if(Bt){let t=Bt;for(Bt=void 0;t;){const c=t.next;t.next=void 0,t.flags&=-9,t=c}}let e;for(;Mt;){let t=Mt;for(Mt=void 0;t;){const c=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(m){e||(e=m)}t=c}}if(e)throw e}function lr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cr(e){let t,c=e.depsTail,m=c;for(;m;){const p=m.prevDep;m.version===-1?(m===c&&(c=p),ei(m),wn(m)):t=m,m.dep.activeLink=m.prevActiveLink,m.prevActiveLink=void 0,m=p}e.deps=t,e.depsTail=c}function Is(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(hr(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function hr(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Wt)||(e.globalVersion=Wt,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Is(e))))return;e.flags|=2;const t=e.dep,c=me,m=$e;me=e,$e=!0;try{lr(e);const p=e.fn(e._value);(t.version===0||ot(p,e._value))&&(e.flags|=128,e._value=p,t.version++)}catch(p){throw t.version++,p}finally{me=c,$e=m,cr(e),e.flags&=-3}}function ei(e,t=!1){const{dep:c,prevSub:m,nextSub:p}=e;if(m&&(m.nextSub=p,e.prevSub=void 0),p&&(p.prevSub=m,e.nextSub=void 0),c.subs===e&&(c.subs=m,!m&&c.computed)){c.computed.flags&=-5;for(let E=c.computed.deps;E;E=E.nextDep)ei(E,!0)}!t&&!--c.sc&&c.map&&c.map.delete(c.key)}function wn(e){const{prevDep:t,nextDep:c}=e;t&&(t.nextDep=c,e.prevDep=void 0),c&&(c.prevDep=t,e.nextDep=void 0)}let $e=!0;const ur=[];function tt(){ur.push($e),$e=!1}function st(){const e=ur.pop();$e=e===void 0?!0:e}function vi(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const c=me;me=void 0;try{t()}finally{me=c}}}let Wt=0;class yn{constructor(t,c){this.sub=t,this.dep=c,this.version=c.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ti{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!me||!$e||me===this.computed)return;let c=this.activeLink;if(c===void 0||c.sub!==me)c=this.activeLink=new yn(me,this),me.deps?(c.prevDep=me.depsTail,me.depsTail.nextDep=c,me.depsTail=c):me.deps=me.depsTail=c,fr(c);else if(c.version===-1&&(c.version=this.version,c.nextDep)){const m=c.nextDep;m.prevDep=c.prevDep,c.prevDep&&(c.prevDep.nextDep=m),c.prevDep=me.depsTail,c.nextDep=void 0,me.depsTail.nextDep=c,me.depsTail=c,me.deps===c&&(me.deps=m)}return c}trigger(t){this.version++,Wt++,this.notify(t)}notify(t){Zs();try{for(let c=this.subs;c;c=c.prevSub)c.sub.notify()&&c.sub.dep.notify()}finally{Qs()}}}function fr(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let m=t.deps;m;m=m.nextDep)fr(m)}const c=e.dep.subs;c!==e&&(e.prevSub=c,c&&(c.nextSub=e)),e.dep.subs=e}}const Hs=new WeakMap,vt=Symbol(""),Fs=Symbol(""),Nt=Symbol("");function xe(e,t,c){if($e&&me){let m=Hs.get(e);m||Hs.set(e,m=new Map);let p=m.get(c);p||(m.set(c,p=new ti),p.map=m,p.key=c),p.track()}}function Qe(e,t,c,m,p,E){const y=Hs.get(e);if(!y){Wt++;return}const s=o=>{o&&o.trigger()};if(Zs(),t==="clear")y.forEach(s);else{const o=ce(e),h=o&&Js(c);if(o&&c==="length"){const u=Number(m);y.forEach((l,_)=>{(_==="length"||_===Nt||!Xe(_)&&_>=u)&&s(l)})}else switch((c!==void 0||y.has(void 0))&&s(y.get(c)),h&&s(y.get(Nt)),t){case"add":o?h&&s(y.get("length")):(s(y.get(vt)),wt(e)&&s(y.get(Fs)));break;case"delete":o||(s(y.get(vt)),wt(e)&&s(y.get(Fs)));break;case"set":wt(e)&&s(y.get(vt));break}}Qs()}function St(e){const t=pe(e);return t===e?t:(xe(t,"iterate",Nt),Fe(e)?t:t.map(ye))}function vs(e){return xe(e=pe(e),"iterate",Nt),e}const En={__proto__:null,[Symbol.iterator](){return Ds(this,Symbol.iterator,ye)},concat(...e){return St(this).concat(...e.map(t=>ce(t)?St(t):t))},entries(){return Ds(this,"entries",e=>(e[1]=ye(e[1]),e))},every(e,t){return Ye(this,"every",e,t,void 0,arguments)},filter(e,t){return Ye(this,"filter",e,t,c=>c.map(ye),arguments)},find(e,t){return Ye(this,"find",e,t,ye,arguments)},findIndex(e,t){return Ye(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ye(this,"findLast",e,t,ye,arguments)},findLastIndex(e,t){return Ye(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ye(this,"forEach",e,t,void 0,arguments)},includes(...e){return ks(this,"includes",e)},indexOf(...e){return ks(this,"indexOf",e)},join(e){return St(this).join(e)},lastIndexOf(...e){return ks(this,"lastIndexOf",e)},map(e,t){return Ye(this,"map",e,t,void 0,arguments)},pop(){return kt(this,"pop")},push(...e){return kt(this,"push",e)},reduce(e,...t){return mi(this,"reduce",e,t)},reduceRight(e,...t){return mi(this,"reduceRight",e,t)},shift(){return kt(this,"shift")},some(e,t){return Ye(this,"some",e,t,void 0,arguments)},splice(...e){return kt(this,"splice",e)},toReversed(){return St(this).toReversed()},toSorted(e){return St(this).toSorted(e)},toSpliced(...e){return St(this).toSpliced(...e)},unshift(...e){return kt(this,"unshift",e)},values(){return Ds(this,"values",ye)}};function Ds(e,t,c){const m=vs(e),p=m[t]();return m!==e&&!Fe(e)&&(p._next=p.next,p.next=()=>{const E=p._next();return E.done||(E.value=c(E.value)),E}),p}const xn=Array.prototype;function Ye(e,t,c,m,p,E){const y=vs(e),s=y!==e&&!Fe(e),o=y[t];if(o!==xn[t]){const l=o.apply(e,E);return s?ye(l):l}let h=c;y!==e&&(s?h=function(l,_){return c.call(this,ye(l),_,e)}:c.length>2&&(h=function(l,_){return c.call(this,l,_,e)}));const u=o.call(y,h,m);return s&&p?p(u):u}function mi(e,t,c,m){const p=vs(e);let E=c;return p!==e&&(Fe(e)?c.length>3&&(E=function(y,s,o){return c.call(this,y,s,o,e)}):E=function(y,s,o){return c.call(this,y,ye(s),o,e)}),p[t](E,...m)}function ks(e,t,c){const m=pe(e);xe(m,"iterate",Nt);const p=m[t](...c);return(p===-1||p===!1)&&ni(c[0])?(c[0]=pe(c[0]),m[t](...c)):p}function kt(e,t,c=[]){tt(),Zs();const m=pe(e)[t].apply(e,c);return Qs(),st(),m}const Ln=qs("__proto__,__v_isRef,__isVue"),dr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Xe));function Dn(e){Xe(e)||(e=String(e));const t=pe(this);return xe(t,"has",e),t.hasOwnProperty(e)}class _r{constructor(t=!1,c=!1){this._isReadonly=t,this._isShallow=c}get(t,c,m){if(c==="__v_skip")return t.__v_skip;const p=this._isReadonly,E=this._isShallow;if(c==="__v_isReactive")return!p;if(c==="__v_isReadonly")return p;if(c==="__v_isShallow")return E;if(c==="__v_raw")return m===(p?E?Hn:mr:E?vr:gr).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(m)?t:void 0;const y=ce(t);if(!p){let o;if(y&&(o=En[c]))return o;if(c==="hasOwnProperty")return Dn}const s=Reflect.get(t,c,Le(t)?t:m);if((Xe(c)?dr.has(c):Ln(c))||(p||xe(t,"get",c),E))return s;if(Le(s)){const o=y&&Js(c)?s:s.value;return p&&Se(o)?gt(o):o}return Se(s)?p?gt(s):ii(s):s}}class pr extends _r{constructor(t=!1){super(!1,t)}set(t,c,m,p){let E=t[c];if(!this._isShallow){const o=lt(E);if(!Fe(m)&&!lt(m)&&(E=pe(E),m=pe(m)),!ce(t)&&Le(E)&&!Le(m))return o||(E.value=m),!0}const y=ce(t)&&Js(c)?Number(c)<t.length:ge(t,c),s=Reflect.set(t,c,m,Le(t)?t:p);return t===pe(p)&&(y?ot(m,E)&&Qe(t,"set",c,m):Qe(t,"add",c,m)),s}deleteProperty(t,c){const m=ge(t,c);t[c];const p=Reflect.deleteProperty(t,c);return p&&m&&Qe(t,"delete",c,void 0),p}has(t,c){const m=Reflect.has(t,c);return(!Xe(c)||!dr.has(c))&&xe(t,"has",c),m}ownKeys(t){return xe(t,"iterate",ce(t)?"length":vt),Reflect.ownKeys(t)}}class kn extends _r{constructor(t=!1){super(!0,t)}set(t,c){return!0}deleteProperty(t,c){return!0}}const Rn=new pr,An=new kn,Tn=new pr(!0);const Ws=e=>e,qt=e=>Reflect.getPrototypeOf(e);function Mn(e,t,c){return function(...m){const p=this.__v_raw,E=pe(p),y=wt(E),s=e==="entries"||e===Symbol.iterator&&y,o=e==="keys"&&y,h=p[e](...m),u=c?Ws:t?ts:ye;return!t&&xe(E,"iterate",o?Fs:vt),{next(){const{value:l,done:_}=h.next();return _?{value:l,done:_}:{value:s?[u(l[0]),u(l[1])]:u(l),done:_}},[Symbol.iterator](){return this}}}}function Gt(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Bn(e,t){const c={get(p){const E=this.__v_raw,y=pe(E),s=pe(p);e||(ot(p,s)&&xe(y,"get",p),xe(y,"get",s));const{has:o}=qt(y),h=t?Ws:e?ts:ye;if(o.call(y,p))return h(E.get(p));if(o.call(y,s))return h(E.get(s));E!==y&&E.get(p)},get size(){const p=this.__v_raw;return!e&&xe(pe(p),"iterate",vt),p.size},has(p){const E=this.__v_raw,y=pe(E),s=pe(p);return e||(ot(p,s)&&xe(y,"has",p),xe(y,"has",s)),p===s?E.has(p):E.has(p)||E.has(s)},forEach(p,E){const y=this,s=y.__v_raw,o=pe(s),h=t?Ws:e?ts:ye;return!e&&xe(o,"iterate",vt),s.forEach((u,l)=>p.call(E,h(u),h(l),y))}};return De(c,e?{add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear")}:{add(p){!t&&!Fe(p)&&!lt(p)&&(p=pe(p));const E=pe(this);return qt(E).has.call(E,p)||(E.add(p),Qe(E,"add",p,p)),this},set(p,E){!t&&!Fe(E)&&!lt(E)&&(E=pe(E));const y=pe(this),{has:s,get:o}=qt(y);let h=s.call(y,p);h||(p=pe(p),h=s.call(y,p));const u=o.call(y,p);return y.set(p,E),h?ot(E,u)&&Qe(y,"set",p,E):Qe(y,"add",p,E),this},delete(p){const E=pe(this),{has:y,get:s}=qt(E);let o=y.call(E,p);o||(p=pe(p),o=y.call(E,p)),s&&s.call(E,p);const h=E.delete(p);return o&&Qe(E,"delete",p,void 0),h},clear(){const p=pe(this),E=p.size!==0,y=p.clear();return E&&Qe(p,"clear",void 0,void 0),y}}),["keys","values","entries",Symbol.iterator].forEach(p=>{c[p]=Mn(p,e,t)}),c}function si(e,t){const c=Bn(e,t);return(m,p,E)=>p==="__v_isReactive"?!e:p==="__v_isReadonly"?e:p==="__v_raw"?m:Reflect.get(ge(c,p)&&p in m?c:m,p,E)}const On={get:si(!1,!1)},Pn={get:si(!1,!0)},In={get:si(!0,!1)};const gr=new WeakMap,vr=new WeakMap,mr=new WeakMap,Hn=new WeakMap;function Fn(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Wn(e){return e.__v_skip||!Object.isExtensible(e)?0:Fn(cn(e))}function ii(e){return lt(e)?e:ri(e,!1,Rn,On,gr)}function Nn(e){return ri(e,!1,Tn,Pn,vr)}function gt(e){return ri(e,!0,An,In,mr)}function ri(e,t,c,m,p){if(!Se(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const E=Wn(e);if(E===0)return e;const y=p.get(e);if(y)return y;const s=new Proxy(e,E===2?m:c);return p.set(e,s),s}function yt(e){return lt(e)?yt(e.__v_raw):!!(e&&e.__v_isReactive)}function lt(e){return!!(e&&e.__v_isReadonly)}function Fe(e){return!!(e&&e.__v_isShallow)}function ni(e){return e?!!e.__v_raw:!1}function pe(e){const t=e&&e.__v_raw;return t?pe(t):e}function $n(e){return!ge(e,"__v_skip")&&Object.isExtensible(e)&&tr(e,"__v_skip",!0),e}const ye=e=>Se(e)?ii(e):e,ts=e=>Se(e)?gt(e):e;function Le(e){return e?e.__v_isRef===!0:!1}function Ne(e){return Un(e,!1)}function Un(e,t){return Le(e)?e:new jn(e,t)}class jn{constructor(t,c){this.dep=new ti,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=c?t:pe(t),this._value=c?t:ye(t),this.__v_isShallow=c}get value(){return this.dep.track(),this._value}set value(t){const c=this._rawValue,m=this.__v_isShallow||Fe(t)||lt(t);t=m?t:pe(t),ot(t,c)&&(this._rawValue=t,this._value=m?t:ye(t),this.dep.trigger())}}function Si(e){e.dep&&e.dep.trigger()}function We(e){return Le(e)?e.value:e}const Kn={get:(e,t,c)=>t==="__v_raw"?e:We(Reflect.get(e,t,c)),set:(e,t,c,m)=>{const p=e[t];return Le(p)&&!Le(c)?(p.value=c,!0):Reflect.set(e,t,c,m)}};function Sr(e){return yt(e)?e:new Proxy(e,Kn)}class zn{constructor(t,c,m){this.fn=t,this.setter=c,this._value=void 0,this.dep=new ti(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wt-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!c,this.isSSR=m}notify(){if(this.flags|=16,!(this.flags&8)&&me!==this)return ar(this,!0),!0}get value(){const t=this.dep.track();return hr(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Vn(e,t,c=!1){let m,p;return he(e)?m=e:(m=e.get,p=e.set),new zn(m,p,c)}const Xt={},ss=new WeakMap;let dt;function qn(e,t=!1,c=dt){if(c){let m=ss.get(c);m||ss.set(c,m=[]),m.push(e)}}function Gn(e,t,c=ve){const{immediate:m,deep:p,once:E,scheduler:y,augmentJob:s,call:o}=c,h=f=>p?f:Fe(f)||p===!1||p===0?et(f,1):et(f);let u,l,_,g,C=!1,d=!1;if(Le(e)?(l=()=>e.value,C=Fe(e)):yt(e)?(l=()=>h(e),C=!0):ce(e)?(d=!0,C=e.some(f=>yt(f)||Fe(f)),l=()=>e.map(f=>{if(Le(f))return f.value;if(yt(f))return h(f);if(he(f))return o?o(f,2):f()})):he(e)?t?l=o?()=>o(e,2):e:l=()=>{if(_){tt();try{_()}finally{st()}}const f=dt;dt=u;try{return o?o(e,3,[g]):e(g)}finally{dt=f}}:l=qe,t&&p){const f=l,S=p===!0?1/0:p;l=()=>et(f(),S)}const r=Cn(),a=()=>{u.stop(),r&&r.active&&Xs(r.effects,u)};if(E&&t){const f=t;t=(...S)=>{f(...S),a()}}let i=d?new Array(e.length).fill(Xt):Xt;const n=f=>{if(!(!(u.flags&1)||!u.dirty&&!f))if(t){const S=u.run();if(p||C||(d?S.some((b,w)=>ot(b,i[w])):ot(S,i))){_&&_();const b=dt;dt=u;try{const w=[S,i===Xt?void 0:d&&i[0]===Xt?[]:i,g];i=S,o?o(t,3,w):t(...w)}finally{dt=b}}}else u.run()};return s&&s(n),u=new nr(l),u.scheduler=y?()=>y(n,!1):n,g=f=>qn(f,!1,u),_=u.onStop=()=>{const f=ss.get(u);if(f){if(o)o(f,4);else for(const S of f)S();ss.delete(u)}},t?m?n(!0):i=u.run():y?y(n.bind(null,!0),!0):u.run(),a.pause=u.pause.bind(u),a.resume=u.resume.bind(u),a.stop=a,a}function et(e,t=1/0,c){if(t<=0||!Se(e)||e.__v_skip||(c=c||new Map,(c.get(e)||0)>=t))return e;if(c.set(e,t),t--,Le(e))et(e.value,t,c);else if(ce(e))for(let m=0;m<e.length;m++)et(e[m],t,c);else if(fs(e)||wt(e))e.forEach(m=>{et(m,t,c)});else if(Qi(e)){for(const m in e)et(e[m],t,c);for(const m of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,m)&&et(e[m],t,c)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zt(e,t,c,m){try{return m?e(...m):e()}catch(p){ms(p,t,c)}}function Je(e,t,c,m){if(he(e)){const p=zt(e,t,c,m);return p&&Yi(p)&&p.catch(E=>{ms(E,t,c)}),p}if(ce(e)){const p=[];for(let E=0;E<e.length;E++)p.push(Je(e[E],t,c,m));return p}}function ms(e,t,c,m=!0){const p=t?t.vnode:null,{errorHandler:E,throwUnhandledErrorInProduction:y}=t&&t.appContext.config||ve;if(t){let s=t.parent;const o=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${c}`;for(;s;){const u=s.ec;if(u){for(let l=0;l<u.length;l++)if(u[l](e,o,h)===!1)return}s=s.parent}if(E){tt(),zt(E,null,10,[e,o,h]),st();return}}Xn(e,c,p,m,y)}function Xn(e,t,c,m=!0,p=!1){if(p)throw e;console.error(e)}const Re=[];let Ke=-1;const Et=[];let rt=null,bt=0;const br=Promise.resolve();let is=null;function Cr(e){const t=is||br;return e?t.then(this?e.bind(this):e):t}function Jn(e){let t=Ke+1,c=Re.length;for(;t<c;){const m=t+c>>>1,p=Re[m],E=$t(p);E<e||E===e&&p.flags&2?t=m+1:c=m}return t}function oi(e){if(!(e.flags&1)){const t=$t(e),c=Re[Re.length-1];!c||!(e.flags&2)&&t>=$t(c)?Re.push(e):Re.splice(Jn(t),0,e),e.flags|=1,wr()}}function wr(){is||(is=br.then(Er))}function Yn(e){ce(e)?Et.push(...e):rt&&e.id===-1?rt.splice(bt+1,0,e):e.flags&1||(Et.push(e),e.flags|=1),wr()}function bi(e,t,c=Ke+1){for(;c<Re.length;c++){const m=Re[c];if(m&&m.flags&2){if(e&&m.id!==e.uid)continue;Re.splice(c,1),c--,m.flags&4&&(m.flags&=-2),m(),m.flags&4||(m.flags&=-2)}}}function yr(e){if(Et.length){const t=[...new Set(Et)].sort((c,m)=>$t(c)-$t(m));if(Et.length=0,rt){rt.push(...t);return}for(rt=t,bt=0;bt<rt.length;bt++){const c=rt[bt];c.flags&4&&(c.flags&=-2),c.flags&8||c(),c.flags&=-2}rt=null,bt=0}}const $t=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Er(e){try{for(Ke=0;Ke<Re.length;Ke++){const t=Re[Ke];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),zt(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ke<Re.length;Ke++){const t=Re[Ke];t&&(t.flags&=-2)}Ke=-1,Re.length=0,yr(),is=null,(Re.length||Et.length)&&Er()}}let He=null,xr=null;function rs(e){const t=He;return He=e,xr=e&&e.type.__scopeId||null,t}function Zn(e,t=He,c){if(!t||e._n)return e;const m=(...p)=>{m._d&&Ai(-1);const E=rs(t);let y;try{y=e(...p)}finally{rs(E),m._d&&Ai(1)}return y};return m._n=!0,m._c=!0,m._d=!0,m}function Rs(e,t){if(He===null)return e;const c=ys(He),m=e.dirs||(e.dirs=[]);for(let p=0;p<t.length;p++){let[E,y,s,o=ve]=t[p];E&&(he(E)&&(E={mounted:E,updated:E}),E.deep&&et(y),m.push({dir:E,instance:c,value:y,oldValue:void 0,arg:s,modifiers:o}))}return e}function ut(e,t,c,m){const p=e.dirs,E=t&&t.dirs;for(let y=0;y<p.length;y++){const s=p[y];E&&(s.oldValue=E[y].value);let o=s.dir[m];o&&(tt(),Je(o,c,8,[e.el,s,e,t]),st())}}const Qn=Symbol("_vte"),eo=e=>e.__isTeleport,to=Symbol("_leaveCb");function ai(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ai(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Lr(e,t){return he(e)?De({name:e.name},t,{setup:e}):e}function Dr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ns=new WeakMap;function Ot(e,t,c,m,p=!1){if(ce(e)){e.forEach((C,d)=>Ot(C,t&&(ce(t)?t[d]:t),c,m,p));return}if(Pt(m)&&!p){m.shapeFlag&512&&m.type.__asyncResolved&&m.component.subTree.component&&Ot(e,t,c,m.component.subTree);return}const E=m.shapeFlag&4?ys(m.component):m.el,y=p?null:E,{i:s,r:o}=e,h=t&&t.r,u=s.refs===ve?s.refs={}:s.refs,l=s.setupState,_=pe(l),g=l===ve?Ji:C=>ge(_,C);if(h!=null&&h!==o){if(Ci(t),Ce(h))u[h]=null,g(h)&&(l[h]=null);else if(Le(h)){h.value=null;const C=t;C.k&&(u[C.k]=null)}}if(he(o))zt(o,s,12,[y,u]);else{const C=Ce(o),d=Le(o);if(C||d){const r=()=>{if(e.f){const a=C?g(o)?l[o]:u[o]:o.value;if(p)ce(a)&&Xs(a,E);else if(ce(a))a.includes(E)||a.push(E);else if(C)u[o]=[E],g(o)&&(l[o]=u[o]);else{const i=[E];o.value=i,e.k&&(u[e.k]=i)}}else C?(u[o]=y,g(o)&&(l[o]=y)):d&&(o.value=y,e.k&&(u[e.k]=y))};if(y){const a=()=>{r(),ns.delete(e)};a.id=-1,ns.set(e,a),Oe(a,c)}else Ci(e),r()}}}function Ci(e){const t=ns.get(e);t&&(t.flags|=8,ns.delete(e))}ps().requestIdleCallback;ps().cancelIdleCallback;const Pt=e=>!!e.type.__asyncLoader,kr=e=>e.type.__isKeepAlive;function so(e,t){Rr(e,"a",t)}function io(e,t){Rr(e,"da",t)}function Rr(e,t,c=Ae){const m=e.__wdc||(e.__wdc=()=>{let p=c;for(;p;){if(p.isDeactivated)return;p=p.parent}return e()});if(Ss(t,m,c),c){let p=c.parent;for(;p&&p.parent;)kr(p.parent.vnode)&&ro(m,t,c,p),p=p.parent}}function ro(e,t,c,m){const p=Ss(t,e,m,!0);li(()=>{Xs(m[t],p)},c)}function Ss(e,t,c=Ae,m=!1){if(c){const p=c[e]||(c[e]=[]),E=t.__weh||(t.__weh=(...y)=>{tt();const s=Vt(c),o=Je(t,c,e,y);return s(),st(),o});return m?p.unshift(E):p.push(E),E}}const it=e=>(t,c=Ae)=>{(!jt||e==="sp")&&Ss(e,(...m)=>t(...m),c)},no=it("bm"),bs=it("m"),oo=it("bu"),ao=it("u"),Ar=it("bum"),li=it("um"),lo=it("sp"),co=it("rtg"),ho=it("rtc");function Tr(e,t=Ae){Ss("ec",e,t)}const uo=Symbol.for("v-ndc");function fo(e,t,c,m){let p;const E=c,y=ce(e);if(y||Ce(e)){const s=y&&yt(e);let o=!1,h=!1;s&&(o=!Fe(e),h=lt(e),e=vs(e)),p=new Array(e.length);for(let u=0,l=e.length;u<l;u++)p[u]=t(o?h?ts(ye(e[u])):ye(e[u]):e[u],u,void 0,E)}else if(typeof e=="number"){p=new Array(e);for(let s=0;s<e;s++)p[s]=t(s+1,s,void 0,E)}else if(Se(e))if(e[Symbol.iterator])p=Array.from(e,(s,o)=>t(s,o,void 0,E));else{const s=Object.keys(e);p=new Array(s.length);for(let o=0,h=s.length;o<h;o++){const u=s[o];p[o]=t(e[u],u,o,E)}}else p=[];return p}const Ns=e=>e?Zr(e)?ys(e):Ns(e.parent):null,It=De(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ns(e.parent),$root:e=>Ns(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Br(e),$forceUpdate:e=>e.f||(e.f=()=>{oi(e.update)}),$nextTick:e=>e.n||(e.n=Cr.bind(e.proxy)),$watch:e=>Po.bind(e)}),As=(e,t)=>e!==ve&&!e.__isScriptSetup&&ge(e,t),_o={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:c,setupState:m,data:p,props:E,accessCache:y,type:s,appContext:o}=e;let h;if(t[0]!=="$"){const g=y[t];if(g!==void 0)switch(g){case 1:return m[t];case 2:return p[t];case 4:return c[t];case 3:return E[t]}else{if(As(m,t))return y[t]=1,m[t];if(p!==ve&&ge(p,t))return y[t]=2,p[t];if((h=e.propsOptions[0])&&ge(h,t))return y[t]=3,E[t];if(c!==ve&&ge(c,t))return y[t]=4,c[t];$s&&(y[t]=0)}}const u=It[t];let l,_;if(u)return t==="$attrs"&&xe(e.attrs,"get",""),u(e);if((l=s.__cssModules)&&(l=l[t]))return l;if(c!==ve&&ge(c,t))return y[t]=4,c[t];if(_=o.config.globalProperties,ge(_,t))return _[t]},set({_:e},t,c){const{data:m,setupState:p,ctx:E}=e;return As(p,t)?(p[t]=c,!0):m!==ve&&ge(m,t)?(m[t]=c,!0):ge(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(E[t]=c,!0)},has({_:{data:e,setupState:t,accessCache:c,ctx:m,appContext:p,propsOptions:E,type:y}},s){let o,h;return!!(c[s]||e!==ve&&s[0]!=="$"&&ge(e,s)||As(t,s)||(o=E[0])&&ge(o,s)||ge(m,s)||ge(It,s)||ge(p.config.globalProperties,s)||(h=y.__cssModules)&&h[s])},defineProperty(e,t,c){return c.get!=null?e._.accessCache[t]=0:ge(c,"value")&&this.set(e,t,c.value,null),Reflect.defineProperty(e,t,c)}};function wi(e){return ce(e)?e.reduce((t,c)=>(t[c]=null,t),{}):e}let $s=!0;function po(e){const t=Br(e),c=e.proxy,m=e.ctx;$s=!1,t.beforeCreate&&yi(t.beforeCreate,e,"bc");const{data:p,computed:E,methods:y,watch:s,provide:o,inject:h,created:u,beforeMount:l,mounted:_,beforeUpdate:g,updated:C,activated:d,deactivated:r,beforeDestroy:a,beforeUnmount:i,destroyed:n,unmounted:f,render:S,renderTracked:b,renderTriggered:w,errorCaptured:v,serverPrefetch:x,expose:B,inheritAttrs:P,components:M,directives:A,filters:F}=t;if(h&&go(h,m,null),y)for(const q in y){const K=y[q];he(K)&&(m[q]=K.bind(c))}if(p){const q=p.call(c,c);Se(q)&&(e.data=ii(q))}if($s=!0,E)for(const q in E){const K=E[q],L=he(K)?K.bind(c,c):he(K.get)?K.get.bind(c,c):qe,k=!he(K)&&he(K.set)?K.set.bind(c):qe,T=ls({get:L,set:k});Object.defineProperty(m,q,{enumerable:!0,configurable:!0,get:()=>T.value,set:I=>T.value=I})}if(s)for(const q in s)Mr(s[q],m,c,q);if(o){const q=he(o)?o.call(c):o;Reflect.ownKeys(q).forEach(K=>{wo(K,q[K])})}u&&yi(u,e,"c");function j(q,K){ce(K)?K.forEach(L=>q(L.bind(c))):K&&q(K.bind(c))}if(j(no,l),j(bs,_),j(oo,g),j(ao,C),j(so,d),j(io,r),j(Tr,v),j(ho,b),j(co,w),j(Ar,i),j(li,f),j(lo,x),ce(B))if(B.length){const q=e.exposed||(e.exposed={});B.forEach(K=>{Object.defineProperty(q,K,{get:()=>c[K],set:L=>c[K]=L,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===qe&&(e.render=S),P!=null&&(e.inheritAttrs=P),M&&(e.components=M),A&&(e.directives=A),x&&Dr(e)}function go(e,t,c=qe){ce(e)&&(e=Us(e));for(const m in e){const p=e[m];let E;Se(p)?"default"in p?E=Yt(p.from||m,p.default,!0):E=Yt(p.from||m):E=Yt(p),Le(E)?Object.defineProperty(t,m,{enumerable:!0,configurable:!0,get:()=>E.value,set:y=>E.value=y}):t[m]=E}}function yi(e,t,c){Je(ce(e)?e.map(m=>m.bind(t.proxy)):e.bind(t.proxy),t,c)}function Mr(e,t,c,m){let p=m.includes(".")?Vr(c,m):()=>c[m];if(Ce(e)){const E=t[e];he(E)&&Ms(p,E)}else if(he(e))Ms(p,e.bind(c));else if(Se(e))if(ce(e))e.forEach(E=>Mr(E,t,c,m));else{const E=he(e.handler)?e.handler.bind(c):t[e.handler];he(E)&&Ms(p,E,e)}}function Br(e){const t=e.type,{mixins:c,extends:m}=t,{mixins:p,optionsCache:E,config:{optionMergeStrategies:y}}=e.appContext,s=E.get(t);let o;return s?o=s:!p.length&&!c&&!m?o=t:(o={},p.length&&p.forEach(h=>os(o,h,y,!0)),os(o,t,y)),Se(t)&&E.set(t,o),o}function os(e,t,c,m=!1){const{mixins:p,extends:E}=t;E&&os(e,E,c,!0),p&&p.forEach(y=>os(e,y,c,!0));for(const y in t)if(!(m&&y==="expose")){const s=vo[y]||c&&c[y];e[y]=s?s(e[y],t[y]):t[y]}return e}const vo={data:Ei,props:xi,emits:xi,methods:At,computed:At,beforeCreate:ke,created:ke,beforeMount:ke,mounted:ke,beforeUpdate:ke,updated:ke,beforeDestroy:ke,beforeUnmount:ke,destroyed:ke,unmounted:ke,activated:ke,deactivated:ke,errorCaptured:ke,serverPrefetch:ke,components:At,directives:At,watch:So,provide:Ei,inject:mo};function Ei(e,t){return t?e?function(){return De(he(e)?e.call(this,this):e,he(t)?t.call(this,this):t)}:t:e}function mo(e,t){return At(Us(e),Us(t))}function Us(e){if(ce(e)){const t={};for(let c=0;c<e.length;c++)t[e[c]]=e[c];return t}return e}function ke(e,t){return e?[...new Set([].concat(e,t))]:t}function At(e,t){return e?De(Object.create(null),e,t):t}function xi(e,t){return e?ce(e)&&ce(t)?[...new Set([...e,...t])]:De(Object.create(null),wi(e),wi(t??{})):t}function So(e,t){if(!e)return t;if(!t)return e;const c=De(Object.create(null),e);for(const m in t)c[m]=ke(e[m],t[m]);return c}function Or(){return{app:null,config:{isNativeTag:Ji,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bo=0;function Co(e,t){return function(m,p=null){he(m)||(m=De({},m)),p!=null&&!Se(p)&&(p=null);const E=Or(),y=new WeakSet,s=[];let o=!1;const h=E.app={_uid:bo++,_component:m,_props:p,_container:null,_context:E,_instance:null,version:ra,get config(){return E.config},set config(u){},use(u,...l){return y.has(u)||(u&&he(u.install)?(y.add(u),u.install(h,...l)):he(u)&&(y.add(u),u(h,...l))),h},mixin(u){return E.mixins.includes(u)||E.mixins.push(u),h},component(u,l){return l?(E.components[u]=l,h):E.components[u]},directive(u,l){return l?(E.directives[u]=l,h):E.directives[u]},mount(u,l,_){if(!o){const g=h._ceVNode||Ge(m,p);return g.appContext=E,_===!0?_="svg":_===!1&&(_=void 0),e(g,u,_),o=!0,h._container=u,u.__vue_app__=h,ys(g.component)}},onUnmount(u){s.push(u)},unmount(){o&&(Je(s,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(u,l){return E.provides[u]=l,h},runWithContext(u){const l=xt;xt=h;try{return u()}finally{xt=l}}};return h}}let xt=null;function wo(e,t){if(Ae){let c=Ae.provides;const m=Ae.parent&&Ae.parent.provides;m===c&&(c=Ae.provides=Object.create(m)),c[e]=t}}function Yt(e,t,c=!1){const m=Zo();if(m||xt){let p=xt?xt._context.provides:m?m.parent==null||m.ce?m.vnode.appContext&&m.vnode.appContext.provides:m.parent.provides:void 0;if(p&&e in p)return p[e];if(arguments.length>1)return c&&he(t)?t.call(m&&m.proxy):t}}const Pr={},Ir=()=>Object.create(Pr),Hr=e=>Object.getPrototypeOf(e)===Pr;function yo(e,t,c,m=!1){const p={},E=Ir();e.propsDefaults=Object.create(null),Fr(e,t,p,E);for(const y in e.propsOptions[0])y in p||(p[y]=void 0);c?e.props=m?p:Nn(p):e.type.props?e.props=p:e.props=E,e.attrs=E}function Eo(e,t,c,m){const{props:p,attrs:E,vnode:{patchFlag:y}}=e,s=pe(p),[o]=e.propsOptions;let h=!1;if((m||y>0)&&!(y&16)){if(y&8){const u=e.vnode.dynamicProps;for(let l=0;l<u.length;l++){let _=u[l];if(Cs(e.emitsOptions,_))continue;const g=t[_];if(o)if(ge(E,_))g!==E[_]&&(E[_]=g,h=!0);else{const C=at(_);p[C]=js(o,s,C,g,e,!1)}else g!==E[_]&&(E[_]=g,h=!0)}}}else{Fr(e,t,p,E)&&(h=!0);let u;for(const l in s)(!t||!ge(t,l)&&((u=mt(l))===l||!ge(t,u)))&&(o?c&&(c[l]!==void 0||c[u]!==void 0)&&(p[l]=js(o,s,l,void 0,e,!0)):delete p[l]);if(E!==s)for(const l in E)(!t||!ge(t,l))&&(delete E[l],h=!0)}h&&Qe(e.attrs,"set","")}function Fr(e,t,c,m){const[p,E]=e.propsOptions;let y=!1,s;if(t)for(let o in t){if(Tt(o))continue;const h=t[o];let u;p&&ge(p,u=at(o))?!E||!E.includes(u)?c[u]=h:(s||(s={}))[u]=h:Cs(e.emitsOptions,o)||(!(o in m)||h!==m[o])&&(m[o]=h,y=!0)}if(E){const o=pe(c),h=s||ve;for(let u=0;u<E.length;u++){const l=E[u];c[l]=js(p,o,l,h[l],e,!ge(h,l))}}return y}function js(e,t,c,m,p,E){const y=e[c];if(y!=null){const s=ge(y,"default");if(s&&m===void 0){const o=y.default;if(y.type!==Function&&!y.skipFactory&&he(o)){const{propsDefaults:h}=p;if(c in h)m=h[c];else{const u=Vt(p);m=h[c]=o.call(null,t),u()}}else m=o;p.ce&&p.ce._setProp(c,m)}y[0]&&(E&&!s?m=!1:y[1]&&(m===""||m===mt(c))&&(m=!0))}return m}const xo=new WeakMap;function Wr(e,t,c=!1){const m=c?xo:t.propsCache,p=m.get(e);if(p)return p;const E=e.props,y={},s=[];let o=!1;if(!he(e)){const u=l=>{o=!0;const[_,g]=Wr(l,t,!0);De(y,_),g&&s.push(...g)};!c&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!E&&!o)return Se(e)&&m.set(e,Ct),Ct;if(ce(E))for(let u=0;u<E.length;u++){const l=at(E[u]);Li(l)&&(y[l]=ve)}else if(E)for(const u in E){const l=at(u);if(Li(l)){const _=E[u],g=y[l]=ce(_)||he(_)?{type:_}:De({},_),C=g.type;let d=!1,r=!0;if(ce(C))for(let a=0;a<C.length;++a){const i=C[a],n=he(i)&&i.name;if(n==="Boolean"){d=!0;break}else n==="String"&&(r=!1)}else d=he(C)&&C.name==="Boolean";g[0]=d,g[1]=r,(d||ge(g,"default"))&&s.push(l)}}const h=[y,s];return Se(e)&&m.set(e,h),h}function Li(e){return e[0]!=="$"&&!Tt(e)}const ci=e=>e==="_"||e==="_ctx"||e==="$stable",hi=e=>ce(e)?e.map(Ve):[Ve(e)],Lo=(e,t,c)=>{if(t._n)return t;const m=Zn((...p)=>hi(t(...p)),c);return m._c=!1,m},Nr=(e,t,c)=>{const m=e._ctx;for(const p in e){if(ci(p))continue;const E=e[p];if(he(E))t[p]=Lo(p,E,m);else if(E!=null){const y=hi(E);t[p]=()=>y}}},$r=(e,t)=>{const c=hi(t);e.slots.default=()=>c},Ur=(e,t,c)=>{for(const m in t)(c||!ci(m))&&(e[m]=t[m])},Do=(e,t,c)=>{const m=e.slots=Ir();if(e.vnode.shapeFlag&32){const p=t._;p?(Ur(m,t,c),c&&tr(m,"_",p,!0)):Nr(t,m)}else t&&$r(e,t)},ko=(e,t,c)=>{const{vnode:m,slots:p}=e;let E=!0,y=ve;if(m.shapeFlag&32){const s=t._;s?c&&s===1?E=!1:Ur(p,t,c):(E=!t.$stable,Nr(t,p)),y=t}else t&&($r(e,t),y={default:1});if(E)for(const s in p)!ci(s)&&y[s]==null&&delete p[s]},Oe=jo;function Ro(e){return Ao(e)}function Ao(e,t){const c=ps();c.__VUE__=!0;const{insert:m,remove:p,patchProp:E,createElement:y,createText:s,createComment:o,setText:h,setElementText:u,parentNode:l,nextSibling:_,setScopeId:g=qe,insertStaticContent:C}=e,d=(R,O,W,z=null,V=null,$=null,te=void 0,Z=null,Y=!!O.dynamicChildren)=>{if(R===O)return;R&&!Rt(R,O)&&(z=H(R),I(R,V,$,!0),R=null),O.patchFlag===-2&&(Y=!1,O.dynamicChildren=null);const{type:X,ref:ae,shapeFlag:Q}=O;switch(X){case ws:r(R,O,W,z);break;case ct:a(R,O,W,z);break;case Bs:R==null&&i(O,W,z,te);break;case ze:M(R,O,W,z,V,$,te,Z,Y);break;default:Q&1?S(R,O,W,z,V,$,te,Z,Y):Q&6?A(R,O,W,z,V,$,te,Z,Y):(Q&64||Q&128)&&X.process(R,O,W,z,V,$,te,Z,Y,U)}ae!=null&&V?Ot(ae,R&&R.ref,$,O||R,!O):ae==null&&R&&R.ref!=null&&Ot(R.ref,null,$,R,!0)},r=(R,O,W,z)=>{if(R==null)m(O.el=s(O.children),W,z);else{const V=O.el=R.el;O.children!==R.children&&h(V,O.children)}},a=(R,O,W,z)=>{R==null?m(O.el=o(O.children||""),W,z):O.el=R.el},i=(R,O,W,z)=>{[R.el,R.anchor]=C(R.children,O,W,z,R.el,R.anchor)},n=({el:R,anchor:O},W,z)=>{let V;for(;R&&R!==O;)V=_(R),m(R,W,z),R=V;m(O,W,z)},f=({el:R,anchor:O})=>{let W;for(;R&&R!==O;)W=_(R),p(R),R=W;p(O)},S=(R,O,W,z,V,$,te,Z,Y)=>{if(O.type==="svg"?te="svg":O.type==="math"&&(te="mathml"),R==null)b(O,W,z,V,$,te,Z,Y);else{const X=R.el&&R.el._isVueCE?R.el:null;try{X&&X._beginPatch(),x(R,O,V,$,te,Z,Y)}finally{X&&X._endPatch()}}},b=(R,O,W,z,V,$,te,Z)=>{let Y,X;const{props:ae,shapeFlag:Q,transition:re,dirs:ne}=R;if(Y=R.el=y(R.type,$,ae&&ae.is,ae),Q&8?u(Y,R.children):Q&16&&v(R.children,Y,null,z,V,Ts(R,$),te,Z),ne&&ut(R,null,z,"created"),w(Y,R,R.scopeId,te,z),ae){for(const _e in ae)_e!=="value"&&!Tt(_e)&&E(Y,_e,null,ae[_e],$,z);"value"in ae&&E(Y,"value",null,ae.value,$),(X=ae.onVnodeBeforeMount)&&je(X,z,R)}ne&&ut(R,null,z,"beforeMount");const ue=To(V,re);ue&&re.beforeEnter(Y),m(Y,O,W),((X=ae&&ae.onVnodeMounted)||ue||ne)&&Oe(()=>{X&&je(X,z,R),ue&&re.enter(Y),ne&&ut(R,null,z,"mounted")},V)},w=(R,O,W,z,V)=>{if(W&&g(R,W),z)for(let $=0;$<z.length;$++)g(R,z[$]);if(V){let $=V.subTree;if(O===$||Gr($.type)&&($.ssContent===O||$.ssFallback===O)){const te=V.vnode;w(R,te,te.scopeId,te.slotScopeIds,V.parent)}}},v=(R,O,W,z,V,$,te,Z,Y=0)=>{for(let X=Y;X<R.length;X++){const ae=R[X]=Z?nt(R[X]):Ve(R[X]);d(null,ae,O,W,z,V,$,te,Z)}},x=(R,O,W,z,V,$,te)=>{const Z=O.el=R.el;let{patchFlag:Y,dynamicChildren:X,dirs:ae}=O;Y|=R.patchFlag&16;const Q=R.props||ve,re=O.props||ve;let ne;if(W&&ft(W,!1),(ne=re.onVnodeBeforeUpdate)&&je(ne,W,O,R),ae&&ut(O,R,W,"beforeUpdate"),W&&ft(W,!0),(Q.innerHTML&&re.innerHTML==null||Q.textContent&&re.textContent==null)&&u(Z,""),X?B(R.dynamicChildren,X,Z,W,z,Ts(O,V),$):te||K(R,O,Z,null,W,z,Ts(O,V),$,!1),Y>0){if(Y&16)P(Z,Q,re,W,V);else if(Y&2&&Q.class!==re.class&&E(Z,"class",null,re.class,V),Y&4&&E(Z,"style",Q.style,re.style,V),Y&8){const ue=O.dynamicProps;for(let _e=0;_e<ue.length;_e++){const fe=ue[_e],we=Q[fe],be=re[fe];(be!==we||fe==="value")&&E(Z,fe,we,be,V,W)}}Y&1&&R.children!==O.children&&u(Z,O.children)}else!te&&X==null&&P(Z,Q,re,W,V);((ne=re.onVnodeUpdated)||ae)&&Oe(()=>{ne&&je(ne,W,O,R),ae&&ut(O,R,W,"updated")},z)},B=(R,O,W,z,V,$,te)=>{for(let Z=0;Z<O.length;Z++){const Y=R[Z],X=O[Z],ae=Y.el&&(Y.type===ze||!Rt(Y,X)||Y.shapeFlag&198)?l(Y.el):W;d(Y,X,ae,null,z,V,$,te,!0)}},P=(R,O,W,z,V)=>{if(O!==W){if(O!==ve)for(const $ in O)!Tt($)&&!($ in W)&&E(R,$,O[$],null,V,z);for(const $ in W){if(Tt($))continue;const te=W[$],Z=O[$];te!==Z&&$!=="value"&&E(R,$,Z,te,V,z)}"value"in W&&E(R,"value",O.value,W.value,V)}},M=(R,O,W,z,V,$,te,Z,Y)=>{const X=O.el=R?R.el:s(""),ae=O.anchor=R?R.anchor:s("");let{patchFlag:Q,dynamicChildren:re,slotScopeIds:ne}=O;ne&&(Z=Z?Z.concat(ne):ne),R==null?(m(X,W,z),m(ae,W,z),v(O.children||[],W,ae,V,$,te,Z,Y)):Q>0&&Q&64&&re&&R.dynamicChildren?(B(R.dynamicChildren,re,W,V,$,te,Z),(O.key!=null||V&&O===V.subTree)&&jr(R,O,!0)):K(R,O,W,ae,V,$,te,Z,Y)},A=(R,O,W,z,V,$,te,Z,Y)=>{O.slotScopeIds=Z,R==null?O.shapeFlag&512?V.ctx.activate(O,W,z,te,Y):F(O,W,z,V,$,te,Y):N(R,O,Y)},F=(R,O,W,z,V,$,te)=>{const Z=R.component=Yo(R,z,V);if(kr(R)&&(Z.ctx.renderer=U),Qo(Z,!1,te),Z.asyncDep){if(V&&V.registerDep(Z,j,te),!R.el){const Y=Z.subTree=Ge(ct);a(null,Y,O,W),R.placeholder=Y.el}}else j(Z,R,O,W,V,$,te)},N=(R,O,W)=>{const z=O.component=R.component;if($o(R,O,W))if(z.asyncDep&&!z.asyncResolved){q(z,O,W);return}else z.next=O,z.update();else O.el=R.el,z.vnode=O},j=(R,O,W,z,V,$,te)=>{const Z=()=>{if(R.isMounted){let{next:Q,bu:re,u:ne,parent:ue,vnode:_e}=R;{const de=Kr(R);if(de){Q&&(Q.el=_e.el,q(R,Q,te)),de.asyncDep.then(()=>{R.isUnmounted||Z()});return}}let fe=Q,we;ft(R,!1),Q?(Q.el=_e.el,q(R,Q,te)):Q=_e,re&&Jt(re),(we=Q.props&&Q.props.onVnodeBeforeUpdate)&&je(we,ue,Q,_e),ft(R,!0);const be=ki(R),Ee=R.subTree;R.subTree=be,d(Ee,be,l(Ee.el),H(Ee),R,V,$),Q.el=be.el,fe===null&&Uo(R,be.el),ne&&Oe(ne,V),(we=Q.props&&Q.props.onVnodeUpdated)&&Oe(()=>je(we,ue,Q,_e),V)}else{let Q;const{el:re,props:ne}=O,{bm:ue,m:_e,parent:fe,root:we,type:be}=R,Ee=Pt(O);ft(R,!1),ue&&Jt(ue),!Ee&&(Q=ne&&ne.onVnodeBeforeMount)&&je(Q,fe,O),ft(R,!0);{we.ce&&we.ce._def.shadowRoot!==!1&&we.ce._injectChildStyle(be);const de=R.subTree=ki(R);d(null,de,W,z,R,V,$),O.el=de.el}if(_e&&Oe(_e,V),!Ee&&(Q=ne&&ne.onVnodeMounted)){const de=O;Oe(()=>je(Q,fe,de),V)}(O.shapeFlag&256||fe&&Pt(fe.vnode)&&fe.vnode.shapeFlag&256)&&R.a&&Oe(R.a,V),R.isMounted=!0,O=W=z=null}};R.scope.on();const Y=R.effect=new nr(Z);R.scope.off();const X=R.update=Y.run.bind(Y),ae=R.job=Y.runIfDirty.bind(Y);ae.i=R,ae.id=R.uid,Y.scheduler=()=>oi(ae),ft(R,!0),X()},q=(R,O,W)=>{O.component=R;const z=R.vnode.props;R.vnode=O,R.next=null,Eo(R,O.props,z,W),ko(R,O.children,W),tt(),bi(R),st()},K=(R,O,W,z,V,$,te,Z,Y=!1)=>{const X=R&&R.children,ae=R?R.shapeFlag:0,Q=O.children,{patchFlag:re,shapeFlag:ne}=O;if(re>0){if(re&128){k(X,Q,W,z,V,$,te,Z,Y);return}else if(re&256){L(X,Q,W,z,V,$,te,Z,Y);return}}ne&8?(ae&16&&le(X,V,$),Q!==X&&u(W,Q)):ae&16?ne&16?k(X,Q,W,z,V,$,te,Z,Y):le(X,V,$,!0):(ae&8&&u(W,""),ne&16&&v(Q,W,z,V,$,te,Z,Y))},L=(R,O,W,z,V,$,te,Z,Y)=>{R=R||Ct,O=O||Ct;const X=R.length,ae=O.length,Q=Math.min(X,ae);let re;for(re=0;re<Q;re++){const ne=O[re]=Y?nt(O[re]):Ve(O[re]);d(R[re],ne,W,null,V,$,te,Z,Y)}X>ae?le(R,V,$,!0,!1,Q):v(O,W,z,V,$,te,Z,Y,Q)},k=(R,O,W,z,V,$,te,Z,Y)=>{let X=0;const ae=O.length;let Q=R.length-1,re=ae-1;for(;X<=Q&&X<=re;){const ne=R[X],ue=O[X]=Y?nt(O[X]):Ve(O[X]);if(Rt(ne,ue))d(ne,ue,W,null,V,$,te,Z,Y);else break;X++}for(;X<=Q&&X<=re;){const ne=R[Q],ue=O[re]=Y?nt(O[re]):Ve(O[re]);if(Rt(ne,ue))d(ne,ue,W,null,V,$,te,Z,Y);else break;Q--,re--}if(X>Q){if(X<=re){const ne=re+1,ue=ne<ae?O[ne].el:z;for(;X<=re;)d(null,O[X]=Y?nt(O[X]):Ve(O[X]),W,ue,V,$,te,Z,Y),X++}}else if(X>re)for(;X<=Q;)I(R[X],V,$,!0),X++;else{const ne=X,ue=X,_e=new Map;for(X=ue;X<=re;X++){const Be=O[X]=Y?nt(O[X]):Ve(O[X]);Be.key!=null&&_e.set(Be.key,X)}let fe,we=0;const be=re-ue+1;let Ee=!1,de=0;const ht=new Array(be);for(X=0;X<be;X++)ht[X]=0;for(X=ne;X<=Q;X++){const Be=R[X];if(we>=be){I(Be,V,$,!0);continue}let Ue;if(Be.key!=null)Ue=_e.get(Be.key);else for(fe=ue;fe<=re;fe++)if(ht[fe-ue]===0&&Rt(Be,O[fe])){Ue=fe;break}Ue===void 0?I(Be,V,$,!0):(ht[Ue-ue]=X+1,Ue>=de?de=Ue:Ee=!0,d(Be,O[Ue],W,null,V,$,te,Z,Y),we++)}const fi=Ee?Mo(ht):Ct;for(fe=fi.length-1,X=be-1;X>=0;X--){const Be=ue+X,Ue=O[Be],di=O[Be+1],_i=Be+1<ae?di.el||di.placeholder:z;ht[X]===0?d(null,Ue,W,_i,V,$,te,Z,Y):Ee&&(fe<0||X!==fi[fe]?T(Ue,W,_i,2):fe--)}}},T=(R,O,W,z,V=null)=>{const{el:$,type:te,transition:Z,children:Y,shapeFlag:X}=R;if(X&6){T(R.component.subTree,O,W,z);return}if(X&128){R.suspense.move(O,W,z);return}if(X&64){te.move(R,O,W,U);return}if(te===ze){m($,O,W);for(let Q=0;Q<Y.length;Q++)T(Y[Q],O,W,z);m(R.anchor,O,W);return}if(te===Bs){n(R,O,W);return}if(z!==2&&X&1&&Z)if(z===0)Z.beforeEnter($),m($,O,W),Oe(()=>Z.enter($),V);else{const{leave:Q,delayLeave:re,afterLeave:ne}=Z,ue=()=>{R.ctx.isUnmounted?p($):m($,O,W)},_e=()=>{$._isLeaving&&$[to](!0),Q($,()=>{ue(),ne&&ne()})};re?re($,ue,_e):_e()}else m($,O,W)},I=(R,O,W,z=!1,V=!1)=>{const{type:$,props:te,ref:Z,children:Y,dynamicChildren:X,shapeFlag:ae,patchFlag:Q,dirs:re,cacheIndex:ne}=R;if(Q===-2&&(V=!1),Z!=null&&(tt(),Ot(Z,null,W,R,!0),st()),ne!=null&&(O.renderCache[ne]=void 0),ae&256){O.ctx.deactivate(R);return}const ue=ae&1&&re,_e=!Pt(R);let fe;if(_e&&(fe=te&&te.onVnodeBeforeUnmount)&&je(fe,O,R),ae&6)ie(R.component,W,z);else{if(ae&128){R.suspense.unmount(W,z);return}ue&&ut(R,null,O,"beforeUnmount"),ae&64?R.type.remove(R,O,W,U,z):X&&!X.hasOnce&&($!==ze||Q>0&&Q&64)?le(X,O,W,!1,!0):($===ze&&Q&384||!V&&ae&16)&&le(Y,O,W),z&&G(R)}(_e&&(fe=te&&te.onVnodeUnmounted)||ue)&&Oe(()=>{fe&&je(fe,O,R),ue&&ut(R,null,O,"unmounted")},W)},G=R=>{const{type:O,el:W,anchor:z,transition:V}=R;if(O===ze){ee(W,z);return}if(O===Bs){f(R);return}const $=()=>{p(W),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(R.shapeFlag&1&&V&&!V.persisted){const{leave:te,delayLeave:Z}=V,Y=()=>te(W,$);Z?Z(R.el,$,Y):Y()}else $()},ee=(R,O)=>{let W;for(;R!==O;)W=_(R),p(R),R=W;p(O)},ie=(R,O,W)=>{const{bum:z,scope:V,job:$,subTree:te,um:Z,m:Y,a:X}=R;Di(Y),Di(X),z&&Jt(z),V.stop(),$&&($.flags|=8,I(te,R,O,W)),Z&&Oe(Z,O),Oe(()=>{R.isUnmounted=!0},O)},le=(R,O,W,z=!1,V=!1,$=0)=>{for(let te=$;te<R.length;te++)I(R[te],O,W,z,V)},H=R=>{if(R.shapeFlag&6)return H(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const O=_(R.anchor||R.el),W=O&&O[Qn];return W?_(W):O};let D=!1;const J=(R,O,W)=>{R==null?O._vnode&&I(O._vnode,null,null,!0):d(O._vnode||null,R,O,null,null,null,W),O._vnode=R,D||(D=!0,bi(),yr(),D=!1)},U={p:d,um:I,m:T,r:G,mt:F,mc:v,pc:K,pbc:B,n:H,o:e};return{render:J,hydrate:void 0,createApp:Co(J)}}function Ts({type:e,props:t},c){return c==="svg"&&e==="foreignObject"||c==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:c}function ft({effect:e,job:t},c){c?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function To(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function jr(e,t,c=!1){const m=e.children,p=t.children;if(ce(m)&&ce(p))for(let E=0;E<m.length;E++){const y=m[E];let s=p[E];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=p[E]=nt(p[E]),s.el=y.el),!c&&s.patchFlag!==-2&&jr(y,s)),s.type===ws&&s.patchFlag!==-1&&(s.el=y.el),s.type===ct&&!s.el&&(s.el=y.el)}}function Mo(e){const t=e.slice(),c=[0];let m,p,E,y,s;const o=e.length;for(m=0;m<o;m++){const h=e[m];if(h!==0){if(p=c[c.length-1],e[p]<h){t[m]=p,c.push(m);continue}for(E=0,y=c.length-1;E<y;)s=E+y>>1,e[c[s]]<h?E=s+1:y=s;h<e[c[E]]&&(E>0&&(t[m]=c[E-1]),c[E]=m)}}for(E=c.length,y=c[E-1];E-- >0;)c[E]=y,y=t[y];return c}function Kr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Kr(t)}function Di(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Bo=Symbol.for("v-scx"),Oo=()=>Yt(Bo);function Ms(e,t,c){return zr(e,t,c)}function zr(e,t,c=ve){const{immediate:m,deep:p,flush:E,once:y}=c,s=De({},c),o=t&&m||!t&&E!=="post";let h;if(jt){if(E==="sync"){const g=Oo();h=g.__watcherHandles||(g.__watcherHandles=[])}else if(!o){const g=()=>{};return g.stop=qe,g.resume=qe,g.pause=qe,g}}const u=Ae;s.call=(g,C,d)=>Je(g,u,C,d);let l=!1;E==="post"?s.scheduler=g=>{Oe(g,u&&u.suspense)}:E!=="sync"&&(l=!0,s.scheduler=(g,C)=>{C?g():oi(g)}),s.augmentJob=g=>{t&&(g.flags|=4),l&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const _=Gn(e,t,s);return jt&&(h?h.push(_):o&&_()),_}function Po(e,t,c){const m=this.proxy,p=Ce(e)?e.includes(".")?Vr(m,e):()=>m[e]:e.bind(m,m);let E;he(t)?E=t:(E=t.handler,c=t);const y=Vt(this),s=zr(p,E.bind(m),c);return y(),s}function Vr(e,t){const c=t.split(".");return()=>{let m=e;for(let p=0;p<c.length&&m;p++)m=m[c[p]];return m}}const Io=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${at(t)}Modifiers`]||e[`${mt(t)}Modifiers`];function Ho(e,t,...c){if(e.isUnmounted)return;const m=e.vnode.props||ve;let p=c;const E=t.startsWith("update:"),y=E&&Io(m,t.slice(7));y&&(y.trim&&(p=c.map(u=>Ce(u)?u.trim():u)),y.number&&(p=c.map(_s)));let s,o=m[s=Es(t)]||m[s=Es(at(t))];!o&&E&&(o=m[s=Es(mt(t))]),o&&Je(o,e,6,p);const h=m[s+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Je(h,e,6,p)}}const Fo=new WeakMap;function qr(e,t,c=!1){const m=c?Fo:t.emitsCache,p=m.get(e);if(p!==void 0)return p;const E=e.emits;let y={},s=!1;if(!he(e)){const o=h=>{const u=qr(h,t,!0);u&&(s=!0,De(y,u))};!c&&t.mixins.length&&t.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)}return!E&&!s?(Se(e)&&m.set(e,null),null):(ce(E)?E.forEach(o=>y[o]=null):De(y,E),Se(e)&&m.set(e,y),y)}function Cs(e,t){return!e||!us(t)?!1:(t=t.slice(2).replace(/Once$/,""),ge(e,t[0].toLowerCase()+t.slice(1))||ge(e,mt(t))||ge(e,t))}function ki(e){const{type:t,vnode:c,proxy:m,withProxy:p,propsOptions:[E],slots:y,attrs:s,emit:o,render:h,renderCache:u,props:l,data:_,setupState:g,ctx:C,inheritAttrs:d}=e,r=rs(e);let a,i;try{if(c.shapeFlag&4){const f=p||m,S=f;a=Ve(h.call(S,f,u,l,g,_,C)),i=s}else{const f=t;a=Ve(f.length>1?f(l,{attrs:s,slots:y,emit:o}):f(l,null)),i=t.props?s:Wo(s)}}catch(f){Ht.length=0,ms(f,e,1),a=Ge(ct)}let n=a;if(i&&d!==!1){const f=Object.keys(i),{shapeFlag:S}=n;f.length&&S&7&&(E&&f.some(Gs)&&(i=No(i,E)),n=Dt(n,i,!1,!0))}return c.dirs&&(n=Dt(n,null,!1,!0),n.dirs=n.dirs?n.dirs.concat(c.dirs):c.dirs),c.transition&&ai(n,c.transition),a=n,rs(r),a}const Wo=e=>{let t;for(const c in e)(c==="class"||c==="style"||us(c))&&((t||(t={}))[c]=e[c]);return t},No=(e,t)=>{const c={};for(const m in e)(!Gs(m)||!(m.slice(9)in t))&&(c[m]=e[m]);return c};function $o(e,t,c){const{props:m,children:p,component:E}=e,{props:y,children:s,patchFlag:o}=t,h=E.emitsOptions;if(t.dirs||t.transition)return!0;if(c&&o>=0){if(o&1024)return!0;if(o&16)return m?Ri(m,y,h):!!y;if(o&8){const u=t.dynamicProps;for(let l=0;l<u.length;l++){const _=u[l];if(y[_]!==m[_]&&!Cs(h,_))return!0}}}else return(p||s)&&(!s||!s.$stable)?!0:m===y?!1:m?y?Ri(m,y,h):!0:!!y;return!1}function Ri(e,t,c){const m=Object.keys(t);if(m.length!==Object.keys(e).length)return!0;for(let p=0;p<m.length;p++){const E=m[p];if(t[E]!==e[E]&&!Cs(c,E))return!0}return!1}function Uo({vnode:e,parent:t},c){for(;t;){const m=t.subTree;if(m.suspense&&m.suspense.activeBranch===e&&(m.el=e.el),m===e)(e=t.vnode).el=c,t=t.parent;else break}}const Gr=e=>e.__isSuspense;function jo(e,t){t&&t.pendingBranch?ce(e)?t.effects.push(...e):t.effects.push(e):Yn(e)}const ze=Symbol.for("v-fgt"),ws=Symbol.for("v-txt"),ct=Symbol.for("v-cmt"),Bs=Symbol.for("v-stc"),Ht=[];let Ie=null;function Me(e=!1){Ht.push(Ie=e?null:[])}function Ko(){Ht.pop(),Ie=Ht[Ht.length-1]||null}let Ut=1;function Ai(e,t=!1){Ut+=e,e<0&&Ie&&t&&(Ie.hasOnce=!0)}function Xr(e){return e.dynamicChildren=Ut>0?Ie||Ct:null,Ko(),Ut>0&&Ie&&Ie.push(e),e}function Pe(e,t,c,m,p,E){return Xr(oe(e,t,c,m,p,E,!0))}function zo(e,t,c,m,p){return Xr(Ge(e,t,c,m,p,!0))}function Jr(e){return e?e.__v_isVNode===!0:!1}function Rt(e,t){return e.type===t.type&&e.key===t.key}const Yr=({key:e})=>e??null,Zt=({ref:e,ref_key:t,ref_for:c})=>(typeof e=="number"&&(e=""+e),e!=null?Ce(e)||Le(e)||he(e)?{i:He,r:e,k:t,f:!!c}:e:null);function oe(e,t=null,c=null,m=0,p=null,E=e===ze?0:1,y=!1,s=!1){const o={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Yr(t),ref:t&&Zt(t),scopeId:xr,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:E,patchFlag:m,dynamicProps:p,dynamicChildren:null,appContext:null,ctx:He};return s?(ui(o,c),E&128&&e.normalize(o)):c&&(o.shapeFlag|=Ce(c)?8:16),Ut>0&&!y&&Ie&&(o.patchFlag>0||E&6)&&o.patchFlag!==32&&Ie.push(o),o}const Ge=Vo;function Vo(e,t=null,c=null,m=0,p=null,E=!1){if((!e||e===uo)&&(e=ct),Jr(e)){const s=Dt(e,t,!0);return c&&ui(s,c),Ut>0&&!E&&Ie&&(s.shapeFlag&6?Ie[Ie.indexOf(e)]=s:Ie.push(s)),s.patchFlag=-2,s}if(ia(e)&&(e=e.__vccOpts),t){t=qo(t);let{class:s,style:o}=t;s&&!Ce(s)&&(t.class=Ft(s)),Se(o)&&(ni(o)&&!ce(o)&&(o=De({},o)),t.style=Ys(o))}const y=Ce(e)?1:Gr(e)?128:eo(e)?64:Se(e)?4:he(e)?2:0;return oe(e,t,c,m,p,y,E,!0)}function qo(e){return e?ni(e)||Hr(e)?De({},e):e:null}function Dt(e,t,c=!1,m=!1){const{props:p,ref:E,patchFlag:y,children:s,transition:o}=e,h=t?Go(p||{},t):p,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&Yr(h),ref:t&&t.ref?c&&E?ce(E)?E.concat(Zt(t)):[E,Zt(t)]:Zt(t):E,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ze?y===-1?16:y|16:y,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:o,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dt(e.ssContent),ssFallback:e.ssFallback&&Dt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return o&&m&&ai(u,o.clone(u)),u}function Ks(e=" ",t=0){return Ge(ws,null,e,t)}function Qt(e="",t=!1){return t?(Me(),zo(ct,null,e)):Ge(ct,null,e)}function Ve(e){return e==null||typeof e=="boolean"?Ge(ct):ce(e)?Ge(ze,null,e.slice()):Jr(e)?nt(e):Ge(ws,null,String(e))}function nt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Dt(e)}function ui(e,t){let c=0;const{shapeFlag:m}=e;if(t==null)t=null;else if(ce(t))c=16;else if(typeof t=="object")if(m&65){const p=t.default;p&&(p._c&&(p._d=!1),ui(e,p()),p._c&&(p._d=!0));return}else{c=32;const p=t._;!p&&!Hr(t)?t._ctx=He:p===3&&He&&(He.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else he(t)?(t={default:t,_ctx:He},c=32):(t=String(t),m&64?(c=16,t=[Ks(t)]):c=8);e.children=t,e.shapeFlag|=c}function Go(...e){const t={};for(let c=0;c<e.length;c++){const m=e[c];for(const p in m)if(p==="class")t.class!==m.class&&(t.class=Ft([t.class,m.class]));else if(p==="style")t.style=Ys([t.style,m.style]);else if(us(p)){const E=t[p],y=m[p];y&&E!==y&&!(ce(E)&&E.includes(y))&&(t[p]=E?[].concat(E,y):y)}else p!==""&&(t[p]=m[p])}return t}function je(e,t,c,m=null){Je(e,t,7,[c,m])}const Xo=Or();let Jo=0;function Yo(e,t,c){const m=e.type,p=(t?t.appContext:e.appContext)||Xo,E={uid:Jo++,vnode:e,type:m,parent:t,appContext:p,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new bn(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(p.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wr(m,p),emitsOptions:qr(m,p),emit:null,emitted:null,propsDefaults:ve,inheritAttrs:m.inheritAttrs,ctx:ve,data:ve,props:ve,attrs:ve,slots:ve,refs:ve,setupState:ve,setupContext:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return E.ctx={_:E},E.root=t?t.root:E,E.emit=Ho.bind(null,E),e.ce&&e.ce(E),E}let Ae=null;const Zo=()=>Ae||He;let as,zs;{const e=ps(),t=(c,m)=>{let p;return(p=e[c])||(p=e[c]=[]),p.push(m),E=>{p.length>1?p.forEach(y=>y(E)):p[0](E)}};as=t("__VUE_INSTANCE_SETTERS__",c=>Ae=c),zs=t("__VUE_SSR_SETTERS__",c=>jt=c)}const Vt=e=>{const t=Ae;return as(e),e.scope.on(),()=>{e.scope.off(),as(t)}},Ti=()=>{Ae&&Ae.scope.off(),as(null)};function Zr(e){return e.vnode.shapeFlag&4}let jt=!1;function Qo(e,t=!1,c=!1){t&&zs(t);const{props:m,children:p}=e.vnode,E=Zr(e);yo(e,m,E,t),Do(e,p,c||t);const y=E?ea(e,t):void 0;return t&&zs(!1),y}function ea(e,t){const c=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,_o);const{setup:m}=c;if(m){tt();const p=e.setupContext=m.length>1?sa(e):null,E=Vt(e),y=zt(m,e,0,[e.props,p]),s=Yi(y);if(st(),E(),(s||e.sp)&&!Pt(e)&&Dr(e),s){if(y.then(Ti,Ti),t)return y.then(o=>{Mi(e,o)}).catch(o=>{ms(o,e,0)});e.asyncDep=y}else Mi(e,y)}else Qr(e)}function Mi(e,t,c){he(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Se(t)&&(e.setupState=Sr(t)),Qr(e)}function Qr(e,t,c){const m=e.type;e.render||(e.render=m.render||qe);{const p=Vt(e);tt();try{po(e)}finally{st(),p()}}}const ta={get(e,t){return xe(e,"get",""),e[t]}};function sa(e){const t=c=>{e.exposed=c||{}};return{attrs:new Proxy(e.attrs,ta),slots:e.slots,emit:e.emit,expose:t}}function ys(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Sr($n(e.exposed)),{get(t,c){if(c in t)return t[c];if(c in It)return It[c](e)},has(t,c){return c in t||c in It}})):e.proxy}function ia(e){return he(e)&&"__vccOpts"in e}const ls=(e,t)=>Vn(e,t,jt),ra="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vs;const Bi=typeof window<"u"&&window.trustedTypes;if(Bi)try{Vs=Bi.createPolicy("vue",{createHTML:e=>e})}catch{}const en=Vs?e=>Vs.createHTML(e):e=>e,na="http://www.w3.org/2000/svg",oa="http://www.w3.org/1998/Math/MathML",Ze=typeof document<"u"?document:null,Oi=Ze&&Ze.createElement("template"),aa={insert:(e,t,c)=>{t.insertBefore(e,c||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,c,m)=>{const p=t==="svg"?Ze.createElementNS(na,e):t==="mathml"?Ze.createElementNS(oa,e):c?Ze.createElement(e,{is:c}):Ze.createElement(e);return e==="select"&&m&&m.multiple!=null&&p.setAttribute("multiple",m.multiple),p},createText:e=>Ze.createTextNode(e),createComment:e=>Ze.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ze.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,c,m,p,E){const y=c?c.previousSibling:t.lastChild;if(p&&(p===E||p.nextSibling))for(;t.insertBefore(p.cloneNode(!0),c),!(p===E||!(p=p.nextSibling)););else{Oi.innerHTML=en(m==="svg"?`<svg>${e}</svg>`:m==="mathml"?`<math>${e}</math>`:e);const s=Oi.content;if(m==="svg"||m==="mathml"){const o=s.firstChild;for(;o.firstChild;)s.appendChild(o.firstChild);s.removeChild(o)}t.insertBefore(s,c)}return[y?y.nextSibling:t.firstChild,c?c.previousSibling:t.lastChild]}},la=Symbol("_vtc");function ca(e,t,c){const m=e[la];m&&(t=(t?[t,...m]:[...m]).join(" ")),t==null?e.removeAttribute("class"):c?e.setAttribute("class",t):e.className=t}const Pi=Symbol("_vod"),ha=Symbol("_vsh"),ua=Symbol(""),fa=/(?:^|;)\s*display\s*:/;function da(e,t,c){const m=e.style,p=Ce(c);let E=!1;if(c&&!p){if(t)if(Ce(t))for(const y of t.split(";")){const s=y.slice(0,y.indexOf(":")).trim();c[s]==null&&es(m,s,"")}else for(const y in t)c[y]==null&&es(m,y,"");for(const y in c)y==="display"&&(E=!0),es(m,y,c[y])}else if(p){if(t!==c){const y=m[ua];y&&(c+=";"+y),m.cssText=c,E=fa.test(c)}}else t&&e.removeAttribute("style");Pi in e&&(e[Pi]=E?m.display:"",e[ha]&&(m.display="none"))}const Ii=/\s*!important$/;function es(e,t,c){if(ce(c))c.forEach(m=>es(e,t,m));else if(c==null&&(c=""),t.startsWith("--"))e.setProperty(t,c);else{const m=_a(e,t);Ii.test(c)?e.setProperty(mt(m),c.replace(Ii,""),"important"):e[m]=c}}const Hi=["Webkit","Moz","ms"],Os={};function _a(e,t){const c=Os[t];if(c)return c;let m=at(t);if(m!=="filter"&&m in e)return Os[t]=m;m=er(m);for(let p=0;p<Hi.length;p++){const E=Hi[p]+m;if(E in e)return Os[t]=E}return t}const Fi="http://www.w3.org/1999/xlink";function Wi(e,t,c,m,p,E=vn(t)){m&&t.startsWith("xlink:")?c==null?e.removeAttributeNS(Fi,t.slice(6,t.length)):e.setAttributeNS(Fi,t,c):c==null||E&&!sr(c)?e.removeAttribute(t):e.setAttribute(t,E?"":Xe(c)?String(c):c)}function Ni(e,t,c,m,p){if(t==="innerHTML"||t==="textContent"){c!=null&&(e[t]=t==="innerHTML"?en(c):c);return}const E=e.tagName;if(t==="value"&&E!=="PROGRESS"&&!E.includes("-")){const s=E==="OPTION"?e.getAttribute("value")||"":e.value,o=c==null?e.type==="checkbox"?"on":"":String(c);(s!==o||!("_value"in e))&&(e.value=o),c==null&&e.removeAttribute(t),e._value=c;return}let y=!1;if(c===""||c==null){const s=typeof e[t];s==="boolean"?c=sr(c):c==null&&s==="string"?(c="",y=!0):s==="number"&&(c=0,y=!0)}try{e[t]=c}catch{}y&&e.removeAttribute(p||t)}function _t(e,t,c,m){e.addEventListener(t,c,m)}function pa(e,t,c,m){e.removeEventListener(t,c,m)}const $i=Symbol("_vei");function ga(e,t,c,m,p=null){const E=e[$i]||(e[$i]={}),y=E[t];if(m&&y)y.value=m;else{const[s,o]=va(t);if(m){const h=E[t]=ba(m,p);_t(e,s,h,o)}else y&&(pa(e,s,y,o),E[t]=void 0)}}const Ui=/(?:Once|Passive|Capture)$/;function va(e){let t;if(Ui.test(e)){t={};let m;for(;m=e.match(Ui);)e=e.slice(0,e.length-m[0].length),t[m[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):mt(e.slice(2)),t]}let Ps=0;const ma=Promise.resolve(),Sa=()=>Ps||(ma.then(()=>Ps=0),Ps=Date.now());function ba(e,t){const c=m=>{if(!m._vts)m._vts=Date.now();else if(m._vts<=c.attached)return;Je(Ca(m,c.value),t,5,[m])};return c.value=e,c.attached=Sa(),c}function Ca(e,t){if(ce(t)){const c=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{c.call(e),e._stopped=!0},t.map(m=>p=>!p._stopped&&m&&m(p))}else return t}const ji=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,wa=(e,t,c,m,p,E)=>{const y=p==="svg";t==="class"?ca(e,m,y):t==="style"?da(e,c,m):us(t)?Gs(t)||ga(e,t,c,m,E):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ya(e,t,m,y))?(Ni(e,t,m),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Wi(e,t,m,y,E,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ce(m))?Ni(e,at(t),m,E,t):(t==="true-value"?e._trueValue=m:t==="false-value"&&(e._falseValue=m),Wi(e,t,m,y))};function ya(e,t,c,m){if(m)return!!(t==="innerHTML"||t==="textContent"||t in e&&ji(t)&&he(c));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const p=e.tagName;if(p==="IMG"||p==="VIDEO"||p==="CANVAS"||p==="SOURCE")return!1}return ji(t)&&Ce(c)?!1:t in e}const cs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ce(t)?c=>Jt(t,c):t};function Ea(e){e.target.composing=!0}function Ki(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Lt=Symbol("_assign");function zi(e,t,c){return t&&(e=e.trim()),c&&(e=_s(e)),e}const Vi={created(e,{modifiers:{lazy:t,trim:c,number:m}},p){e[Lt]=cs(p);const E=m||p.props&&p.props.type==="number";_t(e,t?"change":"input",y=>{y.target.composing||e[Lt](zi(e.value,c,E))}),(c||E)&&_t(e,"change",()=>{e.value=zi(e.value,c,E)}),t||(_t(e,"compositionstart",Ea),_t(e,"compositionend",Ki),_t(e,"change",Ki))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:c,modifiers:{lazy:m,trim:p,number:E}},y){if(e[Lt]=cs(y),e.composing)return;const s=(E||e.type==="number")&&!/^0\d/.test(e.value)?_s(e.value):e.value,o=t??"";s!==o&&(document.activeElement===e&&e.type!=="range"&&(m&&t===c||p&&e.value.trim()===o)||(e.value=o))}},xa={deep:!0,created(e,{value:t,modifiers:{number:c}},m){const p=fs(t);_t(e,"change",()=>{const E=Array.prototype.filter.call(e.options,y=>y.selected).map(y=>c?_s(hs(y)):hs(y));e[Lt](e.multiple?p?new Set(E):E:E[0]),e._assigning=!0,Cr(()=>{e._assigning=!1})}),e[Lt]=cs(m)},mounted(e,{value:t}){qi(e,t)},beforeUpdate(e,t,c){e[Lt]=cs(c)},updated(e,{value:t}){e._assigning||qi(e,t)}};function qi(e,t){const c=e.multiple,m=ce(t);if(!(c&&!m&&!fs(t))){for(let p=0,E=e.options.length;p<E;p++){const y=e.options[p],s=hs(y);if(c)if(m){const o=typeof s;o==="string"||o==="number"?y.selected=t.some(h=>String(h)===String(s)):y.selected=Sn(t,s)>-1}else y.selected=t.has(s);else if(gs(hs(y),t)){e.selectedIndex!==p&&(e.selectedIndex=p);return}}!c&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function hs(e){return"_value"in e?e._value:e.value}const La=["ctrl","shift","alt","meta"],Da={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>La.some(c=>e[`${c}Key`]&&!t.includes(c))},ka=(e,t)=>{const c=e._withMods||(e._withMods={}),m=t.join(".");return c[m]||(c[m]=(p,...E)=>{for(let y=0;y<t.length;y++){const s=Da[t[y]];if(s&&s(p,t))return}return e(p,...E)})},Ra=De({patchProp:wa},aa);let Gi;function Aa(){return Gi||(Gi=Ro(Ra))}const Ta=(...e)=>{const t=Aa().createApp(...e),{mount:c}=t;return t.mount=m=>{const p=Ba(m);if(!p)return;const E=t._component;!he(E)&&!E.render&&!E.template&&(E.template=p.innerHTML),p.nodeType===1&&(p.textContent="");const y=c(p,!1,Ma(p));return p instanceof Element&&(p.removeAttribute("v-cloak"),p.setAttribute("data-v-app","")),y},t};function Ma(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ba(e){return Ce(e)?document.querySelector(e):e}var tn={exports:{}};(function(e,t){(function(c,m){e.exports=m()})(globalThis,()=>(()=>{var c={4567:function(y,s,o){var h=this&&this.__decorate||function(i,n,f,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,f,S);else for(var x=i.length-1;x>=0;x--)(b=i[x])&&(v=(w<3?b(v):w>3?b(n,f,v):b(n,f))||v);return w>3&&v&&Object.defineProperty(n,f,v),v},u=this&&this.__param||function(i,n){return function(f,S){n(f,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const l=o(9042),_=o(9924),g=o(844),C=o(4725),d=o(2585),r=o(3656);let a=s.AccessibilityManager=class extends g.Disposable{constructor(i,n,f,S){super(),this._terminal=i,this._coreBrowserService=f,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new _.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(b=>this._handleResize(b.rows))),this.register(this._terminal.onRender(b=>this._refreshRows(b.start,b.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(b=>this._handleChar(b))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(b=>this._handleTab(b))),this.register(this._terminal.onKey(b=>this._handleKey(b.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,r.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,g.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(i){for(let n=0;n<i;n++)this._handleChar(" ")}_handleChar(i){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(i){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(i)||this._charsToConsume.push(i)}_refreshRows(i,n){this._liveRegionDebouncer.refresh(i,n,this._terminal.rows)}_renderRows(i,n){const f=this._terminal.buffer,S=f.lines.length.toString();for(let b=i;b<=n;b++){const w=f.lines.get(f.ydisp+b),v=[],x=(w==null?void 0:w.translateToString(!0,void 0,void 0,v))||"",B=(f.ydisp+b+1).toString(),P=this._rowElements[b];P&&(x.length===0?(P.innerText="",this._rowColumns.set(P,[0,1])):(P.textContent=x,this._rowColumns.set(P,v)),P.setAttribute("aria-posinset",B),P.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(i,n){const f=i.target,S=this._rowElements[n===0?1:this._rowElements.length-2];if(f.getAttribute("aria-posinset")===(n===0?"1":`${this._terminal.buffer.lines.length}`)||i.relatedTarget!==S)return;let b,w;if(n===0?(b=f,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(b=this._rowElements.shift(),w=f,this._rowContainer.removeChild(b)),b.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),n===0){const v=this._createAccessibilityTreeNode();this._rowElements.unshift(v),this._rowContainer.insertAdjacentElement("afterbegin",v)}else{const v=this._createAccessibilityTreeNode();this._rowElements.push(v),this._rowContainer.appendChild(v)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(n===0?-1:1),this._rowElements[n===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}_handleSelectionChange(){var x;if(this._rowElements.length===0)return;const i=document.getSelection();if(!i)return;if(i.isCollapsed)return void(this._rowContainer.contains(i.anchorNode)&&this._terminal.clearSelection());if(!i.anchorNode||!i.focusNode)return void console.error("anchorNode and/or focusNode are null");let n={node:i.anchorNode,offset:i.anchorOffset},f={node:i.focusNode,offset:i.focusOffset};if((n.node.compareDocumentPosition(f.node)&Node.DOCUMENT_POSITION_PRECEDING||n.node===f.node&&n.offset>f.offset)&&([n,f]=[f,n]),n.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(n={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(n.node))return;const S=this._rowElements.slice(-1)[0];if(f.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(f={node:S,offset:((x=S.textContent)==null?void 0:x.length)??0}),!this._rowContainer.contains(f.node))return;const b=({node:B,offset:P})=>{const M=B instanceof Text?B.parentNode:B;let A=parseInt(M==null?void 0:M.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const F=this._rowColumns.get(M);if(!F)return console.warn("columns is null. Race condition?"),null;let N=P<F.length?F[P]:F.slice(-1)[0]+1;return N>=this._terminal.cols&&(++A,N=0),{row:A,column:N}},w=b(n),v=b(f);if(w&&v){if(w.row>v.row||w.row===v.row&&w.column>=v.column)throw new Error("invalid range");this._terminal.select(w.column,w.row,(v.row-w.row)*this._terminal.cols-w.column+v.column)}}_handleResize(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let n=this._rowContainer.children.length;n<this._terminal.rows;n++)this._rowElements[n]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[n]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const i=this._coreBrowserService.mainDocument.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}}_refreshRowDimensions(i){i.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=a=h([u(1,d.IInstantiationService),u(2,C.ICoreBrowserService),u(3,C.IRenderService)],a)},3614:(y,s)=>{function o(_){return _.replace(/\r?\n/g,"\r")}function h(_,g){return g?"\x1B[200~"+_+"\x1B[201~":_}function u(_,g,C,d){_=h(_=o(_),C.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(_,!0),g.value=""}function l(_,g,C){const d=C.getBoundingClientRect(),r=_.clientX-d.left-10,a=_.clientY-d.top-10;g.style.width="20px",g.style.height="20px",g.style.left=`${r}px`,g.style.top=`${a}px`,g.style.zIndex="1000",g.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=o,s.bracketTextForPaste=h,s.copyHandler=function(_,g){_.clipboardData&&_.clipboardData.setData("text/plain",g.selectionText),_.preventDefault()},s.handlePasteEvent=function(_,g,C,d){_.stopPropagation(),_.clipboardData&&u(_.clipboardData.getData("text/plain"),g,C,d)},s.paste=u,s.moveTextAreaUnderMouseCursor=l,s.rightClickHandler=function(_,g,C,d,r){l(_,g,C),r&&d.rightClickSelect(_),g.value=d.selectionText,g.select()}},7239:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const h=o(1505);s.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(u,l,_){this._css.set(u,l,_)}getCss(u,l){return this._css.get(u,l)}setColor(u,l,_){this._color.set(u,l,_)}getColor(u,l){return this._color.get(u,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(o,h,u,l){o.addEventListener(h,u,l);let _=!1;return{dispose:()=>{_||(_=!0,o.removeEventListener(h,u,l))}}}},3551:function(y,s,o){var h=this&&this.__decorate||function(a,i,n,f){var S,b=arguments.length,w=b<3?i:f===null?f=Object.getOwnPropertyDescriptor(i,n):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(a,i,n,f);else for(var v=a.length-1;v>=0;v--)(S=a[v])&&(w=(b<3?S(w):b>3?S(i,n,w):S(i,n))||w);return b>3&&w&&Object.defineProperty(i,n,w),w},u=this&&this.__param||function(a,i){return function(n,f){i(n,f,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier=void 0;const l=o(3656),_=o(8460),g=o(844),C=o(2585),d=o(4725);let r=s.Linkifier=class extends g.Disposable{get currentLink(){return this._currentLink}constructor(a,i,n,f,S){super(),this._element=a,this._mouseService=i,this._renderService=n,this._bufferService=f,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,g.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,g.toDisposable)(()=>{var b;this._lastMouseEvent=void 0,(b=this._activeProviderReplies)==null||b.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){this._lastMouseEvent=a;const i=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!i)return;this._isMouseOut=!1;const n=a.composedPath();for(let f=0;f<n.length;f++){const S=n[f];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._handleHover(i),this._lastBufferCell=i)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,i){var f,S;this._activeProviderReplies&&i||((f=this._activeProviderReplies)==null||f.forEach(b=>{b==null||b.forEach(w=>{w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let n=!1;for(const[b,w]of this._linkProviderService.linkProviders.entries())i?(S=this._activeProviderReplies)!=null&&S.get(b)&&(n=this._checkLinkProviderResult(b,a,n)):w.provideLinks(a.y,v=>{var B,P;if(this._isMouseOut)return;const x=v==null?void 0:v.map(M=>({link:M}));(B=this._activeProviderReplies)==null||B.set(b,x),n=this._checkLinkProviderResult(b,a,n),((P=this._activeProviderReplies)==null?void 0:P.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,i){const n=new Set;for(let f=0;f<i.size;f++){const S=i.get(f);if(S)for(let b=0;b<S.length;b++){const w=S[b],v=w.link.range.start.y<a?0:w.link.range.start.x,x=w.link.range.end.y>a?this._bufferService.cols:w.link.range.end.x;for(let B=v;B<=x;B++){if(n.has(B)){S.splice(b--,1);break}n.add(B)}}}}_checkLinkProviderResult(a,i,n){var b;if(!this._activeProviderReplies)return n;const f=this._activeProviderReplies.get(a);let S=!1;for(let w=0;w<a;w++)this._activeProviderReplies.has(w)&&!this._activeProviderReplies.get(w)||(S=!0);if(!S&&f){const w=f.find(v=>this._linkAtPosition(v.link,i));w&&(n=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let w=0;w<this._activeProviderReplies.size;w++){const v=(b=this._activeProviderReplies.get(w))==null?void 0:b.find(x=>this._linkAtPosition(x.link,i));if(v){n=!0,this._handleNewLink(v);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._currentLink)return;const i=this._positionFromMouseEvent(a,this._element,this._mouseService);i&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,i){this._currentLink&&this._lastMouseEvent&&(!a||!i||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,g.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._lastMouseEvent)return;const i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(a.link,i)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var n,f;return(f=(n=this._currentLink)==null?void 0:n.state)==null?void 0:f.decorations.pointerCursor},set:n=>{var f;(f=this._currentLink)!=null&&f.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>{var n,f;return(f=(n=this._currentLink)==null?void 0:n.state)==null?void 0:f.decorations.underline},set:n=>{var f,S,b;(f=this._currentLink)!=null&&f.state&&((b=(S=this._currentLink)==null?void 0:S.state)==null?void 0:b.decorations.underline)!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;const f=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(f,S),this._lastMouseEvent)){const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}})))}_linkHover(a,i,n){var f;(f=this._currentLink)!=null&&f.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(n,i.text)}_fireUnderlineEvent(a,i){const n=a.range,f=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-f-1,n.end.x,n.end.y-f-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(a,i,n){var f;(f=this._currentLink)!=null&&f.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(n,i.text)}_linkAtPosition(a,i){const n=a.range.start.y*this._bufferService.cols+a.range.start.x,f=a.range.end.y*this._bufferService.cols+a.range.end.x,S=i.y*this._bufferService.cols+i.x;return n<=S&&S<=f}_positionFromMouseEvent(a,i,n){const f=n.getCoords(a,i,this._bufferService.cols,this._bufferService.rows);if(f)return{x:f[0],y:f[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,i,n,f,S){return{x1:a,y1:i,x2:n,y2:f,cols:this._bufferService.cols,fg:S}}};s.Linkifier=r=h([u(1,d.IMouseService),u(2,d.IRenderService),u(3,C.IBufferService),u(4,d.ILinkProviderService)],r)},9042:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(y,s,o){var h=this&&this.__decorate||function(d,r,a,i){var n,f=arguments.length,S=f<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,a):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(d,r,a,i);else for(var b=d.length-1;b>=0;b--)(n=d[b])&&(S=(f<3?n(S):f>3?n(r,a,S):n(r,a))||S);return f>3&&S&&Object.defineProperty(r,a,S),S},u=this&&this.__param||function(d,r){return function(a,i){r(a,i,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const l=o(511),_=o(2585);let g=s.OscLinkProvider=class{constructor(d,r,a){this._bufferService=d,this._optionsService=r,this._oscLinkService=a}provideLinks(d,r){var x;const a=this._bufferService.buffer.lines.get(d-1);if(!a)return void r(void 0);const i=[],n=this._optionsService.rawOptions.linkHandler,f=new l.CellData,S=a.getTrimmedLength();let b=-1,w=-1,v=!1;for(let B=0;B<S;B++)if(w!==-1||a.hasContent(B)){if(a.loadCell(B,f),f.hasExtendedAttrs()&&f.extended.urlId){if(w===-1){w=B,b=f.extended.urlId;continue}v=f.extended.urlId!==b}else w!==-1&&(v=!0);if(v||w!==-1&&B===S-1){const P=(x=this._oscLinkService.getLinkData(b))==null?void 0:x.uri;if(P){const M={start:{x:w+1,y:d},end:{x:B+(v||B!==S-1?0:1),y:d}};let A=!1;if(!(n!=null&&n.allowNonHttpProtocols))try{const F=new URL(P);["http:","https:"].includes(F.protocol)||(A=!0)}catch{A=!0}A||i.push({text:P,range:M,activate:(F,N)=>n?n.activate(F,N,M):C(0,N),hover:(F,N)=>{var j;return(j=n==null?void 0:n.hover)==null?void 0:j.call(n,F,N,M)},leave:(F,N)=>{var j;return(j=n==null?void 0:n.leave)==null?void 0:j.call(n,F,N,M)}})}v=!1,f.hasExtendedAttrs()&&f.extended.urlId?(w=B,b=f.extended.urlId):(w=-1,b=-1)}}r(i)}};function C(d,r){if(confirm(`Do you want to navigate to ${r}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=g=h([u(0,_.IBufferService),u(1,_.IOptionsService),u(2,_.IOscLinkService)],g)},6193:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(o,h){this._renderCallback=o,this._coreBrowserService=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,h,u){this._rowCount=u,o=o!==void 0?o:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const h=o(3614),u=o(3656),l=o(3551),_=o(9042),g=o(3730),C=o(1680),d=o(3107),r=o(5744),a=o(2950),i=o(1296),n=o(428),f=o(4269),S=o(5114),b=o(8934),w=o(3230),v=o(9312),x=o(4725),B=o(6731),P=o(8055),M=o(8969),A=o(8460),F=o(844),N=o(6114),j=o(8437),q=o(2584),K=o(7399),L=o(5941),k=o(9074),T=o(2585),I=o(5435),G=o(4567),ee=o(779);class ie extends M.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(H={}){super(H),this.browser=N,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new F.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(k.DecorationService),this._instantiationService.setService(T.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ee.LinkProviderService),this._instantiationService.setService(x.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(g.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((D,J)=>this.refresh(D,J))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(D=>this._reportWindowsOptions(D))),this.register(this._inputHandler.onColor(D=>this._handleColorEvent(D))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(D=>this._afterResize(D.cols,D.rows))),this.register((0,F.toDisposable)(()=>{var D,J;this._customKeyEventHandler=void 0,(J=(D=this.element)==null?void 0:D.parentNode)==null||J.removeChild(this.element)}))}_handleColorEvent(H){if(this._themeService)for(const D of H){let J,U="";switch(D.index){case 256:J="foreground",U="10";break;case 257:J="background",U="11";break;case 258:J="cursor",U="12";break;default:J="ansi",U="4;"+D.index}switch(D.type){case 0:const se=P.color.toColorRGB(J==="ansi"?this._themeService.colors.ansi[D.index]:this._themeService.colors[J]);this.coreService.triggerDataEvent(`${q.C0.ESC}]${U};${(0,L.toRgbString)(se)}${q.C1_ESCAPED.ST}`);break;case 1:if(J==="ansi")this._themeService.modifyColors(R=>R.ansi[D.index]=P.channels.toColor(...D.color));else{const R=J;this._themeService.modifyColors(O=>O[R]=P.channels.toColor(...D.color))}break;case 2:this._themeService.restoreColor(D.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(H){H?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(G.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(H){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var H;return(H=this.textarea)==null?void 0:H.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const H=this.buffer.ybase+this.buffer.y,D=this.buffer.lines.get(H);if(!D)return;const J=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,se=D.getWidth(J),R=this._renderService.dimensions.css.cell.width*se,O=this.buffer.y*this._renderService.dimensions.css.cell.height,W=J*this._renderService.dimensions.css.cell.width;this.textarea.style.left=W+"px",this.textarea.style.top=O+"px",this.textarea.style.width=R+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",D=>{this.hasSelection()&&(0,h.copyHandler)(D,this._selectionService)}));const H=D=>(0,h.handlePasteEvent)(D,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",H)),this.register((0,u.addDisposableDomListener)(this.element,"paste",H)),N.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",D=>{D.button===2&&(0,h.rightClickHandler)(D,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",D=>{(0,h.rightClickHandler)(D,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),N.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",D=>{D.button===1&&(0,h.moveTextAreaUnderMouseCursor)(D,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",H=>this._keyUp(H),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",H=>this._keyDown(H),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",H=>this._keyPress(H),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",H=>this._compositionHelper.compositionupdate(H))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",H=>this._inputEvent(H),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(H){var J;if(!H)throw new Error("Terminal requires a parent element.");if(H.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((J=this.element)==null?void 0:J.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=H.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),H.appendChild(this.element);const D=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),D.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",U=>this.updateCursorStyle(U))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),D.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),N.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,H.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(x.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",U=>this._handleTextAreaFocus(U))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(n.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(x.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(B.ThemeService),this._instantiationService.setService(x.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(x.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(x.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(U=>this._onRender.fire(U))),this.onResize(U=>this._renderService.resize(U.cols,U.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(x.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(l.Linkifier,this.screenElement)),this.element.appendChild(D);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(x.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",U=>this._selectionService.handleMouseDown(U))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(G.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",U=>this._handleScreenReaderModeOptionChange(U))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(r.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(r.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(i.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const H=this,D=this.element;function J(R){const O=H._mouseService.getMouseReportCoords(R,H.screenElement);if(!O)return!1;let W,z;switch(R.overrideType||R.type){case"mousemove":z=32,R.buttons===void 0?(W=3,R.button!==void 0&&(W=R.button<3?R.button:3)):W=1&R.buttons?0:4&R.buttons?1:2&R.buttons?2:3;break;case"mouseup":z=0,W=R.button<3?R.button:3;break;case"mousedown":z=1,W=R.button<3?R.button:3;break;case"wheel":if(H._customWheelEventHandler&&H._customWheelEventHandler(R)===!1||H.viewport.getLinesScrolled(R)===0)return!1;z=R.deltaY<0?0:1,W=4;break;default:return!1}return!(z===void 0||W===void 0||W>4)&&H.coreMouseService.triggerMouseEvent({col:O.col,row:O.row,x:O.x,y:O.y,button:W,action:z,ctrl:R.ctrlKey,alt:R.altKey,shift:R.shiftKey})}const U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},se={mouseup:R=>(J(R),R.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(R)),wheel:R=>(J(R),this.cancel(R,!0)),mousedrag:R=>{R.buttons&&J(R)},mousemove:R=>{R.buttons||J(R)}};this.register(this.coreMouseService.onProtocolChange(R=>{R?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(R)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&R?U.mousemove||(D.addEventListener("mousemove",se.mousemove),U.mousemove=se.mousemove):(D.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&R?U.wheel||(D.addEventListener("wheel",se.wheel,{passive:!1}),U.wheel=se.wheel):(D.removeEventListener("wheel",U.wheel),U.wheel=null),2&R?U.mouseup||(U.mouseup=se.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&R?U.mousedrag||(U.mousedrag=se.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(D,"mousedown",R=>{if(R.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(R))return J(R),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(R)})),this.register((0,u.addDisposableDomListener)(D,"wheel",R=>{if(!U.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(R)===!1)return!1;if(!this.buffer.hasScrollback){const O=this.viewport.getLinesScrolled(R);if(O===0)return;const W=q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(R.deltaY<0?"A":"B");let z="";for(let V=0;V<Math.abs(O);V++)z+=W;return this.coreService.triggerDataEvent(z,!0),this.cancel(R,!0)}return this.viewport.handleWheel(R)?this.cancel(R):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(D,"touchstart",R=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(R),this.cancel(R)},{passive:!0})),this.register((0,u.addDisposableDomListener)(D,"touchmove",R=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(R)?void 0:this.cancel(R)},{passive:!1}))}refresh(H,D){var J;(J=this._renderService)==null||J.refreshRows(H,D)}updateCursorStyle(H){var D;(D=this._selectionService)!=null&&D.shouldColumnSelect(H)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(H,D,J=0){var U;J===1?(super.scrollLines(H,D,J),this.refresh(0,this.rows-1)):(U=this.viewport)==null||U.scrollLines(H)}paste(H){(0,h.paste)(H,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(H){this._customKeyEventHandler=H}attachCustomWheelEventHandler(H){this._customWheelEventHandler=H}registerLinkProvider(H){return this._linkProviderService.registerLinkProvider(H)}registerCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const D=this._characterJoinerService.register(H);return this.refresh(0,this.rows-1),D}deregisterCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(H)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(H){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+H)}registerDecoration(H){return this._decorationService.registerDecoration(H)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(H,D,J){this._selectionService.setSelection(H,D,J)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var H;(H=this._selectionService)==null||H.clearSelection()}selectAll(){var H;(H=this._selectionService)==null||H.selectAll()}selectLines(H,D){var J;(J=this._selectionService)==null||J.selectLines(H,D)}_keyDown(H){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;const D=this.browser.isMac&&this.options.macOptionIsMeta&&H.altKey;if(!D&&!this._compositionHelper.keydown(H))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;D||H.key!=="Dead"&&H.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const J=(0,K.evaluateKeyboardEvent)(H,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(H),J.type===3||J.type===2){const U=this.rows-1;return this.scrollLines(J.type===2?-U:U),this.cancel(H,!0)}return J.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,H)||(J.cancel&&this.cancel(H,!0),!J.key||!!(H.key&&!H.ctrlKey&&!H.altKey&&!H.metaKey&&H.key.length===1&&H.key.charCodeAt(0)>=65&&H.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(J.key!==q.C0.ETX&&J.key!==q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:J.key,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(J.key,!0),!this.optionsService.rawOptions.screenReaderMode||H.altKey||H.ctrlKey?this.cancel(H,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(H,D){const J=H.isMac&&!this.options.macOptionIsMeta&&D.altKey&&!D.ctrlKey&&!D.metaKey||H.isWindows&&D.altKey&&D.ctrlKey&&!D.metaKey||H.isWindows&&D.getModifierState("AltGraph");return D.type==="keypress"?J:J&&(!D.keyCode||D.keyCode>47)}_keyUp(H){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1||(function(D){return D.keyCode===16||D.keyCode===17||D.keyCode===18}(H)||this.focus(),this.updateCursorStyle(H),this._keyPressHandled=!1)}_keyPress(H){let D;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;if(this.cancel(H),H.charCode)D=H.charCode;else if(H.which===null||H.which===void 0)D=H.keyCode;else{if(H.which===0||H.charCode===0)return!1;D=H.which}return!(!D||(H.altKey||H.ctrlKey||H.metaKey)&&!this._isThirdLevelShift(this.browser,H)||(D=String.fromCharCode(D),this._onKey.fire({key:D,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(D,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(H){if(H.data&&H.inputType==="insertText"&&(!H.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const D=H.data;return this.coreService.triggerDataEvent(D,!0),this.cancel(H),!0}return!1}resize(H,D){H!==this.cols||D!==this.rows?super.resize(H,D):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(H,D){var J,U;(J=this._charSizeService)==null||J.measure(),(U=this.viewport)==null||U.syncScrollArea(!0)}clear(){var H;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let D=1;D<this.rows;D++)this.buffer.lines.push(this.buffer.getBlankLine(j.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(H=this.viewport)==null||H.reset(),this.refresh(0,this.rows-1)}}reset(){var D,J;this.options.rows=this.rows,this.options.cols=this.cols;const H=this._customKeyEventHandler;this._setup(),super.reset(),(D=this._selectionService)==null||D.reset(),this._decorationService.reset(),(J=this.viewport)==null||J.reset(),this._customKeyEventHandler=H,this.refresh(0,this.rows-1)}clearTextureAtlas(){var H;(H=this._renderService)==null||H.clearTextureAtlas()}_reportFocus(){var H;(H=this.element)!=null&&H.classList.contains("focus")?this.coreService.triggerDataEvent(q.C0.ESC+"[I"):this.coreService.triggerDataEvent(q.C0.ESC+"[O")}_reportWindowsOptions(H){if(this._renderService)switch(H){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const D=this._renderService.dimensions.css.canvas.width.toFixed(0),J=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${q.C0.ESC}[4;${J};${D}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const U=this._renderService.dimensions.css.cell.width.toFixed(0),se=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${q.C0.ESC}[6;${se};${U}t`)}}cancel(H,D){if(this.options.cancelEvents||D)return H.preventDefault(),H.stopPropagation(),!1}}s.Terminal=ie},9924:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(o,h=1e3){this._renderCallback=o,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,h,u){this._rowCount=u,o=o!==void 0?o:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=l-this._lastRefreshMs,g=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},g)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,h)}}},1680:function(y,s,o){var h=this&&this.__decorate||function(a,i,n,f){var S,b=arguments.length,w=b<3?i:f===null?f=Object.getOwnPropertyDescriptor(i,n):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(a,i,n,f);else for(var v=a.length-1;v>=0;v--)(S=a[v])&&(w=(b<3?S(w):b>3?S(i,n,w):S(i,n))||w);return b>3&&w&&Object.defineProperty(i,n,w),w},u=this&&this.__param||function(a,i){return function(n,f){i(n,f,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const l=o(3656),_=o(4725),g=o(8460),C=o(844),d=o(2585);let r=s.Viewport=class extends C.Disposable{constructor(a,i,n,f,S,b,w,v){super(),this._viewportElement=a,this._scrollArea=i,this._bufferService=n,this._optionsService=f,this._charSizeService=S,this._renderService=b,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(x=>this._activeBuffer=x.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(x=>this._renderDimensions=x)),this._handleThemeChange(v.colors),this.register(v.onChangeColors(x=>this._handleThemeChange(x))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const i=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==i&&(this._lastRecordedBufferHeight=i,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:i,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,i){const n=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&n<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const i=this._getPixelsScrolled(a);return i!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+i:this._smoothScrollState.target+=i,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=i,this._bubbleScroll(a,i))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const i=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+i,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let i=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i}getBufferElements(a,i){var v;let n,f="";const S=[],b=i??this._bufferService.buffer.lines.length,w=this._bufferService.buffer.lines;for(let x=a;x<b;x++){const B=w.get(x);if(!B)continue;const P=(v=w.get(x+1))==null?void 0:v.isWrapped;if(f+=B.translateToString(!P),!P||x===w.length-1){const M=document.createElement("div");M.textContent=f,S.push(M),f.length>0&&(n=M),f=""}}return{bufferElements:S,cursorElement:n}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let i=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i}_applyScrollModifier(a,i){const n=this._optionsService.rawOptions.fastScrollModifier;return n==="alt"&&i.altKey||n==="ctrl"&&i.ctrlKey||n==="shift"&&i.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const i=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(a,i))}};s.Viewport=r=h([u(2,d.IBufferService),u(3,d.IOptionsService),u(4,_.ICharSizeService),u(5,_.IRenderService),u(6,_.ICoreBrowserService),u(7,_.IThemeService)],r)},3107:function(y,s,o){var h=this&&this.__decorate||function(d,r,a,i){var n,f=arguments.length,S=f<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,a):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(d,r,a,i);else for(var b=d.length-1;b>=0;b--)(n=d[b])&&(S=(f<3?n(S):f>3?n(r,a,S):n(r,a))||S);return f>3&&S&&Object.defineProperty(r,a,S),S},u=this&&this.__param||function(d,r){return function(a,i){r(a,i,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const l=o(4725),_=o(844),g=o(2585);let C=s.BufferDecorationRenderer=class extends _.Disposable{constructor(d,r,a,i,n){super(),this._screenElement=d,this._bufferService=r,this._coreBrowserService=a,this._decorationService=i,this._renderService=n,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(f=>this._removeDecoration(f))),this.register((0,_.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const d of this._decorationService.decorations)this._renderDecoration(d);this._dimensionsChanged=!1}_renderDecoration(d){this._refreshStyle(d),this._dimensionsChanged&&this._refreshXPosition(d)}_createElement(d){var i;const r=this._coreBrowserService.mainDocument.createElement("div");r.classList.add("xterm-decoration"),r.classList.toggle("xterm-decoration-top-layer",((i=d==null?void 0:d.options)==null?void 0:i.layer)==="top"),r.style.width=`${Math.round((d.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,r.style.height=(d.options.height||1)*this._renderService.dimensions.css.cell.height+"px",r.style.top=(d.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",r.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const a=d.options.x??0;return a&&a>this._bufferService.cols&&(r.style.display="none"),this._refreshXPosition(d,r),r}_refreshStyle(d){const r=d.marker.line-this._bufferService.buffers.active.ydisp;if(r<0||r>=this._bufferService.rows)d.element&&(d.element.style.display="none",d.onRenderEmitter.fire(d.element));else{let a=this._decorationElements.get(d);a||(a=this._createElement(d),d.element=a,this._decorationElements.set(d,a),this._container.appendChild(a),d.onDispose(()=>{this._decorationElements.delete(d),a.remove()})),a.style.top=r*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",d.onRenderEmitter.fire(a)}}_refreshXPosition(d,r=d.element){if(!r)return;const a=d.options.x??0;(d.options.anchor||"left")==="right"?r.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":r.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(d){var r;(r=this._decorationElements.get(d))==null||r.remove(),this._decorationElements.delete(d),d.dispose()}};s.BufferDecorationRenderer=C=h([u(1,g.IBufferService),u(2,l.ICoreBrowserService),u(3,g.IDecorationService),u(4,l.IRenderService)],C)},5871:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const h of this._zones)if(h.color===o.options.overviewRulerOptions.color&&h.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,o.marker.line))return;if(this._lineAdjacentToZone(h,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(h,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,h){return h>=o.startBufferLine&&h<=o.endBufferLine}_lineAdjacentToZone(o,h,u){return h>=o.startBufferLine-this._linePadding[u||"full"]&&h<=o.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(o,h){o.startBufferLine=Math.min(o.startBufferLine,h),o.endBufferLine=Math.max(o.endBufferLine,h)}}},5744:function(y,s,o){var h=this&&this.__decorate||function(n,f,S,b){var w,v=arguments.length,x=v<3?f:b===null?b=Object.getOwnPropertyDescriptor(f,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,f,S,b);else for(var B=n.length-1;B>=0;B--)(w=n[B])&&(x=(v<3?w(x):v>3?w(f,S,x):w(f,S))||x);return v>3&&x&&Object.defineProperty(f,S,x),x},u=this&&this.__param||function(n,f){return function(S,b){f(S,b,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const l=o(5871),_=o(4725),g=o(844),C=o(2585),d={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let i=s.OverviewRulerRenderer=class extends g.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(n,f,S,b,w,v,x){var P;super(),this._viewportElement=n,this._screenElement=f,this._bufferService=S,this._decorationService=b,this._renderService=w,this._optionsService=v,this._coreBrowserService=x,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(P=this._viewportElement.parentElement)==null||P.insertBefore(this._canvas,this._viewportElement);const B=this._canvas.getContext("2d");if(!B)throw new Error("Ctx cannot be null");this._ctx=B,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,g.toDisposable)(()=>{var M;(M=this._canvas)==null||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const n=Math.floor(this._canvas.width/3),f=Math.ceil(this._canvas.width/3);r.full=this._canvas.width,r.left=n,r.center=f,r.right=n,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=r.left,a.right=r.left+r.center}_refreshDrawHeightConstants(){d.full=Math.round(2*this._coreBrowserService.dpr);const n=this._canvas.height/this._bufferService.buffer.lines.length,f=Math.round(Math.max(Math.min(n,12),6)*this._coreBrowserService.dpr);d.left=f,d.center=f,d.right=f}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const f of this._decorationService.decorations)this._colorZoneStore.addDecoration(f);this._ctx.lineWidth=1;const n=this._colorZoneStore.zones;for(const f of n)f.position!=="full"&&this._renderColorZone(f);for(const f of n)f.position==="full"&&this._renderColorZone(f);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(n){this._ctx.fillStyle=n.color,this._ctx.fillRect(a[n.position||"full"],Math.round((this._canvas.height-1)*(n.startBufferLine/this._bufferService.buffers.active.lines.length)-d[n.position||"full"]/2),r[n.position||"full"],Math.round((this._canvas.height-1)*((n.endBufferLine-n.startBufferLine)/this._bufferService.buffers.active.lines.length)+d[n.position||"full"]))}_queueRefresh(n,f){this._shouldUpdateDimensions=n||this._shouldUpdateDimensions,this._shouldUpdateAnchor=f||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=i=h([u(2,C.IBufferService),u(3,C.IDecorationService),u(4,_.IRenderService),u(5,C.IOptionsService),u(6,_.ICoreBrowserService)],i)},2950:function(y,s,o){var h=this&&this.__decorate||function(d,r,a,i){var n,f=arguments.length,S=f<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,a):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(d,r,a,i);else for(var b=d.length-1;b>=0;b--)(n=d[b])&&(S=(f<3?n(S):f>3?n(r,a,S):n(r,a))||S);return f>3&&S&&Object.defineProperty(r,a,S),S},u=this&&this.__param||function(d,r){return function(a,i){r(a,i,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const l=o(4725),_=o(2585),g=o(2584);let C=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,r,a,i,n,f){this._textarea=d,this._compositionView=r,this._bufferService=a,this._optionsService=i,this._coreService=n,this._renderService=f,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){const r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,r.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(r.start,r.end):this._textarea.value.substring(r.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;const r=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(r,!0)}}_handleAnyTextareaChanges(){const d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const r=this._textarea.value,a=r.replace(d,"");this._dataAlreadySent=a,r.length>d.length?this._coreService.triggerDataEvent(a,!0):r.length<d.length?this._coreService.triggerDataEvent(`${g.C0.DEL}`,!0):r.length===d.length&&r!==d&&this._coreService.triggerDataEvent(r,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,n=r*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=n+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const f=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(f.width,1)+"px",this._textarea.style.height=Math.max(f.height,1)+"px",this._textarea.style.lineHeight=f.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=C=h([u(2,_.IBufferService),u(3,_.IOptionsService),u(4,_.ICoreService),u(5,l.IRenderService)],C)},9806:(y,s)=>{function o(h,u,l){const _=l.getBoundingClientRect(),g=h.getComputedStyle(l),C=parseInt(g.getPropertyValue("padding-left")),d=parseInt(g.getPropertyValue("padding-top"));return[u.clientX-_.left-C,u.clientY-_.top-d]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=o,s.getCoords=function(h,u,l,_,g,C,d,r,a){if(!C)return;const i=o(h,u,l);return i?(i[0]=Math.ceil((i[0]+(a?d/2:0))/d),i[1]=Math.ceil(i[1]/r),i[0]=Math.min(Math.max(i[0],1),_+(a?1:0)),i[1]=Math.min(Math.max(i[1],1),g),i):void 0}},9504:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const h=o(2584);function u(r,a,i,n){const f=r-l(r,i),S=a-l(a,i),b=Math.abs(f-S)-function(w,v,x){let B=0;const P=w-l(w,x),M=v-l(v,x);for(let A=0;A<Math.abs(P-M);A++){const F=_(w,v)==="A"?-1:1,N=x.buffer.lines.get(P+F*A);N!=null&&N.isWrapped&&B++}return B}(r,a,i);return d(b,C(_(r,a),n))}function l(r,a){let i=0,n=a.buffer.lines.get(r),f=n==null?void 0:n.isWrapped;for(;f&&r>=0&&r<a.rows;)i++,n=a.buffer.lines.get(--r),f=n==null?void 0:n.isWrapped;return i}function _(r,a){return r>a?"A":"B"}function g(r,a,i,n,f,S){let b=r,w=a,v="";for(;b!==i||w!==n;)b+=f?1:-1,f&&b>S.cols-1?(v+=S.buffer.translateBufferLineToString(w,!1,r,b),b=0,r=0,w++):!f&&b<0&&(v+=S.buffer.translateBufferLineToString(w,!1,0,r+1),b=S.cols-1,r=b,w--);return v+S.buffer.translateBufferLineToString(w,!1,r,b)}function C(r,a){const i=a?"O":"[";return h.C0.ESC+i+r}function d(r,a){r=Math.floor(r);let i="";for(let n=0;n<r;n++)i+=a;return i}s.moveToCellSequence=function(r,a,i,n){const f=i.buffer.x,S=i.buffer.y;if(!i.buffer.hasScrollback)return function(v,x,B,P,M,A){return u(x,P,M,A).length===0?"":d(g(v,x,v,x-l(x,M),!1,M).length,C("D",A))}(f,S,0,a,i,n)+u(S,a,i,n)+function(v,x,B,P,M,A){let F;F=u(x,P,M,A).length>0?P-l(P,M):x;const N=P,j=function(q,K,L,k,T,I){let G;return G=u(L,k,T,I).length>0?k-l(k,T):K,q<L&&G<=k||q>=L&&G<k?"C":"D"}(v,x,B,P,M,A);return d(g(v,F,B,N,j==="C",M).length,C(j,A))}(f,S,r,a,i,n);let b;if(S===a)return b=f>r?"D":"C",d(Math.abs(f-r),C(b,n));b=S>a?"D":"C";const w=Math.abs(S-a);return d(function(v,x){return x.cols-v}(S>a?r:f,i)+(w-1)*i.cols+1+((S>a?f:r)-1),C(b,n))}},1296:function(y,s,o){var h=this&&this.__decorate||function(A,F,N,j){var q,K=arguments.length,L=K<3?F:j===null?j=Object.getOwnPropertyDescriptor(F,N):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(A,F,N,j);else for(var k=A.length-1;k>=0;k--)(q=A[k])&&(L=(K<3?q(L):K>3?q(F,N,L):q(F,N))||L);return K>3&&L&&Object.defineProperty(F,N,L),L},u=this&&this.__param||function(A,F){return function(N,j){F(N,j,A)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const l=o(3787),_=o(2550),g=o(2223),C=o(6171),d=o(6052),r=o(4725),a=o(8055),i=o(8460),n=o(844),f=o(2585),S="xterm-dom-renderer-owner-",b="xterm-rows",w="xterm-fg-",v="xterm-bg-",x="xterm-focus",B="xterm-selection";let P=1,M=s.DomRenderer=class extends n.Disposable{constructor(A,F,N,j,q,K,L,k,T,I,G,ee,ie){super(),this._terminal=A,this._document=F,this._element=N,this._screenElement=j,this._viewportElement=q,this._helperContainer=K,this._linkifier2=L,this._charSizeService=T,this._optionsService=I,this._bufferService=G,this._coreBrowserService=ee,this._themeService=ie,this._terminalClass=P++,this._rowElements=[],this._selectionRenderModel=(0,d.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new i.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(B),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(le=>this._injectCss(le))),this._injectCss(this._themeService.colors),this._rowFactory=k.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(le=>this._handleLinkHover(le))),this.register(this._linkifier2.onHideLinkUnderline(le=>this._handleLinkLeave(le))),this.register((0,n.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const N of this._rowElements)N.style.width=`${this.dimensions.css.canvas.width}px`,N.style.height=`${this.dimensions.css.cell.height}px`,N.style.lineHeight=`${this.dimensions.css.cell.height}px`,N.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const F=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=F,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let F=`${this._terminalSelector} .${b} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;F+=`${this._terminalSelector} .${b} .xterm-dim { color: ${a.color.multiplyOpacity(A.foreground,.5).css};}`,F+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const N=`blink_underline_${this._terminalClass}`,j=`blink_bar_${this._terminalClass}`,q=`blink_block_${this._terminalClass}`;F+=`@keyframes ${N} { 50% {  border-bottom-style: hidden; }}`,F+=`@keyframes ${j} { 50% {  box-shadow: none; }}`,F+=`@keyframes ${q} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,F+=`${this._terminalSelector} .${b}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${N} 1s step-end infinite;}${this._terminalSelector} .${b}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${j} 1s step-end infinite;}${this._terminalSelector} .${b}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${q} 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,F+=`${this._terminalSelector} .${B} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${B} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${B} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[K,L]of A.ansi.entries())F+=`${this._terminalSelector} .${w}${K} { color: ${L.css}; }${this._terminalSelector} .${w}${K}.xterm-dim { color: ${a.color.multiplyOpacity(L,.5).css}; }${this._terminalSelector} .${v}${K} { background-color: ${L.css}; }`;F+=`${this._terminalSelector} .${w}${g.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(A.background).css}; }${this._terminalSelector} .${w}${g.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${v}${g.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=F}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,F){for(let N=this._rowElements.length;N<=F;N++){const j=this._document.createElement("div");this._rowContainer.appendChild(j),this._rowElements.push(j)}for(;this._rowElements.length>F;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,F){this._refreshRowElements(A,F),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(x),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(x),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,F,N){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,F,N),this.renderRows(0,this._bufferService.rows-1),!A||!F)return;this._selectionRenderModel.update(this._terminal,A,F,N);const j=this._selectionRenderModel.viewportStartRow,q=this._selectionRenderModel.viewportEndRow,K=this._selectionRenderModel.viewportCappedStartRow,L=this._selectionRenderModel.viewportCappedEndRow;if(K>=this._bufferService.rows||L<0)return;const k=this._document.createDocumentFragment();if(N){const T=A[0]>F[0];k.appendChild(this._createSelectionElement(K,T?F[0]:A[0],T?A[0]:F[0],L-K+1))}else{const T=j===K?A[0]:0,I=K===q?F[0]:this._bufferService.cols;k.appendChild(this._createSelectionElement(K,T,I));const G=L-K-1;if(k.appendChild(this._createSelectionElement(K+1,0,this._bufferService.cols,G)),K!==L){const ee=q===L?F[0]:this._bufferService.cols;k.appendChild(this._createSelectionElement(L,0,ee))}}this._selectionContainer.appendChild(k)}_createSelectionElement(A,F,N,j=1){const q=this._document.createElement("div"),K=F*this.dimensions.css.cell.width;let L=this.dimensions.css.cell.width*(N-F);return K+L>this.dimensions.css.canvas.width&&(L=this.dimensions.css.canvas.width-K),q.style.height=j*this.dimensions.css.cell.height+"px",q.style.top=A*this.dimensions.css.cell.height+"px",q.style.left=`${K}px`,q.style.width=`${L}px`,q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,F){const N=this._bufferService.buffer,j=N.ybase+N.y,q=Math.min(N.x,this._bufferService.cols-1),K=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,k=this._optionsService.rawOptions.cursorInactiveStyle;for(let T=A;T<=F;T++){const I=T+N.ydisp,G=this._rowElements[T],ee=N.lines.get(I);if(!G||!ee)break;G.replaceChildren(...this._rowFactory.createRow(ee,I,I===j,L,k,q,K,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,F,N,j,q,K){N<0&&(A=0),j<0&&(F=0);const L=this._bufferService.rows-1;N=Math.max(Math.min(N,L),0),j=Math.max(Math.min(j,L),0),q=Math.min(q,this._bufferService.cols);const k=this._bufferService.buffer,T=k.ybase+k.y,I=Math.min(k.x,q-1),G=this._optionsService.rawOptions.cursorBlink,ee=this._optionsService.rawOptions.cursorStyle,ie=this._optionsService.rawOptions.cursorInactiveStyle;for(let le=N;le<=j;++le){const H=le+k.ydisp,D=this._rowElements[le],J=k.lines.get(H);if(!D||!J)break;D.replaceChildren(...this._rowFactory.createRow(J,H,H===T,ee,ie,I,G,this.dimensions.css.cell.width,this._widthCache,K?le===N?A:0:-1,K?(le===j?F:q)-1:-1))}}};s.DomRenderer=M=h([u(7,f.IInstantiationService),u(8,r.ICharSizeService),u(9,f.IOptionsService),u(10,f.IBufferService),u(11,r.ICoreBrowserService),u(12,r.IThemeService)],M)},3787:function(y,s,o){var h=this&&this.__decorate||function(b,w,v,x){var B,P=arguments.length,M=P<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,v):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(b,w,v,x);else for(var A=b.length-1;A>=0;A--)(B=b[A])&&(M=(P<3?B(M):P>3?B(w,v,M):B(w,v))||M);return P>3&&M&&Object.defineProperty(w,v,M),M},u=this&&this.__param||function(b,w){return function(v,x){w(v,x,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const l=o(2223),_=o(643),g=o(511),C=o(2585),d=o(8055),r=o(4725),a=o(4269),i=o(6171),n=o(3734);let f=s.DomRendererRowFactory=class{constructor(b,w,v,x,B,P,M){this._document=b,this._characterJoinerService=w,this._optionsService=v,this._coreBrowserService=x,this._coreService=B,this._decorationService=P,this._themeService=M,this._workCell=new g.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,w,v){this._selectionStart=b,this._selectionEnd=w,this._columnSelectMode=v}createRow(b,w,v,x,B,P,M,A,F,N,j){const q=[],K=this._characterJoinerService.getJoinedCharacters(w),L=this._themeService.colors;let k,T=b.getNoBgTrimmedLength();v&&T<P+1&&(T=P+1);let I=0,G="",ee=0,ie=0,le=0,H=!1,D=0,J=!1,U=0;const se=[],R=N!==-1&&j!==-1;for(let O=0;O<T;O++){b.loadCell(O,this._workCell);let W=this._workCell.getWidth();if(W===0)continue;let z=!1,V=O,$=this._workCell;if(K.length>0&&O===K[0][0]){z=!0;const de=K.shift();$=new a.JoinedCellData(this._workCell,b.translateToString(!0,de[0],de[1]),de[1]-de[0]),V=de[1]-1,W=$.getWidth()}const te=this._isCellInSelection(O,w),Z=v&&O===P,Y=R&&O>=N&&O<=j;let X=!1;this._decorationService.forEachDecorationAtCell(O,w,void 0,de=>{X=!0});let ae=$.getChars()||_.WHITESPACE_CELL_CHAR;if(ae===" "&&($.isUnderline()||$.isOverline())&&(ae=""),U=W*A-F.get(ae,$.isBold(),$.isItalic()),k){if(I&&(te&&J||!te&&!J&&$.bg===ee)&&(te&&J&&L.selectionForeground||$.fg===ie)&&$.extended.ext===le&&Y===H&&U===D&&!Z&&!z&&!X){$.isInvisible()?G+=_.WHITESPACE_CELL_CHAR:G+=ae,I++;continue}I&&(k.textContent=G),k=this._document.createElement("span"),I=0,G=""}else k=this._document.createElement("span");if(ee=$.bg,ie=$.fg,le=$.extended.ext,H=Y,D=U,J=te,z&&P>=O&&P<=V&&(P=O),!this._coreService.isCursorHidden&&Z&&this._coreService.isCursorInitialized){if(se.push("xterm-cursor"),this._coreBrowserService.isFocused)M&&se.push("xterm-cursor-blink"),se.push(x==="bar"?"xterm-cursor-bar":x==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(B)switch(B){case"outline":se.push("xterm-cursor-outline");break;case"block":se.push("xterm-cursor-block");break;case"bar":se.push("xterm-cursor-bar");break;case"underline":se.push("xterm-cursor-underline")}}if($.isBold()&&se.push("xterm-bold"),$.isItalic()&&se.push("xterm-italic"),$.isDim()&&se.push("xterm-dim"),G=$.isInvisible()?_.WHITESPACE_CELL_CHAR:$.getChars()||_.WHITESPACE_CELL_CHAR,$.isUnderline()&&(se.push(`xterm-underline-${$.extended.underlineStyle}`),G===" "&&(G=""),!$.isUnderlineColorDefault()))if($.isUnderlineColorRGB())k.style.textDecorationColor=`rgb(${n.AttributeData.toColorRGB($.getUnderlineColor()).join(",")})`;else{let de=$.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&$.isBold()&&de<8&&(de+=8),k.style.textDecorationColor=L.ansi[de].css}$.isOverline()&&(se.push("xterm-overline"),G===" "&&(G="")),$.isStrikethrough()&&se.push("xterm-strikethrough"),Y&&(k.style.textDecoration="underline");let Q=$.getFgColor(),re=$.getFgColorMode(),ne=$.getBgColor(),ue=$.getBgColorMode();const _e=!!$.isInverse();if(_e){const de=Q;Q=ne,ne=de;const ht=re;re=ue,ue=ht}let fe,we,be,Ee=!1;switch(this._decorationService.forEachDecorationAtCell(O,w,void 0,de=>{de.options.layer!=="top"&&Ee||(de.backgroundColorRGB&&(ue=50331648,ne=de.backgroundColorRGB.rgba>>8&16777215,fe=de.backgroundColorRGB),de.foregroundColorRGB&&(re=50331648,Q=de.foregroundColorRGB.rgba>>8&16777215,we=de.foregroundColorRGB),Ee=de.options.layer==="top")}),!Ee&&te&&(fe=this._coreBrowserService.isFocused?L.selectionBackgroundOpaque:L.selectionInactiveBackgroundOpaque,ne=fe.rgba>>8&16777215,ue=50331648,Ee=!0,L.selectionForeground&&(re=50331648,Q=L.selectionForeground.rgba>>8&16777215,we=L.selectionForeground)),Ee&&se.push("xterm-decoration-top"),ue){case 16777216:case 33554432:be=L.ansi[ne],se.push(`xterm-bg-${ne}`);break;case 50331648:be=d.channels.toColor(ne>>16,ne>>8&255,255&ne),this._addStyle(k,`background-color:#${S((ne>>>0).toString(16),"0",6)}`);break;default:_e?(be=L.foreground,se.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):be=L.background}switch(fe||$.isDim()&&(fe=d.color.multiplyOpacity(be,.5)),re){case 16777216:case 33554432:$.isBold()&&Q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Q+=8),this._applyMinimumContrast(k,be,L.ansi[Q],$,fe,void 0)||se.push(`xterm-fg-${Q}`);break;case 50331648:const de=d.channels.toColor(Q>>16&255,Q>>8&255,255&Q);this._applyMinimumContrast(k,be,de,$,fe,we)||this._addStyle(k,`color:#${S(Q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(k,be,L.foreground,$,fe,we)||_e&&se.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}se.length&&(k.className=se.join(" "),se.length=0),Z||z||X?k.textContent=G:I++,U!==this.defaultSpacing&&(k.style.letterSpacing=`${U}px`),q.push(k),O=V}return k&&I&&(k.textContent=G),q}_applyMinimumContrast(b,w,v,x,B,P){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,i.treatGlyphAsBackgroundColor)(x.getCode()))return!1;const M=this._getContrastCache(x);let A;if(B||P||(A=M.getColor(w.rgba,v.rgba)),A===void 0){const F=this._optionsService.rawOptions.minimumContrastRatio/(x.isDim()?2:1);A=d.color.ensureContrastRatio(B||w,P||v,F),M.setColor((B||w).rgba,(P||v).rgba,A??null)}return!!A&&(this._addStyle(b,`color:${A.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,w){b.setAttribute("style",`${b.getAttribute("style")||""}${w};`)}_isCellInSelection(b,w){const v=this._selectionStart,x=this._selectionEnd;return!(!v||!x)&&(this._columnSelectMode?v[0]<=x[0]?b>=v[0]&&w>=v[1]&&b<x[0]&&w<=x[1]:b<v[0]&&w>=v[1]&&b>=x[0]&&w<=x[1]:w>v[1]&&w<x[1]||v[1]===x[1]&&w===v[1]&&b>=v[0]&&b<x[0]||v[1]<x[1]&&w===x[1]&&b<x[0]||v[1]<x[1]&&w===v[1]&&b>=v[0])}};function S(b,w,v){for(;b.length<v;)b=w+b;return b}s.DomRendererRowFactory=f=h([u(1,r.ICharacterJoinerService),u(2,C.IOptionsService),u(3,r.ICoreBrowserService),u(4,C.ICoreService),u(5,C.IDecorationService),u(6,r.IThemeService)],f)},2550:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(o,h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=o.createElement("span");u.classList.add("xterm-char-measure-element");const l=o.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold";const _=o.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontStyle="italic";const g=o.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontWeight="bold",g.style.fontStyle="italic",this._measureElements=[u,l,_,g],this._container.appendChild(u),this._container.appendChild(l),this._container.appendChild(_),this._container.appendChild(g),h.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,h,u,l){o===this._font&&h===this._fontSize&&u===this._weight&&l===this._weightBold||(this._font=o,this._fontSize=h,this._weight=u,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(o,h,u){let l=0;if(!h&&!u&&o.length===1&&(l=o.charCodeAt(0))<256){if(this._flat[l]!==-9999)return this._flat[l];const C=this._measure(o,0);return C>0&&(this._flat[l]=C),C}let _=o;h&&(_+="B"),u&&(_+="I");let g=this._holey.get(_);if(g===void 0){let C=0;h&&(C|=1),u&&(C|=2),g=this._measure(o,C),g>0&&this._holey.set(_,g)}return g}_measure(o,h){const u=this._measureElements[h];return u.textContent=o.repeat(32),u.offsetWidth/32}}},2223:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const h=o(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(y,s)=>{function o(u){return 57508<=u&&u<=57558}function h(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(s,"__esModule",{value:!0}),s.computeNextVariantOffset=s.createRenderDimensions=s.treatGlyphAsBackgroundColor=s.allowRescaling=s.isEmoji=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},s.isPowerlineGlyph=o,s.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},s.isEmoji=h,s.allowRescaling=function(u,l,_,g){return l===1&&_>Math.ceil(1.5*g)&&u!==void 0&&u>255&&!h(u)&&!o(u)&&!function(C){return 57344<=C&&C<=63743}(u)},s.treatGlyphAsBackgroundColor=function(u){return o(u)||function(l){return 9472<=l&&l<=9631}(u)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},s.computeNextVariantOffset=function(u,l,_=0){return(u-(2*Math.round(l)-_))%(2*Math.round(l))}},6052:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,l,_,g=!1){if(this.selectionStart=l,this.selectionEnd=_,!l||!_||l[0]===_[0]&&l[1]===_[1])return void this.clear();const C=u.buffers.active.ydisp,d=l[1]-C,r=_[1]-C,a=Math.max(d,0),i=Math.min(r,u.rows-1);a>=u.rows||i<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=g,this.viewportStartRow=d,this.viewportEndRow=r,this.viewportCappedStartRow=a,this.viewportCappedEndRow=i,this.startCol=l[0],this.endCol=_[0])}isCellSelected(u,l,_){return!!this.hasSelection&&(_-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?l>=this.startCol&&_>=this.viewportCappedStartRow&&l<this.endCol&&_<=this.viewportCappedEndRow:l<this.startCol&&_>=this.viewportCappedStartRow&&l>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&l>=this.startCol&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&l>=this.startCol)}}s.createSelectionRenderModel=function(){return new o}},456:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,h=this.selectionEnd;return!(!o||!h)&&(o[1]>h[1]||o[1]===h[1]&&o[0]>h[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(y,s,o){var h=this&&this.__decorate||function(i,n,f,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,f,S);else for(var x=i.length-1;x>=0;x--)(b=i[x])&&(v=(w<3?b(v):w>3?b(n,f,v):b(n,f))||v);return w>3&&v&&Object.defineProperty(n,f,v),v},u=this&&this.__param||function(i,n){return function(f,S){n(f,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const l=o(2585),_=o(8460),g=o(844);let C=s.CharSizeService=class extends g.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(i,n,f){super(),this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new a(this._optionsService))}catch{this._measureStrategy=this.register(new r(i,n,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const i=this._measureStrategy.measure();i.width===this.width&&i.height===this.height||(this.width=i.width,this.height=i.height,this._onCharSizeChange.fire())}};s.CharSizeService=C=h([u(2,l.IOptionsService)],C);class d extends g.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(n,f){n!==void 0&&n>0&&f!==void 0&&f>0&&(this._result.width=n,this._result.height=f)}}class r extends d{constructor(n,f,S){super(),this._document=n,this._parentElement=f,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class a extends d{constructor(n){super(),this._optionsService=n,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const f=this._ctx.measureText("W");if(!("width"in f&&"fontBoundingBoxAscent"in f&&"fontBoundingBoxDescent"in f))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const n=this._ctx.measureText("W");return this._validateAndSet(n.width,n.fontBoundingBoxAscent+n.fontBoundingBoxDescent),this._result}}},4269:function(y,s,o){var h=this&&this.__decorate||function(a,i,n,f){var S,b=arguments.length,w=b<3?i:f===null?f=Object.getOwnPropertyDescriptor(i,n):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(a,i,n,f);else for(var v=a.length-1;v>=0;v--)(S=a[v])&&(w=(b<3?S(w):b>3?S(i,n,w):S(i,n))||w);return b>3&&w&&Object.defineProperty(i,n,w),w},u=this&&this.__param||function(a,i){return function(n,f){i(n,f,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const l=o(3734),_=o(643),g=o(511),C=o(2585);class d extends l.AttributeData{constructor(i,n,f){super(),this.content=0,this.combinedData="",this.fg=i.fg,this.bg=i.bg,this.combinedData=n,this._width=f}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(i){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=d;let r=s.CharacterJoinerService=class sn{constructor(i){this._bufferService=i,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new g.CellData}register(i){const n={id:this._nextCharacterJoinerId++,handler:i};return this._characterJoiners.push(n),n.id}deregister(i){for(let n=0;n<this._characterJoiners.length;n++)if(this._characterJoiners[n].id===i)return this._characterJoiners.splice(n,1),!0;return!1}getJoinedCharacters(i){if(this._characterJoiners.length===0)return[];const n=this._bufferService.buffer.lines.get(i);if(!n||n.length===0)return[];const f=[],S=n.translateToString(!0);let b=0,w=0,v=0,x=n.getFg(0),B=n.getBg(0);for(let P=0;P<n.getTrimmedLength();P++)if(n.loadCell(P,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==x||this._workCell.bg!==B){if(P-b>1){const M=this._getJoinedRanges(S,v,w,n,b);for(let A=0;A<M.length;A++)f.push(M[A])}b=P,v=w,x=this._workCell.fg,B=this._workCell.bg}w+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){const P=this._getJoinedRanges(S,v,w,n,b);for(let M=0;M<P.length;M++)f.push(P[M])}return f}_getJoinedRanges(i,n,f,S,b){const w=i.substring(n,f);let v=[];try{v=this._characterJoiners[0].handler(w)}catch(x){console.error(x)}for(let x=1;x<this._characterJoiners.length;x++)try{const B=this._characterJoiners[x].handler(w);for(let P=0;P<B.length;P++)sn._mergeRanges(v,B[P])}catch(B){console.error(B)}return this._stringRangesToCellRanges(v,S,b),v}_stringRangesToCellRanges(i,n,f){let S=0,b=!1,w=0,v=i[S];if(v){for(let x=f;x<this._bufferService.cols;x++){const B=n.getWidth(x),P=n.getString(x).length||_.WHITESPACE_CELL_CHAR.length;if(B!==0){if(!b&&v[0]<=w&&(v[0]=x,b=!0),v[1]<=w){if(v[1]=x,v=i[++S],!v)break;v[0]<=w?(v[0]=x,b=!0):b=!1}w+=P}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(i,n){let f=!1;for(let S=0;S<i.length;S++){const b=i[S];if(f){if(n[1]<=b[0])return i[S-1][1]=n[1],i;if(n[1]<=b[1])return i[S-1][1]=Math.max(n[1],b[1]),i.splice(S,1),i;i.splice(S,1),S--}else{if(n[1]<=b[0])return i.splice(S,0,n),i;if(n[1]<=b[1])return b[0]=Math.min(n[0],b[0]),i;n[0]<b[1]&&(b[0]=Math.min(n[0],b[0]),f=!0)}}return f?i[i.length-1][1]=n[1]:i.push(n),i}};s.CharacterJoinerService=r=h([u(0,C.IBufferService)],r)},5114:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;const h=o(844),u=o(8460),l=o(3656);class _ extends h.Disposable{constructor(d,r,a){super(),this._textarea=d,this._window=r,this.mainDocument=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new g(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(i=>this._screenDprMonitor.setWindow(i))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(d){this._window!==d&&(this._window=d,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}s.CoreBrowserService=_;class g extends h.Disposable{constructor(d){super(),this._parentWindow=d,this._windowResizeListener=this.register(new h.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,h.toDisposable)(()=>this.clearListener()))}setWindow(d){this._parentWindow=d,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,l.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var d;this._outerListener&&((d=this._resolutionMediaMatchList)==null||d.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkProviderService=void 0;const h=o(844);class u extends h.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,h.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(_){return this.linkProviders.push(_),{dispose:()=>{const g=this.linkProviders.indexOf(_);g!==-1&&this.linkProviders.splice(g,1)}}}}s.LinkProviderService=u},8934:function(y,s,o){var h=this&&this.__decorate||function(C,d,r,a){var i,n=arguments.length,f=n<3?d:a===null?a=Object.getOwnPropertyDescriptor(d,r):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(C,d,r,a);else for(var S=C.length-1;S>=0;S--)(i=C[S])&&(f=(n<3?i(f):n>3?i(d,r,f):i(d,r))||f);return n>3&&f&&Object.defineProperty(d,r,f),f},u=this&&this.__param||function(C,d){return function(r,a){d(r,a,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const l=o(4725),_=o(9806);let g=s.MouseService=class{constructor(C,d){this._renderService=C,this._charSizeService=d}getCoords(C,d,r,a,i){return(0,_.getCoords)(window,C,d,r,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,i)}getMouseReportCoords(C,d){const r=(0,_.getCoordsRelativeToElement)(window,C,d);if(this._charSizeService.hasValidSize)return r[0]=Math.min(Math.max(r[0],0),this._renderService.dimensions.css.canvas.width-1),r[1]=Math.min(Math.max(r[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};s.MouseService=g=h([u(0,l.IRenderService),u(1,l.ICharSizeService)],g)},3230:function(y,s,o){var h=this&&this.__decorate||function(i,n,f,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,f,S);else for(var x=i.length-1;x>=0;x--)(b=i[x])&&(v=(w<3?b(v):w>3?b(n,f,v):b(n,f))||v);return w>3&&v&&Object.defineProperty(n,f,v),v},u=this&&this.__param||function(i,n){return function(f,S){n(f,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const l=o(6193),_=o(4725),g=o(8460),C=o(844),d=o(7226),r=o(2585);let a=s.RenderService=class extends C.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(i,n,f,S,b,w,v,x){super(),this._rowCount=i,this._charSizeService=S,this._renderer=this.register(new C.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._observerDisposable=this.register(new C.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new g.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new g.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new g.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new g.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new l.RenderDebouncer((B,P)=>this._renderRows(B,P),v),this.register(this._renderDebouncer),this.register(v.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var B;return(B=this._renderer.value)==null?void 0:B.clear()})),this.register(f.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(b.onDecorationRegistered(()=>this._fullRefresh())),this.register(b.onDecorationRemoved(()=>this._fullRefresh())),this.register(f.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(f.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register(x.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(v.window,n),this.register(v.onWindowChange(B=>this._registerIntersectionObserver(B,n)))}_registerIntersectionObserver(i,n){if("IntersectionObserver"in i){const f=new i.IntersectionObserver(S=>this._handleIntersectionChange(S[S.length-1]),{threshold:0});f.observe(n),this._observerDisposable.value=(0,C.toDisposable)(()=>f.disconnect())}}_handleIntersectionChange(i){this._isPaused=i.isIntersecting===void 0?i.intersectionRatio===0:!i.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(i,n,f=!1){this._isPaused?this._needsFullRefresh=!0:(f||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(i,n,this._rowCount))}_renderRows(i,n){this._renderer.value&&(i=Math.min(i,this._rowCount-1),n=Math.min(n,this._rowCount-1),this._renderer.value.renderRows(i,n),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:i,end:n}),this._onRender.fire({start:i,end:n}),this._isNextRenderRedrawOnly=!0)}resize(i,n){this._rowCount=n,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(i){this._renderer.value=i,this._renderer.value&&(this._renderer.value.onRequestRedraw(n=>this.refreshRows(n.start,n.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(i){return this._renderDebouncer.addRefreshCallback(i)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var i,n;this._renderer.value&&((n=(i=this._renderer.value).clearTextureAtlas)==null||n.call(i),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(i,n){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var f;return(f=this._renderer.value)==null?void 0:f.handleResize(i,n)}):this._renderer.value.handleResize(i,n),this._fullRefresh())}handleCharSizeChanged(){var i;(i=this._renderer.value)==null||i.handleCharSizeChanged()}handleBlur(){var i;(i=this._renderer.value)==null||i.handleBlur()}handleFocus(){var i;(i=this._renderer.value)==null||i.handleFocus()}handleSelectionChanged(i,n,f){var S;this._selectionState.start=i,this._selectionState.end=n,this._selectionState.columnSelectMode=f,(S=this._renderer.value)==null||S.handleSelectionChanged(i,n,f)}handleCursorMove(){var i;(i=this._renderer.value)==null||i.handleCursorMove()}clear(){var i;(i=this._renderer.value)==null||i.clear()}};s.RenderService=a=h([u(2,r.IOptionsService),u(3,_.ICharSizeService),u(4,r.IDecorationService),u(5,r.IBufferService),u(6,_.ICoreBrowserService),u(7,_.IThemeService)],a)},9312:function(y,s,o){var h=this&&this.__decorate||function(v,x,B,P){var M,A=arguments.length,F=A<3?x:P===null?P=Object.getOwnPropertyDescriptor(x,B):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(v,x,B,P);else for(var N=v.length-1;N>=0;N--)(M=v[N])&&(F=(A<3?M(F):A>3?M(x,B,F):M(x,B))||F);return A>3&&F&&Object.defineProperty(x,B,F),F},u=this&&this.__param||function(v,x){return function(B,P){x(B,P,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const l=o(9806),_=o(9504),g=o(456),C=o(4725),d=o(8460),r=o(844),a=o(6114),i=o(4841),n=o(511),f=o(2585),S="",b=new RegExp(S,"g");let w=s.SelectionService=class extends r.Disposable{constructor(v,x,B,P,M,A,F,N,j){super(),this._element=v,this._screenElement=x,this._linkifier=B,this._bufferService=P,this._coreService=M,this._mouseService=A,this._optionsService=F,this._renderService=N,this._coreBrowserService=j,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new n.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=q=>this._handleMouseMove(q),this._mouseUpListener=q=>this._handleMouseUp(q),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(q=>this._handleTrim(q)),this.register(this._bufferService.buffers.onBufferActivate(q=>this._handleBufferActivate(q))),this.enable(),this._model=new g.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,r.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const v=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!v||!x||v[0]===x[0]&&v[1]===x[1])}get selectionText(){const v=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;if(!v||!x)return"";const B=this._bufferService.buffer,P=[];if(this._activeSelectionMode===3){if(v[0]===x[0])return"";const M=v[0]<x[0]?v[0]:x[0],A=v[0]<x[0]?x[0]:v[0];for(let F=v[1];F<=x[1];F++){const N=B.translateBufferLineToString(F,!0,M,A);P.push(N)}}else{const M=v[1]===x[1]?x[0]:void 0;P.push(B.translateBufferLineToString(v[1],!0,v[0],M));for(let A=v[1]+1;A<=x[1]-1;A++){const F=B.lines.get(A),N=B.translateBufferLineToString(A,!0);F!=null&&F.isWrapped?P[P.length-1]+=N:P.push(N)}if(v[1]!==x[1]){const A=B.lines.get(x[1]),F=B.translateBufferLineToString(x[1],!0,0,x[0]);A&&A.isWrapped?P[P.length-1]+=F:P.push(F)}}return P.map(M=>M.replace(b," ")).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),a.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){const x=this._getMouseBufferCoords(v),B=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!!(B&&P&&x)&&this._areCoordsInSelection(x,B,P)}isCellInSelection(v,x){const B=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!(!B||!P)&&this._areCoordsInSelection([v,x],B,P)}_areCoordsInSelection(v,x,B){return v[1]>x[1]&&v[1]<B[1]||x[1]===B[1]&&v[1]===x[1]&&v[0]>=x[0]&&v[0]<B[0]||x[1]<B[1]&&v[1]===B[1]&&v[0]<B[0]||x[1]<B[1]&&v[1]===x[1]&&v[0]>=x[0]}_selectWordAtCursor(v,x){var M,A;const B=(A=(M=this._linkifier.currentLink)==null?void 0:M.link)==null?void 0:A.range;if(B)return this._model.selectionStart=[B.start.x-1,B.start.y-1],this._model.selectionStartLength=(0,i.getRangeLength)(B,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const P=this._getMouseBufferCoords(v);return!!P&&(this._selectWordAt(P,x),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,x){this._model.clearSelection(),v=Math.max(v,0),x=Math.min(x,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,x],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){const x=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(x)return x[0]--,x[1]--,x[1]+=this._bufferService.buffer.ydisp,x}_getMouseEventScrollAmount(v){let x=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1];const B=this._renderService.dimensions.css.canvas.height;return x>=0&&x<=B?0:(x>B&&(x-=B),x=Math.min(Math.max(x,-50),50),x/=50,x/Math.abs(x)+Math.round(14*x))}shouldForceSelection(v){return a.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const x=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);x&&x.length!==this._model.selectionStart[0]&&x.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){const x=this._getMouseBufferCoords(v);x&&(this._activeSelectionMode=2,this._selectLineAt(x[1]))}shouldColumnSelect(v){return v.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;const x=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){const P=B.lines.get(this._model.selectionEnd[1]);P&&P.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}x&&x[0]===this._model.selectionEnd[0]&&x[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){const x=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&x<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const B=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&B[0]!==void 0&&B[1]!==void 0){const P=(0,_.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(P,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const v=this._model.finalSelectionStart,x=this._model.finalSelectionEnd,B=!(!v||!x||v[0]===x[0]&&v[1]===x[1]);B?v&&x&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&x[0]===this._oldSelectionEnd[0]&&x[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,x,B)):this._oldHasSelection&&this._fireOnSelectionChange(v,x,B)}_fireOnSelectionChange(v,x,B){this._oldSelectionStart=v,this._oldSelectionEnd=x,this._oldHasSelection=B,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(x=>this._handleTrim(x))}_convertViewportColToCharacterIndex(v,x){let B=x;for(let P=0;x>=P;P++){const M=v.loadCell(P,this._workCell).getChars().length;this._workCell.getWidth()===0?B--:M>1&&x!==P&&(B+=M-1)}return B}setSelection(v,x,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,x],this._model.selectionStartLength=B,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,x,B=!0,P=!0){if(v[0]>=this._bufferService.cols)return;const M=this._bufferService.buffer,A=M.lines.get(v[1]);if(!A)return;const F=M.translateBufferLineToString(v[1],!1);let N=this._convertViewportColToCharacterIndex(A,v[0]),j=N;const q=v[0]-N;let K=0,L=0,k=0,T=0;if(F.charAt(N)===" "){for(;N>0&&F.charAt(N-1)===" ";)N--;for(;j<F.length&&F.charAt(j+1)===" ";)j++}else{let ee=v[0],ie=v[0];A.getWidth(ee)===0&&(K++,ee--),A.getWidth(ie)===2&&(L++,ie++);const le=A.getString(ie).length;for(le>1&&(T+=le-1,j+=le-1);ee>0&&N>0&&!this._isCharWordSeparator(A.loadCell(ee-1,this._workCell));){A.loadCell(ee-1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===0?(K++,ee--):H>1&&(k+=H-1,N-=H-1),N--,ee--}for(;ie<A.length&&j+1<F.length&&!this._isCharWordSeparator(A.loadCell(ie+1,this._workCell));){A.loadCell(ie+1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===2?(L++,ie++):H>1&&(T+=H-1,j+=H-1),j++,ie++}}j++;let I=N+q-K+k,G=Math.min(this._bufferService.cols,j-N+K+L-k-T);if(x||F.slice(N,j).trim()!==""){if(B&&I===0&&A.getCodePoint(0)!==32){const ee=M.lines.get(v[1]-1);if(ee&&A.isWrapped&&ee.getCodePoint(this._bufferService.cols-1)!==32){const ie=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(ie){const le=this._bufferService.cols-ie.start;I-=le,G+=le}}}if(P&&I+G===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const ee=M.lines.get(v[1]+1);if(ee!=null&&ee.isWrapped&&ee.getCodePoint(0)!==32){const ie=this._getWordAt([0,v[1]+1],!1,!1,!0);ie&&(G+=ie.length)}}return{start:I,length:G}}}_selectWordAt(v,x){const B=this._getWordAt(v,x);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[B.start,v[1]],this._model.selectionStartLength=B.length}}_selectToWordAt(v){const x=this._getWordAt(v,!0);if(x){let B=v[1];for(;x.start<0;)x.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;x.start+x.length>this._bufferService.cols;)x.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?x.start:x.start+x.length,B]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){const x=this._bufferService.buffer.getWrappedRangeForLine(v),B={start:{x:0,y:x.first},end:{x:this._bufferService.cols-1,y:x.last}};this._model.selectionStart=[0,x.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,i.getRangeLength)(B,this._bufferService.cols)}};s.SelectionService=w=h([u(3,f.IBufferService),u(4,f.ICoreService),u(5,C.IMouseService),u(6,f.IOptionsService),u(7,C.IRenderService),u(8,C.ICoreBrowserService)],w)},4725:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ILinkProviderService=s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const h=o(8343);s.ICharSizeService=(0,h.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),s.IMouseService=(0,h.createDecorator)("MouseService"),s.IRenderService=(0,h.createDecorator)("RenderService"),s.ISelectionService=(0,h.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,h.createDecorator)("ThemeService"),s.ILinkProviderService=(0,h.createDecorator)("LinkProviderService")},6731:function(y,s,o){var h=this&&this.__decorate||function(w,v,x,B){var P,M=arguments.length,A=M<3?v:B===null?B=Object.getOwnPropertyDescriptor(v,x):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(w,v,x,B);else for(var F=w.length-1;F>=0;F--)(P=w[F])&&(A=(M<3?P(A):M>3?P(v,x,A):P(v,x))||A);return M>3&&A&&Object.defineProperty(v,x,A),A},u=this&&this.__param||function(w,v){return function(x,B){v(x,B,w)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const l=o(7239),_=o(8055),g=o(8460),C=o(844),d=o(2585),r=_.css.toColor("#ffffff"),a=_.css.toColor("#000000"),i=_.css.toColor("#ffffff"),n=_.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const w=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let x=0;x<216;x++){const B=v[x/36%6|0],P=v[x/6%6|0],M=v[x%6];w.push({css:_.channels.toCss(B,P,M),rgba:_.channels.toRgba(B,P,M)})}for(let x=0;x<24;x++){const B=8+10*x;w.push({css:_.channels.toCss(B,B,B),rgba:_.channels.toRgba(B,B,B)})}return w})());let S=s.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new g.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:r,background:a,cursor:i,cursorAccent:n,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:_.color.blend(a,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:_.color.blend(a,f),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(w={}){const v=this._colors;if(v.foreground=b(w.foreground,r),v.background=b(w.background,a),v.cursor=b(w.cursor,i),v.cursorAccent=b(w.cursorAccent,n),v.selectionBackgroundTransparent=b(w.selectionBackground,f),v.selectionBackgroundOpaque=_.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=b(w.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=_.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=w.selectionForeground?b(w.selectionForeground,_.NULL_COLOR):void 0,v.selectionForeground===_.NULL_COLOR&&(v.selectionForeground=void 0),_.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=_.color.opacity(v.selectionBackgroundTransparent,.3)),_.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=_.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=s.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=b(w.black,s.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=b(w.red,s.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=b(w.green,s.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=b(w.yellow,s.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=b(w.blue,s.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=b(w.magenta,s.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=b(w.cyan,s.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=b(w.white,s.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=b(w.brightBlack,s.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=b(w.brightRed,s.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=b(w.brightGreen,s.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=b(w.brightYellow,s.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=b(w.brightBlue,s.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=b(w.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=b(w.brightCyan,s.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=b(w.brightWhite,s.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){const x=Math.min(v.ansi.length-16,w.extendedAnsi.length);for(let B=0;B<x;B++)v.ansi[B+16]=b(w.extendedAnsi[B],s.DEFAULT_ANSI_COLORS[B+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(w,v){if(w!==void 0)try{return _.css.toColor(w)}catch{}return v}s.ThemeService=S=h([u(0,d.IOptionsService)],S)},6349:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const h=o(8460),u=o(844);class l extends u.Disposable{constructor(g){super(),this._maxLength=g,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(g){if(this._maxLength===g)return;const C=new Array(g);for(let d=0;d<Math.min(g,this.length);d++)C[d]=this._array[this._getCyclicIndex(d)];this._array=C,this._maxLength=g,this._startIndex=0}get length(){return this._length}set length(g){if(g>this._length)for(let C=this._length;C<g;C++)this._array[C]=void 0;this._length=g}get(g){return this._array[this._getCyclicIndex(g)]}set(g,C){this._array[this._getCyclicIndex(g)]=C}push(g){this._array[this._getCyclicIndex(this._length)]=g,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(g,C,...d){if(C){for(let r=g;r<this._length-C;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+C)];this._length-=C,this.onDeleteEmitter.fire({index:g,amount:C})}for(let r=this._length-1;r>=g;r--)this._array[this._getCyclicIndex(r+d.length)]=this._array[this._getCyclicIndex(r)];for(let r=0;r<d.length;r++)this._array[this._getCyclicIndex(g+r)]=d[r];if(d.length&&this.onInsertEmitter.fire({index:g,amount:d.length}),this._length+d.length>this._maxLength){const r=this._length+d.length-this._maxLength;this._startIndex+=r,this._length=this._maxLength,this.onTrimEmitter.fire(r)}else this._length+=d.length}trimStart(g){g>this._length&&(g=this._length),this._startIndex+=g,this._length-=g,this.onTrimEmitter.fire(g)}shiftElements(g,C,d){if(!(C<=0)){if(g<0||g>=this._length)throw new Error("start argument out of range");if(g+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let a=C-1;a>=0;a--)this.set(g+a+d,this.get(g+a));const r=g+C+d-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let r=0;r<C;r++)this.set(g+r+d,this.get(g+r))}}_getCyclicIndex(g){return(this._startIndex+g)%this._maxLength}}s.CircularList=l},1439:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function o(h,u=5){if(typeof h!="object")return h;const l=Array.isArray(h)?[]:{};for(const _ in h)l[_]=u<=1?h[_]:h[_]&&o(h[_],u-1);return l}},8055:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let o=0,h=0,u=0,l=0;var _,g,C,d,r;function a(n){const f=n.toString(16);return f.length<2?"0"+f:f}function i(n,f){return n<f?(f+.05)/(n+.05):(n+.05)/(f+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(n){n.toCss=function(f,S,b,w){return w!==void 0?`#${a(f)}${a(S)}${a(b)}${a(w)}`:`#${a(f)}${a(S)}${a(b)}`},n.toRgba=function(f,S,b,w=255){return(f<<24|S<<16|b<<8|w)>>>0},n.toColor=function(f,S,b,w){return{css:n.toCss(f,S,b,w),rgba:n.toRgba(f,S,b,w)}}}(_||(s.channels=_={})),function(n){function f(S,b){return l=Math.round(255*b),[o,h,u]=r.toChannels(S.rgba),{css:_.toCss(o,h,u,l),rgba:_.toRgba(o,h,u,l)}}n.blend=function(S,b){if(l=(255&b.rgba)/255,l===1)return{css:b.css,rgba:b.rgba};const w=b.rgba>>24&255,v=b.rgba>>16&255,x=b.rgba>>8&255,B=S.rgba>>24&255,P=S.rgba>>16&255,M=S.rgba>>8&255;return o=B+Math.round((w-B)*l),h=P+Math.round((v-P)*l),u=M+Math.round((x-M)*l),{css:_.toCss(o,h,u),rgba:_.toRgba(o,h,u)}},n.isOpaque=function(S){return(255&S.rgba)==255},n.ensureContrastRatio=function(S,b,w){const v=r.ensureContrastRatio(S.rgba,b.rgba,w);if(v)return _.toColor(v>>24&255,v>>16&255,v>>8&255)},n.opaque=function(S){const b=(255|S.rgba)>>>0;return[o,h,u]=r.toChannels(b),{css:_.toCss(o,h,u),rgba:b}},n.opacity=f,n.multiplyOpacity=function(S,b){return l=255&S.rgba,f(S,l*b/255)},n.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(g||(s.color=g={})),function(n){let f,S;try{const b=document.createElement("canvas");b.width=1,b.height=1;const w=b.getContext("2d",{willReadFrequently:!0});w&&(f=w,f.globalCompositeOperation="copy",S=f.createLinearGradient(0,0,1,1))}catch{}n.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return o=parseInt(b.slice(1,2).repeat(2),16),h=parseInt(b.slice(2,3).repeat(2),16),u=parseInt(b.slice(3,4).repeat(2),16),_.toColor(o,h,u);case 5:return o=parseInt(b.slice(1,2).repeat(2),16),h=parseInt(b.slice(2,3).repeat(2),16),u=parseInt(b.slice(3,4).repeat(2),16),l=parseInt(b.slice(4,5).repeat(2),16),_.toColor(o,h,u,l);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const w=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return o=parseInt(w[1]),h=parseInt(w[2]),u=parseInt(w[3]),l=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),_.toColor(o,h,u,l);if(!f||!S)throw new Error("css.toColor: Unsupported css format");if(f.fillStyle=S,f.fillStyle=b,typeof f.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(f.fillRect(0,0,1,1),[o,h,u,l]=f.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:_.toRgba(o,h,u,l),css:b}}}(C||(s.css=C={})),function(n){function f(S,b,w){const v=S/255,x=b/255,B=w/255;return .2126*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.7152*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.0722*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))}n.relativeLuminance=function(S){return f(S>>16&255,S>>8&255,255&S)},n.relativeLuminance2=f}(d||(s.rgb=d={})),function(n){function f(b,w,v){const x=b>>24&255,B=b>>16&255,P=b>>8&255;let M=w>>24&255,A=w>>16&255,F=w>>8&255,N=i(d.relativeLuminance2(M,A,F),d.relativeLuminance2(x,B,P));for(;N<v&&(M>0||A>0||F>0);)M-=Math.max(0,Math.ceil(.1*M)),A-=Math.max(0,Math.ceil(.1*A)),F-=Math.max(0,Math.ceil(.1*F)),N=i(d.relativeLuminance2(M,A,F),d.relativeLuminance2(x,B,P));return(M<<24|A<<16|F<<8|255)>>>0}function S(b,w,v){const x=b>>24&255,B=b>>16&255,P=b>>8&255;let M=w>>24&255,A=w>>16&255,F=w>>8&255,N=i(d.relativeLuminance2(M,A,F),d.relativeLuminance2(x,B,P));for(;N<v&&(M<255||A<255||F<255);)M=Math.min(255,M+Math.ceil(.1*(255-M))),A=Math.min(255,A+Math.ceil(.1*(255-A))),F=Math.min(255,F+Math.ceil(.1*(255-F))),N=i(d.relativeLuminance2(M,A,F),d.relativeLuminance2(x,B,P));return(M<<24|A<<16|F<<8|255)>>>0}n.blend=function(b,w){if(l=(255&w)/255,l===1)return w;const v=w>>24&255,x=w>>16&255,B=w>>8&255,P=b>>24&255,M=b>>16&255,A=b>>8&255;return o=P+Math.round((v-P)*l),h=M+Math.round((x-M)*l),u=A+Math.round((B-A)*l),_.toRgba(o,h,u)},n.ensureContrastRatio=function(b,w,v){const x=d.relativeLuminance(b>>8),B=d.relativeLuminance(w>>8);if(i(x,B)<v){if(B<x){const A=f(b,w,v),F=i(x,d.relativeLuminance(A>>8));if(F<v){const N=S(b,w,v);return F>i(x,d.relativeLuminance(N>>8))?A:N}return A}const P=S(b,w,v),M=i(x,d.relativeLuminance(P>>8));if(M<v){const A=f(b,w,v);return M>i(x,d.relativeLuminance(A>>8))?P:A}return P}},n.reduceLuminance=f,n.increaseLuminance=S,n.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]}}(r||(s.rgba=r={})),s.toPaddedHex=a,s.contrastRatio=i},8969:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const h=o(844),u=o(2585),l=o(4348),_=o(7866),g=o(744),C=o(7302),d=o(6975),r=o(8460),a=o(1753),i=o(1480),n=o(7994),f=o(9282),S=o(5435),b=o(5981),w=o(2660);let v=!1;class x extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new r.EventEmitter),this._onScroll.event(P=>{var M;(M=this._onScrollApi)==null||M.fire(P.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(P){for(const M in P)this.optionsService.options[M]=P[M]}constructor(P){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new r.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new r.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new r.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new r.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new C.OptionsService(P)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(g.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(i.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(n.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,r.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,r.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,r.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,r.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(M=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(M=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((M,A)=>this._inputHandler.parse(M,A))),this.register((0,r.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(P,M){this._writeBuffer.write(P,M)}writeSync(P,M){this._logService.logLevel<=u.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(P,M)}input(P,M=!0){this.coreService.triggerDataEvent(P,M)}resize(P,M){isNaN(P)||isNaN(M)||(P=Math.max(P,g.MINIMUM_COLS),M=Math.max(M,g.MINIMUM_ROWS),this._bufferService.resize(P,M))}scroll(P,M=!1){this._bufferService.scroll(P,M)}scrollLines(P,M,A){this._bufferService.scrollLines(P,M,A)}scrollPages(P){this.scrollLines(P*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(P){const M=P-this._bufferService.buffer.ydisp;M!==0&&this.scrollLines(M)}registerEscHandler(P,M){return this._inputHandler.registerEscHandler(P,M)}registerDcsHandler(P,M){return this._inputHandler.registerDcsHandler(P,M)}registerCsiHandler(P,M){return this._inputHandler.registerCsiHandler(P,M)}registerOscHandler(P,M){return this._inputHandler.registerOscHandler(P,M)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let P=!1;const M=this.optionsService.rawOptions.windowsPty;M&&M.buildNumber!==void 0&&M.buildNumber!==void 0?P=M.backend==="conpty"&&M.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(P=!0),P?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const P=[];P.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),P.push(this.registerCsiHandler({final:"H"},()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)(()=>{for(const M of P)M.dispose()})}}}s.CoreTerminal=x},8460:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===o)return void this._listeners.splice(h,1)}}})),this._event}fire(o,h){const u=[];for(let l=0;l<this._listeners.length;l++)u.push(this._listeners[l]);for(let l=0;l<u.length;l++)u[l].call(void 0,o,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(o,h){return o(u=>h.fire(u))},s.runAndSubscribe=function(o,h){return h(void 0),o(u=>h(u))}},5435:function(y,s,o){var h=this&&this.__decorate||function(K,L,k,T){var I,G=arguments.length,ee=G<3?L:T===null?T=Object.getOwnPropertyDescriptor(L,k):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(K,L,k,T);else for(var ie=K.length-1;ie>=0;ie--)(I=K[ie])&&(ee=(G<3?I(ee):G>3?I(L,k,ee):I(L,k))||ee);return G>3&&ee&&Object.defineProperty(L,k,ee),ee},u=this&&this.__param||function(K,L){return function(k,T){L(k,T,K)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const l=o(2584),_=o(7116),g=o(2015),C=o(844),d=o(482),r=o(8437),a=o(8460),i=o(643),n=o(511),f=o(3734),S=o(2585),b=o(1480),w=o(6242),v=o(6351),x=o(5941),B={"(":0,")":1,"*":2,"+":3,"-":1,".":2},P=131072;function M(K,L){if(K>24)return L.setWinLines||!1;switch(K){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var A;(function(K){K[K.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",K[K.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(s.WindowsOptionsReportType=A={}));let F=0;class N extends C.Disposable{getAttrData(){return this._curAttrData}constructor(L,k,T,I,G,ee,ie,le,H=new g.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=k,this._coreService=T,this._logService=I,this._optionsService=G,this._oscLinkService=ee,this._coreMouseService=ie,this._unicodeService=le,this._parser=H,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new n.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new j(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._parser.setCsiHandlerFallback((D,J)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(D),params:J.toArray()})}),this._parser.setEscHandlerFallback(D=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(D)})}),this._parser.setExecuteHandlerFallback(D=>{this._logService.debug("Unknown EXECUTE code: ",{code:D})}),this._parser.setOscHandlerFallback((D,J,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:D,action:J,data:U})}),this._parser.setDcsHandlerFallback((D,J,U)=>{J==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(D),action:J,payload:U})}),this._parser.setPrintHandler((D,J,U)=>this.print(D,J,U)),this._parser.registerCsiHandler({final:"@"},D=>this.insertChars(D)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},D=>this.scrollLeft(D)),this._parser.registerCsiHandler({final:"A"},D=>this.cursorUp(D)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},D=>this.scrollRight(D)),this._parser.registerCsiHandler({final:"B"},D=>this.cursorDown(D)),this._parser.registerCsiHandler({final:"C"},D=>this.cursorForward(D)),this._parser.registerCsiHandler({final:"D"},D=>this.cursorBackward(D)),this._parser.registerCsiHandler({final:"E"},D=>this.cursorNextLine(D)),this._parser.registerCsiHandler({final:"F"},D=>this.cursorPrecedingLine(D)),this._parser.registerCsiHandler({final:"G"},D=>this.cursorCharAbsolute(D)),this._parser.registerCsiHandler({final:"H"},D=>this.cursorPosition(D)),this._parser.registerCsiHandler({final:"I"},D=>this.cursorForwardTab(D)),this._parser.registerCsiHandler({final:"J"},D=>this.eraseInDisplay(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},D=>this.eraseInDisplay(D,!0)),this._parser.registerCsiHandler({final:"K"},D=>this.eraseInLine(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},D=>this.eraseInLine(D,!0)),this._parser.registerCsiHandler({final:"L"},D=>this.insertLines(D)),this._parser.registerCsiHandler({final:"M"},D=>this.deleteLines(D)),this._parser.registerCsiHandler({final:"P"},D=>this.deleteChars(D)),this._parser.registerCsiHandler({final:"S"},D=>this.scrollUp(D)),this._parser.registerCsiHandler({final:"T"},D=>this.scrollDown(D)),this._parser.registerCsiHandler({final:"X"},D=>this.eraseChars(D)),this._parser.registerCsiHandler({final:"Z"},D=>this.cursorBackwardTab(D)),this._parser.registerCsiHandler({final:"`"},D=>this.charPosAbsolute(D)),this._parser.registerCsiHandler({final:"a"},D=>this.hPositionRelative(D)),this._parser.registerCsiHandler({final:"b"},D=>this.repeatPrecedingCharacter(D)),this._parser.registerCsiHandler({final:"c"},D=>this.sendDeviceAttributesPrimary(D)),this._parser.registerCsiHandler({prefix:">",final:"c"},D=>this.sendDeviceAttributesSecondary(D)),this._parser.registerCsiHandler({final:"d"},D=>this.linePosAbsolute(D)),this._parser.registerCsiHandler({final:"e"},D=>this.vPositionRelative(D)),this._parser.registerCsiHandler({final:"f"},D=>this.hVPosition(D)),this._parser.registerCsiHandler({final:"g"},D=>this.tabClear(D)),this._parser.registerCsiHandler({final:"h"},D=>this.setMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"h"},D=>this.setModePrivate(D)),this._parser.registerCsiHandler({final:"l"},D=>this.resetMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"l"},D=>this.resetModePrivate(D)),this._parser.registerCsiHandler({final:"m"},D=>this.charAttributes(D)),this._parser.registerCsiHandler({final:"n"},D=>this.deviceStatus(D)),this._parser.registerCsiHandler({prefix:"?",final:"n"},D=>this.deviceStatusPrivate(D)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},D=>this.softReset(D)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},D=>this.setCursorStyle(D)),this._parser.registerCsiHandler({final:"r"},D=>this.setScrollRegion(D)),this._parser.registerCsiHandler({final:"s"},D=>this.saveCursor(D)),this._parser.registerCsiHandler({final:"t"},D=>this.windowOptions(D)),this._parser.registerCsiHandler({final:"u"},D=>this.restoreCursor(D)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},D=>this.insertColumns(D)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},D=>this.deleteColumns(D)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},D=>this.selectProtected(D)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},D=>this.requestMode(D,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},D=>this.requestMode(D,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new w.OscHandler(D=>(this.setTitle(D),this.setIconName(D),!0))),this._parser.registerOscHandler(1,new w.OscHandler(D=>this.setIconName(D))),this._parser.registerOscHandler(2,new w.OscHandler(D=>this.setTitle(D))),this._parser.registerOscHandler(4,new w.OscHandler(D=>this.setOrReportIndexedColor(D))),this._parser.registerOscHandler(8,new w.OscHandler(D=>this.setHyperlink(D))),this._parser.registerOscHandler(10,new w.OscHandler(D=>this.setOrReportFgColor(D))),this._parser.registerOscHandler(11,new w.OscHandler(D=>this.setOrReportBgColor(D))),this._parser.registerOscHandler(12,new w.OscHandler(D=>this.setOrReportCursorColor(D))),this._parser.registerOscHandler(104,new w.OscHandler(D=>this.restoreIndexedColor(D))),this._parser.registerOscHandler(110,new w.OscHandler(D=>this.restoreFgColor(D))),this._parser.registerOscHandler(111,new w.OscHandler(D=>this.restoreBgColor(D))),this._parser.registerOscHandler(112,new w.OscHandler(D=>this.restoreCursorColor(D))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const D in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:D},()=>this.selectCharset("("+D)),this._parser.registerEscHandler({intermediates:")",final:D},()=>this.selectCharset(")"+D)),this._parser.registerEscHandler({intermediates:"*",final:D},()=>this.selectCharset("*"+D)),this._parser.registerEscHandler({intermediates:"+",final:D},()=>this.selectCharset("+"+D)),this._parser.registerEscHandler({intermediates:"-",final:D},()=>this.selectCharset("-"+D)),this._parser.registerEscHandler({intermediates:".",final:D},()=>this.selectCharset("."+D)),this._parser.registerEscHandler({intermediates:"/",final:D},()=>this.selectCharset("/"+D));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(D=>(this._logService.error("Parsing error: ",D),D)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new v.DcsHandler((D,J)=>this.requestStatusString(D,J)))}_preserveStack(L,k,T,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=k,this._parseStack.decodedLength=T,this._parseStack.position=I}_logSlowResolvingAsync(L){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([L,new Promise((k,T)=>setTimeout(()=>T("#SLOW_TIMEOUT"),5e3))]).catch(k=>{if(k!=="#SLOW_TIMEOUT")throw k;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,k){let T,I=this._activeBuffer.x,G=this._activeBuffer.y,ee=0;const ie=this._parseStack.paused;if(ie){if(T=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,k))return this._logSlowResolvingAsync(T),T;I=this._parseStack.cursorStartX,G=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>P&&(ee=this._parseStack.position+P)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,D=>String.fromCharCode(D)).join("")}"`),typeof L=="string"?L.split("").map(D=>D.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<P&&(this._parseBuffer=new Uint32Array(Math.min(L.length,P))),ie||this._dirtyRowTracker.clearRange(),L.length>P)for(let D=ee;D<L.length;D+=P){const J=D+P<L.length?D+P:L.length,U=typeof L=="string"?this._stringDecoder.decode(L.substring(D,J),this._parseBuffer):this._utf8Decoder.decode(L.subarray(D,J),this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,U))return this._preserveStack(I,G,U,D),this._logSlowResolvingAsync(T),T}else if(!ie){const D=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,D))return this._preserveStack(I,G,D,0),this._logSlowResolvingAsync(T),T}this._activeBuffer.x===I&&this._activeBuffer.y===G||this._onCursorMove.fire();const le=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),H=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);H<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(H,this._bufferService.rows-1),Math.min(le,this._bufferService.rows-1))}print(L,k,T){let I,G;const ee=this._charsetService.charset,ie=this._optionsService.rawOptions.screenReaderMode,le=this._bufferService.cols,H=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,J=this._curAttrData;let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&T-k>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodepoint(this._activeBuffer.x-1,0,1,J);let se=this._parser.precedingJoinState;for(let R=k;R<T;++R){if(I=L[R],I<127&&ee){const V=ee[String.fromCharCode(I)];V&&(I=V.charCodeAt(0))}const O=this._unicodeService.charProperties(I,se);G=b.UnicodeService.extractWidth(O);const W=b.UnicodeService.extractShouldJoin(O),z=W?b.UnicodeService.extractWidth(se):0;if(se=O,ie&&this._onA11yChar.fire((0,d.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+G-z>le){if(H){const V=U;let $=this._activeBuffer.x-z;for(this._activeBuffer.x=z,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),z>0&&U instanceof r.BufferLine&&U.copyCellsFrom(V,$,0,z,!1);$<le;)V.setCellFromCodepoint($++,0,1,J)}else if(this._activeBuffer.x=le-1,G===2)continue}if(W&&this._activeBuffer.x){const V=U.getWidth(this._activeBuffer.x-1)?1:2;U.addCodepointToCell(this._activeBuffer.x-V,I,G);for(let $=G-z;--$>=0;)U.setCellFromCodepoint(this._activeBuffer.x++,0,0,J)}else if(D&&(U.insertCells(this._activeBuffer.x,G-z,this._activeBuffer.getNullCell(J)),U.getWidth(le-1)===2&&U.setCellFromCodepoint(le-1,i.NULL_CELL_CODE,i.NULL_CELL_WIDTH,J)),U.setCellFromCodepoint(this._activeBuffer.x++,I,G,J),G>0)for(;--G;)U.setCellFromCodepoint(this._activeBuffer.x++,0,0,J)}this._parser.precedingJoinState=se,this._activeBuffer.x<le&&T-k>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodepoint(this._activeBuffer.x,0,1,J),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,k){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,k):this._parser.registerCsiHandler(L,T=>!M(T.params[0],this._optionsService.rawOptions.windowOptions)||k(T))}registerDcsHandler(L,k){return this._parser.registerDcsHandler(L,new v.DcsHandler(k))}registerEscHandler(L,k){return this._parser.registerEscHandler(L,k)}registerOscHandler(L,k){return this._parser.registerOscHandler(L,new w.OscHandler(k))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);k.hasWidth(this._activeBuffer.x)&&!k.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,k){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+k):(this._activeBuffer.x=L,this._activeBuffer.y=k),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,k){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+k)}cursorUp(L){const k=this._activeBuffer.y-this._activeBuffer.scrollTop;return k>=0?this._moveCursor(0,-Math.min(k,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const k=this._activeBuffer.scrollBottom-this._activeBuffer.y;return k>=0?this._moveCursor(0,Math.min(k,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const k=L.params[0];return k===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:k===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let k=L.params[0]||1;for(;k--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let k=L.params[0]||1;for(;k--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const k=L.params[0];return k===1&&(this._curAttrData.bg|=536870912),k!==2&&k!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,k,T,I=!1,G=!1){const ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);ee.replaceCells(k,T,this._activeBuffer.getNullCell(this._eraseAttrData()),G),I&&(ee.isWrapped=!1)}_resetBufferLine(L,k=!1){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);T&&(T.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),k),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),T.isWrapped=!1)}eraseInDisplay(L,k=!1){let T;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,k);T<this._bufferService.rows;T++)this._resetBufferLine(T,k);this._dirtyRowTracker.markDirty(T);break;case 1:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T,0,this._activeBuffer.x+1,!0,k),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(T+1).isWrapped=!1);T--;)this._resetBufferLine(T,k);this._dirtyRowTracker.markDirty(0);break;case 2:for(T=this._bufferService.rows,this._dirtyRowTracker.markDirty(T-1);T--;)this._resetBufferLine(T,k);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(L,k=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,k);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,k);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,k)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let k=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,G=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;k--;)this._activeBuffer.lines.splice(G-1,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let k=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;k--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let k=L.params[0]||1;for(;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let k=L.params[0]||1;for(;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(r.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=L.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);I.deleteCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=L.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);I.insertCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=L.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);I.insertCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=L.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);I.deleteCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){const k=this._parser.precedingJoinState;if(!k)return!0;const T=L.params[0]||1,I=b.UnicodeService.extractWidth(k),G=this._activeBuffer.x-I,ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(G),ie=new Uint32Array(ee.length*T);let le=0;for(let D=0;D<ee.length;){const J=ee.codePointAt(D)||0;ie[le++]=J,D+=J>65535?2:1}let H=le;for(let D=1;D<T;++D)ie.copyWithin(H,0,le),H+=le;return this.print(ie,0,H),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let k=0;k<L.length;k++)switch(L.params[k]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let k=0;k<L.length;k++)switch(L.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let k=0;k<L.length;k++)switch(L.params[k]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let k=0;k<L.length;k++)switch(L.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[k]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,k){const T=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:G}=this._coreMouseService,ee=this._coreService,{buffers:ie,cols:le}=this._bufferService,{active:H,alt:D}=ie,J=this._optionsService.rawOptions,U=W=>W?1:2,se=L.params[0];return R=se,O=k?se===2?4:se===4?U(ee.modes.insertMode):se===12?3:se===20?U(J.convertEol):0:se===1?U(T.applicationCursorKeys):se===3?J.windowOptions.setWinLines?le===80?2:le===132?1:0:0:se===6?U(T.origin):se===7?U(T.wraparound):se===8?3:se===9?U(I==="X10"):se===12?U(J.cursorBlink):se===25?U(!ee.isCursorHidden):se===45?U(T.reverseWraparound):se===66?U(T.applicationKeypad):se===67?4:se===1e3?U(I==="VT200"):se===1002?U(I==="DRAG"):se===1003?U(I==="ANY"):se===1004?U(T.sendFocus):se===1005?4:se===1006?U(G==="SGR"):se===1015?4:se===1016?U(G==="SGR_PIXELS"):se===1048?1:se===47||se===1047||se===1049?U(H===D):se===2004?U(T.bracketedPasteMode):0,ee.triggerDataEvent(`${l.C0.ESC}[${k?"":"?"}${R};${O}$y`),!0;var R,O}_updateAttrColor(L,k,T,I,G){return k===2?(L|=50331648,L&=-16777216,L|=f.AttributeData.fromColorRGB([T,I,G])):k===5&&(L&=-50331904,L|=33554432|255&T),L}_extractColor(L,k,T){const I=[0,0,-1,0,0,0];let G=0,ee=0;do{if(I[ee+G]=L.params[k+ee],L.hasSubParams(k+ee)){const ie=L.getSubParams(k+ee);let le=0;do I[1]===5&&(G=1),I[ee+le+1+G]=ie[le];while(++le<ie.length&&le+ee+1+G<I.length);break}if(I[1]===5&&ee+G>=2||I[1]===2&&ee+G>=5)break;I[1]&&(G=1)}while(++ee+k<L.length&&ee+G<I.length);for(let ie=2;ie<I.length;++ie)I[ie]===-1&&(I[ie]=0);switch(I[0]){case 38:T.fg=this._updateAttrColor(T.fg,I[1],I[3],I[4],I[5]);break;case 48:T.bg=this._updateAttrColor(T.bg,I[1],I[3],I[4],I[5]);break;case 58:T.extended=T.extended.clone(),T.extended.underlineColor=this._updateAttrColor(T.extended.underlineColor,I[1],I[3],I[4],I[5])}return ee}_processUnderline(L,k){k.extended=k.extended.clone(),(!~L||L>5)&&(L=1),k.extended.underlineStyle=L,k.fg|=268435456,L===0&&(k.fg&=-268435457),k.updateExtended()}_processSGR0(L){L.fg=r.DEFAULT_ATTR_DATA.fg,L.bg=r.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const k=L.length;let T;const I=this._curAttrData;for(let G=0;G<k;G++)T=L.params[G],T>=30&&T<=37?(I.fg&=-50331904,I.fg|=16777216|T-30):T>=40&&T<=47?(I.bg&=-50331904,I.bg|=16777216|T-40):T>=90&&T<=97?(I.fg&=-50331904,I.fg|=16777224|T-90):T>=100&&T<=107?(I.bg&=-50331904,I.bg|=16777224|T-100):T===0?this._processSGR0(I):T===1?I.fg|=134217728:T===3?I.bg|=67108864:T===4?(I.fg|=268435456,this._processUnderline(L.hasSubParams(G)?L.getSubParams(G)[0]:1,I)):T===5?I.fg|=536870912:T===7?I.fg|=67108864:T===8?I.fg|=1073741824:T===9?I.fg|=2147483648:T===2?I.bg|=134217728:T===21?this._processUnderline(2,I):T===22?(I.fg&=-134217729,I.bg&=-134217729):T===23?I.bg&=-67108865:T===24?(I.fg&=-268435457,this._processUnderline(0,I)):T===25?I.fg&=-536870913:T===27?I.fg&=-67108865:T===28?I.fg&=-1073741825:T===29?I.fg&=2147483647:T===39?(I.fg&=-67108864,I.fg|=16777215&r.DEFAULT_ATTR_DATA.fg):T===49?(I.bg&=-67108864,I.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):T===38||T===48||T===58?G+=this._extractColor(L,G,I):T===53?I.bg|=1073741824:T===55?I.bg&=-1073741825:T===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):T===100?(I.fg&=-67108864,I.fg|=16777215&r.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",T);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const k=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${k};${T}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const k=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${k};${T}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const k=L.params[0]||1;switch(k){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const T=k%2==1;return this._optionsService.options.cursorBlink=T,!0}setScrollRegion(L){const k=L.params[0]||1;let T;return(L.length<2||(T=L.params[1])>this._bufferService.rows||T===0)&&(T=this._bufferService.rows),T>k&&(this._activeBuffer.scrollTop=k-1,this._activeBuffer.scrollBottom=T-1,this._setCursor(0,0)),!0}windowOptions(L){if(!M(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const k=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:k!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:k!==0&&k!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),k!==0&&k!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:k!==0&&k!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),k!==0&&k!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const k=[],T=L.split(";");for(;T.length>1;){const I=T.shift(),G=T.shift();if(/^\d+$/.exec(I)){const ee=parseInt(I);if(q(ee))if(G==="?")k.push({type:0,index:ee});else{const ie=(0,x.parseColor)(G);ie&&k.push({type:1,index:ee,color:ie})}}}return k.length&&this._onColor.fire(k),!0}setHyperlink(L){const k=L.split(";");return!(k.length<2)&&(k[1]?this._createHyperlink(k[0],k[1]):!k[0]&&this._finishHyperlink())}_createHyperlink(L,k){this._getCurrentLinkId()&&this._finishHyperlink();const T=L.split(":");let I;const G=T.findIndex(ee=>ee.startsWith("id="));return G!==-1&&(I=T[G].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:k}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,k){const T=L.split(";");for(let I=0;I<T.length&&!(k>=this._specialColors.length);++I,++k)if(T[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[k]}]);else{const G=(0,x.parseColor)(T[I]);G&&this._onColor.fire([{type:1,index:this._specialColors[k],color:G}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const k=[],T=L.split(";");for(let I=0;I<T.length;++I)if(/^\d+$/.exec(T[I])){const G=parseInt(T[I]);q(G)&&k.push({type:2,index:G})}return k.length&&this._onColor.fire(k),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(B[L[0]],_.CHARSETS[L[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new n.CellData;L.content=4194373,L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let k=0;k<this._bufferService.rows;++k){const T=this._activeBuffer.ybase+this._activeBuffer.y+k,I=this._activeBuffer.lines.get(T);I&&(I.fill(L),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,k){const T=this._bufferService.buffer,I=this._optionsService.rawOptions;return(G=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${G}${l.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${T.scrollTop+1};${T.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,k){this._dirtyRowTracker.markRangeDirty(L,k)}}s.InputHandler=N;let j=class{constructor(K){this._bufferService=K,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(K){K<this.start?this.start=K:K>this.end&&(this.end=K)}markRangeDirty(K,L){K>L&&(F=K,K=L,L=F),K<this.start&&(this.start=K),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function q(K){return 0<=K&&K<256}j=h([u(0,S.IBufferService)],j)},844:(y,s)=>{function o(h){for(const u of h)u.dispose();h.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const u=this._disposables.indexOf(h);u!==-1&&this._disposables.splice(u,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var u;this._isDisposed||h===this._value||((u=this._value)==null||u.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)==null||h.dispose(),this._value=void 0}},s.toDisposable=function(h){return{dispose:h}},s.disposeArray=o,s.getDisposeArrayDisposable=function(h){return{dispose:()=>o(h)}}},1505:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(u,l,_){this._data[u]||(this._data[u]={}),this._data[u][l]=_}get(u,l){return this._data[u]?this._data[u][l]:void 0}clear(){this._data={}}}s.TwoKeyMap=o,s.FourKeyMap=class{constructor(){this._data=new o}set(h,u,l,_,g){this._data.get(h,u)||this._data.set(h,u,new o),this._data.get(h,u).set(l,_,g)}get(h,u,l,_){var g;return(g=this._data.get(h,u))==null?void 0:g.get(l,_)}clear(){this._data.clear()}}},6114:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof process<"u"&&"title"in process;const o=s.isNode?"node":navigator.userAgent,h=s.isNode?"node":navigator.platform;s.isFirefox=o.includes("Firefox"),s.isLegacyEdge=o.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(o),s.getSafariVersion=function(){if(!s.isSafari)return 0;const u=o.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),s.isIpad=h==="iPad",s.isIphone=h==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),s.isLinux=h.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(o)},6106:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let o=0;s.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(o=this._search(this._getKey(h)),this._array.splice(o,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const u=this._getKey(h);if(u===void 0||(o=this._search(u),o===-1)||this._getKey(this._array[o])!==u)return!1;do if(this._array[o]===h)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===u);return!1}*getKeyIterator(h){if(this._array.length!==0&&(o=this._search(h),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===h))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===h)}forEachByKey(h,u){if(this._array.length!==0&&(o=this._search(h),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===h))do u(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===h)}values(){return[...this._array].values()}_search(h){let u=0,l=this._array.length-1;for(;l>=u;){let _=u+l>>1;const g=this._getKey(this._array[_]);if(g>h)l=_-1;else{if(!(g<h)){for(;_>0&&this._getKey(this._array[_-1])===h;)_--;return _}u=_+1}}return u}}},7226:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const h=o(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(g){this._tasks.push(g),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(g){this._idleCallback=void 0;let C=0,d=0,r=g.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),d=Math.max(C,d),a=g.timeRemaining(),1.5*d>a)return r-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-C))}ms`),void this._start();r=a}this.clear()}}class l extends u{_requestCallback(g){return setTimeout(()=>g(this._createDeadline(16)))}_cancelCallback(g){clearTimeout(g)}_createDeadline(g){const C=Date.now()+g;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}s.PriorityTaskQueue=l,s.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:l,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const h=o(643);s.updateWindowsModeWrappedState=function(u){const l=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),_=l==null?void 0:l.get(u.cols-1),g=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);g&&_&&(g.isWrapped=_[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&_[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new o;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}s.AttributeData=o;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}get underlineVariantOffset(){const l=(3758096384&this._ext)>>29;return l<0?4294967288^l:l}set underlineVariantOffset(l){this._ext&=536870911,this._ext|=l<<29&3758096384}constructor(l=0,_=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=_}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=h},9092:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const h=o(6349),u=o(7226),l=o(3734),_=o(8437),g=o(4634),C=o(511),d=o(643),r=o(4863),a=o(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(i,n,f){this._hasScrollback=i,this._optionsService=n,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(i){return i?(this._nullCell.fg=i.fg,this._nullCell.bg=i.bg,this._nullCell.extended=i.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(i){return i?(this._whitespaceCell.fg=i.fg,this._whitespaceCell.bg=i.bg,this._whitespaceCell.extended=i.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(i,n){return new _.BufferLine(this._bufferService.cols,this.getNullCell(i),n)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const i=this.ybase+this.y-this.ydisp;return i>=0&&i<this._rows}_getCorrectBufferLength(i){if(!this._hasScrollback)return i;const n=i+this._optionsService.rawOptions.scrollback;return n>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:n}fillViewportRows(i){if(this.lines.length===0){i===void 0&&(i=_.DEFAULT_ATTR_DATA);let n=this._rows;for(;n--;)this.lines.push(this.getBlankLine(i))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(i,n){const f=this.getNullCell(_.DEFAULT_ATTR_DATA);let S=0;const b=this._getCorrectBufferLength(n);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<i)for(let v=0;v<this.lines.length;v++)S+=+this.lines.get(v).resize(i,f);let w=0;if(this._rows<n)for(let v=this._rows;v<n;v++)this.lines.length<n+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(i,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(i,f)));else for(let v=this._rows;v>n;v--)this.lines.length>n+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){const v=this.lines.length-b;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=b}this.x=Math.min(this.x,i-1),this.y=Math.min(this.y,n-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,i-1),this.scrollTop=0}if(this.scrollBottom=n-1,this._isReflowEnabled&&(this._reflow(i,n),this._cols>i))for(let w=0;w<this.lines.length;w++)S+=+this.lines.get(w).resize(i,f);this._cols=i,this._rows=n,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let i=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,i=!1);let n=0;for(;this._memoryCleanupPosition<this.lines.length;)if(n+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),n>100)return!0;return i}get _isReflowEnabled(){const i=this._optionsService.rawOptions.windowsPty;return i&&i.buildNumber?this._hasScrollback&&i.backend==="conpty"&&i.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(i,n){this._cols!==i&&(i>this._cols?this._reflowLarger(i,n):this._reflowSmaller(i,n))}_reflowLarger(i,n){const f=(0,g.reflowLargerGetLinesToRemove)(this.lines,this._cols,i,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(f.length>0){const S=(0,g.reflowLargerCreateNewLayout)(this.lines,f);(0,g.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(i,n,S.countRemoved)}}_reflowLargerAdjustViewport(i,n,f){const S=this.getNullCell(_.DEFAULT_ATTR_DATA);let b=f;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<n&&this.lines.push(new _.BufferLine(i,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)}_reflowSmaller(i,n){const f=this.getNullCell(_.DEFAULT_ATTR_DATA),S=[];let b=0;for(let w=this.lines.length-1;w>=0;w--){let v=this.lines.get(w);if(!v||!v.isWrapped&&v.getTrimmedLength()<=i)continue;const x=[v];for(;v.isWrapped&&w>0;)v=this.lines.get(--w),x.unshift(v);const B=this.ybase+this.y;if(B>=w&&B<w+x.length)continue;const P=x[x.length-1].getTrimmedLength(),M=(0,g.reflowSmallerGetNewLineLengths)(x,this._cols,i),A=M.length-x.length;let F;F=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const N=[];for(let T=0;T<A;T++){const I=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);N.push(I)}N.length>0&&(S.push({start:w+x.length+b,newLines:N}),b+=N.length),x.push(...N);let j=M.length-1,q=M[j];q===0&&(j--,q=M[j]);let K=x.length-A-1,L=P;for(;K>=0;){const T=Math.min(L,q);if(x[j]===void 0)break;if(x[j].copyCellsFrom(x[K],L-T,q-T,T,!0),q-=T,q===0&&(j--,q=M[j]),L-=T,L===0){K--;const I=Math.max(K,0);L=(0,g.getWrappedLineTrimmedLength)(x,I,this._cols)}}for(let T=0;T<x.length;T++)M[T]<i&&x[T].setCell(M[T],f);let k=A-F;for(;k-- >0;)this.ybase===0?this.y<n-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-n&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+n-1)}if(S.length>0){const w=[],v=[];for(let j=0;j<this.lines.length;j++)v.push(this.lines.get(j));const x=this.lines.length;let B=x-1,P=0,M=S[P];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let A=0;for(let j=Math.min(this.lines.maxLength-1,x+b-1);j>=0;j--)if(M&&M.start>B+A){for(let q=M.newLines.length-1;q>=0;q--)this.lines.set(j--,M.newLines[q]);j++,w.push({index:B+1,amount:M.newLines.length}),A+=M.newLines.length,M=S[++P]}else this.lines.set(j,v[B--]);let F=0;for(let j=w.length-1;j>=0;j--)w[j].index+=F,this.lines.onInsertEmitter.fire(w[j]),F+=w[j].amount;const N=Math.max(0,x+b-this.lines.maxLength);N>0&&this.lines.onTrimEmitter.fire(N)}}translateBufferLineToString(i,n,f=0,S){const b=this.lines.get(i);return b?b.translateToString(n,f,S):""}getWrappedRangeForLine(i){let n=i,f=i;for(;n>0&&this.lines.get(n).isWrapped;)n--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:n,last:f}}setupTabStops(i){for(i!=null?this.tabs[i]||(i=this.prevStop(i)):(this.tabs={},i=0);i<this._cols;i+=this._optionsService.rawOptions.tabStopWidth)this.tabs[i]=!0}prevStop(i){for(i==null&&(i=this.x);!this.tabs[--i]&&i>0;);return i>=this._cols?this._cols-1:i<0?0:i}nextStop(i){for(i==null&&(i=this.x);!this.tabs[++i]&&i<this._cols;);return i>=this._cols?this._cols-1:i<0?0:i}clearMarkers(i){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].line===i&&(this.markers[n].dispose(),this.markers.splice(n--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].dispose(),this.markers.splice(i--,1);this._isClearing=!1}addMarker(i){const n=new r.Marker(i);return this.markers.push(n),n.register(this.lines.onTrim(f=>{n.line-=f,n.line<0&&n.dispose()})),n.register(this.lines.onInsert(f=>{n.line>=f.index&&(n.line+=f.amount)})),n.register(this.lines.onDelete(f=>{n.line>=f.index&&n.line<f.index+f.amount&&n.dispose(),n.line>f.index&&(n.line-=f.amount)})),n.register(n.onDispose(()=>this._removeMarker(n))),n}_removeMarker(i){this._isClearing||this.markers.splice(this.markers.indexOf(i),1)}}},8437:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const h=o(3734),u=o(511),l=o(643),_=o(482);s.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let g=0;class C{constructor(r,a,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*r);const n=a||u.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let f=0;f<r;++f)this.setCell(f,n);this.length=r}get(r){const a=this._data[3*r+0],i=2097151&a;return[this._data[3*r+1],2097152&a?this._combined[r]:i?(0,_.stringFromCodePoint)(i):"",a>>22,2097152&a?this._combined[r].charCodeAt(this._combined[r].length-1):i]}set(r,a){this._data[3*r+1]=a[l.CHAR_DATA_ATTR_INDEX],a[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[r]=a[1],this._data[3*r+0]=2097152|r|a[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*r+0]=a[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(r){return this._data[3*r+0]>>22}hasWidth(r){return 12582912&this._data[3*r+0]}getFg(r){return this._data[3*r+1]}getBg(r){return this._data[3*r+2]}hasContent(r){return 4194303&this._data[3*r+0]}getCodePoint(r){const a=this._data[3*r+0];return 2097152&a?this._combined[r].charCodeAt(this._combined[r].length-1):2097151&a}isCombined(r){return 2097152&this._data[3*r+0]}getString(r){const a=this._data[3*r+0];return 2097152&a?this._combined[r]:2097151&a?(0,_.stringFromCodePoint)(2097151&a):""}isProtected(r){return 536870912&this._data[3*r+2]}loadCell(r,a){return g=3*r,a.content=this._data[g+0],a.fg=this._data[g+1],a.bg=this._data[g+2],2097152&a.content&&(a.combinedData=this._combined[r]),268435456&a.bg&&(a.extended=this._extendedAttrs[r]),a}setCell(r,a){2097152&a.content&&(this._combined[r]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[r]=a.extended),this._data[3*r+0]=a.content,this._data[3*r+1]=a.fg,this._data[3*r+2]=a.bg}setCellFromCodepoint(r,a,i,n){268435456&n.bg&&(this._extendedAttrs[r]=n.extended),this._data[3*r+0]=a|i<<22,this._data[3*r+1]=n.fg,this._data[3*r+2]=n.bg}addCodepointToCell(r,a,i){let n=this._data[3*r+0];2097152&n?this._combined[r]+=(0,_.stringFromCodePoint)(a):2097151&n?(this._combined[r]=(0,_.stringFromCodePoint)(2097151&n)+(0,_.stringFromCodePoint)(a),n&=-2097152,n|=2097152):n=a|4194304,i&&(n&=-12582913,n|=i<<22),this._data[3*r+0]=n}insertCells(r,a,i){if((r%=this.length)&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,i),a<this.length-r){const n=new u.CellData;for(let f=this.length-r-a-1;f>=0;--f)this.setCell(r+a+f,this.loadCell(r+f,n));for(let f=0;f<a;++f)this.setCell(r+f,i)}else for(let n=r;n<this.length;++n)this.setCell(n,i);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,i)}deleteCells(r,a,i){if(r%=this.length,a<this.length-r){const n=new u.CellData;for(let f=0;f<this.length-r-a;++f)this.setCell(r+f,this.loadCell(r+a+f,n));for(let f=this.length-a;f<this.length;++f)this.setCell(f,i)}else for(let n=r;n<this.length;++n)this.setCell(n,i);r&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,i),this.getWidth(r)!==0||this.hasContent(r)||this.setCellFromCodepoint(r,0,1,i)}replaceCells(r,a,i,n=!1){if(n)for(r&&this.getWidth(r-1)===2&&!this.isProtected(r-1)&&this.setCellFromCodepoint(r-1,0,1,i),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodepoint(a,0,1,i);r<a&&r<this.length;)this.isProtected(r)||this.setCell(r,i),r++;else for(r&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,i),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a,0,1,i);r<a&&r<this.length;)this.setCell(r++,i)}resize(r,a){if(r===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*r;if(r>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const n=new Uint32Array(i);n.set(this._data),this._data=n}for(let n=this.length;n<r;++n)this.setCell(n,a)}else{this._data=this._data.subarray(0,i);const n=Object.keys(this._combined);for(let S=0;S<n.length;S++){const b=parseInt(n[S],10);b>=r&&delete this._combined[b]}const f=Object.keys(this._extendedAttrs);for(let S=0;S<f.length;S++){const b=parseInt(f[S],10);b>=r&&delete this._extendedAttrs[b]}}return this.length=r,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const r=new Uint32Array(this._data.length);return r.set(this._data),this._data=r,1}return 0}fill(r,a=!1){if(a)for(let i=0;i<this.length;++i)this.isProtected(i)||this.setCell(i,r);else{this._combined={},this._extendedAttrs={};for(let i=0;i<this.length;++i)this.setCell(i,r)}}copyFrom(r){this.length!==r.length?this._data=new Uint32Array(r._data):this._data.set(r._data),this.length=r.length,this._combined={};for(const a in r._combined)this._combined[a]=r._combined[a];this._extendedAttrs={};for(const a in r._extendedAttrs)this._extendedAttrs[a]=r._extendedAttrs[a];this.isWrapped=r.isWrapped}clone(){const r=new C(0);r._data=new Uint32Array(this._data),r.length=this.length;for(const a in this._combined)r._combined[a]=this._combined[a];for(const a in this._extendedAttrs)r._extendedAttrs[a]=this._extendedAttrs[a];return r.isWrapped=this.isWrapped,r}getTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0])return r+(this._data[3*r+0]>>22);return 0}getNoBgTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0]||50331648&this._data[3*r+2])return r+(this._data[3*r+0]>>22);return 0}copyCellsFrom(r,a,i,n,f){const S=r._data;if(f)for(let w=n-1;w>=0;w--){for(let v=0;v<3;v++)this._data[3*(i+w)+v]=S[3*(a+w)+v];268435456&S[3*(a+w)+2]&&(this._extendedAttrs[i+w]=r._extendedAttrs[a+w])}else for(let w=0;w<n;w++){for(let v=0;v<3;v++)this._data[3*(i+w)+v]=S[3*(a+w)+v];268435456&S[3*(a+w)+2]&&(this._extendedAttrs[i+w]=r._extendedAttrs[a+w])}const b=Object.keys(r._combined);for(let w=0;w<b.length;w++){const v=parseInt(b[w],10);v>=a&&(this._combined[v-a+i]=r._combined[v])}}translateToString(r,a,i,n){a=a??0,i=i??this.length,r&&(i=Math.min(i,this.getTrimmedLength())),n&&(n.length=0);let f="";for(;a<i;){const S=this._data[3*a+0],b=2097151&S,w=2097152&S?this._combined[a]:b?(0,_.stringFromCodePoint)(b):l.WHITESPACE_CELL_CHAR;if(f+=w,n)for(let v=0;v<w.length;++v)n.push(a);a+=S>>22||1}return n&&n.push(a),f}}s.BufferLine=C},4841:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(o,h){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return h*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(y,s)=>{function o(h,u,l){if(u===h.length-1)return h[u].getTrimmedLength();const _=!h[u].hasContent(l-1)&&h[u].getWidth(l-1)===1,g=h[u+1].getWidth(0)===2;return _&&g?l-1:l}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(h,u,l,_,g){const C=[];for(let d=0;d<h.length-1;d++){let r=d,a=h.get(++r);if(!a.isWrapped)continue;const i=[h.get(d)];for(;r<h.length&&a.isWrapped;)i.push(a),a=h.get(++r);if(_>=d&&_<r){d+=i.length-1;continue}let n=0,f=o(i,n,u),S=1,b=0;for(;S<i.length;){const v=o(i,S,u),x=v-b,B=l-f,P=Math.min(x,B);i[n].copyCellsFrom(i[S],b,f,P,!1),f+=P,f===l&&(n++,f=0),b+=P,b===v&&(S++,b=0),f===0&&n!==0&&i[n-1].getWidth(l-1)===2&&(i[n].copyCellsFrom(i[n-1],l-1,f++,1,!1),i[n-1].setCell(l-1,g))}i[n].replaceCells(f,l,g);let w=0;for(let v=i.length-1;v>0&&(v>n||i[v].getTrimmedLength()===0);v--)w++;w>0&&(C.push(d+i.length-w),C.push(w)),d+=i.length-1}return C},s.reflowLargerCreateNewLayout=function(h,u){const l=[];let _=0,g=u[_],C=0;for(let d=0;d<h.length;d++)if(g===d){const r=u[++_];h.onDeleteEmitter.fire({index:d-C,amount:r}),d+=r-1,C+=r,g=u[++_]}else l.push(d);return{layout:l,countRemoved:C}},s.reflowLargerApplyNewLayout=function(h,u){const l=[];for(let _=0;_<u.length;_++)l.push(h.get(u[_]));for(let _=0;_<l.length;_++)h.set(_,l[_]);h.length=u.length},s.reflowSmallerGetNewLineLengths=function(h,u,l){const _=[],g=h.map((a,i)=>o(h,i,u)).reduce((a,i)=>a+i);let C=0,d=0,r=0;for(;r<g;){if(g-r<l){_.push(g-r);break}C+=l;const a=o(h,d,u);C>a&&(C-=a,d++);const i=h[d].getWidth(C-1)===2;i&&C--;const n=i?l-1:l;_.push(n),r+=n}return _},s.getWrappedLineTrimmedLength=o},5295:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const h=o(8460),u=o(844),l=o(9092);class _ extends u.Disposable{constructor(C,d){super(),this._optionsService=C,this._bufferService=d,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,d){this._normal.resize(C,d),this._alt.resize(C,d),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}s.BufferSet=_},511:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const h=o(482),u=o(643),l=o(3734);class _ extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const d=new _;return d.setFromCharData(C),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(C[u.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(C[u.CHAR_DATA_CHAR_INDEX].length===2){const r=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){const a=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(r-55296)+a-56320+65536|C[u.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[u.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=C[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=_},643:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const h=o(8460),u=o(844);class l{get id(){return this._id}constructor(g){this.line=g,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(g){return this._disposables.push(g),g}}s.Marker=l,l._nextId=1},7116:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},s.CHARSETS.A={"#":""},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},s.CHARSETS.C=s.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.E=s.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},s.CHARSETS.H=s.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(y,s)=>{var o,h,u;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(o||(s.C0=o={})),function(l){l.PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC=""}(h||(s.C1=h={})),function(l){l.ST=`${o.ESC}\\`}(u||(s.C1_ESCAPED=u={}))},7399:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const h=o(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(l,_,g,C){const d={type:0,cancel:!1,key:void 0},r=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?d.key=_?h.C0.ESC+"OA":h.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?d.key=_?h.C0.ESC+"OD":h.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?d.key=_?h.C0.ESC+"OC":h.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(d.key=_?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:d.key=l.ctrlKey?"\b":h.C0.DEL,l.altKey&&(d.key=h.C0.ESC+d.key);break;case 9:if(l.shiftKey){d.key=h.C0.ESC+"[Z";break}d.key=h.C0.HT,d.cancel=!0;break;case 13:d.key=l.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,d.cancel=!0;break;case 27:d.key=h.C0.ESC,l.altKey&&(d.key=h.C0.ESC+h.C0.ESC),d.cancel=!0;break;case 37:if(l.metaKey)break;r?(d.key=h.C0.ESC+"[1;"+(r+1)+"D",d.key===h.C0.ESC+"[1;3D"&&(d.key=h.C0.ESC+(g?"b":"[1;5D"))):d.key=_?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(l.metaKey)break;r?(d.key=h.C0.ESC+"[1;"+(r+1)+"C",d.key===h.C0.ESC+"[1;3C"&&(d.key=h.C0.ESC+(g?"f":"[1;5C"))):d.key=_?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(l.metaKey)break;r?(d.key=h.C0.ESC+"[1;"+(r+1)+"A",g||d.key!==h.C0.ESC+"[1;3A"||(d.key=h.C0.ESC+"[1;5A")):d.key=_?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(l.metaKey)break;r?(d.key=h.C0.ESC+"[1;"+(r+1)+"B",g||d.key!==h.C0.ESC+"[1;3B"||(d.key=h.C0.ESC+"[1;5B")):d.key=_?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(d.key=h.C0.ESC+"[2~");break;case 46:d.key=r?h.C0.ESC+"[3;"+(r+1)+"~":h.C0.ESC+"[3~";break;case 36:d.key=r?h.C0.ESC+"[1;"+(r+1)+"H":_?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:d.key=r?h.C0.ESC+"[1;"+(r+1)+"F":_?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:l.shiftKey?d.type=2:l.ctrlKey?d.key=h.C0.ESC+"[5;"+(r+1)+"~":d.key=h.C0.ESC+"[5~";break;case 34:l.shiftKey?d.type=3:l.ctrlKey?d.key=h.C0.ESC+"[6;"+(r+1)+"~":d.key=h.C0.ESC+"[6~";break;case 112:d.key=r?h.C0.ESC+"[1;"+(r+1)+"P":h.C0.ESC+"OP";break;case 113:d.key=r?h.C0.ESC+"[1;"+(r+1)+"Q":h.C0.ESC+"OQ";break;case 114:d.key=r?h.C0.ESC+"[1;"+(r+1)+"R":h.C0.ESC+"OR";break;case 115:d.key=r?h.C0.ESC+"[1;"+(r+1)+"S":h.C0.ESC+"OS";break;case 116:d.key=r?h.C0.ESC+"[15;"+(r+1)+"~":h.C0.ESC+"[15~";break;case 117:d.key=r?h.C0.ESC+"[17;"+(r+1)+"~":h.C0.ESC+"[17~";break;case 118:d.key=r?h.C0.ESC+"[18;"+(r+1)+"~":h.C0.ESC+"[18~";break;case 119:d.key=r?h.C0.ESC+"[19;"+(r+1)+"~":h.C0.ESC+"[19~";break;case 120:d.key=r?h.C0.ESC+"[20;"+(r+1)+"~":h.C0.ESC+"[20~";break;case 121:d.key=r?h.C0.ESC+"[21;"+(r+1)+"~":h.C0.ESC+"[21~";break;case 122:d.key=r?h.C0.ESC+"[23;"+(r+1)+"~":h.C0.ESC+"[23~";break;case 123:d.key=r?h.C0.ESC+"[24;"+(r+1)+"~":h.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(g&&!C||!l.altKey||l.metaKey)!g||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?d.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(d.key=h.C0.US),l.key==="@"&&(d.key=h.C0.NUL)):l.keyCode===65&&(d.type=1);else{const a=u[l.keyCode],i=a==null?void 0:a[l.shiftKey?1:0];if(i)d.key=h.C0.ESC+i;else if(l.keyCode>=65&&l.keyCode<=90){const n=l.ctrlKey?l.keyCode-64:l.keyCode+32;let f=String.fromCharCode(n);l.shiftKey&&(f=f.toUpperCase()),d.key=h.C0.ESC+f}else if(l.keyCode===32)d.key=h.C0.ESC+(l.ctrlKey?h.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let n=l.code.slice(3,4);l.shiftKey||(n=n.toLowerCase()),d.key=h.C0.ESC+n,d.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?d.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?d.key=h.C0.NUL:l.keyCode>=51&&l.keyCode<=55?d.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?d.key=h.C0.DEL:l.keyCode===219?d.key=h.C0.ESC:l.keyCode===220?d.key=h.C0.FS:l.keyCode===221&&(d.key=h.C0.GS)}return d}},482:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},s.utf32ToString=function(o,h=0,u=o.length){let l="";for(let _=h;_<u;++_){let g=o[_];g>65535?(g-=65536,l+=String.fromCharCode(55296+(g>>10))+String.fromCharCode(g%1024+56320)):l+=String.fromCharCode(g)}return l},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,h){const u=o.length;if(!u)return 0;let l=0,_=0;if(this._interim){const g=o.charCodeAt(_++);56320<=g&&g<=57343?h[l++]=1024*(this._interim-55296)+g-56320+65536:(h[l++]=this._interim,h[l++]=g),this._interim=0}for(let g=_;g<u;++g){const C=o.charCodeAt(g);if(55296<=C&&C<=56319){if(++g>=u)return this._interim=C,l;const d=o.charCodeAt(g);56320<=d&&d<=57343?h[l++]=1024*(C-55296)+d-56320+65536:(h[l++]=C,h[l++]=d)}else C!==65279&&(h[l++]=C)}return l}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,h){const u=o.length;if(!u)return 0;let l,_,g,C,d=0,r=0,a=0;if(this.interim[0]){let f=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let b,w=0;for(;(b=63&this.interim[++w])&&w<4;)S<<=6,S|=b;const v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,x=v-w;for(;a<x;){if(a>=u)return 0;if(b=o[a++],(192&b)!=128){a--,f=!0;break}this.interim[w++]=b,S<<=6,S|=63&b}f||(v===2?S<128?a--:h[d++]=S:v===3?S<2048||S>=55296&&S<=57343||S===65279||(h[d++]=S):S<65536||S>1114111||(h[d++]=S)),this.interim.fill(0)}const i=u-4;let n=a;for(;n<u;){for(;!(!(n<i)||128&(l=o[n])||128&(_=o[n+1])||128&(g=o[n+2])||128&(C=o[n+3]));)h[d++]=l,h[d++]=_,h[d++]=g,h[d++]=C,n+=4;if(l=o[n++],l<128)h[d++]=l;else if((224&l)==192){if(n>=u)return this.interim[0]=l,d;if(_=o[n++],(192&_)!=128){n--;continue}if(r=(31&l)<<6|63&_,r<128){n--;continue}h[d++]=r}else if((240&l)==224){if(n>=u)return this.interim[0]=l,d;if(_=o[n++],(192&_)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=_,d;if(g=o[n++],(192&g)!=128){n--;continue}if(r=(15&l)<<12|(63&_)<<6|63&g,r<2048||r>=55296&&r<=57343||r===65279)continue;h[d++]=r}else if((248&l)==240){if(n>=u)return this.interim[0]=l,d;if(_=o[n++],(192&_)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=_,d;if(g=o[n++],(192&g)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=_,this.interim[2]=g,d;if(C=o[n++],(192&C)!=128){n--;continue}if(r=(7&l)<<18|(63&_)<<12|(63&g)<<6|63&C,r<65536||r>1114111)continue;h[d++]=r}}return d}}},225:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const h=o(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;s.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let g=0;g<u.length;++g)_.fill(0,u[g][0],u[g][1]+1)}}wcwidth(g){return g<32?0:g<127?1:g<65536?_[g]:function(C,d){let r,a=0,i=d.length-1;if(C<d[0][0]||C>d[i][1])return!1;for(;i>=a;)if(r=a+i>>1,C>d[r][1])a=r+1;else{if(!(C<d[r][0]))return!0;i=r-1}return!1}(g,l)?0:g>=131072&&g<=196605||g>=196608&&g<=262141?2:1}charProperties(g,C){let d=this.wcwidth(g),r=d===0&&C!==0;if(r){const a=h.UnicodeService.extractWidth(C);a===0?r=!1:a>d&&(d=a)}return h.UnicodeService.createPropertyValue(0,d,r)}}},5981:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const h=o(8460),u=o(844);class l extends u.Disposable{constructor(g){super(),this._action=g,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(g,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);const r=this._callbacks.shift();r&&r()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(g,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(C)}_innerWrite(g=0,C=!0){const d=g||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const r=this._writeBuffer[this._bufferOffset],a=this._action(r,C);if(a){const n=f=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,f)):this._innerWrite(d,f);return void a.catch(f=>(queueMicrotask(()=>{throw f}),Promise.resolve(!1))).then(n)}const i=this._callbacks[this._bufferOffset];if(i&&i(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=l},5941:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function u(l,_){const g=l.toString(16),C=g.length<2?"0"+g:g;switch(_){case 4:return g[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}s.parseColor=function(l){if(!l)return;let _=l.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const g=o.exec(_);if(g){const C=g[1]?15:g[4]?255:g[7]?4095:65535;return[Math.round(parseInt(g[1]||g[4]||g[7]||g[10],16)/C*255),Math.round(parseInt(g[2]||g[5]||g[8]||g[11],16)/C*255),Math.round(parseInt(g[3]||g[6]||g[9]||g[12],16)/C*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),h.exec(_)&&[3,6,9,12].includes(_.length))){const g=_.length/3,C=[0,0,0];for(let d=0;d<3;++d){const r=parseInt(_.slice(g*d,g*d+g),16);C[d]=g===1?r<<4:g===2?r:g===3?r>>4:r>>8}return C}},s.toRgbString=function(l,_=16){const[g,C,d]=l;return`rgb:${u(g,_)}/${u(C,_)}/${u(d,_)}`}},5770:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const h=o(482),u=o(8742),l=o(5770),_=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(C,d){this._handlers[C]===void 0&&(this._handlers[C]=[]);const r=this._handlers[C];return r.push(d),{dispose:()=>{const a=r.indexOf(d);a!==-1&&r.splice(a,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(C,d){if(this.reset(),this._ident=C,this._active=this._handlers[C]||_,this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(C,d,r){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(C,d,r);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(C,d,r))}unhook(C,d=!0){if(this._active.length){let r=!1,a=this._active.length-1,i=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,r=d,i=this._stack.fallThrough,this._stack.paused=!1),!i&&r===!1){for(;a>=0&&(r=this._active[a].unhook(C),r!==!0);a--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,r;a--}for(;a>=0;a--)if(r=this._active[a].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",C);this._active=_,this._ident=0}};const g=new u.Params;g.addParam(0),s.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=g,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():g,this._data="",this._hitLimit=!1}put(C,d,r){this._hitLimit||(this._data+=(0,h.utf32ToString)(C,d,r),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let d=!1;if(this._hitLimit)d=!1;else if(C&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(r=>(this._params=g,this._data="",this._hitLimit=!1,r));return this._params=g,this._data="",this._hitLimit=!1,d}}},2015:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const h=o(844),u=o(8742),l=o(6242),_=o(6351);class g{constructor(a){this.table=new Uint8Array(a)}setDefault(a,i){this.table.fill(a<<4|i)}add(a,i,n,f){this.table[i<<8|a]=n<<4|f}addMany(a,i,n,f){for(let S=0;S<a.length;S++)this.table[i<<8|a[S]]=n<<4|f}}s.TransitionTable=g;const C=160;s.VT500_TRANSITION_TABLE=function(){const r=new g(4095),a=Array.apply(null,Array(256)).map((w,v)=>v),i=(w,v)=>a.slice(w,v),n=i(32,127),f=i(0,24);f.push(25),f.push.apply(f,i(28,32));const S=i(0,14);let b;for(b in r.setDefault(1,0),r.addMany(n,0,2,0),S)r.addMany([24,26,153,154],b,3,0),r.addMany(i(128,144),b,3,0),r.addMany(i(144,152),b,3,0),r.add(156,b,0,0),r.add(27,b,11,1),r.add(157,b,4,8),r.addMany([152,158,159],b,0,7),r.add(155,b,11,3),r.add(144,b,11,9);return r.addMany(f,0,3,0),r.addMany(f,1,3,1),r.add(127,1,0,1),r.addMany(f,8,0,8),r.addMany(f,3,3,3),r.add(127,3,0,3),r.addMany(f,4,3,4),r.add(127,4,0,4),r.addMany(f,6,3,6),r.addMany(f,5,3,5),r.add(127,5,0,5),r.addMany(f,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(n,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(i(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(n,7,0,7),r.addMany(f,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(i(64,127),3,7,0),r.addMany(i(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(i(48,60),4,8,4),r.addMany(i(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(i(32,64),6,0,6),r.add(127,6,0,6),r.addMany(i(64,127),6,0,0),r.addMany(i(32,48),3,9,5),r.addMany(i(32,48),5,9,5),r.addMany(i(48,64),5,0,6),r.addMany(i(64,127),5,7,0),r.addMany(i(32,48),4,9,5),r.addMany(i(32,48),1,9,2),r.addMany(i(32,48),2,9,2),r.addMany(i(48,127),2,10,0),r.addMany(i(48,80),1,10,0),r.addMany(i(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(i(96,127),1,10,0),r.add(80,1,11,9),r.addMany(f,9,0,9),r.add(127,9,0,9),r.addMany(i(28,32),9,0,9),r.addMany(i(32,48),9,9,12),r.addMany(i(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(f,11,0,11),r.addMany(i(32,128),11,0,11),r.addMany(i(28,32),11,0,11),r.addMany(f,10,0,10),r.add(127,10,0,10),r.addMany(i(28,32),10,0,10),r.addMany(i(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(i(32,48),10,9,12),r.addMany(f,12,0,12),r.add(127,12,0,12),r.addMany(i(28,32),12,0,12),r.addMany(i(32,48),12,9,12),r.addMany(i(48,64),12,0,11),r.addMany(i(64,127),12,12,13),r.addMany(i(64,127),10,12,13),r.addMany(i(64,127),9,12,13),r.addMany(f,13,13,13),r.addMany(n,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(C,0,2,0),r.add(C,8,5,8),r.add(C,6,0,6),r.add(C,11,0,11),r.add(C,13,13,13),r}();class d extends h.Disposable{constructor(a=s.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(i,n,f)=>{},this._executeHandlerFb=i=>{},this._csiHandlerFb=(i,n)=>{},this._escHandlerFb=i=>{},this._errorHandlerFb=i=>i,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(a,i=[64,126]){let n=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=a.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<a.intermediates.length;++S){const b=a.intermediates.charCodeAt(S);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=b}}if(a.final.length!==1)throw new Error("final must be a single byte");const f=a.final.charCodeAt(0);if(i[0]>f||f>i[1])throw new Error(`final must be in range ${i[0]} .. ${i[1]}`);return n<<=8,n|=f,n}identToString(a){const i=[];for(;a;)i.push(String.fromCharCode(255&a)),a>>=8;return i.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,i){const n=this._identifier(a,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);const f=this._escHandlers[n];return f.push(i),{dispose:()=>{const S=f.indexOf(i);S!==-1&&f.splice(S,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,i){this._executeHandlers[a.charCodeAt(0)]=i}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,i){const n=this._identifier(a);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);const f=this._csiHandlers[n];return f.push(i),{dispose:()=>{const S=f.indexOf(i);S!==-1&&f.splice(S,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,i){return this._dcsParser.registerHandler(this._identifier(a),i)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,i){return this._oscParser.registerHandler(a,i)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,i,n,f,S){this._parseStack.state=a,this._parseStack.handlers=i,this._parseStack.handlerPos=n,this._parseStack.transition=f,this._parseStack.chunkPos=S}parse(a,i,n){let f,S=0,b=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const v=this._parseStack.handlers;let x=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&x>-1){for(;x>=0&&(f=v[x](this._params),f!==!0);x--)if(f instanceof Promise)return this._parseStack.handlerPos=x,f}this._parseStack.handlers=[];break;case 4:if(n===!1&&x>-1){for(;x>=0&&(f=v[x](),f!==!0);x--)if(f instanceof Promise)return this._parseStack.handlerPos=x,f}this._parseStack.handlers=[];break;case 6:if(S=a[this._parseStack.chunkPos],f=this._dcsParser.unhook(S!==24&&S!==26,n),f)return f;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=a[this._parseStack.chunkPos],f=this._oscParser.end(S!==24&&S!==26,n),f)return f;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let v=w;v<i;++v){switch(S=a[v],b=this._transitions.table[this.currentState<<8|(S<160?S:C)],b>>4){case 2:for(let A=v+1;;++A){if(A>=i||(S=a[A])<32||S>126&&S<C){this._printHandler(a,v,A),v=A-1;break}if(++A>=i||(S=a[A])<32||S>126&&S<C){this._printHandler(a,v,A),v=A-1;break}if(++A>=i||(S=a[A])<32||S>126&&S<C){this._printHandler(a,v,A),v=A-1;break}if(++A>=i||(S=a[A])<32||S>126&&S<C){this._printHandler(a,v,A),v=A-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const x=this._csiHandlers[this._collect<<8|S];let B=x?x.length-1:-1;for(;B>=0&&(f=x[B](this._params),f!==!0);B--)if(f instanceof Promise)return this._preserveStack(3,x,B,b,v),f;B<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++v<i&&(S=a[v])>47&&S<60);v--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const P=this._escHandlers[this._collect<<8|S];let M=P?P.length-1:-1;for(;M>=0&&(f=P[M](),f!==!0);M--)if(f instanceof Promise)return this._preserveStack(4,P,M,b,v),f;M<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let A=v+1;;++A)if(A>=i||(S=a[A])===24||S===26||S===27||S>127&&S<C){this._dcsParser.put(a,v,A),v=A-1;break}break;case 14:if(f=this._dcsParser.unhook(S!==24&&S!==26),f)return this._preserveStack(6,[],0,b,v),f;S===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=v+1;;A++)if(A>=i||(S=a[A])<32||S>127&&S<C){this._oscParser.put(a,v,A),v=A-1;break}break;case 6:if(f=this._oscParser.end(S!==24&&S!==26),f)return this._preserveStack(5,[],0,b,v),f;S===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&b}}}s.EscapeSequenceParser=d},6242:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const h=o(5770),u=o(482),l=[];s.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,g){this._handlers[_]===void 0&&(this._handlers[_]=[]);const C=this._handlers[_];return C.push(g),{dispose:()=>{const d=C.indexOf(g);d!==-1&&C.splice(d,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,g,C){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(_,g,C);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(_,g,C))}start(){this.reset(),this._state=1}put(_,g,C){if(this._state!==3){if(this._state===1)for(;g<C;){const d=_[g++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&C-g>0&&this._put(_,g,C)}}end(_,g=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,d=this._active.length-1,r=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,C=g,r=this._stack.fallThrough,this._stack.paused=!1),!r&&C===!1){for(;d>=0&&(C=this._active[d].end(_),C!==!0);d--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,C;d--}for(;d>=0;d--)if(C=this._active[d].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",_);this._active=l,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,g,C){this._hitLimit||(this._data+=(0,u.utf32ToString)(_,g,C),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let g=!1;if(this._hitLimit)g=!1;else if(_&&(g=this._handler(this._data),g instanceof Promise))return g.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,g}}},8742:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const o=2147483647;class h{static fromArray(l){const _=new h;if(!l.length)return _;for(let g=Array.isArray(l[0])?1:0;g<l.length;++g){const C=l[g];if(Array.isArray(C))for(let d=0;d<C.length;++d)_.addSubParam(C[d]);else _.addParam(C)}return _}constructor(l=32,_=32){if(this.maxLength=l,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const l=new h(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let _=0;_<this.length;++_){l.push(this.params[_]);const g=this._subParamsIdx[_]>>8,C=255&this._subParamsIdx[_];C-g>0&&l.push(Array.prototype.slice.call(this._subParams,g,C))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>o?o:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>o?o:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const _=this._subParamsIdx[l]>>8,g=255&this._subParamsIdx[l];return g-_>0?this._subParams.subarray(_,g):null}getSubParamsAll(){const l={};for(let _=0;_<this.length;++_){const g=this._subParamsIdx[_]>>8,C=255&this._subParamsIdx[_];C-g>0&&(l[_]=this._subParams.slice(g,C))}return l}addDigit(l){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const g=this._digitIsSub?this._subParams:this.params,C=g[_-1];g[_-1]=~C?Math.min(10*C+l,o):l}}s.Params=h},5741:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,h){const u={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(u),h.dispose=()=>this._wrappedAddonDispose(u),h.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let h=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===o){h=u;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(h,1)}}},8771:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const h=o(3785),u=o(511);s.BufferApiView=class{constructor(l,_){this._buffer=l,this.type=_}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const _=this._buffer.lines.get(l);if(_)return new h.BufferLineApiView(_)}getNullCell(){return new u.CellData}}},3785:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const h=o(511);s.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,l){if(!(u<0||u>=this._line.length))return l?(this._line.loadCell(u,l),l):this._line.loadCell(u,new h.CellData)}translateToString(u,l,_){return this._line.translateToString(u,l,_)}}},8285:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const h=o(8771),u=o(8460),l=o(844);class _ extends l.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=_},7975:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,h){return this._core.registerCsiHandler(o,u=>h(u.toArray()))}addCsiHandler(o,h){return this.registerCsiHandler(o,h)}registerDcsHandler(o,h){return this._core.registerDcsHandler(o,(u,l)=>h(u,l.toArray()))}addDcsHandler(o,h){return this.registerDcsHandler(o,h)}registerEscHandler(o,h){return this._core.registerEscHandler(o,h)}addEscHandler(o,h){return this.registerEscHandler(o,h)}registerOscHandler(o,h){return this._core.registerOscHandler(o,h)}addOscHandler(o,h){return this.registerOscHandler(o,h)}}},7090:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(y,s,o){var h=this&&this.__decorate||function(r,a,i,n){var f,S=arguments.length,b=S<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,a,i,n);else for(var w=r.length-1;w>=0;w--)(f=r[w])&&(b=(S<3?f(b):S>3?f(a,i,b):f(a,i))||b);return S>3&&b&&Object.defineProperty(a,i,b),b},u=this&&this.__param||function(r,a){return function(i,n){a(i,n,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const l=o(8460),_=o(844),g=o(5295),C=o(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let d=s.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(r){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(r.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(r.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new g.BufferSet(r,this))}resize(r,a){this.cols=r,this.rows=a,this.buffers.resize(r,a),this._onResize.fire({cols:r,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(r,a=!1){const i=this.buffer;let n;n=this._cachedBlankLine,n&&n.length===this.cols&&n.getFg(0)===r.fg&&n.getBg(0)===r.bg||(n=i.getBlankLine(r,a),this._cachedBlankLine=n),n.isWrapped=a;const f=i.ybase+i.scrollTop,S=i.ybase+i.scrollBottom;if(i.scrollTop===0){const b=i.lines.isFull;S===i.lines.length-1?b?i.lines.recycle().copyFrom(n):i.lines.push(n.clone()):i.lines.splice(S+1,0,n.clone()),b?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const b=S-f+1;i.lines.shiftElements(f+1,b-1,-1),i.lines.set(S,n.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(r,a,i){const n=this.buffer;if(r<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else r+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);const f=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+r,n.ybase),0),f!==n.ydisp&&(a||this._onScroll.fire(n.ydisp))}};s.BufferService=d=h([u(0,C.IOptionsService)],d)},7994:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,h){this._charsets[o]=h,this.glevel===o&&(this.charset=h)}}},1753:function(y,s,o){var h=this&&this.__decorate||function(n,f,S,b){var w,v=arguments.length,x=v<3?f:b===null?b=Object.getOwnPropertyDescriptor(f,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,f,S,b);else for(var B=n.length-1;B>=0;B--)(w=n[B])&&(x=(v<3?w(x):v>3?w(f,S,x):w(f,S))||x);return v>3&&x&&Object.defineProperty(f,S,x),x},u=this&&this.__param||function(n,f){return function(S,b){f(S,b,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const l=o(2585),_=o(8460),g=o(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:n=>n.button!==4&&n.action===1&&(n.ctrl=!1,n.alt=!1,n.shift=!1,!0)},VT200:{events:19,restrict:n=>n.action!==32},DRAG:{events:23,restrict:n=>n.action!==32||n.button!==3},ANY:{events:31,restrict:n=>!0}};function d(n,f){let S=(n.ctrl?16:0)|(n.shift?4:0)|(n.alt?8:0);return n.button===4?(S|=64,S|=n.action):(S|=3&n.button,4&n.button&&(S|=64),8&n.button&&(S|=128),n.action===32?S|=32:n.action!==0||f||(S|=3)),S}const r=String.fromCharCode,a={DEFAULT:n=>{const f=[d(n,!1)+32,n.col+32,n.row+32];return f[0]>255||f[1]>255||f[2]>255?"":`\x1B[M${r(f[0])}${r(f[1])}${r(f[2])}`},SGR:n=>{const f=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${d(n,!0)};${n.col};${n.row}${f}`},SGR_PIXELS:n=>{const f=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${d(n,!0)};${n.x};${n.y}${f}`}};let i=s.CoreMouseService=class extends g.Disposable{constructor(n,f){super(),this._bufferService=n,this._coreService=f,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(C))this.addProtocol(S,C[S]);for(const S of Object.keys(a))this.addEncoding(S,a[S]);this.reset()}addProtocol(n,f){this._protocols[n]=f}addEncoding(n,f){this._encodings[n]=f}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(n){if(!this._protocols[n])throw new Error(`unknown protocol "${n}"`);this._activeProtocol=n,this._onProtocolChange.fire(this._protocols[n].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(n){if(!this._encodings[n])throw new Error(`unknown encoding "${n}"`);this._activeEncoding=n}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(n){if(n.col<0||n.col>=this._bufferService.cols||n.row<0||n.row>=this._bufferService.rows||n.button===4&&n.action===32||n.button===3&&n.action!==32||n.button!==4&&(n.action===2||n.action===3)||(n.col++,n.row++,n.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,n,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(n))return!1;const f=this._encodings[this._activeEncoding](n);return f&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(f):this._coreService.triggerDataEvent(f,!0)),this._lastEvent=n,!0}explainEvents(n){return{down:!!(1&n),up:!!(2&n),drag:!!(4&n),move:!!(8&n),wheel:!!(16&n)}}_equalEvents(n,f,S){if(S){if(n.x!==f.x||n.y!==f.y)return!1}else if(n.col!==f.col||n.row!==f.row)return!1;return n.button===f.button&&n.action===f.action&&n.ctrl===f.ctrl&&n.alt===f.alt&&n.shift===f.shift}};s.CoreMouseService=i=h([u(0,l.IBufferService),u(1,l.ICoreService)],i)},6975:function(y,s,o){var h=this&&this.__decorate||function(i,n,f,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,f,S);else for(var x=i.length-1;x>=0;x--)(b=i[x])&&(v=(w<3?b(v):w>3?b(n,f,v):b(n,f))||v);return w>3&&v&&Object.defineProperty(n,f,v),v},u=this&&this.__param||function(i,n){return function(f,S){n(f,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const l=o(1439),_=o(8460),g=o(844),C=o(2585),d=Object.freeze({insertMode:!1}),r=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=s.CoreService=class extends g.Disposable{constructor(i,n,f){super(),this._bufferService=i,this._logService=n,this._optionsService=f,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(d),this.decPrivateModes=(0,l.clone)(r)}reset(){this.modes=(0,l.clone)(d),this.decPrivateModes=(0,l.clone)(r)}triggerDataEvent(i,n=!1){if(this._optionsService.rawOptions.disableStdin)return;const f=this._bufferService.buffer;n&&this._optionsService.rawOptions.scrollOnUserInput&&f.ybase!==f.ydisp&&this._onRequestScrollToBottom.fire(),n&&this._onUserInput.fire(),this._logService.debug(`sending data "${i}"`,()=>i.split("").map(S=>S.charCodeAt(0))),this._onData.fire(i)}triggerBinaryEvent(i){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${i}"`,()=>i.split("").map(n=>n.charCodeAt(0))),this._onBinary.fire(i))}};s.CoreService=a=h([u(0,C.IBufferService),u(1,C.ILogService),u(2,C.IOptionsService)],a)},9074:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const h=o(8055),u=o(8460),l=o(844),_=o(6106);let g=0,C=0;class d extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(i=>i==null?void 0:i.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(i){if(i.marker.isDisposed)return;const n=new r(i);if(n){const f=n.marker.onDispose(()=>n.dispose());n.onDispose(()=>{n&&(this._decorations.delete(n)&&this._onDecorationRemoved.fire(n),f.dispose())}),this._decorations.insert(n),this._onDecorationRegistered.fire(n)}return n}reset(){for(const i of this._decorations.values())i.dispose();this._decorations.clear()}*getDecorationsAtCell(i,n,f){let S=0,b=0;for(const w of this._decorations.getKeyIterator(n))S=w.options.x??0,b=S+(w.options.width??1),i>=S&&i<b&&(!f||(w.options.layer??"bottom")===f)&&(yield w)}forEachDecorationAtCell(i,n,f,S){this._decorations.forEachByKey(n,b=>{g=b.options.x??0,C=g+(b.options.width??1),i>=g&&i<C&&(!f||(b.options.layer??"bottom")===f)&&S(b)})}}s.DecorationService=d;class r extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(i){super(),this.options=i,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=i.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const h=o(2585),u=o(8343);class l{constructor(...g){this._entries=new Map;for(const[C,d]of g)this.set(C,d)}set(g,C){const d=this._entries.get(g);return this._entries.set(g,C),d}forEach(g){for(const[C,d]of this._entries.entries())g(C,d)}has(g){return this._entries.has(g)}get(g){return this._entries.get(g)}}s.ServiceCollection=l,s.InstantiationService=class{constructor(){this._services=new l,this._services.set(h.IInstantiationService,this)}setService(_,g){this._services.set(_,g)}getService(_){return this._services.get(_)}createInstance(_,...g){const C=(0,u.getServiceDependencies)(_).sort((a,i)=>a.index-i.index),d=[];for(const a of C){const i=this._services.get(a.id);if(!i)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${a.id}.`);d.push(i)}const r=C.length>0?C[0].index:g.length;if(g.length!==r)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${r+1} conflicts with ${g.length} static arguments`);return new _(...g,...d)}}},7866:function(y,s,o){var h=this&&this.__decorate||function(r,a,i,n){var f,S=arguments.length,b=S<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,a,i,n);else for(var w=r.length-1;w>=0;w--)(f=r[w])&&(b=(S<3?f(b):S>3?f(a,i,b):f(a,i))||b);return S>3&&b&&Object.defineProperty(a,i,b),b},u=this&&this.__param||function(r,a){return function(i,n){a(i,n,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const l=o(844),_=o(2585),g={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let C,d=s.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(r){super(),this._optionsService=r,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=g[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(r){for(let a=0;a<r.length;a++)typeof r[a]=="function"&&(r[a]=r[a]())}_log(r,a,i){this._evalLazyOptionalParams(i),r.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...i)}trace(r,...a){var i;this._logLevel<=_.LogLevelEnum.TRACE&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.trace.bind(this._optionsService.options.logger))??console.log,r,a)}debug(r,...a){var i;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.debug.bind(this._optionsService.options.logger))??console.log,r,a)}info(r,...a){var i;this._logLevel<=_.LogLevelEnum.INFO&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.info.bind(this._optionsService.options.logger))??console.info,r,a)}warn(r,...a){var i;this._logLevel<=_.LogLevelEnum.WARN&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.warn.bind(this._optionsService.options.logger))??console.warn,r,a)}error(r,...a){var i;this._logLevel<=_.LogLevelEnum.ERROR&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.error.bind(this._optionsService.options.logger))??console.error,r,a)}};s.LogService=d=h([u(0,_.IOptionsService)],d),s.setTraceLogger=function(r){C=r},s.traceCall=function(r,a,i){if(typeof i.value!="function")throw new Error("not supported");const n=i.value;i.value=function(...f){if(C.logLevel!==_.LogLevelEnum.TRACE)return n.apply(this,f);C.trace(`GlyphRenderer#${n.name}(${f.map(b=>JSON.stringify(b)).join(", ")})`);const S=n.apply(this,f);return C.trace(`GlyphRenderer#${n.name} return`,S),S}}},7302:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const h=o(8460),u=o(844),l=o(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class g extends u.Disposable{constructor(d){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const r={...s.DEFAULT_OPTIONS};for(const a in d)if(a in r)try{const i=d[a];r[a]=this._sanitizeAndValidateOption(a,i)}catch(i){console.error(i)}this.rawOptions=r,this.options={...r},this._setupOptions(),this.register((0,u.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(d,r){return this.onOptionChange(a=>{a===d&&r(this.rawOptions[d])})}onMultipleOptionChange(d,r){return this.onOptionChange(a=>{d.indexOf(a)!==-1&&r()})}_setupOptions(){const d=a=>{if(!(a in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},r=(a,i)=>{if(!(a in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);i=this._sanitizeAndValidateOption(a,i),this.rawOptions[a]!==i&&(this.rawOptions[a]=i,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const i={get:d.bind(this,a),set:r.bind(this,a)};Object.defineProperty(this.options,a,i)}}_sanitizeAndValidateOption(d,r){switch(d){case"cursorStyle":if(r||(r=s.DEFAULT_OPTIONS[d]),!function(a){return a==="block"||a==="underline"||a==="bar"}(r))throw new Error(`"${r}" is not a valid value for ${d}`);break;case"wordSeparator":r||(r=s.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof r=="number"&&1<=r&&r<=1e3)break;r=_.includes(r)?r:s.DEFAULT_OPTIONS[d];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(`${d} cannot be less than 1, value: ${r}`);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${r}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${r}`);break;case"rows":case"cols":if(!r&&r!==0)throw new Error(`${d} must be numeric, value: ${r}`);break;case"windowsPty":r=r??{}}return r}}s.OptionsService=g},2660:function(y,s,o){var h=this&&this.__decorate||function(g,C,d,r){var a,i=arguments.length,n=i<3?C:r===null?r=Object.getOwnPropertyDescriptor(C,d):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(g,C,d,r);else for(var f=g.length-1;f>=0;f--)(a=g[f])&&(n=(i<3?a(n):i>3?a(C,d,n):a(C,d))||n);return i>3&&n&&Object.defineProperty(C,d,n),n},u=this&&this.__param||function(g,C){return function(d,r){C(d,r,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const l=o(2585);let _=s.OscLinkService=class{constructor(g){this._bufferService=g,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(g){const C=this._bufferService.buffer;if(g.id===void 0){const f=C.addMarker(C.ybase+C.y),S={data:g,id:this._nextId++,lines:[f]};return f.onDispose(()=>this._removeMarkerFromLink(S,f)),this._dataByLinkId.set(S.id,S),S.id}const d=g,r=this._getEntryIdKey(d),a=this._entriesWithId.get(r);if(a)return this.addLineToLink(a.id,C.ybase+C.y),a.id;const i=C.addMarker(C.ybase+C.y),n={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[i]};return i.onDispose(()=>this._removeMarkerFromLink(n,i)),this._entriesWithId.set(n.key,n),this._dataByLinkId.set(n.id,n),n.id}addLineToLink(g,C){const d=this._dataByLinkId.get(g);if(d&&d.lines.every(r=>r.line!==C)){const r=this._bufferService.buffer.addMarker(C);d.lines.push(r),r.onDispose(()=>this._removeMarkerFromLink(d,r))}}getLinkData(g){var C;return(C=this._dataByLinkId.get(g))==null?void 0:C.data}_getEntryIdKey(g){return`${g.id};;${g.uri}`}_removeMarkerFromLink(g,C){const d=g.lines.indexOf(C);d!==-1&&(g.lines.splice(d,1),g.lines.length===0&&(g.data.id!==void 0&&this._entriesWithId.delete(g.key),this._dataByLinkId.delete(g.id)))}};s.OscLinkService=_=h([u(0,l.IBufferService)],_)},8343:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const o="di$target",h="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(u){return u[h]||[]},s.createDecorator=function(u){if(s.serviceRegistry.has(u))return s.serviceRegistry.get(u);const l=function(_,g,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,r,a){r[o]===r?r[h].push({id:d,index:a}):(r[h]=[{id:d,index:a}],r[o]=r)})(l,_,C)};return l.toString=()=>u,s.serviceRegistry.set(u,l),l}},2585:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const h=o(8343);var u;s.IBufferService=(0,h.createDecorator)("BufferService"),s.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),s.ICoreService=(0,h.createDecorator)("CoreService"),s.ICharsetService=(0,h.createDecorator)("CharsetService"),s.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(u||(s.LogLevelEnum=u={})),s.ILogService=(0,h.createDecorator)("LogService"),s.IOptionsService=(0,h.createDecorator)("OptionsService"),s.IOscLinkService=(0,h.createDecorator)("OscLinkService"),s.IUnicodeService=(0,h.createDecorator)("UnicodeService"),s.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(y,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const h=o(8460),u=o(225);class l{static extractShouldJoin(g){return(1&g)!=0}static extractWidth(g){return g>>1&3}static extractCharKind(g){return g>>3}static createPropertyValue(g,C,d=!1){return(16777215&g)<<3|(3&C)<<1|(d?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const g=new u.UnicodeV6;this.register(g),this._active=g.version,this._activeProvider=g}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(g){if(!this._providers[g])throw new Error(`unknown Unicode version "${g}"`);this._active=g,this._activeProvider=this._providers[g],this._onChange.fire(g)}register(g){this._providers[g.version]=g}wcwidth(g){return this._activeProvider.wcwidth(g)}getStringCellWidth(g){let C=0,d=0;const r=g.length;for(let a=0;a<r;++a){let i=g.charCodeAt(a);if(55296<=i&&i<=56319){if(++a>=r)return C+this.wcwidth(i);const S=g.charCodeAt(a);56320<=S&&S<=57343?i=1024*(i-55296)+S-56320+65536:C+=this.wcwidth(S)}const n=this.charProperties(i,d);let f=l.extractWidth(n);l.extractShouldJoin(n)&&(f-=l.extractWidth(d)),C+=f,d=n}return C}charProperties(g,C){return this._activeProvider.charProperties(g,C)}}s.UnicodeService=l}},m={};function p(y){var s=m[y];if(s!==void 0)return s.exports;var o=m[y]={exports:{}};return c[y].call(o.exports,o,o.exports,p),o.exports}var E={};return(()=>{var y=E;Object.defineProperty(y,"__esModule",{value:!0}),y.Terminal=void 0;const s=p(9042),o=p(3236),h=p(844),u=p(5741),l=p(8285),_=p(7975),g=p(7090),C=["cols","rows"];class d extends h.Disposable{constructor(a){super(),this._core=this.register(new o.Terminal(a)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const i=f=>this._core.options[f],n=(f,S)=>{this._checkReadonlyOptions(f),this._core.options[f]=S};for(const f in this._core.options){const S={get:i.bind(this,f),set:n.bind(this,f)};Object.defineProperty(this._publicOptions,f,S)}}_checkReadonlyOptions(a){if(C.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new g.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let i="none";switch(this._core.coreMouseService.activeProtocol){case"X10":i="x10";break;case"VT200":i="vt200";break;case"DRAG":i="drag";break;case"ANY":i="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:i,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const i in a)this._publicOptions[i]=a[i]}blur(){this._core.blur()}focus(){this._core.focus()}input(a,i=!0){this._core.input(a,i)}resize(a,i){this._verifyIntegers(a,i),this._core.resize(a,i)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}attachCustomWheelEventHandler(a){this._core.attachCustomWheelEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){return this._checkProposedApi(),this._verifyPositiveIntegers(a.x??0,a.width??0,a.height??0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,i,n){this._verifyIntegers(a,i,n),this._core.select(a,i,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,i){this._verifyIntegers(a,i),this._core.selectLines(a,i)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,i){this._core.write(a,i)}writeln(a,i){this._core.write(a),this._core.write(`\r
`,i)}paste(a){this._core.paste(a)}refresh(a,i){this._verifyIntegers(a,i),this._core.refresh(a,i)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return s}_verifyIntegers(...a){for(const i of a)if(i===1/0||isNaN(i)||i%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const i of a)if(i&&(i===1/0||isNaN(i)||i%1!=0||i<0))throw new Error("This API only accepts positive integers")}}y.Terminal=d})(),E})())})(tn);var Oa=tn.exports,rn={exports:{}};(function(e,t){(function(c,m){e.exports=m()})(self,()=>(()=>{var c={};return(()=>{var m=c;Object.defineProperty(m,"__esModule",{value:!0}),m.FitAddon=void 0,m.FitAddon=class{activate(p){this._terminal=p}dispose(){}fit(){const p=this.proposeDimensions();if(!p||!this._terminal||isNaN(p.cols)||isNaN(p.rows))return;const E=this._terminal._core;this._terminal.rows===p.rows&&this._terminal.cols===p.cols||(E._renderService.clear(),this._terminal.resize(p.cols,p.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const p=this._terminal._core,E=p._renderService.dimensions;if(E.css.cell.width===0||E.css.cell.height===0)return;const y=this._terminal.options.scrollback===0?0:p.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(s.getPropertyValue("height")),h=Math.max(0,parseInt(s.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),l=o-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),_=h-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-y;return{cols:Math.max(2,Math.floor(_/E.css.cell.width)),rows:Math.max(1,Math.floor(l/E.css.cell.height))}}}})(),c})())})(rn);var Pa=rn.exports,nn={exports:{}};(function(e,t){(function(c,m){e.exports=m()})(self,()=>(()=>{var c={6:(y,s)=>{function o(u){try{const l=new URL(u),_=l.password&&l.username?`${l.protocol}//${l.username}:${l.password}@${l.host}`:l.username?`${l.protocol}//${l.username}@${l.host}`:`${l.protocol}//${l.host}`;return u.toLocaleLowerCase().startsWith(_.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(s,"__esModule",{value:!0}),s.LinkComputer=s.WebLinkProvider=void 0,s.WebLinkProvider=class{constructor(u,l,_,g={}){this._terminal=u,this._regex=l,this._handler=_,this._options=g}provideLinks(u,l){const _=h.computeLink(u,this._regex,this._terminal,this._handler);l(this._addCallbacks(_))}_addCallbacks(u){return u.map(l=>(l.leave=this._options.leave,l.hover=(_,g)=>{if(this._options.hover){const{range:C}=l;this._options.hover(_,g,C)}},l))}};class h{static computeLink(l,_,g,C){const d=new RegExp(_.source,(_.flags||"")+"g"),[r,a]=h._getWindowedLineStrings(l-1,g),i=r.join("");let n;const f=[];for(;n=d.exec(i);){const S=n[0];if(!o(S))continue;const[b,w]=h._mapStrIdx(g,a,0,n.index),[v,x]=h._mapStrIdx(g,b,w,S.length);if(b===-1||w===-1||v===-1||x===-1)continue;const B={start:{x:w+1,y:b+1},end:{x,y:v+1}};f.push({range:B,text:S,activate:C})}return f}static _getWindowedLineStrings(l,_){let g,C=l,d=l,r=0,a="";const i=[];if(g=_.buffer.active.getLine(l)){const n=g.translateToString(!0);if(g.isWrapped&&n[0]!==" "){for(r=0;(g=_.buffer.active.getLine(--C))&&r<2048&&(a=g.translateToString(!0),r+=a.length,i.push(a),g.isWrapped&&a.indexOf(" ")===-1););i.reverse()}for(i.push(n),r=0;(g=_.buffer.active.getLine(++d))&&g.isWrapped&&r<2048&&(a=g.translateToString(!0),r+=a.length,i.push(a),a.indexOf(" ")===-1););}return[i,C]}static _mapStrIdx(l,_,g,C){const d=l.buffer.active,r=d.getNullCell();let a=g;for(;C;){const i=d.getLine(_);if(!i)return[-1,-1];for(let n=a;n<i.length;++n){i.getCell(n,r);const f=r.getChars();if(r.getWidth()&&(C-=f.length||1,n===i.length-1&&f==="")){const S=d.getLine(_+1);S&&S.isWrapped&&(S.getCell(0,r),r.getWidth()===2&&(C+=1))}if(C<0)return[_,n]}_++,a=0}return[_,a]}}s.LinkComputer=h}},m={};function p(y){var s=m[y];if(s!==void 0)return s.exports;var o=m[y]={exports:{}};return c[y](o,o.exports,p),o.exports}var E={};return(()=>{var y=E;Object.defineProperty(y,"__esModule",{value:!0}),y.WebLinksAddon=void 0;const s=p(6),o=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function h(u,l){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}y.WebLinksAddon=class{constructor(u=h,l={}){this._handler=u,this._options=l}activate(u){this._terminal=u;const l=this._options,_=l.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new s.WebLinkProvider(this._terminal,_,this._handler,l))}dispose(){var u;(u=this._linkProvider)==null||u.dispose()}}})(),E})())})(nn);var Ia=nn.exports;function Xi(e){if(typeof e!="object"||e===null)return!1;const t=e;return!(!("output"in t)&&!("error"in t)||"output"in t&&t.output!==void 0&&typeof t.output!="string"||"error"in t&&t.error!==void 0&&typeof t.error!="string")}function Ha(e){if(typeof e!="object"||e===null)return!1;const t=e;return!(typeof t.id!="string"||typeof t.message!="string"||typeof t.type!="string"||"resourceType"in t&&t.resourceType!==void 0&&typeof t.resourceType!="string")}function Fa(e){return typeof e.executeMegaportCommand=="function"||typeof e.executeMegaportCommandAsync=="function"}function Wa(){return typeof WebAssembly<"u"&&typeof WebAssembly.instantiate=="function"}function Na(e){return typeof e=="string"}function $a(e){return typeof e=="string"&&e.trim().length>0}function Ua(e){return e instanceof Error}function ja(e){return Ua(e)?e.message:Na(e)?e:String(e)}function Ka(e){return $a(e)?![/rm\s+-rf\s+\//i,/:\(\)\{/i,/eval\(/i,/<script>/i].some(c=>c.test(e)):!1}const za=3e4,Va=100,qa=3,Ga=1e3;function on(e={}){const{wasmPath:t="/megaport.wasm",wasmExecPath:c="/wasm_exec.js",debug:m=!1,initTimeout:p=za,maxRetries:E=qa,retryDelay:y=Ga,onTelemetry:s}=e,o=Ne(!0),h=Ne(!1),u=Ne(null),l=Ne(new Map);let _=0;const g=(M,...A)=>{m&&console.log(M,...A)},C=(M,...A)=>{console.warn(M,...A)},d=(M,A,F)=>{s&&s({type:M,timestamp:Date.now(),duration:F,metadata:A})},r=()=>new Promise((M,A)=>{if(window.Go){M();return}const F=document.createElement("script");F.src=c,F.onload=()=>M(),F.onerror=()=>A(new Error("Failed to load wasm_exec.js")),document.head.appendChild(F)}),a=()=>{window.wasmStartSpinner=M=>{const A=`spinner_${Date.now()}_${_++}`;return l.value.set(A,M),Si(l),g(` Spinner started: ${A} - ${M}`),d("spinner_start",{spinnerId:A,message:M}),A},window.wasmStopSpinner=M=>{const A=l.value.get(M);l.value.delete(M),Si(l),A&&g(` Spinner stopped: ${M} - ${A}`),d("spinner_stop",{spinnerId:M,message:A})},g(" Spinner functions registered on window")},i=async()=>{const M=Date.now();if(d("wasm_init_start",{mode:"direct"}),!Wa()){const N=new Error("WebAssembly is not supported in this browser");throw u.value=N,o.value=!1,d("wasm_init_error",{mode:"direct",error:N.message},Date.now()-M),N}const A=new Promise((N,j)=>{setTimeout(()=>{j(new Error(`WASM initialization timeout after ${p}ms`))},p)}),F=async()=>{try{if(a(),await r(),!window.Go)throw new Error("Go WASM runtime not loaded");const N=new window.Go,q=await(await fetch(t)).arrayBuffer(),K=await WebAssembly.instantiate(q,N.importObject);if(N.run(K.instance),await new Promise(k=>setTimeout(k,Va)),!Fa(window))throw new Error("WASM functions not exposed");window.registerPromptHandler&&(window.registerPromptHandler(k=>{if(!Ha(k)){C(" Invalid prompt request received:",k);return}g(" Prompt requested:",k),C(" No custom prompt handler registered. Interactive commands require a prompt handler. Use registerPromptHandler() to provide one.")}),g(" Default prompt handler registered (does nothing - override required)")),h.value=!0,o.value=!1;const L=Date.now()-M;d("wasm_init_success",{mode:"direct"},L),g(" Megaport WASM ready (direct mode)"),g("Available functions:",{executeMegaportCommand:typeof window.executeMegaportCommand,executeMegaportCommandAsync:typeof window.executeMegaportCommandAsync,debugAuthInfo:typeof window.debugAuthInfo})}catch(N){u.value=N,o.value=!1;const j=Date.now()-M;throw d("wasm_init_error",{mode:"direct",error:N.message},j),N}};try{await Promise.race([F(),A])}catch(N){u.value=N,o.value=!1;const j=Date.now()-M;throw d("wasm_init_error",{mode:"direct",error:N.message},j),N}},n=async M=>{if(!Ka(M)){const F="Invalid command: must be a non-empty string without dangerous patterns";throw d("command_execute_error",{command:M,error:F},0),new Error(F)}if(!h.value)throw new Error("WASM not ready");const A=Date.now();return d("command_execute_start",{command:M}),new Promise((F,N)=>{try{if(g(` Executing command: ${M}`),window.executeMegaportCommandAsync)window.executeMegaportCommandAsync(M,j=>{const q=Date.now()-A;if(!Xi(j)){const K="Invalid command result received from WASM";C(" Invalid result:",j),d("command_execute_error",{command:M,error:K},q),N(new Error(K));return}g(" Command result:",j),j.error?d("command_execute_error",{command:M,error:j.error},q):d("command_execute_success",{command:M},q),F(j)});else if(window.executeMegaportCommand){const j=window.executeMegaportCommand(M),q=Date.now()-A;if(!Xi(j)){const K="Invalid command result received from WASM";C(" Invalid result:",j),d("command_execute_error",{command:M,error:K},q),N(new Error(K));return}j.error?d("command_execute_error",{command:M,error:j.error},q):d("command_execute_success",{command:M},q),F(j)}else{const j=Date.now()-A;d("command_execute_error",{command:M,error:"No WASM execute function available"},j),N(new Error("No WASM execute function available"))}}catch(j){const q=Date.now()-A;d("command_execute_error",{command:M,error:ja(j)},q),N(j)}})},f=(M,A,F="staging")=>{if(window.setAuthCredentials){const N=window.setAuthCredentials(M,A,F);g(" Auth credentials set securely (in-memory only)"),d("auth_set",{environment:F,success:N==null?void 0:N.success}),N&&!N.success&&console.error("Failed to set credentials:",N.error),window.debugAuthInfo&&g("Auth info:",window.debugAuthInfo())}else console.error(" setAuthCredentials function not available. WASM may not be initialized."),d("auth_set",{environment:F,success:!1})},S=()=>{window.clearAuthCredentials?(window.clearAuthCredentials(),g(" Auth credentials cleared from memory"),d("auth_clear",{})):console.error(" clearAuthCredentials function not available. WASM may not be initialized.")},b=()=>window.debugAuthInfo?window.debugAuthInfo():null,w=()=>{window.resetWasmOutput&&window.resetWasmOutput()},v=()=>window.toggleWasmDebug?window.toggleWasmDebug():!1,x=M=>window.registerPromptHandler?window.registerPromptHandler(M):(C("registerPromptHandler not available - WASM may not be initialized"),!1),B=async()=>{let M=null;for(let F=1;F<=E;F++)try{g(`Attempt ${F}/${E}: Initializing Megaport WASM...`),await i(),g(` WASM initialized successfully on attempt ${F}`);return}catch(N){if(M=N,console.error(` WASM initialization attempt ${F}/${E} failed:`,N),F<E){const j=y*Math.pow(2,F-1);g(`Retrying in ${j}ms...`),await new Promise(q=>setTimeout(q,j))}}const A=new Error(`WASM initialization failed after ${E} attempts. Last error: ${M==null?void 0:M.message}`);throw u.value=A,o.value=!1,A};bs(async()=>{try{await B()}catch(M){console.error("Failed to initialize Megaport WASM after all retries:",M),u.value=M}});const P=()=>{g(" Cleaning up WASM resources"),l.value.clear(),window.clearAuthCredentials&&window.clearAuthCredentials(),typeof window<"u"&&(delete window.wasmStartSpinner,delete window.wasmStopSpinner),g("Cleanup complete")};return li(()=>{P()}),{isLoading:gt(o),isReady:gt(h),error:gt(u),activeSpinners:gt(l),execute:n,setAuth:f,clearAuth:S,getAuthInfo:b,resetOutput:w,toggleDebug:v,registerPromptHandler:x,cleanup:P}}const Xa={class:"megaport-terminal-container"},Ja={key:0,class:"terminal-loading"},Ya={key:1,class:"terminal-error"},Za={key:2,class:"terminal-container"},Qa={key:0,class:"spinner-overlay"},el={class:"spinner-content"},tl=14,sl='Menlo, Monaco, "Courier New", monospace',il=150,rl=100,nl=Lr({__name:"MegaportTerminal",props:{wasmPath:{default:"/megaport.wasm"},wasmExecPath:{default:"/wasm_exec.js"},welcomeMessage:{default:`Welcome to Megaport CLI (WebAssembly)
Type "help" for available commands.
`},theme:{default:()=>({background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#aeafad"})}},setup(e,{expose:t}){const c=e,m=Ne(null);let p=null,E=null,y="",s=0,o=!1;const h=Ne([]);let u=-1;const{isLoading:l,isReady:_,error:g,execute:C,setAuth:d,registerPromptHandler:r,activeSpinners:a}=on({wasmPath:c.wasmPath,wasmExecPath:c.wasmExecPath,debug:!0}),i=Ne(null),n=ls(()=>g.value||i.value),f=ls(()=>i.value||g.value);let S=null,b="",w=!1,v=null;const x=(k,T)=>(...I)=>{v&&clearTimeout(v),v=setTimeout(()=>k(...I),T)};Tr((k,T,I)=>(console.error(" Terminal component error:",k),console.error("Error context:",I),i.value=k instanceof Error?k:new Error(String(k)),!1));const B=()=>{if(!r||typeof r!="function"){console.warn("registerPromptHandler not available - WASM may not be initialized");return}r(k=>{p&&(console.log(" Prompt handler called:",k.id,k.message),p.write(`\r
\x1B[36m${k.message}\x1B[0m `),S={id:k.id,resolve:T=>{window.submitPromptResponse&&window.submitPromptResponse(k.id,T)}},console.log(" activePrompt set:",S.id),b="")})},P=()=>new Promise((k,T)=>{if(document.querySelector('link[href*="xterm.css"]')){k();return}const I=document.createElement("link");I.rel="stylesheet",I.href="https://cdn.jsdelivr.net/npm/@xterm/xterm@5.5.0/css/xterm.css",I.onload=()=>k(),I.onerror=()=>T(new Error("Failed to load xterm CSS")),document.head.appendChild(I)}),M=async()=>{if(!m.value)return;try{await P()}catch(T){console.error("Failed to load xterm CSS:",T),i.value=T instanceof Error?T:new Error(String(T));return}if(p=new Oa.Terminal({cursorBlink:!0,fontSize:tl,fontFamily:sl,theme:{background:c.theme.background,foreground:c.theme.foreground,cursor:c.theme.cursor}}),E=new Pa.FitAddon,p.loadAddon(E),p.loadAddon(new Ia.WebLinksAddon),!m.value){p==null||p.dispose(),E==null||E.dispose();return}p.open(m.value),E.fit(),p.write(c.welcomeMessage),A(),p.onData(T=>{q(T)});const k=x(()=>{E==null||E.fit()},il);window.addEventListener("resize",k)},A=()=>{o?(p==null||p.write("\x1B[32mmegaport>\x1B[0m "),o=!1):p==null||p.write(`\r
\x1B[32mmegaport>\x1B[0m `),y="",s=0,u=-1},F=(k,T)=>{if(!p||!S)return!1;if(T===13){p.write(`\r
`);const I=b;return S.resolve(I),b="",!0}return T===127?(b.length>0&&(b=b.slice(0,-1),p.write("\b \b")),!0):T===3?(p.write(`^C\r
`),window.cancelPrompt&&S&&window.cancelPrompt(S.id),S=null,b="",A(),!0):(T>=32&&T<=126&&(b+=k,p.write(k)),!0)},N=k=>{if(!p)return!1;if(k==="\x1B[D")return s>0&&(s--,p.write("\x1B[D")),!0;if(k==="\x1B[C")return s<y.length&&(s++,p.write("\x1B[C")),!0;if(k==="\x1B[A"){if(u<h.value.length-1){u++;const T=h.value[h.value.length-1-u];p.write("\r\x1B[K"),p.write("\x1B[32mmegaport>\x1B[0m "),p.write(T),y=T,s=y.length}return!0}if(k==="\x1B[B"){if(u>0){u--;const T=h.value[h.value.length-1-u];p.write("\r\x1B[K"),p.write("\x1B[32mmegaport>\x1B[0m "),p.write(T),y=T,s=y.length}else u===0&&(u=-1,p.write("\r\x1B[K"),p.write("\x1B[32mmegaport>\x1B[0m "),y="",s=0);return!0}return!1},j=k=>p?k===3?(p.write("^C"),A(),!0):k===12?(p.clear(),p.write("\x1B[H"),o=!0,A(),!0):!1:!1,q=k=>{if(!p)return;const T=k.charCodeAt(0);if(console.log(" Input:",k,"code:",T,"activePrompt:",!!S,"isInInteractiveCommand:",w),S){F(k,T);return}if(!(w&&!S)&&!j(T)&&!N(k)){if(T===13){if(p.write(`\r
`),y.trim()){const I=y.trim();y="",s=0,K(I)}else A();return}if(T===127){s>0&&(y=y.slice(0,s-1)+y.slice(s),s--,p.write("\b \b"));return}T>=32&&T<=126&&(y=y.slice(0,s)+k+y.slice(s),s++,p.write(k))}},K=async k=>{if(!p||!_.value){p==null||p.write("\x1B[31mCLI not ready\x1B[0m"),A();return}k.trim()&&(h.value.length===0||h.value[h.value.length-1]!==k)&&(h.value.push(k),h.value.length>rl&&h.value.shift());try{if(k==="clear"||k==="cls"){p.clear(),p.write("\x1B[H"),o=!0,A();return}if(k==="help"){p.write(`Available commands:\r
`),p.write(`  port list           - List all ports\r
`),p.write(`  vxc list            - List all VXCs\r
`),p.write(`  mcr list            - List all MCRs\r
`),p.write(`  mve list            - List all MVEs\r
`),p.write(`  location list       - List all locations\r
`),p.write(`  servicekey list     - List all service keys\r
`),p.write(`  partner list        - List partner configurations\r
`),p.write(`  clear               - Clear the terminal\r
`),A();return}const T=k.includes("--interactive")||k.includes("-i");T?w=!0:p.write(`\x1B[90mExecuting...\x1B[0m\r
`);const I=await C(k);if(I.error)p.write(`\x1B[31mError: ${I.error}\x1B[0m\r
`);else if(I.output){let G=I.output;T&&([/^Enter port name \(required\): ?\n?/gm,/^Enter term \([^)]+\) \(required\): ?\n?/gm,/^Enter port speed \([^)]+\) \(required\): ?\n?/gm,/^Enter location ID \(required\): ?\n?/gm,/^Enter marketplace visibility \([^)]+\) \(required\): ?\n?/gm,/^Enter diversity zone \(optional\): ?\n?/gm,/^Enter cost centre \(optional\): ?\n?/gm,/^Enter promo code \(optional\): ?\n?/gm,/^Would you like to add resource tags\? \[y\/N\] ?\n?/gm,/^Tag key \([^)]+\): ?\n?/gm,/^Tag value for '[^']+': ?\n?/gm].forEach(ie=>{G=G.replace(ie,"")}),G=G.replace(/\n{3,}/g,`

`)),G.trim()&&G.split(`
`).forEach(ie=>{p&&p.write(ie+`\r
`)})}else T||p.write(`\x1B[90mCommand completed with no output\x1B[0m\r
`)}catch(T){p&&p.write(`\x1B[31mError: ${T.message}\x1B[0m\r
`)}w=!1,S=null,b="",S||A()},L=()=>{window.location.reload()};return bs(()=>{const k=setInterval(()=>{_.value&&(clearInterval(k),M(),B())},100);setTimeout(()=>clearInterval(k),3e4)}),Ar(()=>{v&&clearTimeout(v),E==null||E.dispose(),p==null||p.dispose()}),t({terminal:p,fitAddon:E,execute:K,setAuth:d}),(k,T)=>{var I;return Me(),Pe("div",Xa,[We(l)?(Me(),Pe("div",Ja,[...T[0]||(T[0]=[oe("div",{class:"spinner"},null,-1),oe("p",null,"Loading Megaport CLI...",-1)])])):n.value?(Me(),Pe("div",Ya,[T[1]||(T[1]=oe("h3",null," Failed to load Megaport CLI",-1)),oe("p",null,pt((I=f.value)==null?void 0:I.message),1),oe("button",{onClick:L},"Retry")])):(Me(),Pe("div",Za,[We(a)&&We(a).size>0?(Me(),Pe("div",Qa,[oe("div",el,[T[2]||(T[2]=oe("div",{class:"spinner"},null,-1)),(Me(!0),Pe(ze,null,fo(We(a),([G,ee])=>(Me(),Pe("p",{key:G},pt(ee),1))),128))])])):Qt("",!0),oe("div",{ref_key:"terminalRef",ref:m,class:"terminal-wrapper"},null,512)]))])}}}),an=(e,t)=>{const c=e.__vccOpts||e;for(const[m,p]of t)c[m]=p;return c},ol=an(nl,[["__scopeId","data-v-13301f51"]]),al={id:"app",class:"app-container"},ll={class:"app-main"},cl={key:0,class:"auth-panel"},hl={class:"form-group"},ul={class:"form-group"},fl={class:"form-group"},dl={key:1,class:"terminal-section"},_l={key:2,class:"quick-actions"},pl={class:"action-buttons"},gl={class:"status-info"},vl={class:"status-item"},ml={class:"status-item"},Sl={key:0,class:"status-item"},bl={class:"value error"},Cl={key:1,class:"status-item"},wl={class:"value"},yl=Lr({__name:"App",setup(e){const{isLoading:t,isReady:c,error:m,setAuth:p,clearAuth:E,getAuthInfo:y}=on({debug:!0}),s=Ne({accessKey:"",secretKey:"",environment:"staging"}),o=Ne(!1),h=Ne(null),u=Ne(null),l=ls(()=>`Welcome to Megaport CLI (WebAssembly)
Environment: ${s.value.environment}
Type "help" for available commands.

`),_=()=>{var d;p(s.value.accessKey,s.value.secretKey,s.value.environment),o.value=!0,h.value=y(),(d=u.value)!=null&&d.setAuth&&u.value.setAuth(s.value.accessKey,s.value.secretKey,s.value.environment)},g=()=>{E(),o.value=!1,h.value=null,s.value={accessKey:"",secretKey:"",environment:"staging"}},C=d=>{var r;(r=u.value)!=null&&r.execute&&u.value.execute(d)};return bs(()=>{var d,r;h.value=y(),(d=h.value)!=null&&d.accessKeySet&&((r=h.value)!=null&&r.secretKeySet)&&(o.value=!0)}),(d,r)=>(Me(),Pe("div",al,[r[23]||(r[23]=oe("header",{class:"app-header"},[oe("h1",null," Megaport CLI WebAssembly Demo"),oe("p",null,"Vue 3 + Vite + WASM Integration")],-1)),oe("main",ll,[o.value?(Me(),Pe("section",dl,[oe("div",{class:"terminal-header"},[r[16]||(r[16]=oe("h2",null,"Interactive Terminal",-1)),oe("button",{onClick:g,class:"btn-secondary"},"  Clear Auth ")]),Ge(ol,{ref_key:"terminalRef",ref:u,"wasm-path":"/megaport.wasm","wasm-exec-path":"/wasm_exec.js","welcome-message":l.value},null,8,["welcome-message"])])):(Me(),Pe("section",cl,[r[14]||(r[14]=oe("h2",null,"Authentication",-1)),r[15]||(r[15]=oe("p",null,"Configure your Megaport API credentials to get started.",-1)),oe("form",{onSubmit:ka(_,["prevent"])},[oe("div",hl,[r[9]||(r[9]=oe("label",{for:"accessKey"},"Access Key:",-1)),Rs(oe("input",{id:"accessKey","onUpdate:modelValue":r[0]||(r[0]=a=>s.value.accessKey=a),type:"password",placeholder:"Enter access key",autocomplete:"off","data-1p-ignore":"",required:""},null,512),[[Vi,s.value.accessKey]])]),oe("div",ul,[r[10]||(r[10]=oe("label",{for:"secretKey"},"Secret Key:",-1)),Rs(oe("input",{id:"secretKey","onUpdate:modelValue":r[1]||(r[1]=a=>s.value.secretKey=a),type:"password",placeholder:"Enter secret key",autocomplete:"off","data-1p-ignore":"",required:""},null,512),[[Vi,s.value.secretKey]])]),oe("div",fl,[r[12]||(r[12]=oe("label",{for:"environment"},"Environment:",-1)),Rs(oe("select",{id:"environment","onUpdate:modelValue":r[2]||(r[2]=a=>s.value.environment=a)},[...r[11]||(r[11]=[oe("option",{value:"staging"},"Staging",-1),oe("option",{value:"production"},"Production",-1)])],512),[[xa,s.value.environment]])]),r[13]||(r[13]=oe("button",{type:"submit",class:"btn-primary"},"Set Credentials",-1))],32)])),o.value?(Me(),Pe("aside",_l,[r[17]||(r[17]=oe("h3",null,"Quick Actions",-1)),oe("div",pl,[oe("button",{onClick:r[3]||(r[3]=a=>C("ports list --output json")),class:"btn-action"},"  List Ports "),oe("button",{onClick:r[4]||(r[4]=a=>C("mcr list --output json")),class:"btn-action"},"  List MCRs "),oe("button",{onClick:r[5]||(r[5]=a=>C("mve list --output json")),class:"btn-action"},"  List MVEs "),oe("button",{onClick:r[6]||(r[6]=a=>C("locations list --output json")),class:"btn-action"},"  List Locations "),oe("button",{onClick:r[7]||(r[7]=a=>C("help")),class:"btn-action"},"  Help "),oe("button",{onClick:r[8]||(r[8]=a=>C("clear")),class:"btn-action"},"  Clear ")])])):Qt("",!0),oe("aside",gl,[r[22]||(r[22]=oe("h3",null,"WASM Status",-1)),oe("div",vl,[r[18]||(r[18]=oe("span",{class:"label"},"Loading:",-1)),oe("span",{class:Ft(["value",We(t)?"loading":"ready"])},pt(We(t)?" Yes":" No"),3)]),oe("div",ml,[r[19]||(r[19]=oe("span",{class:"label"},"Ready:",-1)),oe("span",{class:Ft(["value",We(c)?"ready":"not-ready"])},pt(We(c)?" Yes":" No"),3)]),We(m)?(Me(),Pe("div",Sl,[r[20]||(r[20]=oe("span",{class:"label"},"Error:",-1)),oe("span",bl,pt(We(m).message),1)])):Qt("",!0),h.value?(Me(),Pe("div",Cl,[r[21]||(r[21]=oe("span",{class:"label"},"Environment:",-1)),oe("span",wl,pt(h.value.environment),1)])):Qt("",!0)])]),r[24]||(r[24]=oe("footer",{class:"app-footer"},[oe("p",null,[Ks(" Megaport CLI WASM Integration Demo | "),oe("a",{href:"https://github.com/megaport",target:"_blank"},"GitHub"),Ks(" | "),oe("a",{href:"https://docs.megaport.com",target:"_blank"},"Documentation")])],-1))]))}}),El=an(yl,[["__scopeId","data-v-8fee4306"]]),xl=Ta(El);xl.mount("#app");
