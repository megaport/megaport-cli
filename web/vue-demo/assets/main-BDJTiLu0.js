(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))p(g);new MutationObserver(g=>{for(const E of g)if(E.type==="childList")for(const y of E.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&p(y)}).observe(document,{childList:!0,subtree:!0});function c(g){const E={};return g.integrity&&(E.integrity=g.integrity),g.referrerPolicy&&(E.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?E.credentials="include":g.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function p(g){if(g.ep)return;g.ep=!0;const E=c(g);fetch(g.href,E)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vs(e){const t=Object.create(null);for(const c of e.split(","))t[c]=1;return c=>c in t}const ve={},Ct=[],qe=()=>{},Vi=()=>!1,hs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),qs=e=>e.startsWith("onUpdate:"),ke=Object.assign,Gs=(e,t)=>{const c=e.indexOf(t);c>-1&&e.splice(c,1)},nn=Object.prototype.hasOwnProperty,ge=(e,t)=>nn.call(e,t),ce=Array.isArray,wt=e=>Kt(e)==="[object Map]",us=e=>Kt(e)==="[object Set]",di=e=>Kt(e)==="[object Date]",he=e=>typeof e=="function",Ce=e=>typeof e=="string",Xe=e=>typeof e=="symbol",Se=e=>e!==null&&typeof e=="object",qi=e=>(Se(e)||he(e))&&he(e.then)&&he(e.catch),Gi=Object.prototype.toString,Kt=e=>Gi.call(e),on=e=>Kt(e).slice(8,-1),Xi=e=>Kt(e)==="[object Object]",Xs=e=>Ce(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Tt=Vs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fs=e=>{const t=Object.create(null);return c=>t[c]||(t[c]=e(c))},an=/-\w/g,at=fs(e=>e.replace(an,t=>t.slice(1).toUpperCase())),ln=/\B([A-Z])/g,mt=fs(e=>e.replace(ln,"-$1").toLowerCase()),Ji=fs(e=>e.charAt(0).toUpperCase()+e.slice(1)),ys=fs(e=>e?`on${Ji(e)}`:""),ot=(e,t)=>!Object.is(e,t),Jt=(e,...t)=>{for(let c=0;c<e.length;c++)e[c](...t)},Yi=(e,t,c,p=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:p,value:c})},ds=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _i;const _s=()=>_i||(_i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Js(e){if(ce(e)){const t={};for(let c=0;c<e.length;c++){const p=e[c],g=Ce(p)?fn(p):Js(p);if(g)for(const E in g)t[E]=g[E]}return t}else if(Ce(e)||Se(e))return e}const cn=/;(?![^(]*\))/g,hn=/:([^]+)/,un=/\/\*[^]*?\*\//g;function fn(e){const t={};return e.replace(un,"").split(cn).forEach(c=>{if(c){const p=c.split(hn);p.length>1&&(t[p[0].trim()]=p[1].trim())}}),t}function Ft(e){let t="";if(Ce(e))t=e;else if(ce(e))for(let c=0;c<e.length;c++){const p=Ft(e[c]);p&&(t+=p+" ")}else if(Se(e))for(const c in e)e[c]&&(t+=c+" ");return t.trim()}const dn="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_n=Vs(dn);function Zi(e){return!!e||e===""}function pn(e,t){if(e.length!==t.length)return!1;let c=!0;for(let p=0;c&&p<e.length;p++)c=ps(e[p],t[p]);return c}function ps(e,t){if(e===t)return!0;let c=di(e),p=di(t);if(c||p)return c&&p?e.getTime()===t.getTime():!1;if(c=Xe(e),p=Xe(t),c||p)return e===t;if(c=ce(e),p=ce(t),c||p)return c&&p?pn(e,t):!1;if(c=Se(e),p=Se(t),c||p){if(!c||!p)return!1;const g=Object.keys(e).length,E=Object.keys(t).length;if(g!==E)return!1;for(const y in e){const s=e.hasOwnProperty(y),a=t.hasOwnProperty(y);if(s&&!a||!s&&a||!ps(e[y],t[y]))return!1}}return String(e)===String(t)}function gn(e,t){return e.findIndex(c=>ps(c,t))}const Qi=e=>!!(e&&e.__v_isRef===!0),pt=e=>Ce(e)?e:e==null?"":ce(e)||Se(e)&&(e.toString===Gi||!he(e.toString))?Qi(e)?pt(e.value):JSON.stringify(e,er,2):String(e),er=(e,t)=>Qi(t)?er(e,t.value):wt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((c,[p,g],E)=>(c[Es(p,E)+" =>"]=g,c),{})}:us(t)?{[`Set(${t.size})`]:[...t.values()].map(c=>Es(c))}:Xe(t)?Es(t):Se(t)&&!ce(t)&&!Xi(t)?String(t):t,Es=(e,t="")=>{var c;return Xe(e)?`Symbol(${(c=e.description)!=null?c:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Te;class vn{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Te,!t&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,c;if(this.scopes)for(t=0,c=this.scopes.length;t<c;t++)this.scopes[t].pause();for(t=0,c=this.effects.length;t<c;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,c;if(this.scopes)for(t=0,c=this.scopes.length;t<c;t++)this.scopes[t].resume();for(t=0,c=this.effects.length;t<c;t++)this.effects[t].resume()}}run(t){if(this._active){const c=Te;try{return Te=this,t()}finally{Te=c}}}on(){++this._on===1&&(this.prevScope=Te,Te=this)}off(){this._on>0&&--this._on===0&&(Te=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let c,p;for(c=0,p=this.effects.length;c<p;c++)this.effects[c].stop();for(this.effects.length=0,c=0,p=this.cleanups.length;c<p;c++)this.cleanups[c]();if(this.cleanups.length=0,this.scopes){for(c=0,p=this.scopes.length;c<p;c++)this.scopes[c].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.parent=void 0}}}function mn(){return Te}let me;const xs=new WeakSet;class tr{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Te&&Te.active&&Te.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xs.has(this)&&(xs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ir(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,pi(this),rr(this);const t=me,c=Ne;me=this,Ne=!0;try{return this.fn()}finally{nr(this),me=t,Ne=c,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Qs(t);this.deps=this.depsTail=void 0,pi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ps(this)&&this.run()}get dirty(){return Ps(this)}}let sr=0,Mt,Bt;function ir(e,t=!1){if(e.flags|=8,t){e.next=Bt,Bt=e;return}e.next=Mt,Mt=e}function Ys(){sr++}function Zs(){if(--sr>0)return;if(Bt){let t=Bt;for(Bt=void 0;t;){const c=t.next;t.next=void 0,t.flags&=-9,t=c}}let e;for(;Mt;){let t=Mt;for(Mt=void 0;t;){const c=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(p){e||(e=p)}t=c}}if(e)throw e}function rr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function nr(e){let t,c=e.depsTail,p=c;for(;p;){const g=p.prevDep;p.version===-1?(p===c&&(c=g),Qs(p),Sn(p)):t=p,p.dep.activeLink=p.prevActiveLink,p.prevActiveLink=void 0,p=g}e.deps=t,e.depsTail=c}function Ps(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(or(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function or(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Wt)||(e.globalVersion=Wt,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ps(e))))return;e.flags|=2;const t=e.dep,c=me,p=Ne;me=e,Ne=!0;try{rr(e);const g=e.fn(e._value);(t.version===0||ot(g,e._value))&&(e.flags|=128,e._value=g,t.version++)}catch(g){throw t.version++,g}finally{me=c,Ne=p,nr(e),e.flags&=-3}}function Qs(e,t=!1){const{dep:c,prevSub:p,nextSub:g}=e;if(p&&(p.nextSub=g,e.prevSub=void 0),g&&(g.prevSub=p,e.nextSub=void 0),c.subs===e&&(c.subs=p,!p&&c.computed)){c.computed.flags&=-5;for(let E=c.computed.deps;E;E=E.nextDep)Qs(E,!0)}!t&&!--c.sc&&c.map&&c.map.delete(c.key)}function Sn(e){const{prevDep:t,nextDep:c}=e;t&&(t.nextDep=c,e.prevDep=void 0),c&&(c.prevDep=t,e.nextDep=void 0)}let Ne=!0;const ar=[];function tt(){ar.push(Ne),Ne=!1}function st(){const e=ar.pop();Ne=e===void 0?!0:e}function pi(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const c=me;me=void 0;try{t()}finally{me=c}}}let Wt=0;class bn{constructor(t,c){this.sub=t,this.dep=c,this.version=c.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ei{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!me||!Ne||me===this.computed)return;let c=this.activeLink;if(c===void 0||c.sub!==me)c=this.activeLink=new bn(me,this),me.deps?(c.prevDep=me.depsTail,me.depsTail.nextDep=c,me.depsTail=c):me.deps=me.depsTail=c,lr(c);else if(c.version===-1&&(c.version=this.version,c.nextDep)){const p=c.nextDep;p.prevDep=c.prevDep,c.prevDep&&(c.prevDep.nextDep=p),c.prevDep=me.depsTail,c.nextDep=void 0,me.depsTail.nextDep=c,me.depsTail=c,me.deps===c&&(me.deps=p)}return c}trigger(t){this.version++,Wt++,this.notify(t)}notify(t){Ys();try{for(let c=this.subs;c;c=c.prevSub)c.sub.notify()&&c.sub.dep.notify()}finally{Zs()}}}function lr(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let p=t.deps;p;p=p.nextDep)lr(p)}const c=e.dep.subs;c!==e&&(e.prevSub=c,c&&(c.nextSub=e)),e.dep.subs=e}}const Is=new WeakMap,vt=Symbol(""),Hs=Symbol(""),Nt=Symbol("");function xe(e,t,c){if(Ne&&me){let p=Is.get(e);p||Is.set(e,p=new Map);let g=p.get(c);g||(p.set(c,g=new ei),g.map=p,g.key=c),g.track()}}function Qe(e,t,c,p,g,E){const y=Is.get(e);if(!y){Wt++;return}const s=a=>{a&&a.trigger()};if(Ys(),t==="clear")y.forEach(s);else{const a=ce(e),u=a&&Xs(c);if(a&&c==="length"){const f=Number(p);y.forEach((l,_)=>{(_==="length"||_===Nt||!Xe(_)&&_>=f)&&s(l)})}else switch((c!==void 0||y.has(void 0))&&s(y.get(c)),u&&s(y.get(Nt)),t){case"add":a?u&&s(y.get("length")):(s(y.get(vt)),wt(e)&&s(y.get(Hs)));break;case"delete":a||(s(y.get(vt)),wt(e)&&s(y.get(Hs)));break;case"set":wt(e)&&s(y.get(vt));break}}Zs()}function St(e){const t=pe(e);return t===e?t:(xe(t,"iterate",Nt),We(e)?t:t.map(ye))}function gs(e){return xe(e=pe(e),"iterate",Nt),e}const Cn={__proto__:null,[Symbol.iterator](){return Ls(this,Symbol.iterator,ye)},concat(...e){return St(this).concat(...e.map(t=>ce(t)?St(t):t))},entries(){return Ls(this,"entries",e=>(e[1]=ye(e[1]),e))},every(e,t){return Ye(this,"every",e,t,void 0,arguments)},filter(e,t){return Ye(this,"filter",e,t,c=>c.map(ye),arguments)},find(e,t){return Ye(this,"find",e,t,ye,arguments)},findIndex(e,t){return Ye(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ye(this,"findLast",e,t,ye,arguments)},findLastIndex(e,t){return Ye(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ye(this,"forEach",e,t,void 0,arguments)},includes(...e){return ks(this,"includes",e)},indexOf(...e){return ks(this,"indexOf",e)},join(e){return St(this).join(e)},lastIndexOf(...e){return ks(this,"lastIndexOf",e)},map(e,t){return Ye(this,"map",e,t,void 0,arguments)},pop(){return Dt(this,"pop")},push(...e){return Dt(this,"push",e)},reduce(e,...t){return gi(this,"reduce",e,t)},reduceRight(e,...t){return gi(this,"reduceRight",e,t)},shift(){return Dt(this,"shift")},some(e,t){return Ye(this,"some",e,t,void 0,arguments)},splice(...e){return Dt(this,"splice",e)},toReversed(){return St(this).toReversed()},toSorted(e){return St(this).toSorted(e)},toSpliced(...e){return St(this).toSpliced(...e)},unshift(...e){return Dt(this,"unshift",e)},values(){return Ls(this,"values",ye)}};function Ls(e,t,c){const p=gs(e),g=p[t]();return p!==e&&!We(e)&&(g._next=g.next,g.next=()=>{const E=g._next();return E.done||(E.value=c(E.value)),E}),g}const wn=Array.prototype;function Ye(e,t,c,p,g,E){const y=gs(e),s=y!==e&&!We(e),a=y[t];if(a!==wn[t]){const l=a.apply(e,E);return s?ye(l):l}let u=c;y!==e&&(s?u=function(l,_){return c.call(this,ye(l),_,e)}:c.length>2&&(u=function(l,_){return c.call(this,l,_,e)}));const f=a.call(y,u,p);return s&&g?g(f):f}function gi(e,t,c,p){const g=gs(e);let E=c;return g!==e&&(We(e)?c.length>3&&(E=function(y,s,a){return c.call(this,y,s,a,e)}):E=function(y,s,a){return c.call(this,y,ye(s),a,e)}),g[t](E,...p)}function ks(e,t,c){const p=pe(e);xe(p,"iterate",Nt);const g=p[t](...c);return(g===-1||g===!1)&&ri(c[0])?(c[0]=pe(c[0]),p[t](...c)):g}function Dt(e,t,c=[]){tt(),Ys();const p=pe(e)[t].apply(e,c);return Zs(),st(),p}const yn=Vs("__proto__,__v_isRef,__isVue"),cr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Xe));function En(e){Xe(e)||(e=String(e));const t=pe(this);return xe(t,"has",e),t.hasOwnProperty(e)}class hr{constructor(t=!1,c=!1){this._isReadonly=t,this._isShallow=c}get(t,c,p){if(c==="__v_skip")return t.__v_skip;const g=this._isReadonly,E=this._isShallow;if(c==="__v_isReactive")return!g;if(c==="__v_isReadonly")return g;if(c==="__v_isShallow")return E;if(c==="__v_raw")return p===(g?E?On:_r:E?dr:fr).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(p)?t:void 0;const y=ce(t);if(!g){let a;if(y&&(a=Cn[c]))return a;if(c==="hasOwnProperty")return En}const s=Reflect.get(t,c,Le(t)?t:p);if((Xe(c)?cr.has(c):yn(c))||(g||xe(t,"get",c),E))return s;if(Le(s)){const a=y&&Xs(c)?s:s.value;return g&&Se(a)?gt(a):a}return Se(s)?g?gt(s):si(s):s}}class ur extends hr{constructor(t=!1){super(!1,t)}set(t,c,p,g){let E=t[c];if(!this._isShallow){const a=lt(E);if(!We(p)&&!lt(p)&&(E=pe(E),p=pe(p)),!ce(t)&&Le(E)&&!Le(p))return a||(E.value=p),!0}const y=ce(t)&&Xs(c)?Number(c)<t.length:ge(t,c),s=Reflect.set(t,c,p,Le(t)?t:g);return t===pe(g)&&(y?ot(p,E)&&Qe(t,"set",c,p):Qe(t,"add",c,p)),s}deleteProperty(t,c){const p=ge(t,c);t[c];const g=Reflect.deleteProperty(t,c);return g&&p&&Qe(t,"delete",c,void 0),g}has(t,c){const p=Reflect.has(t,c);return(!Xe(c)||!cr.has(c))&&xe(t,"has",c),p}ownKeys(t){return xe(t,"iterate",ce(t)?"length":vt),Reflect.ownKeys(t)}}class xn extends hr{constructor(t=!1){super(!0,t)}set(t,c){return!0}deleteProperty(t,c){return!0}}const Ln=new ur,kn=new xn,Dn=new ur(!0);const Fs=e=>e,qt=e=>Reflect.getPrototypeOf(e);function Rn(e,t,c){return function(...p){const g=this.__v_raw,E=pe(g),y=wt(E),s=e==="entries"||e===Symbol.iterator&&y,a=e==="keys"&&y,u=g[e](...p),f=c?Fs:t?ts:ye;return!t&&xe(E,"iterate",a?Hs:vt),{next(){const{value:l,done:_}=u.next();return _?{value:l,done:_}:{value:s?[f(l[0]),f(l[1])]:f(l),done:_}},[Symbol.iterator](){return this}}}}function Gt(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function An(e,t){const c={get(g){const E=this.__v_raw,y=pe(E),s=pe(g);e||(ot(g,s)&&xe(y,"get",g),xe(y,"get",s));const{has:a}=qt(y),u=t?Fs:e?ts:ye;if(a.call(y,g))return u(E.get(g));if(a.call(y,s))return u(E.get(s));E!==y&&E.get(g)},get size(){const g=this.__v_raw;return!e&&xe(pe(g),"iterate",vt),g.size},has(g){const E=this.__v_raw,y=pe(E),s=pe(g);return e||(ot(g,s)&&xe(y,"has",g),xe(y,"has",s)),g===s?E.has(g):E.has(g)||E.has(s)},forEach(g,E){const y=this,s=y.__v_raw,a=pe(s),u=t?Fs:e?ts:ye;return!e&&xe(a,"iterate",vt),s.forEach((f,l)=>g.call(E,u(f),u(l),y))}};return ke(c,e?{add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear")}:{add(g){!t&&!We(g)&&!lt(g)&&(g=pe(g));const E=pe(this);return qt(E).has.call(E,g)||(E.add(g),Qe(E,"add",g,g)),this},set(g,E){!t&&!We(E)&&!lt(E)&&(E=pe(E));const y=pe(this),{has:s,get:a}=qt(y);let u=s.call(y,g);u||(g=pe(g),u=s.call(y,g));const f=a.call(y,g);return y.set(g,E),u?ot(E,f)&&Qe(y,"set",g,E):Qe(y,"add",g,E),this},delete(g){const E=pe(this),{has:y,get:s}=qt(E);let a=y.call(E,g);a||(g=pe(g),a=y.call(E,g)),s&&s.call(E,g);const u=E.delete(g);return a&&Qe(E,"delete",g,void 0),u},clear(){const g=pe(this),E=g.size!==0,y=g.clear();return E&&Qe(g,"clear",void 0,void 0),y}}),["keys","values","entries",Symbol.iterator].forEach(g=>{c[g]=Rn(g,e,t)}),c}function ti(e,t){const c=An(e,t);return(p,g,E)=>g==="__v_isReactive"?!e:g==="__v_isReadonly"?e:g==="__v_raw"?p:Reflect.get(ge(c,g)&&g in p?c:p,g,E)}const Tn={get:ti(!1,!1)},Mn={get:ti(!1,!0)},Bn={get:ti(!0,!1)};const fr=new WeakMap,dr=new WeakMap,_r=new WeakMap,On=new WeakMap;function Pn(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function In(e){return e.__v_skip||!Object.isExtensible(e)?0:Pn(on(e))}function si(e){return lt(e)?e:ii(e,!1,Ln,Tn,fr)}function Hn(e){return ii(e,!1,Dn,Mn,dr)}function gt(e){return ii(e,!0,kn,Bn,_r)}function ii(e,t,c,p,g){if(!Se(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const E=In(e);if(E===0)return e;const y=g.get(e);if(y)return y;const s=new Proxy(e,E===2?p:c);return g.set(e,s),s}function yt(e){return lt(e)?yt(e.__v_raw):!!(e&&e.__v_isReactive)}function lt(e){return!!(e&&e.__v_isReadonly)}function We(e){return!!(e&&e.__v_isShallow)}function ri(e){return e?!!e.__v_raw:!1}function pe(e){const t=e&&e.__v_raw;return t?pe(t):e}function Fn(e){return!ge(e,"__v_skip")&&Object.isExtensible(e)&&Yi(e,"__v_skip",!0),e}const ye=e=>Se(e)?si(e):e,ts=e=>Se(e)?gt(e):e;function Le(e){return e?e.__v_isRef===!0:!1}function Ve(e){return Wn(e,!1)}function Wn(e,t){return Le(e)?e:new Nn(e,t)}class Nn{constructor(t,c){this.dep=new ei,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=c?t:pe(t),this._value=c?t:ye(t),this.__v_isShallow=c}get value(){return this.dep.track(),this._value}set value(t){const c=this._rawValue,p=this.__v_isShallow||We(t)||lt(t);t=p?t:pe(t),ot(t,c)&&(this._rawValue=t,this._value=p?t:ye(t),this.dep.trigger())}}function Ie(e){return Le(e)?e.value:e}const $n={get:(e,t,c)=>t==="__v_raw"?e:Ie(Reflect.get(e,t,c)),set:(e,t,c,p)=>{const g=e[t];return Le(g)&&!Le(c)?(g.value=c,!0):Reflect.set(e,t,c,p)}};function pr(e){return yt(e)?e:new Proxy(e,$n)}class Un{constructor(t,c,p){this.fn=t,this.setter=c,this._value=void 0,this.dep=new ei(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wt-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!c,this.isSSR=p}notify(){if(this.flags|=16,!(this.flags&8)&&me!==this)return ir(this,!0),!0}get value(){const t=this.dep.track();return or(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function jn(e,t,c=!1){let p,g;return he(e)?p=e:(p=e.get,g=e.set),new Un(p,g,c)}const Xt={},ss=new WeakMap;let dt;function Kn(e,t=!1,c=dt){if(c){let p=ss.get(c);p||ss.set(c,p=[]),p.push(e)}}function zn(e,t,c=ve){const{immediate:p,deep:g,once:E,scheduler:y,augmentJob:s,call:a}=c,u=h=>g?h:We(h)||g===!1||g===0?et(h,1):et(h);let f,l,_,m,C=!1,d=!1;if(Le(e)?(l=()=>e.value,C=We(e)):yt(e)?(l=()=>u(e),C=!0):ce(e)?(d=!0,C=e.some(h=>yt(h)||We(h)),l=()=>e.map(h=>{if(Le(h))return h.value;if(yt(h))return u(h);if(he(h))return a?a(h,2):h()})):he(e)?t?l=a?()=>a(e,2):e:l=()=>{if(_){tt();try{_()}finally{st()}}const h=dt;dt=f;try{return a?a(e,3,[m]):e(m)}finally{dt=h}}:l=qe,t&&g){const h=l,S=g===!0?1/0:g;l=()=>et(h(),S)}const r=mn(),o=()=>{f.stop(),r&&r.active&&Gs(r.effects,f)};if(E&&t){const h=t;t=(...S)=>{h(...S),o()}}let i=d?new Array(e.length).fill(Xt):Xt;const n=h=>{if(!(!(f.flags&1)||!f.dirty&&!h))if(t){const S=f.run();if(g||C||(d?S.some((b,w)=>ot(b,i[w])):ot(S,i))){_&&_();const b=dt;dt=f;try{const w=[S,i===Xt?void 0:d&&i[0]===Xt?[]:i,m];i=S,a?a(t,3,w):t(...w)}finally{dt=b}}}else f.run()};return s&&s(n),f=new tr(l),f.scheduler=y?()=>y(n,!1):n,m=h=>Kn(h,!1,f),_=f.onStop=()=>{const h=ss.get(f);if(h){if(a)a(h,4);else for(const S of h)S();ss.delete(f)}},t?p?n(!0):i=f.run():y?y(n.bind(null,!0),!0):f.run(),o.pause=f.pause.bind(f),o.resume=f.resume.bind(f),o.stop=o,o}function et(e,t=1/0,c){if(t<=0||!Se(e)||e.__v_skip||(c=c||new Map,(c.get(e)||0)>=t))return e;if(c.set(e,t),t--,Le(e))et(e.value,t,c);else if(ce(e))for(let p=0;p<e.length;p++)et(e[p],t,c);else if(us(e)||wt(e))e.forEach(p=>{et(p,t,c)});else if(Xi(e)){for(const p in e)et(e[p],t,c);for(const p of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,p)&&et(e[p],t,c)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zt(e,t,c,p){try{return p?e(...p):e()}catch(g){vs(g,t,c)}}function Je(e,t,c,p){if(he(e)){const g=zt(e,t,c,p);return g&&qi(g)&&g.catch(E=>{vs(E,t,c)}),g}if(ce(e)){const g=[];for(let E=0;E<e.length;E++)g.push(Je(e[E],t,c,p));return g}}function vs(e,t,c,p=!0){const g=t?t.vnode:null,{errorHandler:E,throwUnhandledErrorInProduction:y}=t&&t.appContext.config||ve;if(t){let s=t.parent;const a=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${c}`;for(;s;){const f=s.ec;if(f){for(let l=0;l<f.length;l++)if(f[l](e,a,u)===!1)return}s=s.parent}if(E){tt(),zt(E,null,10,[e,a,u]),st();return}}Vn(e,c,g,p,y)}function Vn(e,t,c,p=!0,g=!1){if(g)throw e;console.error(e)}const Re=[];let je=-1;const Et=[];let rt=null,bt=0;const gr=Promise.resolve();let is=null;function vr(e){const t=is||gr;return e?t.then(this?e.bind(this):e):t}function qn(e){let t=je+1,c=Re.length;for(;t<c;){const p=t+c>>>1,g=Re[p],E=$t(g);E<e||E===e&&g.flags&2?t=p+1:c=p}return t}function ni(e){if(!(e.flags&1)){const t=$t(e),c=Re[Re.length-1];!c||!(e.flags&2)&&t>=$t(c)?Re.push(e):Re.splice(qn(t),0,e),e.flags|=1,mr()}}function mr(){is||(is=gr.then(br))}function Gn(e){ce(e)?Et.push(...e):rt&&e.id===-1?rt.splice(bt+1,0,e):e.flags&1||(Et.push(e),e.flags|=1),mr()}function vi(e,t,c=je+1){for(;c<Re.length;c++){const p=Re[c];if(p&&p.flags&2){if(e&&p.id!==e.uid)continue;Re.splice(c,1),c--,p.flags&4&&(p.flags&=-2),p(),p.flags&4||(p.flags&=-2)}}}function Sr(e){if(Et.length){const t=[...new Set(Et)].sort((c,p)=>$t(c)-$t(p));if(Et.length=0,rt){rt.push(...t);return}for(rt=t,bt=0;bt<rt.length;bt++){const c=rt[bt];c.flags&4&&(c.flags&=-2),c.flags&8||c(),c.flags&=-2}rt=null,bt=0}}const $t=e=>e.id==null?e.flags&2?-1:1/0:e.id;function br(e){try{for(je=0;je<Re.length;je++){const t=Re[je];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),zt(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;je<Re.length;je++){const t=Re[je];t&&(t.flags&=-2)}je=-1,Re.length=0,Sr(),is=null,(Re.length||Et.length)&&br()}}let Fe=null,Cr=null;function rs(e){const t=Fe;return Fe=e,Cr=e&&e.type.__scopeId||null,t}function Xn(e,t=Fe,c){if(!t||e._n)return e;const p=(...g)=>{p._d&&ki(-1);const E=rs(t);let y;try{y=e(...g)}finally{rs(E),p._d&&ki(1)}return y};return p._n=!0,p._c=!0,p._d=!0,p}function Ds(e,t){if(Fe===null)return e;const c=ws(Fe),p=e.dirs||(e.dirs=[]);for(let g=0;g<t.length;g++){let[E,y,s,a=ve]=t[g];E&&(he(E)&&(E={mounted:E,updated:E}),E.deep&&et(y),p.push({dir:E,instance:c,value:y,oldValue:void 0,arg:s,modifiers:a}))}return e}function ut(e,t,c,p){const g=e.dirs,E=t&&t.dirs;for(let y=0;y<g.length;y++){const s=g[y];E&&(s.oldValue=E[y].value);let a=s.dir[p];a&&(tt(),Je(a,c,8,[e.el,s,e,t]),st())}}const Jn=Symbol("_vte"),Yn=e=>e.__isTeleport,Zn=Symbol("_leaveCb");function oi(e,t){e.shapeFlag&6&&e.component?(e.transition=t,oi(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function wr(e,t){return he(e)?ke({name:e.name},t,{setup:e}):e}function yr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ns=new WeakMap;function Ot(e,t,c,p,g=!1){if(ce(e)){e.forEach((C,d)=>Ot(C,t&&(ce(t)?t[d]:t),c,p,g));return}if(Pt(p)&&!g){p.shapeFlag&512&&p.type.__asyncResolved&&p.component.subTree.component&&Ot(e,t,c,p.component.subTree);return}const E=p.shapeFlag&4?ws(p.component):p.el,y=g?null:E,{i:s,r:a}=e,u=t&&t.r,f=s.refs===ve?s.refs={}:s.refs,l=s.setupState,_=pe(l),m=l===ve?Vi:C=>ge(_,C);if(u!=null&&u!==a){if(mi(t),Ce(u))f[u]=null,m(u)&&(l[u]=null);else if(Le(u)){u.value=null;const C=t;C.k&&(f[C.k]=null)}}if(he(a))zt(a,s,12,[y,f]);else{const C=Ce(a),d=Le(a);if(C||d){const r=()=>{if(e.f){const o=C?m(a)?l[a]:f[a]:a.value;if(g)ce(o)&&Gs(o,E);else if(ce(o))o.includes(E)||o.push(E);else if(C)f[a]=[E],m(a)&&(l[a]=f[a]);else{const i=[E];a.value=i,e.k&&(f[e.k]=i)}}else C?(f[a]=y,m(a)&&(l[a]=y)):d&&(a.value=y,e.k&&(f[e.k]=y))};if(y){const o=()=>{r(),ns.delete(e)};o.id=-1,ns.set(e,o),Oe(o,c)}else mi(e),r()}}}function mi(e){const t=ns.get(e);t&&(t.flags|=8,ns.delete(e))}_s().requestIdleCallback;_s().cancelIdleCallback;const Pt=e=>!!e.type.__asyncLoader,Er=e=>e.type.__isKeepAlive;function Qn(e,t){xr(e,"a",t)}function eo(e,t){xr(e,"da",t)}function xr(e,t,c=Ae){const p=e.__wdc||(e.__wdc=()=>{let g=c;for(;g;){if(g.isDeactivated)return;g=g.parent}return e()});if(ms(t,p,c),c){let g=c.parent;for(;g&&g.parent;)Er(g.parent.vnode)&&to(p,t,c,g),g=g.parent}}function to(e,t,c,p){const g=ms(t,e,p,!0);kr(()=>{Gs(p[t],g)},c)}function ms(e,t,c=Ae,p=!1){if(c){const g=c[e]||(c[e]=[]),E=t.__weh||(t.__weh=(...y)=>{tt();const s=Vt(c),a=Je(t,c,e,y);return s(),st(),a});return p?g.unshift(E):g.push(E),E}}const it=e=>(t,c=Ae)=>{(!jt||e==="sp")&&ms(e,(...p)=>t(...p),c)},so=it("bm"),Ss=it("m"),io=it("bu"),ro=it("u"),Lr=it("bum"),kr=it("um"),no=it("sp"),oo=it("rtg"),ao=it("rtc");function lo(e,t=Ae){ms("ec",e,t)}const co=Symbol.for("v-ndc");function ho(e,t,c,p){let g;const E=c,y=ce(e);if(y||Ce(e)){const s=y&&yt(e);let a=!1,u=!1;s&&(a=!We(e),u=lt(e),e=gs(e)),g=new Array(e.length);for(let f=0,l=e.length;f<l;f++)g[f]=t(a?u?ts(ye(e[f])):ye(e[f]):e[f],f,void 0,E)}else if(typeof e=="number"){g=new Array(e);for(let s=0;s<e;s++)g[s]=t(s+1,s,void 0,E)}else if(Se(e))if(e[Symbol.iterator])g=Array.from(e,(s,a)=>t(s,a,void 0,E));else{const s=Object.keys(e);g=new Array(s.length);for(let a=0,u=s.length;a<u;a++){const f=s[a];g[a]=t(e[f],f,a,E)}}else g=[];return g}const Ws=e=>e?Gr(e)?ws(e):Ws(e.parent):null,It=ke(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ws(e.parent),$root:e=>Ws(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Rr(e),$forceUpdate:e=>e.f||(e.f=()=>{ni(e.update)}),$nextTick:e=>e.n||(e.n=vr.bind(e.proxy)),$watch:e=>Bo.bind(e)}),Rs=(e,t)=>e!==ve&&!e.__isScriptSetup&&ge(e,t),uo={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:c,setupState:p,data:g,props:E,accessCache:y,type:s,appContext:a}=e;let u;if(t[0]!=="$"){const m=y[t];if(m!==void 0)switch(m){case 1:return p[t];case 2:return g[t];case 4:return c[t];case 3:return E[t]}else{if(Rs(p,t))return y[t]=1,p[t];if(g!==ve&&ge(g,t))return y[t]=2,g[t];if((u=e.propsOptions[0])&&ge(u,t))return y[t]=3,E[t];if(c!==ve&&ge(c,t))return y[t]=4,c[t];Ns&&(y[t]=0)}}const f=It[t];let l,_;if(f)return t==="$attrs"&&xe(e.attrs,"get",""),f(e);if((l=s.__cssModules)&&(l=l[t]))return l;if(c!==ve&&ge(c,t))return y[t]=4,c[t];if(_=a.config.globalProperties,ge(_,t))return _[t]},set({_:e},t,c){const{data:p,setupState:g,ctx:E}=e;return Rs(g,t)?(g[t]=c,!0):p!==ve&&ge(p,t)?(p[t]=c,!0):ge(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(E[t]=c,!0)},has({_:{data:e,setupState:t,accessCache:c,ctx:p,appContext:g,propsOptions:E,type:y}},s){let a,u;return!!(c[s]||e!==ve&&s[0]!=="$"&&ge(e,s)||Rs(t,s)||(a=E[0])&&ge(a,s)||ge(p,s)||ge(It,s)||ge(g.config.globalProperties,s)||(u=y.__cssModules)&&u[s])},defineProperty(e,t,c){return c.get!=null?e._.accessCache[t]=0:ge(c,"value")&&this.set(e,t,c.value,null),Reflect.defineProperty(e,t,c)}};function Si(e){return ce(e)?e.reduce((t,c)=>(t[c]=null,t),{}):e}let Ns=!0;function fo(e){const t=Rr(e),c=e.proxy,p=e.ctx;Ns=!1,t.beforeCreate&&bi(t.beforeCreate,e,"bc");const{data:g,computed:E,methods:y,watch:s,provide:a,inject:u,created:f,beforeMount:l,mounted:_,beforeUpdate:m,updated:C,activated:d,deactivated:r,beforeDestroy:o,beforeUnmount:i,destroyed:n,unmounted:h,render:S,renderTracked:b,renderTriggered:w,errorCaptured:v,serverPrefetch:x,expose:R,inheritAttrs:M,components:P,directives:A,filters:N}=t;if(u&&_o(u,p,null),y)for(const J in y){const z=y[J];he(z)&&(p[J]=z.bind(c))}if(g){const J=g.call(c,c);Se(J)&&(e.data=si(J))}if(Ns=!0,E)for(const J in E){const z=E[J],L=he(z)?z.bind(c,c):he(z.get)?z.get.bind(c,c):qe,T=!he(z)&&he(z.set)?z.set.bind(c):qe,B=Jr({get:L,set:T});Object.defineProperty(p,J,{enumerable:!0,configurable:!0,get:()=>B.value,set:I=>B.value=I})}if(s)for(const J in s)Dr(s[J],p,c,J);if(a){const J=he(a)?a.call(c):a;Reflect.ownKeys(J).forEach(z=>{bo(z,J[z])})}f&&bi(f,e,"c");function X(J,z){ce(z)?z.forEach(L=>J(L.bind(c))):z&&J(z.bind(c))}if(X(so,l),X(Ss,_),X(io,m),X(ro,C),X(Qn,d),X(eo,r),X(lo,v),X(ao,b),X(oo,w),X(Lr,i),X(kr,h),X(no,x),ce(R))if(R.length){const J=e.exposed||(e.exposed={});R.forEach(z=>{Object.defineProperty(J,z,{get:()=>c[z],set:L=>c[z]=L,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===qe&&(e.render=S),M!=null&&(e.inheritAttrs=M),P&&(e.components=P),A&&(e.directives=A),x&&yr(e)}function _o(e,t,c=qe){ce(e)&&(e=$s(e));for(const p in e){const g=e[p];let E;Se(g)?"default"in g?E=Yt(g.from||p,g.default,!0):E=Yt(g.from||p):E=Yt(g),Le(E)?Object.defineProperty(t,p,{enumerable:!0,configurable:!0,get:()=>E.value,set:y=>E.value=y}):t[p]=E}}function bi(e,t,c){Je(ce(e)?e.map(p=>p.bind(t.proxy)):e.bind(t.proxy),t,c)}function Dr(e,t,c,p){let g=p.includes(".")?Ur(c,p):()=>c[p];if(Ce(e)){const E=t[e];he(E)&&Ts(g,E)}else if(he(e))Ts(g,e.bind(c));else if(Se(e))if(ce(e))e.forEach(E=>Dr(E,t,c,p));else{const E=he(e.handler)?e.handler.bind(c):t[e.handler];he(E)&&Ts(g,E,e)}}function Rr(e){const t=e.type,{mixins:c,extends:p}=t,{mixins:g,optionsCache:E,config:{optionMergeStrategies:y}}=e.appContext,s=E.get(t);let a;return s?a=s:!g.length&&!c&&!p?a=t:(a={},g.length&&g.forEach(u=>os(a,u,y,!0)),os(a,t,y)),Se(t)&&E.set(t,a),a}function os(e,t,c,p=!1){const{mixins:g,extends:E}=t;E&&os(e,E,c,!0),g&&g.forEach(y=>os(e,y,c,!0));for(const y in t)if(!(p&&y==="expose")){const s=po[y]||c&&c[y];e[y]=s?s(e[y],t[y]):t[y]}return e}const po={data:Ci,props:wi,emits:wi,methods:At,computed:At,beforeCreate:De,created:De,beforeMount:De,mounted:De,beforeUpdate:De,updated:De,beforeDestroy:De,beforeUnmount:De,destroyed:De,unmounted:De,activated:De,deactivated:De,errorCaptured:De,serverPrefetch:De,components:At,directives:At,watch:vo,provide:Ci,inject:go};function Ci(e,t){return t?e?function(){return ke(he(e)?e.call(this,this):e,he(t)?t.call(this,this):t)}:t:e}function go(e,t){return At($s(e),$s(t))}function $s(e){if(ce(e)){const t={};for(let c=0;c<e.length;c++)t[e[c]]=e[c];return t}return e}function De(e,t){return e?[...new Set([].concat(e,t))]:t}function At(e,t){return e?ke(Object.create(null),e,t):t}function wi(e,t){return e?ce(e)&&ce(t)?[...new Set([...e,...t])]:ke(Object.create(null),Si(e),Si(t??{})):t}function vo(e,t){if(!e)return t;if(!t)return e;const c=ke(Object.create(null),e);for(const p in t)c[p]=De(e[p],t[p]);return c}function Ar(){return{app:null,config:{isNativeTag:Vi,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mo=0;function So(e,t){return function(p,g=null){he(p)||(p=ke({},p)),g!=null&&!Se(g)&&(g=null);const E=Ar(),y=new WeakSet,s=[];let a=!1;const u=E.app={_uid:mo++,_component:p,_props:g,_container:null,_context:E,_instance:null,version:sa,get config(){return E.config},set config(f){},use(f,...l){return y.has(f)||(f&&he(f.install)?(y.add(f),f.install(u,...l)):he(f)&&(y.add(f),f(u,...l))),u},mixin(f){return E.mixins.includes(f)||E.mixins.push(f),u},component(f,l){return l?(E.components[f]=l,u):E.components[f]},directive(f,l){return l?(E.directives[f]=l,u):E.directives[f]},mount(f,l,_){if(!a){const m=u._ceVNode||Ge(p,g);return m.appContext=E,_===!0?_="svg":_===!1&&(_=void 0),e(m,f,_),a=!0,u._container=f,f.__vue_app__=u,ws(m.component)}},onUnmount(f){s.push(f)},unmount(){a&&(Je(s,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(f,l){return E.provides[f]=l,u},runWithContext(f){const l=xt;xt=u;try{return f()}finally{xt=l}}};return u}}let xt=null;function bo(e,t){if(Ae){let c=Ae.provides;const p=Ae.parent&&Ae.parent.provides;p===c&&(c=Ae.provides=Object.create(p)),c[e]=t}}function Yt(e,t,c=!1){const p=Jo();if(p||xt){let g=xt?xt._context.provides:p?p.parent==null||p.ce?p.vnode.appContext&&p.vnode.appContext.provides:p.parent.provides:void 0;if(g&&e in g)return g[e];if(arguments.length>1)return c&&he(t)?t.call(p&&p.proxy):t}}const Tr={},Mr=()=>Object.create(Tr),Br=e=>Object.getPrototypeOf(e)===Tr;function Co(e,t,c,p=!1){const g={},E=Mr();e.propsDefaults=Object.create(null),Or(e,t,g,E);for(const y in e.propsOptions[0])y in g||(g[y]=void 0);c?e.props=p?g:Hn(g):e.type.props?e.props=g:e.props=E,e.attrs=E}function wo(e,t,c,p){const{props:g,attrs:E,vnode:{patchFlag:y}}=e,s=pe(g),[a]=e.propsOptions;let u=!1;if((p||y>0)&&!(y&16)){if(y&8){const f=e.vnode.dynamicProps;for(let l=0;l<f.length;l++){let _=f[l];if(bs(e.emitsOptions,_))continue;const m=t[_];if(a)if(ge(E,_))m!==E[_]&&(E[_]=m,u=!0);else{const C=at(_);g[C]=Us(a,s,C,m,e,!1)}else m!==E[_]&&(E[_]=m,u=!0)}}}else{Or(e,t,g,E)&&(u=!0);let f;for(const l in s)(!t||!ge(t,l)&&((f=mt(l))===l||!ge(t,f)))&&(a?c&&(c[l]!==void 0||c[f]!==void 0)&&(g[l]=Us(a,s,l,void 0,e,!0)):delete g[l]);if(E!==s)for(const l in E)(!t||!ge(t,l))&&(delete E[l],u=!0)}u&&Qe(e.attrs,"set","")}function Or(e,t,c,p){const[g,E]=e.propsOptions;let y=!1,s;if(t)for(let a in t){if(Tt(a))continue;const u=t[a];let f;g&&ge(g,f=at(a))?!E||!E.includes(f)?c[f]=u:(s||(s={}))[f]=u:bs(e.emitsOptions,a)||(!(a in p)||u!==p[a])&&(p[a]=u,y=!0)}if(E){const a=pe(c),u=s||ve;for(let f=0;f<E.length;f++){const l=E[f];c[l]=Us(g,a,l,u[l],e,!ge(u,l))}}return y}function Us(e,t,c,p,g,E){const y=e[c];if(y!=null){const s=ge(y,"default");if(s&&p===void 0){const a=y.default;if(y.type!==Function&&!y.skipFactory&&he(a)){const{propsDefaults:u}=g;if(c in u)p=u[c];else{const f=Vt(g);p=u[c]=a.call(null,t),f()}}else p=a;g.ce&&g.ce._setProp(c,p)}y[0]&&(E&&!s?p=!1:y[1]&&(p===""||p===mt(c))&&(p=!0))}return p}const yo=new WeakMap;function Pr(e,t,c=!1){const p=c?yo:t.propsCache,g=p.get(e);if(g)return g;const E=e.props,y={},s=[];let a=!1;if(!he(e)){const f=l=>{a=!0;const[_,m]=Pr(l,t,!0);ke(y,_),m&&s.push(...m)};!c&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!E&&!a)return Se(e)&&p.set(e,Ct),Ct;if(ce(E))for(let f=0;f<E.length;f++){const l=at(E[f]);yi(l)&&(y[l]=ve)}else if(E)for(const f in E){const l=at(f);if(yi(l)){const _=E[f],m=y[l]=ce(_)||he(_)?{type:_}:ke({},_),C=m.type;let d=!1,r=!0;if(ce(C))for(let o=0;o<C.length;++o){const i=C[o],n=he(i)&&i.name;if(n==="Boolean"){d=!0;break}else n==="String"&&(r=!1)}else d=he(C)&&C.name==="Boolean";m[0]=d,m[1]=r,(d||ge(m,"default"))&&s.push(l)}}const u=[y,s];return Se(e)&&p.set(e,u),u}function yi(e){return e[0]!=="$"&&!Tt(e)}const ai=e=>e==="_"||e==="_ctx"||e==="$stable",li=e=>ce(e)?e.map(ze):[ze(e)],Eo=(e,t,c)=>{if(t._n)return t;const p=Xn((...g)=>li(t(...g)),c);return p._c=!1,p},Ir=(e,t,c)=>{const p=e._ctx;for(const g in e){if(ai(g))continue;const E=e[g];if(he(E))t[g]=Eo(g,E,p);else if(E!=null){const y=li(E);t[g]=()=>y}}},Hr=(e,t)=>{const c=li(t);e.slots.default=()=>c},Fr=(e,t,c)=>{for(const p in t)(c||!ai(p))&&(e[p]=t[p])},xo=(e,t,c)=>{const p=e.slots=Mr();if(e.vnode.shapeFlag&32){const g=t._;g?(Fr(p,t,c),c&&Yi(p,"_",g,!0)):Ir(t,p)}else t&&Hr(e,t)},Lo=(e,t,c)=>{const{vnode:p,slots:g}=e;let E=!0,y=ve;if(p.shapeFlag&32){const s=t._;s?c&&s===1?E=!1:Fr(g,t,c):(E=!t.$stable,Ir(t,g)),y=t}else t&&(Hr(e,t),y={default:1});if(E)for(const s in g)!ai(s)&&y[s]==null&&delete g[s]},Oe=$o;function ko(e){return Do(e)}function Do(e,t){const c=_s();c.__VUE__=!0;const{insert:p,remove:g,patchProp:E,createElement:y,createText:s,createComment:a,setText:u,setElementText:f,parentNode:l,nextSibling:_,setScopeId:m=qe,insertStaticContent:C}=e,d=(D,O,F,U=null,j=null,W=null,ee=void 0,Z=null,Y=!!O.dynamicChildren)=>{if(D===O)return;D&&!Rt(D,O)&&(U=H(D),I(D,j,W,!0),D=null),O.patchFlag===-2&&(Y=!1,O.dynamicChildren=null);const{type:V,ref:oe,shapeFlag:Q}=O;switch(V){case Cs:r(D,O,F,U);break;case ct:o(D,O,F,U);break;case Ms:D==null&&i(O,F,U,ee);break;case Ke:P(D,O,F,U,j,W,ee,Z,Y);break;default:Q&1?S(D,O,F,U,j,W,ee,Z,Y):Q&6?A(D,O,F,U,j,W,ee,Z,Y):(Q&64||Q&128)&&V.process(D,O,F,U,j,W,ee,Z,Y,$)}oe!=null&&j?Ot(oe,D&&D.ref,W,O||D,!O):oe==null&&D&&D.ref!=null&&Ot(D.ref,null,W,D,!0)},r=(D,O,F,U)=>{if(D==null)p(O.el=s(O.children),F,U);else{const j=O.el=D.el;O.children!==D.children&&u(j,O.children)}},o=(D,O,F,U)=>{D==null?p(O.el=a(O.children||""),F,U):O.el=D.el},i=(D,O,F,U)=>{[D.el,D.anchor]=C(D.children,O,F,U,D.el,D.anchor)},n=({el:D,anchor:O},F,U)=>{let j;for(;D&&D!==O;)j=_(D),p(D,F,U),D=j;p(O,F,U)},h=({el:D,anchor:O})=>{let F;for(;D&&D!==O;)F=_(D),g(D),D=F;g(O)},S=(D,O,F,U,j,W,ee,Z,Y)=>{if(O.type==="svg"?ee="svg":O.type==="math"&&(ee="mathml"),D==null)b(O,F,U,j,W,ee,Z,Y);else{const V=D.el&&D.el._isVueCE?D.el:null;try{V&&V._beginPatch(),x(D,O,j,W,ee,Z,Y)}finally{V&&V._endPatch()}}},b=(D,O,F,U,j,W,ee,Z)=>{let Y,V;const{props:oe,shapeFlag:Q,transition:ie,dirs:re}=D;if(Y=D.el=y(D.type,W,oe&&oe.is,oe),Q&8?f(Y,D.children):Q&16&&v(D.children,Y,null,U,j,As(D,W),ee,Z),re&&ut(D,null,U,"created"),w(Y,D,D.scopeId,ee,U),oe){for(const _e in oe)_e!=="value"&&!Tt(_e)&&E(Y,_e,null,oe[_e],W,U);"value"in oe&&E(Y,"value",null,oe.value,W),(V=oe.onVnodeBeforeMount)&&Ue(V,U,D)}re&&ut(D,null,U,"beforeMount");const ue=Ro(j,ie);ue&&ie.beforeEnter(Y),p(Y,O,F),((V=oe&&oe.onVnodeMounted)||ue||re)&&Oe(()=>{V&&Ue(V,U,D),ue&&ie.enter(Y),re&&ut(D,null,U,"mounted")},j)},w=(D,O,F,U,j)=>{if(F&&m(D,F),U)for(let W=0;W<U.length;W++)m(D,U[W]);if(j){let W=j.subTree;if(O===W||Kr(W.type)&&(W.ssContent===O||W.ssFallback===O)){const ee=j.vnode;w(D,ee,ee.scopeId,ee.slotScopeIds,j.parent)}}},v=(D,O,F,U,j,W,ee,Z,Y=0)=>{for(let V=Y;V<D.length;V++){const oe=D[V]=Z?nt(D[V]):ze(D[V]);d(null,oe,O,F,U,j,W,ee,Z)}},x=(D,O,F,U,j,W,ee)=>{const Z=O.el=D.el;let{patchFlag:Y,dynamicChildren:V,dirs:oe}=O;Y|=D.patchFlag&16;const Q=D.props||ve,ie=O.props||ve;let re;if(F&&ft(F,!1),(re=ie.onVnodeBeforeUpdate)&&Ue(re,F,O,D),oe&&ut(O,D,F,"beforeUpdate"),F&&ft(F,!0),(Q.innerHTML&&ie.innerHTML==null||Q.textContent&&ie.textContent==null)&&f(Z,""),V?R(D.dynamicChildren,V,Z,F,U,As(O,j),W):ee||z(D,O,Z,null,F,U,As(O,j),W,!1),Y>0){if(Y&16)M(Z,Q,ie,F,j);else if(Y&2&&Q.class!==ie.class&&E(Z,"class",null,ie.class,j),Y&4&&E(Z,"style",Q.style,ie.style,j),Y&8){const ue=O.dynamicProps;for(let _e=0;_e<ue.length;_e++){const fe=ue[_e],we=Q[fe],be=ie[fe];(be!==we||fe==="value")&&E(Z,fe,we,be,j,F)}}Y&1&&D.children!==O.children&&f(Z,O.children)}else!ee&&V==null&&M(Z,Q,ie,F,j);((re=ie.onVnodeUpdated)||oe)&&Oe(()=>{re&&Ue(re,F,O,D),oe&&ut(O,D,F,"updated")},U)},R=(D,O,F,U,j,W,ee)=>{for(let Z=0;Z<O.length;Z++){const Y=D[Z],V=O[Z],oe=Y.el&&(Y.type===Ke||!Rt(Y,V)||Y.shapeFlag&198)?l(Y.el):F;d(Y,V,oe,null,U,j,W,ee,!0)}},M=(D,O,F,U,j)=>{if(O!==F){if(O!==ve)for(const W in O)!Tt(W)&&!(W in F)&&E(D,W,O[W],null,j,U);for(const W in F){if(Tt(W))continue;const ee=F[W],Z=O[W];ee!==Z&&W!=="value"&&E(D,W,Z,ee,j,U)}"value"in F&&E(D,"value",O.value,F.value,j)}},P=(D,O,F,U,j,W,ee,Z,Y)=>{const V=O.el=D?D.el:s(""),oe=O.anchor=D?D.anchor:s("");let{patchFlag:Q,dynamicChildren:ie,slotScopeIds:re}=O;re&&(Z=Z?Z.concat(re):re),D==null?(p(V,F,U),p(oe,F,U),v(O.children||[],F,oe,j,W,ee,Z,Y)):Q>0&&Q&64&&ie&&D.dynamicChildren?(R(D.dynamicChildren,ie,F,j,W,ee,Z),(O.key!=null||j&&O===j.subTree)&&Wr(D,O,!0)):z(D,O,F,oe,j,W,ee,Z,Y)},A=(D,O,F,U,j,W,ee,Z,Y)=>{O.slotScopeIds=Z,D==null?O.shapeFlag&512?j.ctx.activate(O,F,U,ee,Y):N(O,F,U,j,W,ee,Y):K(D,O,Y)},N=(D,O,F,U,j,W,ee)=>{const Z=D.component=Xo(D,U,j);if(Er(D)&&(Z.ctx.renderer=$),Yo(Z,!1,ee),Z.asyncDep){if(j&&j.registerDep(Z,X,ee),!D.el){const Y=Z.subTree=Ge(ct);o(null,Y,O,F),D.placeholder=Y.el}}else X(Z,D,O,F,j,W,ee)},K=(D,O,F)=>{const U=O.component=D.component;if(Wo(D,O,F))if(U.asyncDep&&!U.asyncResolved){J(U,O,F);return}else U.next=O,U.update();else O.el=D.el,U.vnode=O},X=(D,O,F,U,j,W,ee)=>{const Z=()=>{if(D.isMounted){let{next:Q,bu:ie,u:re,parent:ue,vnode:_e}=D;{const de=Nr(D);if(de){Q&&(Q.el=_e.el,J(D,Q,ee)),de.asyncDep.then(()=>{D.isUnmounted||Z()});return}}let fe=Q,we;ft(D,!1),Q?(Q.el=_e.el,J(D,Q,ee)):Q=_e,ie&&Jt(ie),(we=Q.props&&Q.props.onVnodeBeforeUpdate)&&Ue(we,ue,Q,_e),ft(D,!0);const be=xi(D),Ee=D.subTree;D.subTree=be,d(Ee,be,l(Ee.el),H(Ee),D,j,W),Q.el=be.el,fe===null&&No(D,be.el),re&&Oe(re,j),(we=Q.props&&Q.props.onVnodeUpdated)&&Oe(()=>Ue(we,ue,Q,_e),j)}else{let Q;const{el:ie,props:re}=O,{bm:ue,m:_e,parent:fe,root:we,type:be}=D,Ee=Pt(O);ft(D,!1),ue&&Jt(ue),!Ee&&(Q=re&&re.onVnodeBeforeMount)&&Ue(Q,fe,O),ft(D,!0);{we.ce&&we.ce._def.shadowRoot!==!1&&we.ce._injectChildStyle(be);const de=D.subTree=xi(D);d(null,de,F,U,D,j,W),O.el=de.el}if(_e&&Oe(_e,j),!Ee&&(Q=re&&re.onVnodeMounted)){const de=O;Oe(()=>Ue(Q,fe,de),j)}(O.shapeFlag&256||fe&&Pt(fe.vnode)&&fe.vnode.shapeFlag&256)&&D.a&&Oe(D.a,j),D.isMounted=!0,O=F=U=null}};D.scope.on();const Y=D.effect=new tr(Z);D.scope.off();const V=D.update=Y.run.bind(Y),oe=D.job=Y.runIfDirty.bind(Y);oe.i=D,oe.id=D.uid,Y.scheduler=()=>ni(oe),ft(D,!0),V()},J=(D,O,F)=>{O.component=D;const U=D.vnode.props;D.vnode=O,D.next=null,wo(D,O.props,U,F),Lo(D,O.children,F),tt(),vi(D),st()},z=(D,O,F,U,j,W,ee,Z,Y=!1)=>{const V=D&&D.children,oe=D?D.shapeFlag:0,Q=O.children,{patchFlag:ie,shapeFlag:re}=O;if(ie>0){if(ie&128){T(V,Q,F,U,j,W,ee,Z,Y);return}else if(ie&256){L(V,Q,F,U,j,W,ee,Z,Y);return}}re&8?(oe&16&&le(V,j,W),Q!==V&&f(F,Q)):oe&16?re&16?T(V,Q,F,U,j,W,ee,Z,Y):le(V,j,W,!0):(oe&8&&f(F,""),re&16&&v(Q,F,U,j,W,ee,Z,Y))},L=(D,O,F,U,j,W,ee,Z,Y)=>{D=D||Ct,O=O||Ct;const V=D.length,oe=O.length,Q=Math.min(V,oe);let ie;for(ie=0;ie<Q;ie++){const re=O[ie]=Y?nt(O[ie]):ze(O[ie]);d(D[ie],re,F,null,j,W,ee,Z,Y)}V>oe?le(D,j,W,!0,!1,Q):v(O,F,U,j,W,ee,Z,Y,Q)},T=(D,O,F,U,j,W,ee,Z,Y)=>{let V=0;const oe=O.length;let Q=D.length-1,ie=oe-1;for(;V<=Q&&V<=ie;){const re=D[V],ue=O[V]=Y?nt(O[V]):ze(O[V]);if(Rt(re,ue))d(re,ue,F,null,j,W,ee,Z,Y);else break;V++}for(;V<=Q&&V<=ie;){const re=D[Q],ue=O[ie]=Y?nt(O[ie]):ze(O[ie]);if(Rt(re,ue))d(re,ue,F,null,j,W,ee,Z,Y);else break;Q--,ie--}if(V>Q){if(V<=ie){const re=ie+1,ue=re<oe?O[re].el:U;for(;V<=ie;)d(null,O[V]=Y?nt(O[V]):ze(O[V]),F,ue,j,W,ee,Z,Y),V++}}else if(V>ie)for(;V<=Q;)I(D[V],j,W,!0),V++;else{const re=V,ue=V,_e=new Map;for(V=ue;V<=ie;V++){const Be=O[V]=Y?nt(O[V]):ze(O[V]);Be.key!=null&&_e.set(Be.key,V)}let fe,we=0;const be=ie-ue+1;let Ee=!1,de=0;const ht=new Array(be);for(V=0;V<be;V++)ht[V]=0;for(V=re;V<=Q;V++){const Be=D[V];if(we>=be){I(Be,j,W,!0);continue}let $e;if(Be.key!=null)$e=_e.get(Be.key);else for(fe=ue;fe<=ie;fe++)if(ht[fe-ue]===0&&Rt(Be,O[fe])){$e=fe;break}$e===void 0?I(Be,j,W,!0):(ht[$e-ue]=V+1,$e>=de?de=$e:Ee=!0,d(Be,O[$e],F,null,j,W,ee,Z,Y),we++)}const hi=Ee?Ao(ht):Ct;for(fe=hi.length-1,V=be-1;V>=0;V--){const Be=ue+V,$e=O[Be],ui=O[Be+1],fi=Be+1<oe?ui.el||ui.placeholder:U;ht[V]===0?d(null,$e,F,fi,j,W,ee,Z,Y):Ee&&(fe<0||V!==hi[fe]?B($e,F,fi,2):fe--)}}},B=(D,O,F,U,j=null)=>{const{el:W,type:ee,transition:Z,children:Y,shapeFlag:V}=D;if(V&6){B(D.component.subTree,O,F,U);return}if(V&128){D.suspense.move(O,F,U);return}if(V&64){ee.move(D,O,F,$);return}if(ee===Ke){p(W,O,F);for(let Q=0;Q<Y.length;Q++)B(Y[Q],O,F,U);p(D.anchor,O,F);return}if(ee===Ms){n(D,O,F);return}if(U!==2&&V&1&&Z)if(U===0)Z.beforeEnter(W),p(W,O,F),Oe(()=>Z.enter(W),j);else{const{leave:Q,delayLeave:ie,afterLeave:re}=Z,ue=()=>{D.ctx.isUnmounted?g(W):p(W,O,F)},_e=()=>{W._isLeaving&&W[Zn](!0),Q(W,()=>{ue(),re&&re()})};ie?ie(W,ue,_e):_e()}else p(W,O,F)},I=(D,O,F,U=!1,j=!1)=>{const{type:W,props:ee,ref:Z,children:Y,dynamicChildren:V,shapeFlag:oe,patchFlag:Q,dirs:ie,cacheIndex:re}=D;if(Q===-2&&(j=!1),Z!=null&&(tt(),Ot(Z,null,F,D,!0),st()),re!=null&&(O.renderCache[re]=void 0),oe&256){O.ctx.deactivate(D);return}const ue=oe&1&&ie,_e=!Pt(D);let fe;if(_e&&(fe=ee&&ee.onVnodeBeforeUnmount)&&Ue(fe,O,D),oe&6)ae(D.component,F,U);else{if(oe&128){D.suspense.unmount(F,U);return}ue&&ut(D,null,O,"beforeUnmount"),oe&64?D.type.remove(D,O,F,$,U):V&&!V.hasOnce&&(W!==Ke||Q>0&&Q&64)?le(V,O,F,!1,!0):(W===Ke&&Q&384||!j&&oe&16)&&le(Y,O,F),U&&q(D)}(_e&&(fe=ee&&ee.onVnodeUnmounted)||ue)&&Oe(()=>{fe&&Ue(fe,O,D),ue&&ut(D,null,O,"unmounted")},F)},q=D=>{const{type:O,el:F,anchor:U,transition:j}=D;if(O===Ke){te(F,U);return}if(O===Ms){h(D);return}const W=()=>{g(F),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(D.shapeFlag&1&&j&&!j.persisted){const{leave:ee,delayLeave:Z}=j,Y=()=>ee(F,W);Z?Z(D.el,W,Y):Y()}else W()},te=(D,O)=>{let F;for(;D!==O;)F=_(D),g(D),D=F;g(O)},ae=(D,O,F)=>{const{bum:U,scope:j,job:W,subTree:ee,um:Z,m:Y,a:V}=D;Ei(Y),Ei(V),U&&Jt(U),j.stop(),W&&(W.flags|=8,I(ee,D,O,F)),Z&&Oe(Z,O),Oe(()=>{D.isUnmounted=!0},O)},le=(D,O,F,U=!1,j=!1,W=0)=>{for(let ee=W;ee<D.length;ee++)I(D[ee],O,F,U,j)},H=D=>{if(D.shapeFlag&6)return H(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const O=_(D.anchor||D.el),F=O&&O[Jn];return F?_(F):O};let k=!1;const G=(D,O,F)=>{D==null?O._vnode&&I(O._vnode,null,null,!0):d(O._vnode||null,D,O,null,null,null,F),O._vnode=D,k||(k=!0,vi(),Sr(),k=!1)},$={p:d,um:I,m:B,r:q,mt:N,mc:v,pc:z,pbc:R,n:H,o:e};return{render:G,hydrate:void 0,createApp:So(G)}}function As({type:e,props:t},c){return c==="svg"&&e==="foreignObject"||c==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:c}function ft({effect:e,job:t},c){c?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ro(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Wr(e,t,c=!1){const p=e.children,g=t.children;if(ce(p)&&ce(g))for(let E=0;E<p.length;E++){const y=p[E];let s=g[E];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=g[E]=nt(g[E]),s.el=y.el),!c&&s.patchFlag!==-2&&Wr(y,s)),s.type===Cs&&s.patchFlag!==-1&&(s.el=y.el),s.type===ct&&!s.el&&(s.el=y.el)}}function Ao(e){const t=e.slice(),c=[0];let p,g,E,y,s;const a=e.length;for(p=0;p<a;p++){const u=e[p];if(u!==0){if(g=c[c.length-1],e[g]<u){t[p]=g,c.push(p);continue}for(E=0,y=c.length-1;E<y;)s=E+y>>1,e[c[s]]<u?E=s+1:y=s;u<e[c[E]]&&(E>0&&(t[p]=c[E-1]),c[E]=p)}}for(E=c.length,y=c[E-1];E-- >0;)c[E]=y,y=t[y];return c}function Nr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Nr(t)}function Ei(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const To=Symbol.for("v-scx"),Mo=()=>Yt(To);function Ts(e,t,c){return $r(e,t,c)}function $r(e,t,c=ve){const{immediate:p,deep:g,flush:E,once:y}=c,s=ke({},c),a=t&&p||!t&&E!=="post";let u;if(jt){if(E==="sync"){const m=Mo();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=qe,m.resume=qe,m.pause=qe,m}}const f=Ae;s.call=(m,C,d)=>Je(m,f,C,d);let l=!1;E==="post"?s.scheduler=m=>{Oe(m,f&&f.suspense)}:E!=="sync"&&(l=!0,s.scheduler=(m,C)=>{C?m():ni(m)}),s.augmentJob=m=>{t&&(m.flags|=4),l&&(m.flags|=2,f&&(m.id=f.uid,m.i=f))};const _=zn(e,t,s);return jt&&(u?u.push(_):a&&_()),_}function Bo(e,t,c){const p=this.proxy,g=Ce(e)?e.includes(".")?Ur(p,e):()=>p[e]:e.bind(p,p);let E;he(t)?E=t:(E=t.handler,c=t);const y=Vt(this),s=$r(g,E.bind(p),c);return y(),s}function Ur(e,t){const c=t.split(".");return()=>{let p=e;for(let g=0;g<c.length&&p;g++)p=p[c[g]];return p}}const Oo=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${at(t)}Modifiers`]||e[`${mt(t)}Modifiers`];function Po(e,t,...c){if(e.isUnmounted)return;const p=e.vnode.props||ve;let g=c;const E=t.startsWith("update:"),y=E&&Oo(p,t.slice(7));y&&(y.trim&&(g=c.map(f=>Ce(f)?f.trim():f)),y.number&&(g=c.map(ds)));let s,a=p[s=ys(t)]||p[s=ys(at(t))];!a&&E&&(a=p[s=ys(mt(t))]),a&&Je(a,e,6,g);const u=p[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Je(u,e,6,g)}}const Io=new WeakMap;function jr(e,t,c=!1){const p=c?Io:t.emitsCache,g=p.get(e);if(g!==void 0)return g;const E=e.emits;let y={},s=!1;if(!he(e)){const a=u=>{const f=jr(u,t,!0);f&&(s=!0,ke(y,f))};!c&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!E&&!s?(Se(e)&&p.set(e,null),null):(ce(E)?E.forEach(a=>y[a]=null):ke(y,E),Se(e)&&p.set(e,y),y)}function bs(e,t){return!e||!hs(t)?!1:(t=t.slice(2).replace(/Once$/,""),ge(e,t[0].toLowerCase()+t.slice(1))||ge(e,mt(t))||ge(e,t))}function xi(e){const{type:t,vnode:c,proxy:p,withProxy:g,propsOptions:[E],slots:y,attrs:s,emit:a,render:u,renderCache:f,props:l,data:_,setupState:m,ctx:C,inheritAttrs:d}=e,r=rs(e);let o,i;try{if(c.shapeFlag&4){const h=g||p,S=h;o=ze(u.call(S,h,f,l,m,_,C)),i=s}else{const h=t;o=ze(h.length>1?h(l,{attrs:s,slots:y,emit:a}):h(l,null)),i=t.props?s:Ho(s)}}catch(h){Ht.length=0,vs(h,e,1),o=Ge(ct)}let n=o;if(i&&d!==!1){const h=Object.keys(i),{shapeFlag:S}=n;h.length&&S&7&&(E&&h.some(qs)&&(i=Fo(i,E)),n=kt(n,i,!1,!0))}return c.dirs&&(n=kt(n,null,!1,!0),n.dirs=n.dirs?n.dirs.concat(c.dirs):c.dirs),c.transition&&oi(n,c.transition),o=n,rs(r),o}const Ho=e=>{let t;for(const c in e)(c==="class"||c==="style"||hs(c))&&((t||(t={}))[c]=e[c]);return t},Fo=(e,t)=>{const c={};for(const p in e)(!qs(p)||!(p.slice(9)in t))&&(c[p]=e[p]);return c};function Wo(e,t,c){const{props:p,children:g,component:E}=e,{props:y,children:s,patchFlag:a}=t,u=E.emitsOptions;if(t.dirs||t.transition)return!0;if(c&&a>=0){if(a&1024)return!0;if(a&16)return p?Li(p,y,u):!!y;if(a&8){const f=t.dynamicProps;for(let l=0;l<f.length;l++){const _=f[l];if(y[_]!==p[_]&&!bs(u,_))return!0}}}else return(g||s)&&(!s||!s.$stable)?!0:p===y?!1:p?y?Li(p,y,u):!0:!!y;return!1}function Li(e,t,c){const p=Object.keys(t);if(p.length!==Object.keys(e).length)return!0;for(let g=0;g<p.length;g++){const E=p[g];if(t[E]!==e[E]&&!bs(c,E))return!0}return!1}function No({vnode:e,parent:t},c){for(;t;){const p=t.subTree;if(p.suspense&&p.suspense.activeBranch===e&&(p.el=e.el),p===e)(e=t.vnode).el=c,t=t.parent;else break}}const Kr=e=>e.__isSuspense;function $o(e,t){t&&t.pendingBranch?ce(e)?t.effects.push(...e):t.effects.push(e):Gn(e)}const Ke=Symbol.for("v-fgt"),Cs=Symbol.for("v-txt"),ct=Symbol.for("v-cmt"),Ms=Symbol.for("v-stc"),Ht=[];let He=null;function Me(e=!1){Ht.push(He=e?null:[])}function Uo(){Ht.pop(),He=Ht[Ht.length-1]||null}let Ut=1;function ki(e,t=!1){Ut+=e,e<0&&He&&t&&(He.hasOnce=!0)}function zr(e){return e.dynamicChildren=Ut>0?He||Ct:null,Uo(),Ut>0&&He&&He.push(e),e}function Pe(e,t,c,p,g,E){return zr(ne(e,t,c,p,g,E,!0))}function jo(e,t,c,p,g){return zr(Ge(e,t,c,p,g,!0))}function Vr(e){return e?e.__v_isVNode===!0:!1}function Rt(e,t){return e.type===t.type&&e.key===t.key}const qr=({key:e})=>e??null,Zt=({ref:e,ref_key:t,ref_for:c})=>(typeof e=="number"&&(e=""+e),e!=null?Ce(e)||Le(e)||he(e)?{i:Fe,r:e,k:t,f:!!c}:e:null);function ne(e,t=null,c=null,p=0,g=null,E=e===Ke?0:1,y=!1,s=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&qr(t),ref:t&&Zt(t),scopeId:Cr,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:E,patchFlag:p,dynamicProps:g,dynamicChildren:null,appContext:null,ctx:Fe};return s?(ci(a,c),E&128&&e.normalize(a)):c&&(a.shapeFlag|=Ce(c)?8:16),Ut>0&&!y&&He&&(a.patchFlag>0||E&6)&&a.patchFlag!==32&&He.push(a),a}const Ge=Ko;function Ko(e,t=null,c=null,p=0,g=null,E=!1){if((!e||e===co)&&(e=ct),Vr(e)){const s=kt(e,t,!0);return c&&ci(s,c),Ut>0&&!E&&He&&(s.shapeFlag&6?He[He.indexOf(e)]=s:He.push(s)),s.patchFlag=-2,s}if(ta(e)&&(e=e.__vccOpts),t){t=zo(t);let{class:s,style:a}=t;s&&!Ce(s)&&(t.class=Ft(s)),Se(a)&&(ri(a)&&!ce(a)&&(a=ke({},a)),t.style=Js(a))}const y=Ce(e)?1:Kr(e)?128:Yn(e)?64:Se(e)?4:he(e)?2:0;return ne(e,t,c,p,g,y,E,!0)}function zo(e){return e?ri(e)||Br(e)?ke({},e):e:null}function kt(e,t,c=!1,p=!1){const{props:g,ref:E,patchFlag:y,children:s,transition:a}=e,u=t?Vo(g||{},t):g,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&qr(u),ref:t&&t.ref?c&&E?ce(E)?E.concat(Zt(t)):[E,Zt(t)]:Zt(t):E,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ke?y===-1?16:y|16:y,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&kt(e.ssContent),ssFallback:e.ssFallback&&kt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&p&&oi(f,a.clone(f)),f}function js(e=" ",t=0){return Ge(Cs,null,e,t)}function Qt(e="",t=!1){return t?(Me(),jo(ct,null,e)):Ge(ct,null,e)}function ze(e){return e==null||typeof e=="boolean"?Ge(ct):ce(e)?Ge(Ke,null,e.slice()):Vr(e)?nt(e):Ge(Cs,null,String(e))}function nt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:kt(e)}function ci(e,t){let c=0;const{shapeFlag:p}=e;if(t==null)t=null;else if(ce(t))c=16;else if(typeof t=="object")if(p&65){const g=t.default;g&&(g._c&&(g._d=!1),ci(e,g()),g._c&&(g._d=!0));return}else{c=32;const g=t._;!g&&!Br(t)?t._ctx=Fe:g===3&&Fe&&(Fe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else he(t)?(t={default:t,_ctx:Fe},c=32):(t=String(t),p&64?(c=16,t=[js(t)]):c=8);e.children=t,e.shapeFlag|=c}function Vo(...e){const t={};for(let c=0;c<e.length;c++){const p=e[c];for(const g in p)if(g==="class")t.class!==p.class&&(t.class=Ft([t.class,p.class]));else if(g==="style")t.style=Js([t.style,p.style]);else if(hs(g)){const E=t[g],y=p[g];y&&E!==y&&!(ce(E)&&E.includes(y))&&(t[g]=E?[].concat(E,y):y)}else g!==""&&(t[g]=p[g])}return t}function Ue(e,t,c,p=null){Je(e,t,7,[c,p])}const qo=Ar();let Go=0;function Xo(e,t,c){const p=e.type,g=(t?t.appContext:e.appContext)||qo,E={uid:Go++,vnode:e,type:p,parent:t,appContext:g,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vn(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(g.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pr(p,g),emitsOptions:jr(p,g),emit:null,emitted:null,propsDefaults:ve,inheritAttrs:p.inheritAttrs,ctx:ve,data:ve,props:ve,attrs:ve,slots:ve,refs:ve,setupState:ve,setupContext:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return E.ctx={_:E},E.root=t?t.root:E,E.emit=Po.bind(null,E),e.ce&&e.ce(E),E}let Ae=null;const Jo=()=>Ae||Fe;let as,Ks;{const e=_s(),t=(c,p)=>{let g;return(g=e[c])||(g=e[c]=[]),g.push(p),E=>{g.length>1?g.forEach(y=>y(E)):g[0](E)}};as=t("__VUE_INSTANCE_SETTERS__",c=>Ae=c),Ks=t("__VUE_SSR_SETTERS__",c=>jt=c)}const Vt=e=>{const t=Ae;return as(e),e.scope.on(),()=>{e.scope.off(),as(t)}},Di=()=>{Ae&&Ae.scope.off(),as(null)};function Gr(e){return e.vnode.shapeFlag&4}let jt=!1;function Yo(e,t=!1,c=!1){t&&Ks(t);const{props:p,children:g}=e.vnode,E=Gr(e);Co(e,p,E,t),xo(e,g,c||t);const y=E?Zo(e,t):void 0;return t&&Ks(!1),y}function Zo(e,t){const c=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,uo);const{setup:p}=c;if(p){tt();const g=e.setupContext=p.length>1?ea(e):null,E=Vt(e),y=zt(p,e,0,[e.props,g]),s=qi(y);if(st(),E(),(s||e.sp)&&!Pt(e)&&yr(e),s){if(y.then(Di,Di),t)return y.then(a=>{Ri(e,a)}).catch(a=>{vs(a,e,0)});e.asyncDep=y}else Ri(e,y)}else Xr(e)}function Ri(e,t,c){he(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Se(t)&&(e.setupState=pr(t)),Xr(e)}function Xr(e,t,c){const p=e.type;e.render||(e.render=p.render||qe);{const g=Vt(e);tt();try{fo(e)}finally{st(),g()}}}const Qo={get(e,t){return xe(e,"get",""),e[t]}};function ea(e){const t=c=>{e.exposed=c||{}};return{attrs:new Proxy(e.attrs,Qo),slots:e.slots,emit:e.emit,expose:t}}function ws(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(pr(Fn(e.exposed)),{get(t,c){if(c in t)return t[c];if(c in It)return It[c](e)},has(t,c){return c in t||c in It}})):e.proxy}function ta(e){return he(e)&&"__vccOpts"in e}const Jr=(e,t)=>jn(e,t,jt),sa="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zs;const Ai=typeof window<"u"&&window.trustedTypes;if(Ai)try{zs=Ai.createPolicy("vue",{createHTML:e=>e})}catch{}const Yr=zs?e=>zs.createHTML(e):e=>e,ia="http://www.w3.org/2000/svg",ra="http://www.w3.org/1998/Math/MathML",Ze=typeof document<"u"?document:null,Ti=Ze&&Ze.createElement("template"),na={insert:(e,t,c)=>{t.insertBefore(e,c||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,c,p)=>{const g=t==="svg"?Ze.createElementNS(ia,e):t==="mathml"?Ze.createElementNS(ra,e):c?Ze.createElement(e,{is:c}):Ze.createElement(e);return e==="select"&&p&&p.multiple!=null&&g.setAttribute("multiple",p.multiple),g},createText:e=>Ze.createTextNode(e),createComment:e=>Ze.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ze.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,c,p,g,E){const y=c?c.previousSibling:t.lastChild;if(g&&(g===E||g.nextSibling))for(;t.insertBefore(g.cloneNode(!0),c),!(g===E||!(g=g.nextSibling)););else{Ti.innerHTML=Yr(p==="svg"?`<svg>${e}</svg>`:p==="mathml"?`<math>${e}</math>`:e);const s=Ti.content;if(p==="svg"||p==="mathml"){const a=s.firstChild;for(;a.firstChild;)s.appendChild(a.firstChild);s.removeChild(a)}t.insertBefore(s,c)}return[y?y.nextSibling:t.firstChild,c?c.previousSibling:t.lastChild]}},oa=Symbol("_vtc");function aa(e,t,c){const p=e[oa];p&&(t=(t?[t,...p]:[...p]).join(" ")),t==null?e.removeAttribute("class"):c?e.setAttribute("class",t):e.className=t}const Mi=Symbol("_vod"),la=Symbol("_vsh"),ca=Symbol(""),ha=/(?:^|;)\s*display\s*:/;function ua(e,t,c){const p=e.style,g=Ce(c);let E=!1;if(c&&!g){if(t)if(Ce(t))for(const y of t.split(";")){const s=y.slice(0,y.indexOf(":")).trim();c[s]==null&&es(p,s,"")}else for(const y in t)c[y]==null&&es(p,y,"");for(const y in c)y==="display"&&(E=!0),es(p,y,c[y])}else if(g){if(t!==c){const y=p[ca];y&&(c+=";"+y),p.cssText=c,E=ha.test(c)}}else t&&e.removeAttribute("style");Mi in e&&(e[Mi]=E?p.display:"",e[la]&&(p.display="none"))}const Bi=/\s*!important$/;function es(e,t,c){if(ce(c))c.forEach(p=>es(e,t,p));else if(c==null&&(c=""),t.startsWith("--"))e.setProperty(t,c);else{const p=fa(e,t);Bi.test(c)?e.setProperty(mt(p),c.replace(Bi,""),"important"):e[p]=c}}const Oi=["Webkit","Moz","ms"],Bs={};function fa(e,t){const c=Bs[t];if(c)return c;let p=at(t);if(p!=="filter"&&p in e)return Bs[t]=p;p=Ji(p);for(let g=0;g<Oi.length;g++){const E=Oi[g]+p;if(E in e)return Bs[t]=E}return t}const Pi="http://www.w3.org/1999/xlink";function Ii(e,t,c,p,g,E=_n(t)){p&&t.startsWith("xlink:")?c==null?e.removeAttributeNS(Pi,t.slice(6,t.length)):e.setAttributeNS(Pi,t,c):c==null||E&&!Zi(c)?e.removeAttribute(t):e.setAttribute(t,E?"":Xe(c)?String(c):c)}function Hi(e,t,c,p,g){if(t==="innerHTML"||t==="textContent"){c!=null&&(e[t]=t==="innerHTML"?Yr(c):c);return}const E=e.tagName;if(t==="value"&&E!=="PROGRESS"&&!E.includes("-")){const s=E==="OPTION"?e.getAttribute("value")||"":e.value,a=c==null?e.type==="checkbox"?"on":"":String(c);(s!==a||!("_value"in e))&&(e.value=a),c==null&&e.removeAttribute(t),e._value=c;return}let y=!1;if(c===""||c==null){const s=typeof e[t];s==="boolean"?c=Zi(c):c==null&&s==="string"?(c="",y=!0):s==="number"&&(c=0,y=!0)}try{e[t]=c}catch{}y&&e.removeAttribute(g||t)}function _t(e,t,c,p){e.addEventListener(t,c,p)}function da(e,t,c,p){e.removeEventListener(t,c,p)}const Fi=Symbol("_vei");function _a(e,t,c,p,g=null){const E=e[Fi]||(e[Fi]={}),y=E[t];if(p&&y)y.value=p;else{const[s,a]=pa(t);if(p){const u=E[t]=ma(p,g);_t(e,s,u,a)}else y&&(da(e,s,y,a),E[t]=void 0)}}const Wi=/(?:Once|Passive|Capture)$/;function pa(e){let t;if(Wi.test(e)){t={};let p;for(;p=e.match(Wi);)e=e.slice(0,e.length-p[0].length),t[p[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):mt(e.slice(2)),t]}let Os=0;const ga=Promise.resolve(),va=()=>Os||(ga.then(()=>Os=0),Os=Date.now());function ma(e,t){const c=p=>{if(!p._vts)p._vts=Date.now();else if(p._vts<=c.attached)return;Je(Sa(p,c.value),t,5,[p])};return c.value=e,c.attached=va(),c}function Sa(e,t){if(ce(t)){const c=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{c.call(e),e._stopped=!0},t.map(p=>g=>!g._stopped&&p&&p(g))}else return t}const Ni=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ba=(e,t,c,p,g,E)=>{const y=g==="svg";t==="class"?aa(e,p,y):t==="style"?ua(e,c,p):hs(t)?qs(t)||_a(e,t,c,p,E):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ca(e,t,p,y))?(Hi(e,t,p),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ii(e,t,p,y,E,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ce(p))?Hi(e,at(t),p,E,t):(t==="true-value"?e._trueValue=p:t==="false-value"&&(e._falseValue=p),Ii(e,t,p,y))};function Ca(e,t,c,p){if(p)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ni(t)&&he(c));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const g=e.tagName;if(g==="IMG"||g==="VIDEO"||g==="CANVAS"||g==="SOURCE")return!1}return Ni(t)&&Ce(c)?!1:t in e}const ls=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ce(t)?c=>Jt(t,c):t};function wa(e){e.target.composing=!0}function $i(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Lt=Symbol("_assign");function Ui(e,t,c){return t&&(e=e.trim()),c&&(e=ds(e)),e}const ji={created(e,{modifiers:{lazy:t,trim:c,number:p}},g){e[Lt]=ls(g);const E=p||g.props&&g.props.type==="number";_t(e,t?"change":"input",y=>{y.target.composing||e[Lt](Ui(e.value,c,E))}),(c||E)&&_t(e,"change",()=>{e.value=Ui(e.value,c,E)}),t||(_t(e,"compositionstart",wa),_t(e,"compositionend",$i),_t(e,"change",$i))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:c,modifiers:{lazy:p,trim:g,number:E}},y){if(e[Lt]=ls(y),e.composing)return;const s=(E||e.type==="number")&&!/^0\d/.test(e.value)?ds(e.value):e.value,a=t??"";s!==a&&(document.activeElement===e&&e.type!=="range"&&(p&&t===c||g&&e.value.trim()===a)||(e.value=a))}},ya={deep:!0,created(e,{value:t,modifiers:{number:c}},p){const g=us(t);_t(e,"change",()=>{const E=Array.prototype.filter.call(e.options,y=>y.selected).map(y=>c?ds(cs(y)):cs(y));e[Lt](e.multiple?g?new Set(E):E:E[0]),e._assigning=!0,vr(()=>{e._assigning=!1})}),e[Lt]=ls(p)},mounted(e,{value:t}){Ki(e,t)},beforeUpdate(e,t,c){e[Lt]=ls(c)},updated(e,{value:t}){e._assigning||Ki(e,t)}};function Ki(e,t){const c=e.multiple,p=ce(t);if(!(c&&!p&&!us(t))){for(let g=0,E=e.options.length;g<E;g++){const y=e.options[g],s=cs(y);if(c)if(p){const a=typeof s;a==="string"||a==="number"?y.selected=t.some(u=>String(u)===String(s)):y.selected=gn(t,s)>-1}else y.selected=t.has(s);else if(ps(cs(y),t)){e.selectedIndex!==g&&(e.selectedIndex=g);return}}!c&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function cs(e){return"_value"in e?e._value:e.value}const Ea=["ctrl","shift","alt","meta"],xa={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Ea.some(c=>e[`${c}Key`]&&!t.includes(c))},La=(e,t)=>{const c=e._withMods||(e._withMods={}),p=t.join(".");return c[p]||(c[p]=(g,...E)=>{for(let y=0;y<t.length;y++){const s=xa[t[y]];if(s&&s(g,t))return}return e(g,...E)})},ka=ke({patchProp:ba},na);let zi;function Da(){return zi||(zi=ko(ka))}const Ra=(...e)=>{const t=Da().createApp(...e),{mount:c}=t;return t.mount=p=>{const g=Ta(p);if(!g)return;const E=t._component;!he(E)&&!E.render&&!E.template&&(E.template=g.innerHTML),g.nodeType===1&&(g.textContent="");const y=c(g,!1,Aa(g));return g instanceof Element&&(g.removeAttribute("v-cloak"),g.setAttribute("data-v-app","")),y},t};function Aa(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ta(e){return Ce(e)?document.querySelector(e):e}var Zr={exports:{}};(function(e,t){(function(c,p){e.exports=p()})(globalThis,()=>(()=>{var c={4567:function(y,s,a){var u=this&&this.__decorate||function(i,n,h,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,h):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,h,S);else for(var x=i.length-1;x>=0;x--)(b=i[x])&&(v=(w<3?b(v):w>3?b(n,h,v):b(n,h))||v);return w>3&&v&&Object.defineProperty(n,h,v),v},f=this&&this.__param||function(i,n){return function(h,S){n(h,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const l=a(9042),_=a(9924),m=a(844),C=a(4725),d=a(2585),r=a(3656);let o=s.AccessibilityManager=class extends m.Disposable{constructor(i,n,h,S){super(),this._terminal=i,this._coreBrowserService=h,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new _.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(b=>this._handleResize(b.rows))),this.register(this._terminal.onRender(b=>this._refreshRows(b.start,b.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(b=>this._handleChar(b))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(b=>this._handleTab(b))),this.register(this._terminal.onKey(b=>this._handleKey(b.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,r.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(i){for(let n=0;n<i;n++)this._handleChar(" ")}_handleChar(i){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(i){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(i)||this._charsToConsume.push(i)}_refreshRows(i,n){this._liveRegionDebouncer.refresh(i,n,this._terminal.rows)}_renderRows(i,n){const h=this._terminal.buffer,S=h.lines.length.toString();for(let b=i;b<=n;b++){const w=h.lines.get(h.ydisp+b),v=[],x=(w==null?void 0:w.translateToString(!0,void 0,void 0,v))||"",R=(h.ydisp+b+1).toString(),M=this._rowElements[b];M&&(x.length===0?(M.innerText="",this._rowColumns.set(M,[0,1])):(M.textContent=x,this._rowColumns.set(M,v)),M.setAttribute("aria-posinset",R),M.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(i,n){const h=i.target,S=this._rowElements[n===0?1:this._rowElements.length-2];if(h.getAttribute("aria-posinset")===(n===0?"1":`${this._terminal.buffer.lines.length}`)||i.relatedTarget!==S)return;let b,w;if(n===0?(b=h,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(b=this._rowElements.shift(),w=h,this._rowContainer.removeChild(b)),b.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),n===0){const v=this._createAccessibilityTreeNode();this._rowElements.unshift(v),this._rowContainer.insertAdjacentElement("afterbegin",v)}else{const v=this._createAccessibilityTreeNode();this._rowElements.push(v),this._rowContainer.appendChild(v)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(n===0?-1:1),this._rowElements[n===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}_handleSelectionChange(){var x;if(this._rowElements.length===0)return;const i=document.getSelection();if(!i)return;if(i.isCollapsed)return void(this._rowContainer.contains(i.anchorNode)&&this._terminal.clearSelection());if(!i.anchorNode||!i.focusNode)return void console.error("anchorNode and/or focusNode are null");let n={node:i.anchorNode,offset:i.anchorOffset},h={node:i.focusNode,offset:i.focusOffset};if((n.node.compareDocumentPosition(h.node)&Node.DOCUMENT_POSITION_PRECEDING||n.node===h.node&&n.offset>h.offset)&&([n,h]=[h,n]),n.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(n={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(n.node))return;const S=this._rowElements.slice(-1)[0];if(h.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(h={node:S,offset:((x=S.textContent)==null?void 0:x.length)??0}),!this._rowContainer.contains(h.node))return;const b=({node:R,offset:M})=>{const P=R instanceof Text?R.parentNode:R;let A=parseInt(P==null?void 0:P.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const N=this._rowColumns.get(P);if(!N)return console.warn("columns is null. Race condition?"),null;let K=M<N.length?N[M]:N.slice(-1)[0]+1;return K>=this._terminal.cols&&(++A,K=0),{row:A,column:K}},w=b(n),v=b(h);if(w&&v){if(w.row>v.row||w.row===v.row&&w.column>=v.column)throw new Error("invalid range");this._terminal.select(w.column,w.row,(v.row-w.row)*this._terminal.cols-w.column+v.column)}}_handleResize(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let n=this._rowContainer.children.length;n<this._terminal.rows;n++)this._rowElements[n]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[n]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const i=this._coreBrowserService.mainDocument.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}}_refreshRowDimensions(i){i.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=o=u([f(1,d.IInstantiationService),f(2,C.ICoreBrowserService),f(3,C.IRenderService)],o)},3614:(y,s)=>{function a(_){return _.replace(/\r?\n/g,"\r")}function u(_,m){return m?"\x1B[200~"+_+"\x1B[201~":_}function f(_,m,C,d){_=u(_=a(_),C.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(_,!0),m.value=""}function l(_,m,C){const d=C.getBoundingClientRect(),r=_.clientX-d.left-10,o=_.clientY-d.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${r}px`,m.style.top=`${o}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=a,s.bracketTextForPaste=u,s.copyHandler=function(_,m){_.clipboardData&&_.clipboardData.setData("text/plain",m.selectionText),_.preventDefault()},s.handlePasteEvent=function(_,m,C,d){_.stopPropagation(),_.clipboardData&&f(_.clipboardData.getData("text/plain"),m,C,d)},s.paste=f,s.moveTextAreaUnderMouseCursor=l,s.rightClickHandler=function(_,m,C,d,r){l(_,m,C),r&&d.rightClickSelect(_),m.value=d.selectionText,m.select()}},7239:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const u=a(1505);s.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(f,l,_){this._css.set(f,l,_)}getCss(f,l){return this._css.get(f,l)}setColor(f,l,_){this._color.set(f,l,_)}getColor(f,l){return this._color.get(f,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,u,f,l){a.addEventListener(u,f,l);let _=!1;return{dispose:()=>{_||(_=!0,a.removeEventListener(u,f,l))}}}},3551:function(y,s,a){var u=this&&this.__decorate||function(o,i,n,h){var S,b=arguments.length,w=b<3?i:h===null?h=Object.getOwnPropertyDescriptor(i,n):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,i,n,h);else for(var v=o.length-1;v>=0;v--)(S=o[v])&&(w=(b<3?S(w):b>3?S(i,n,w):S(i,n))||w);return b>3&&w&&Object.defineProperty(i,n,w),w},f=this&&this.__param||function(o,i){return function(n,h){i(n,h,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier=void 0;const l=a(3656),_=a(8460),m=a(844),C=a(2585),d=a(4725);let r=s.Linkifier=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(o,i,n,h,S){super(),this._element=o,this._mouseService=i,this._renderService=n,this._bufferService=h,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{var b;this._lastMouseEvent=void 0,(b=this._activeProviderReplies)==null||b.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){this._lastMouseEvent=o;const i=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!i)return;this._isMouseOut=!1;const n=o.composedPath();for(let h=0;h<n.length;h++){const S=n[h];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._handleHover(i),this._lastBufferCell=i)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,i){var h,S;this._activeProviderReplies&&i||((h=this._activeProviderReplies)==null||h.forEach(b=>{b==null||b.forEach(w=>{w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let n=!1;for(const[b,w]of this._linkProviderService.linkProviders.entries())i?(S=this._activeProviderReplies)!=null&&S.get(b)&&(n=this._checkLinkProviderResult(b,o,n)):w.provideLinks(o.y,v=>{var R,M;if(this._isMouseOut)return;const x=v==null?void 0:v.map(P=>({link:P}));(R=this._activeProviderReplies)==null||R.set(b,x),n=this._checkLinkProviderResult(b,o,n),((M=this._activeProviderReplies)==null?void 0:M.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,i){const n=new Set;for(let h=0;h<i.size;h++){const S=i.get(h);if(S)for(let b=0;b<S.length;b++){const w=S[b],v=w.link.range.start.y<o?0:w.link.range.start.x,x=w.link.range.end.y>o?this._bufferService.cols:w.link.range.end.x;for(let R=v;R<=x;R++){if(n.has(R)){S.splice(b--,1);break}n.add(R)}}}}_checkLinkProviderResult(o,i,n){var b;if(!this._activeProviderReplies)return n;const h=this._activeProviderReplies.get(o);let S=!1;for(let w=0;w<o;w++)this._activeProviderReplies.has(w)&&!this._activeProviderReplies.get(w)||(S=!0);if(!S&&h){const w=h.find(v=>this._linkAtPosition(v.link,i));w&&(n=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let w=0;w<this._activeProviderReplies.size;w++){const v=(b=this._activeProviderReplies.get(w))==null?void 0:b.find(x=>this._linkAtPosition(x.link,i));if(v){n=!0,this._handleNewLink(v);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._currentLink)return;const i=this._positionFromMouseEvent(o,this._element,this._mouseService);i&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,i){this._currentLink&&this._lastMouseEvent&&(!o||!i||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._lastMouseEvent)return;const i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(o.link,i)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var n,h;return(h=(n=this._currentLink)==null?void 0:n.state)==null?void 0:h.decorations.pointerCursor},set:n=>{var h;(h=this._currentLink)!=null&&h.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>{var n,h;return(h=(n=this._currentLink)==null?void 0:n.state)==null?void 0:h.decorations.underline},set:n=>{var h,S,b;(h=this._currentLink)!=null&&h.state&&((b=(S=this._currentLink)==null?void 0:S.state)==null?void 0:b.decorations.underline)!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;const h=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(h,S),this._lastMouseEvent)){const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}})))}_linkHover(o,i,n){var h;(h=this._currentLink)!=null&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(n,i.text)}_fireUnderlineEvent(o,i){const n=o.range,h=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-h-1,n.end.x,n.end.y-h-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(o,i,n){var h;(h=this._currentLink)!=null&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(n,i.text)}_linkAtPosition(o,i){const n=o.range.start.y*this._bufferService.cols+o.range.start.x,h=o.range.end.y*this._bufferService.cols+o.range.end.x,S=i.y*this._bufferService.cols+i.x;return n<=S&&S<=h}_positionFromMouseEvent(o,i,n){const h=n.getCoords(o,i,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,i,n,h,S){return{x1:o,y1:i,x2:n,y2:h,cols:this._bufferService.cols,fg:S}}};s.Linkifier=r=u([f(1,d.IMouseService),f(2,d.IRenderService),f(3,C.IBufferService),f(4,d.ILinkProviderService)],r)},9042:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(y,s,a){var u=this&&this.__decorate||function(d,r,o,i){var n,h=arguments.length,S=h<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(d,r,o,i);else for(var b=d.length-1;b>=0;b--)(n=d[b])&&(S=(h<3?n(S):h>3?n(r,o,S):n(r,o))||S);return h>3&&S&&Object.defineProperty(r,o,S),S},f=this&&this.__param||function(d,r){return function(o,i){r(o,i,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const l=a(511),_=a(2585);let m=s.OscLinkProvider=class{constructor(d,r,o){this._bufferService=d,this._optionsService=r,this._oscLinkService=o}provideLinks(d,r){var x;const o=this._bufferService.buffer.lines.get(d-1);if(!o)return void r(void 0);const i=[],n=this._optionsService.rawOptions.linkHandler,h=new l.CellData,S=o.getTrimmedLength();let b=-1,w=-1,v=!1;for(let R=0;R<S;R++)if(w!==-1||o.hasContent(R)){if(o.loadCell(R,h),h.hasExtendedAttrs()&&h.extended.urlId){if(w===-1){w=R,b=h.extended.urlId;continue}v=h.extended.urlId!==b}else w!==-1&&(v=!0);if(v||w!==-1&&R===S-1){const M=(x=this._oscLinkService.getLinkData(b))==null?void 0:x.uri;if(M){const P={start:{x:w+1,y:d},end:{x:R+(v||R!==S-1?0:1),y:d}};let A=!1;if(!(n!=null&&n.allowNonHttpProtocols))try{const N=new URL(M);["http:","https:"].includes(N.protocol)||(A=!0)}catch{A=!0}A||i.push({text:M,range:P,activate:(N,K)=>n?n.activate(N,K,P):C(0,K),hover:(N,K)=>{var X;return(X=n==null?void 0:n.hover)==null?void 0:X.call(n,N,K,P)},leave:(N,K)=>{var X;return(X=n==null?void 0:n.leave)==null?void 0:X.call(n,N,K,P)}})}v=!1,h.hasExtendedAttrs()&&h.extended.urlId?(w=R,b=h.extended.urlId):(w=-1,b=-1)}}r(i)}};function C(d,r){if(confirm(`Do you want to navigate to ${r}?

WARNING: This link could potentially be dangerous`)){const o=window.open();if(o){try{o.opener=null}catch{}o.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=m=u([f(0,_.IBufferService),f(1,_.IOptionsService),f(2,_.IOscLinkService)],m)},6193:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(a,u){this._renderCallback=a,this._coreBrowserService=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,u,f){this._rowCount=f,a=a!==void 0?a:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},3236:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const u=a(3614),f=a(3656),l=a(3551),_=a(9042),m=a(3730),C=a(1680),d=a(3107),r=a(5744),o=a(2950),i=a(1296),n=a(428),h=a(4269),S=a(5114),b=a(8934),w=a(3230),v=a(9312),x=a(4725),R=a(6731),M=a(8055),P=a(8969),A=a(8460),N=a(844),K=a(6114),X=a(8437),J=a(2584),z=a(7399),L=a(5941),T=a(9074),B=a(2585),I=a(5435),q=a(4567),te=a(779);class ae extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(H={}){super(H),this.browser=K,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(T.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(te.LinkProviderService),this._instantiationService.setService(x.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((k,G)=>this.refresh(k,G))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(k=>this._reportWindowsOptions(k))),this.register(this._inputHandler.onColor(k=>this._handleColorEvent(k))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(k=>this._afterResize(k.cols,k.rows))),this.register((0,N.toDisposable)(()=>{var k,G;this._customKeyEventHandler=void 0,(G=(k=this.element)==null?void 0:k.parentNode)==null||G.removeChild(this.element)}))}_handleColorEvent(H){if(this._themeService)for(const k of H){let G,$="";switch(k.index){case 256:G="foreground",$="10";break;case 257:G="background",$="11";break;case 258:G="cursor",$="12";break;default:G="ansi",$="4;"+k.index}switch(k.type){case 0:const se=M.color.toColorRGB(G==="ansi"?this._themeService.colors.ansi[k.index]:this._themeService.colors[G]);this.coreService.triggerDataEvent(`${J.C0.ESC}]${$};${(0,L.toRgbString)(se)}${J.C1_ESCAPED.ST}`);break;case 1:if(G==="ansi")this._themeService.modifyColors(D=>D.ansi[k.index]=M.channels.toColor(...k.color));else{const D=G;this._themeService.modifyColors(O=>O[D]=M.channels.toColor(...k.color))}break;case 2:this._themeService.restoreColor(k.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(H){H?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(H){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var H;return(H=this.textarea)==null?void 0:H.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const H=this.buffer.ybase+this.buffer.y,k=this.buffer.lines.get(H);if(!k)return;const G=Math.min(this.buffer.x,this.cols-1),$=this._renderService.dimensions.css.cell.height,se=k.getWidth(G),D=this._renderService.dimensions.css.cell.width*se,O=this.buffer.y*this._renderService.dimensions.css.cell.height,F=G*this._renderService.dimensions.css.cell.width;this.textarea.style.left=F+"px",this.textarea.style.top=O+"px",this.textarea.style.width=D+"px",this.textarea.style.height=$+"px",this.textarea.style.lineHeight=$+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",k=>{this.hasSelection()&&(0,u.copyHandler)(k,this._selectionService)}));const H=k=>(0,u.handlePasteEvent)(k,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",H)),this.register((0,f.addDisposableDomListener)(this.element,"paste",H)),K.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",k=>{k.button===2&&(0,u.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",k=>{(0,u.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),K.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",k=>{k.button===1&&(0,u.moveTextAreaUnderMouseCursor)(k,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",H=>this._keyUp(H),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",H=>this._keyDown(H),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",H=>this._keyPress(H),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",H=>this._compositionHelper.compositionupdate(H))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",H=>this._inputEvent(H),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(H){var G;if(!H)throw new Error("Terminal requires a parent element.");if(H.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((G=this.element)==null?void 0:G.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=H.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),H.appendChild(this.element);const k=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),k.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,f.addDisposableDomListener)(this.screenElement,"mousemove",$=>this.updateCursorStyle($))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),k.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),K.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,H.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(x.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",$=>this._handleTextAreaFocus($))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(n.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(x.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(x.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(h.CharacterJoinerService),this._instantiationService.setService(x.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(x.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange($=>this._onRender.fire($))),this.onResize($=>this._renderService.resize($.cols,$.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(o.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(x.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(l.Linkifier,this.screenElement)),this.element.appendChild(k);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(x.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw($=>this._renderService.handleSelectionChanged($.start,$.end,$.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection($=>{this.textarea.value=$,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event($=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",$=>this._selectionService.handleMouseDown($))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",$=>this._handleScreenReaderModeOptionChange($))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(r.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",$=>{!this._overviewRulerRenderer&&$&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(r.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(i.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const H=this,k=this.element;function G(D){const O=H._mouseService.getMouseReportCoords(D,H.screenElement);if(!O)return!1;let F,U;switch(D.overrideType||D.type){case"mousemove":U=32,D.buttons===void 0?(F=3,D.button!==void 0&&(F=D.button<3?D.button:3)):F=1&D.buttons?0:4&D.buttons?1:2&D.buttons?2:3;break;case"mouseup":U=0,F=D.button<3?D.button:3;break;case"mousedown":U=1,F=D.button<3?D.button:3;break;case"wheel":if(H._customWheelEventHandler&&H._customWheelEventHandler(D)===!1||H.viewport.getLinesScrolled(D)===0)return!1;U=D.deltaY<0?0:1,F=4;break;default:return!1}return!(U===void 0||F===void 0||F>4)&&H.coreMouseService.triggerMouseEvent({col:O.col,row:O.row,x:O.x,y:O.y,button:F,action:U,ctrl:D.ctrlKey,alt:D.altKey,shift:D.shiftKey})}const $={mouseup:null,wheel:null,mousedrag:null,mousemove:null},se={mouseup:D=>(G(D),D.buttons||(this._document.removeEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.removeEventListener("mousemove",$.mousedrag)),this.cancel(D)),wheel:D=>(G(D),this.cancel(D,!0)),mousedrag:D=>{D.buttons&&G(D)},mousemove:D=>{D.buttons||G(D)}};this.register(this.coreMouseService.onProtocolChange(D=>{D?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(D)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&D?$.mousemove||(k.addEventListener("mousemove",se.mousemove),$.mousemove=se.mousemove):(k.removeEventListener("mousemove",$.mousemove),$.mousemove=null),16&D?$.wheel||(k.addEventListener("wheel",se.wheel,{passive:!1}),$.wheel=se.wheel):(k.removeEventListener("wheel",$.wheel),$.wheel=null),2&D?$.mouseup||($.mouseup=se.mouseup):(this._document.removeEventListener("mouseup",$.mouseup),$.mouseup=null),4&D?$.mousedrag||($.mousedrag=se.mousedrag):(this._document.removeEventListener("mousemove",$.mousedrag),$.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(k,"mousedown",D=>{if(D.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(D))return G(D),$.mouseup&&this._document.addEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.addEventListener("mousemove",$.mousedrag),this.cancel(D)})),this.register((0,f.addDisposableDomListener)(k,"wheel",D=>{if(!$.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(D)===!1)return!1;if(!this.buffer.hasScrollback){const O=this.viewport.getLinesScrolled(D);if(O===0)return;const F=J.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(D.deltaY<0?"A":"B");let U="";for(let j=0;j<Math.abs(O);j++)U+=F;return this.coreService.triggerDataEvent(U,!0),this.cancel(D,!0)}return this.viewport.handleWheel(D)?this.cancel(D):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(k,"touchstart",D=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(D),this.cancel(D)},{passive:!0})),this.register((0,f.addDisposableDomListener)(k,"touchmove",D=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(D)?void 0:this.cancel(D)},{passive:!1}))}refresh(H,k){var G;(G=this._renderService)==null||G.refreshRows(H,k)}updateCursorStyle(H){var k;(k=this._selectionService)!=null&&k.shouldColumnSelect(H)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(H,k,G=0){var $;G===1?(super.scrollLines(H,k,G),this.refresh(0,this.rows-1)):($=this.viewport)==null||$.scrollLines(H)}paste(H){(0,u.paste)(H,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(H){this._customKeyEventHandler=H}attachCustomWheelEventHandler(H){this._customWheelEventHandler=H}registerLinkProvider(H){return this._linkProviderService.registerLinkProvider(H)}registerCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const k=this._characterJoinerService.register(H);return this.refresh(0,this.rows-1),k}deregisterCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(H)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(H){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+H)}registerDecoration(H){return this._decorationService.registerDecoration(H)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(H,k,G){this._selectionService.setSelection(H,k,G)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var H;(H=this._selectionService)==null||H.clearSelection()}selectAll(){var H;(H=this._selectionService)==null||H.selectAll()}selectLines(H,k){var G;(G=this._selectionService)==null||G.selectLines(H,k)}_keyDown(H){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;const k=this.browser.isMac&&this.options.macOptionIsMeta&&H.altKey;if(!k&&!this._compositionHelper.keydown(H))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;k||H.key!=="Dead"&&H.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const G=(0,z.evaluateKeyboardEvent)(H,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(H),G.type===3||G.type===2){const $=this.rows-1;return this.scrollLines(G.type===2?-$:$),this.cancel(H,!0)}return G.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,H)||(G.cancel&&this.cancel(H,!0),!G.key||!!(H.key&&!H.ctrlKey&&!H.altKey&&!H.metaKey&&H.key.length===1&&H.key.charCodeAt(0)>=65&&H.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(G.key!==J.C0.ETX&&G.key!==J.C0.CR||(this.textarea.value=""),this._onKey.fire({key:G.key,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(G.key,!0),!this.optionsService.rawOptions.screenReaderMode||H.altKey||H.ctrlKey?this.cancel(H,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(H,k){const G=H.isMac&&!this.options.macOptionIsMeta&&k.altKey&&!k.ctrlKey&&!k.metaKey||H.isWindows&&k.altKey&&k.ctrlKey&&!k.metaKey||H.isWindows&&k.getModifierState("AltGraph");return k.type==="keypress"?G:G&&(!k.keyCode||k.keyCode>47)}_keyUp(H){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1||(function(k){return k.keyCode===16||k.keyCode===17||k.keyCode===18}(H)||this.focus(),this.updateCursorStyle(H),this._keyPressHandled=!1)}_keyPress(H){let k;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;if(this.cancel(H),H.charCode)k=H.charCode;else if(H.which===null||H.which===void 0)k=H.keyCode;else{if(H.which===0||H.charCode===0)return!1;k=H.which}return!(!k||(H.altKey||H.ctrlKey||H.metaKey)&&!this._isThirdLevelShift(this.browser,H)||(k=String.fromCharCode(k),this._onKey.fire({key:k,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(k,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(H){if(H.data&&H.inputType==="insertText"&&(!H.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const k=H.data;return this.coreService.triggerDataEvent(k,!0),this.cancel(H),!0}return!1}resize(H,k){H!==this.cols||k!==this.rows?super.resize(H,k):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(H,k){var G,$;(G=this._charSizeService)==null||G.measure(),($=this.viewport)==null||$.syncScrollArea(!0)}clear(){var H;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let k=1;k<this.rows;k++)this.buffer.lines.push(this.buffer.getBlankLine(X.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(H=this.viewport)==null||H.reset(),this.refresh(0,this.rows-1)}}reset(){var k,G;this.options.rows=this.rows,this.options.cols=this.cols;const H=this._customKeyEventHandler;this._setup(),super.reset(),(k=this._selectionService)==null||k.reset(),this._decorationService.reset(),(G=this.viewport)==null||G.reset(),this._customKeyEventHandler=H,this.refresh(0,this.rows-1)}clearTextureAtlas(){var H;(H=this._renderService)==null||H.clearTextureAtlas()}_reportFocus(){var H;(H=this.element)!=null&&H.classList.contains("focus")?this.coreService.triggerDataEvent(J.C0.ESC+"[I"):this.coreService.triggerDataEvent(J.C0.ESC+"[O")}_reportWindowsOptions(H){if(this._renderService)switch(H){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const k=this._renderService.dimensions.css.canvas.width.toFixed(0),G=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[4;${G};${k}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const $=this._renderService.dimensions.css.cell.width.toFixed(0),se=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[6;${se};${$}t`)}}cancel(H,k){if(this.options.cancelEvents||k)return H.preventDefault(),H.stopPropagation(),!1}}s.Terminal=ae},9924:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(a,u=1e3){this._renderCallback=a,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,u,f){this._rowCount=f,a=a!==void 0?a:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=l-this._lastRefreshMs,m=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,u)}}},1680:function(y,s,a){var u=this&&this.__decorate||function(o,i,n,h){var S,b=arguments.length,w=b<3?i:h===null?h=Object.getOwnPropertyDescriptor(i,n):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,i,n,h);else for(var v=o.length-1;v>=0;v--)(S=o[v])&&(w=(b<3?S(w):b>3?S(i,n,w):S(i,n))||w);return b>3&&w&&Object.defineProperty(i,n,w),w},f=this&&this.__param||function(o,i){return function(n,h){i(n,h,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const l=a(3656),_=a(4725),m=a(8460),C=a(844),d=a(2585);let r=s.Viewport=class extends C.Disposable{constructor(o,i,n,h,S,b,w,v){super(),this._viewportElement=o,this._scrollArea=i,this._bufferService=n,this._optionsService=h,this._charSizeService=S,this._renderService=b,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(x=>this._activeBuffer=x.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(x=>this._renderDimensions=x)),this._handleThemeChange(v.colors),this.register(v.onChangeColors(x=>this._handleThemeChange(x))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(o){this._viewportElement.style.backgroundColor=o.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(o){if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const i=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==i&&(this._lastRecordedBufferHeight=i,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const o=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==o&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=o),this._refreshAnimationFrame=null}syncScrollArea(o=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(o)}_handleScroll(o){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:i,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const o=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(o*(this._smoothScrollState.target-this._smoothScrollState.origin)),o<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(o,i){const n=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&n<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)}handleWheel(o){const i=this._getPixelsScrolled(o);return i!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+i:this._smoothScrollState.target+=i,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=i,this._bubbleScroll(o,i))}scrollLines(o){if(o!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const i=o*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+i,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!1})}_getPixelsScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let i=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i}getBufferElements(o,i){var v;let n,h="";const S=[],b=i??this._bufferService.buffer.lines.length,w=this._bufferService.buffer.lines;for(let x=o;x<b;x++){const R=w.get(x);if(!R)continue;const M=(v=w.get(x+1))==null?void 0:v.isWrapped;if(h+=R.translateToString(!M),!M||x===w.length-1){const P=document.createElement("div");P.textContent=h,S.push(P),h.length>0&&(n=P),h=""}}return{bufferElements:S,cursorElement:n}}getLinesScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let i=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i}_applyScrollModifier(o,i){const n=this._optionsService.rawOptions.fastScrollModifier;return n==="alt"&&i.altKey||n==="ctrl"&&i.ctrlKey||n==="shift"&&i.shiftKey?o*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:o*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(o){this._lastTouchY=o.touches[0].pageY}handleTouchMove(o){const i=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(o,i))}};s.Viewport=r=u([f(2,d.IBufferService),f(3,d.IOptionsService),f(4,_.ICharSizeService),f(5,_.IRenderService),f(6,_.ICoreBrowserService),f(7,_.IThemeService)],r)},3107:function(y,s,a){var u=this&&this.__decorate||function(d,r,o,i){var n,h=arguments.length,S=h<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(d,r,o,i);else for(var b=d.length-1;b>=0;b--)(n=d[b])&&(S=(h<3?n(S):h>3?n(r,o,S):n(r,o))||S);return h>3&&S&&Object.defineProperty(r,o,S),S},f=this&&this.__param||function(d,r){return function(o,i){r(o,i,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const l=a(4725),_=a(844),m=a(2585);let C=s.BufferDecorationRenderer=class extends _.Disposable{constructor(d,r,o,i,n){super(),this._screenElement=d,this._bufferService=r,this._coreBrowserService=o,this._decorationService=i,this._renderService=n,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(h=>this._removeDecoration(h))),this.register((0,_.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const d of this._decorationService.decorations)this._renderDecoration(d);this._dimensionsChanged=!1}_renderDecoration(d){this._refreshStyle(d),this._dimensionsChanged&&this._refreshXPosition(d)}_createElement(d){var i;const r=this._coreBrowserService.mainDocument.createElement("div");r.classList.add("xterm-decoration"),r.classList.toggle("xterm-decoration-top-layer",((i=d==null?void 0:d.options)==null?void 0:i.layer)==="top"),r.style.width=`${Math.round((d.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,r.style.height=(d.options.height||1)*this._renderService.dimensions.css.cell.height+"px",r.style.top=(d.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",r.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const o=d.options.x??0;return o&&o>this._bufferService.cols&&(r.style.display="none"),this._refreshXPosition(d,r),r}_refreshStyle(d){const r=d.marker.line-this._bufferService.buffers.active.ydisp;if(r<0||r>=this._bufferService.rows)d.element&&(d.element.style.display="none",d.onRenderEmitter.fire(d.element));else{let o=this._decorationElements.get(d);o||(o=this._createElement(d),d.element=o,this._decorationElements.set(d,o),this._container.appendChild(o),d.onDispose(()=>{this._decorationElements.delete(d),o.remove()})),o.style.top=r*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",d.onRenderEmitter.fire(o)}}_refreshXPosition(d,r=d.element){if(!r)return;const o=d.options.x??0;(d.options.anchor||"left")==="right"?r.style.right=o?o*this._renderService.dimensions.css.cell.width+"px":"":r.style.left=o?o*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(d){var r;(r=this._decorationElements.get(d))==null||r.remove(),this._decorationElements.delete(d),d.dispose()}};s.BufferDecorationRenderer=C=u([f(1,m.IBufferService),f(2,l.ICoreBrowserService),f(3,m.IDecorationService),f(4,l.IRenderService)],C)},5871:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const u of this._zones)if(u.color===a.options.overviewRulerOptions.color&&u.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,a.marker.line))return;if(this._lineAdjacentToZone(u,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(u,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,u){return u>=a.startBufferLine&&u<=a.endBufferLine}_lineAdjacentToZone(a,u,f){return u>=a.startBufferLine-this._linePadding[f||"full"]&&u<=a.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(a,u){a.startBufferLine=Math.min(a.startBufferLine,u),a.endBufferLine=Math.max(a.endBufferLine,u)}}},5744:function(y,s,a){var u=this&&this.__decorate||function(n,h,S,b){var w,v=arguments.length,x=v<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,h,S,b);else for(var R=n.length-1;R>=0;R--)(w=n[R])&&(x=(v<3?w(x):v>3?w(h,S,x):w(h,S))||x);return v>3&&x&&Object.defineProperty(h,S,x),x},f=this&&this.__param||function(n,h){return function(S,b){h(S,b,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const l=a(5871),_=a(4725),m=a(844),C=a(2585),d={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let i=s.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(n,h,S,b,w,v,x){var M;super(),this._viewportElement=n,this._screenElement=h,this._bufferService=S,this._decorationService=b,this._renderService=w,this._optionsService=v,this._coreBrowserService=x,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(M=this._viewportElement.parentElement)==null||M.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{var P;(P=this._canvas)==null||P.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const n=Math.floor(this._canvas.width/3),h=Math.ceil(this._canvas.width/3);r.full=this._canvas.width,r.left=n,r.center=h,r.right=n,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=r.left,o.right=r.left+r.center}_refreshDrawHeightConstants(){d.full=Math.round(2*this._coreBrowserService.dpr);const n=this._canvas.height/this._bufferService.buffer.lines.length,h=Math.round(Math.max(Math.min(n,12),6)*this._coreBrowserService.dpr);d.left=h,d.center=h,d.right=h}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const h of this._decorationService.decorations)this._colorZoneStore.addDecoration(h);this._ctx.lineWidth=1;const n=this._colorZoneStore.zones;for(const h of n)h.position!=="full"&&this._renderColorZone(h);for(const h of n)h.position==="full"&&this._renderColorZone(h);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(n){this._ctx.fillStyle=n.color,this._ctx.fillRect(o[n.position||"full"],Math.round((this._canvas.height-1)*(n.startBufferLine/this._bufferService.buffers.active.lines.length)-d[n.position||"full"]/2),r[n.position||"full"],Math.round((this._canvas.height-1)*((n.endBufferLine-n.startBufferLine)/this._bufferService.buffers.active.lines.length)+d[n.position||"full"]))}_queueRefresh(n,h){this._shouldUpdateDimensions=n||this._shouldUpdateDimensions,this._shouldUpdateAnchor=h||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=i=u([f(2,C.IBufferService),f(3,C.IDecorationService),f(4,_.IRenderService),f(5,C.IOptionsService),f(6,_.ICoreBrowserService)],i)},2950:function(y,s,a){var u=this&&this.__decorate||function(d,r,o,i){var n,h=arguments.length,S=h<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(d,r,o,i);else for(var b=d.length-1;b>=0;b--)(n=d[b])&&(S=(h<3?n(S):h>3?n(r,o,S):n(r,o))||S);return h>3&&S&&Object.defineProperty(r,o,S),S},f=this&&this.__param||function(d,r){return function(o,i){r(o,i,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const l=a(4725),_=a(2585),m=a(2584);let C=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,r,o,i,n,h){this._textarea=d,this._compositionView=r,this._bufferService=o,this._optionsService=i,this._coreService=n,this._renderService=h,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){const r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let o;this._isSendingComposition=!1,r.start+=this._dataAlreadySent.length,o=this._isComposing?this._textarea.value.substring(r.start,r.end):this._textarea.value.substring(r.start),o.length>0&&this._coreService.triggerDataEvent(o,!0)}},0)}else{this._isSendingComposition=!1;const r=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(r,!0)}}_handleAnyTextareaChanges(){const d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const r=this._textarea.value,o=r.replace(d,"");this._dataAlreadySent=o,r.length>d.length?this._coreService.triggerDataEvent(o,!0):r.length<d.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):r.length===d.length&&r!==d&&this._coreService.triggerDataEvent(r,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,n=r*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=n+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const h=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(h.width,1)+"px",this._textarea.style.height=Math.max(h.height,1)+"px",this._textarea.style.lineHeight=h.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=C=u([f(2,_.IBufferService),f(3,_.IOptionsService),f(4,_.ICoreService),f(5,l.IRenderService)],C)},9806:(y,s)=>{function a(u,f,l){const _=l.getBoundingClientRect(),m=u.getComputedStyle(l),C=parseInt(m.getPropertyValue("padding-left")),d=parseInt(m.getPropertyValue("padding-top"));return[f.clientX-_.left-C,f.clientY-_.top-d]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=a,s.getCoords=function(u,f,l,_,m,C,d,r,o){if(!C)return;const i=a(u,f,l);return i?(i[0]=Math.ceil((i[0]+(o?d/2:0))/d),i[1]=Math.ceil(i[1]/r),i[0]=Math.min(Math.max(i[0],1),_+(o?1:0)),i[1]=Math.min(Math.max(i[1],1),m),i):void 0}},9504:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const u=a(2584);function f(r,o,i,n){const h=r-l(r,i),S=o-l(o,i),b=Math.abs(h-S)-function(w,v,x){let R=0;const M=w-l(w,x),P=v-l(v,x);for(let A=0;A<Math.abs(M-P);A++){const N=_(w,v)==="A"?-1:1,K=x.buffer.lines.get(M+N*A);K!=null&&K.isWrapped&&R++}return R}(r,o,i);return d(b,C(_(r,o),n))}function l(r,o){let i=0,n=o.buffer.lines.get(r),h=n==null?void 0:n.isWrapped;for(;h&&r>=0&&r<o.rows;)i++,n=o.buffer.lines.get(--r),h=n==null?void 0:n.isWrapped;return i}function _(r,o){return r>o?"A":"B"}function m(r,o,i,n,h,S){let b=r,w=o,v="";for(;b!==i||w!==n;)b+=h?1:-1,h&&b>S.cols-1?(v+=S.buffer.translateBufferLineToString(w,!1,r,b),b=0,r=0,w++):!h&&b<0&&(v+=S.buffer.translateBufferLineToString(w,!1,0,r+1),b=S.cols-1,r=b,w--);return v+S.buffer.translateBufferLineToString(w,!1,r,b)}function C(r,o){const i=o?"O":"[";return u.C0.ESC+i+r}function d(r,o){r=Math.floor(r);let i="";for(let n=0;n<r;n++)i+=o;return i}s.moveToCellSequence=function(r,o,i,n){const h=i.buffer.x,S=i.buffer.y;if(!i.buffer.hasScrollback)return function(v,x,R,M,P,A){return f(x,M,P,A).length===0?"":d(m(v,x,v,x-l(x,P),!1,P).length,C("D",A))}(h,S,0,o,i,n)+f(S,o,i,n)+function(v,x,R,M,P,A){let N;N=f(x,M,P,A).length>0?M-l(M,P):x;const K=M,X=function(J,z,L,T,B,I){let q;return q=f(L,T,B,I).length>0?T-l(T,B):z,J<L&&q<=T||J>=L&&q<T?"C":"D"}(v,x,R,M,P,A);return d(m(v,N,R,K,X==="C",P).length,C(X,A))}(h,S,r,o,i,n);let b;if(S===o)return b=h>r?"D":"C",d(Math.abs(h-r),C(b,n));b=S>o?"D":"C";const w=Math.abs(S-o);return d(function(v,x){return x.cols-v}(S>o?r:h,i)+(w-1)*i.cols+1+((S>o?h:r)-1),C(b,n))}},1296:function(y,s,a){var u=this&&this.__decorate||function(A,N,K,X){var J,z=arguments.length,L=z<3?N:X===null?X=Object.getOwnPropertyDescriptor(N,K):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(A,N,K,X);else for(var T=A.length-1;T>=0;T--)(J=A[T])&&(L=(z<3?J(L):z>3?J(N,K,L):J(N,K))||L);return z>3&&L&&Object.defineProperty(N,K,L),L},f=this&&this.__param||function(A,N){return function(K,X){N(K,X,A)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const l=a(3787),_=a(2550),m=a(2223),C=a(6171),d=a(6052),r=a(4725),o=a(8055),i=a(8460),n=a(844),h=a(2585),S="xterm-dom-renderer-owner-",b="xterm-rows",w="xterm-fg-",v="xterm-bg-",x="xterm-focus",R="xterm-selection";let M=1,P=s.DomRenderer=class extends n.Disposable{constructor(A,N,K,X,J,z,L,T,B,I,q,te,ae){super(),this._terminal=A,this._document=N,this._element=K,this._screenElement=X,this._viewportElement=J,this._helperContainer=z,this._linkifier2=L,this._charSizeService=B,this._optionsService=I,this._bufferService=q,this._coreBrowserService=te,this._themeService=ae,this._terminalClass=M++,this._rowElements=[],this._selectionRenderModel=(0,d.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new i.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(R),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(le=>this._injectCss(le))),this._injectCss(this._themeService.colors),this._rowFactory=T.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(le=>this._handleLinkHover(le))),this.register(this._linkifier2.onHideLinkUnderline(le=>this._handleLinkLeave(le))),this.register((0,n.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const K of this._rowElements)K.style.width=`${this.dimensions.css.canvas.width}px`,K.style.height=`${this.dimensions.css.cell.height}px`,K.style.lineHeight=`${this.dimensions.css.cell.height}px`,K.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const N=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=N,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let N=`${this._terminalSelector} .${b} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;N+=`${this._terminalSelector} .${b} .xterm-dim { color: ${o.color.multiplyOpacity(A.foreground,.5).css};}`,N+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const K=`blink_underline_${this._terminalClass}`,X=`blink_bar_${this._terminalClass}`,J=`blink_block_${this._terminalClass}`;N+=`@keyframes ${K} { 50% {  border-bottom-style: hidden; }}`,N+=`@keyframes ${X} { 50% {  box-shadow: none; }}`,N+=`@keyframes ${J} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,N+=`${this._terminalSelector} .${b}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${K} 1s step-end infinite;}${this._terminalSelector} .${b}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${b}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${J} 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,N+=`${this._terminalSelector} .${R} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${R} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${R} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[z,L]of A.ansi.entries())N+=`${this._terminalSelector} .${w}${z} { color: ${L.css}; }${this._terminalSelector} .${w}${z}.xterm-dim { color: ${o.color.multiplyOpacity(L,.5).css}; }${this._terminalSelector} .${v}${z} { background-color: ${L.css}; }`;N+=`${this._terminalSelector} .${w}${m.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(A.background).css}; }${this._terminalSelector} .${w}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${v}${m.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=N}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,N){for(let K=this._rowElements.length;K<=N;K++){const X=this._document.createElement("div");this._rowContainer.appendChild(X),this._rowElements.push(X)}for(;this._rowElements.length>N;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,N){this._refreshRowElements(A,N),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(x),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(x),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,N,K){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,N,K),this.renderRows(0,this._bufferService.rows-1),!A||!N)return;this._selectionRenderModel.update(this._terminal,A,N,K);const X=this._selectionRenderModel.viewportStartRow,J=this._selectionRenderModel.viewportEndRow,z=this._selectionRenderModel.viewportCappedStartRow,L=this._selectionRenderModel.viewportCappedEndRow;if(z>=this._bufferService.rows||L<0)return;const T=this._document.createDocumentFragment();if(K){const B=A[0]>N[0];T.appendChild(this._createSelectionElement(z,B?N[0]:A[0],B?A[0]:N[0],L-z+1))}else{const B=X===z?A[0]:0,I=z===J?N[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(z,B,I));const q=L-z-1;if(T.appendChild(this._createSelectionElement(z+1,0,this._bufferService.cols,q)),z!==L){const te=J===L?N[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(L,0,te))}}this._selectionContainer.appendChild(T)}_createSelectionElement(A,N,K,X=1){const J=this._document.createElement("div"),z=N*this.dimensions.css.cell.width;let L=this.dimensions.css.cell.width*(K-N);return z+L>this.dimensions.css.canvas.width&&(L=this.dimensions.css.canvas.width-z),J.style.height=X*this.dimensions.css.cell.height+"px",J.style.top=A*this.dimensions.css.cell.height+"px",J.style.left=`${z}px`,J.style.width=`${L}px`,J}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,N){const K=this._bufferService.buffer,X=K.ybase+K.y,J=Math.min(K.x,this._bufferService.cols-1),z=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=A;B<=N;B++){const I=B+K.ydisp,q=this._rowElements[B],te=K.lines.get(I);if(!q||!te)break;q.replaceChildren(...this._rowFactory.createRow(te,I,I===X,L,T,J,z,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,N,K,X,J,z){K<0&&(A=0),X<0&&(N=0);const L=this._bufferService.rows-1;K=Math.max(Math.min(K,L),0),X=Math.max(Math.min(X,L),0),J=Math.min(J,this._bufferService.cols);const T=this._bufferService.buffer,B=T.ybase+T.y,I=Math.min(T.x,J-1),q=this._optionsService.rawOptions.cursorBlink,te=this._optionsService.rawOptions.cursorStyle,ae=this._optionsService.rawOptions.cursorInactiveStyle;for(let le=K;le<=X;++le){const H=le+T.ydisp,k=this._rowElements[le],G=T.lines.get(H);if(!k||!G)break;k.replaceChildren(...this._rowFactory.createRow(G,H,H===B,te,ae,I,q,this.dimensions.css.cell.width,this._widthCache,z?le===K?A:0:-1,z?(le===X?N:J)-1:-1))}}};s.DomRenderer=P=u([f(7,h.IInstantiationService),f(8,r.ICharSizeService),f(9,h.IOptionsService),f(10,h.IBufferService),f(11,r.ICoreBrowserService),f(12,r.IThemeService)],P)},3787:function(y,s,a){var u=this&&this.__decorate||function(b,w,v,x){var R,M=arguments.length,P=M<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,v):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(b,w,v,x);else for(var A=b.length-1;A>=0;A--)(R=b[A])&&(P=(M<3?R(P):M>3?R(w,v,P):R(w,v))||P);return M>3&&P&&Object.defineProperty(w,v,P),P},f=this&&this.__param||function(b,w){return function(v,x){w(v,x,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const l=a(2223),_=a(643),m=a(511),C=a(2585),d=a(8055),r=a(4725),o=a(4269),i=a(6171),n=a(3734);let h=s.DomRendererRowFactory=class{constructor(b,w,v,x,R,M,P){this._document=b,this._characterJoinerService=w,this._optionsService=v,this._coreBrowserService=x,this._coreService=R,this._decorationService=M,this._themeService=P,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,w,v){this._selectionStart=b,this._selectionEnd=w,this._columnSelectMode=v}createRow(b,w,v,x,R,M,P,A,N,K,X){const J=[],z=this._characterJoinerService.getJoinedCharacters(w),L=this._themeService.colors;let T,B=b.getNoBgTrimmedLength();v&&B<M+1&&(B=M+1);let I=0,q="",te=0,ae=0,le=0,H=!1,k=0,G=!1,$=0;const se=[],D=K!==-1&&X!==-1;for(let O=0;O<B;O++){b.loadCell(O,this._workCell);let F=this._workCell.getWidth();if(F===0)continue;let U=!1,j=O,W=this._workCell;if(z.length>0&&O===z[0][0]){U=!0;const de=z.shift();W=new o.JoinedCellData(this._workCell,b.translateToString(!0,de[0],de[1]),de[1]-de[0]),j=de[1]-1,F=W.getWidth()}const ee=this._isCellInSelection(O,w),Z=v&&O===M,Y=D&&O>=K&&O<=X;let V=!1;this._decorationService.forEachDecorationAtCell(O,w,void 0,de=>{V=!0});let oe=W.getChars()||_.WHITESPACE_CELL_CHAR;if(oe===" "&&(W.isUnderline()||W.isOverline())&&(oe=""),$=F*A-N.get(oe,W.isBold(),W.isItalic()),T){if(I&&(ee&&G||!ee&&!G&&W.bg===te)&&(ee&&G&&L.selectionForeground||W.fg===ae)&&W.extended.ext===le&&Y===H&&$===k&&!Z&&!U&&!V){W.isInvisible()?q+=_.WHITESPACE_CELL_CHAR:q+=oe,I++;continue}I&&(T.textContent=q),T=this._document.createElement("span"),I=0,q=""}else T=this._document.createElement("span");if(te=W.bg,ae=W.fg,le=W.extended.ext,H=Y,k=$,G=ee,U&&M>=O&&M<=j&&(M=O),!this._coreService.isCursorHidden&&Z&&this._coreService.isCursorInitialized){if(se.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&se.push("xterm-cursor-blink"),se.push(x==="bar"?"xterm-cursor-bar":x==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":se.push("xterm-cursor-outline");break;case"block":se.push("xterm-cursor-block");break;case"bar":se.push("xterm-cursor-bar");break;case"underline":se.push("xterm-cursor-underline")}}if(W.isBold()&&se.push("xterm-bold"),W.isItalic()&&se.push("xterm-italic"),W.isDim()&&se.push("xterm-dim"),q=W.isInvisible()?_.WHITESPACE_CELL_CHAR:W.getChars()||_.WHITESPACE_CELL_CHAR,W.isUnderline()&&(se.push(`xterm-underline-${W.extended.underlineStyle}`),q===" "&&(q=""),!W.isUnderlineColorDefault()))if(W.isUnderlineColorRGB())T.style.textDecorationColor=`rgb(${n.AttributeData.toColorRGB(W.getUnderlineColor()).join(",")})`;else{let de=W.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&W.isBold()&&de<8&&(de+=8),T.style.textDecorationColor=L.ansi[de].css}W.isOverline()&&(se.push("xterm-overline"),q===" "&&(q="")),W.isStrikethrough()&&se.push("xterm-strikethrough"),Y&&(T.style.textDecoration="underline");let Q=W.getFgColor(),ie=W.getFgColorMode(),re=W.getBgColor(),ue=W.getBgColorMode();const _e=!!W.isInverse();if(_e){const de=Q;Q=re,re=de;const ht=ie;ie=ue,ue=ht}let fe,we,be,Ee=!1;switch(this._decorationService.forEachDecorationAtCell(O,w,void 0,de=>{de.options.layer!=="top"&&Ee||(de.backgroundColorRGB&&(ue=50331648,re=de.backgroundColorRGB.rgba>>8&16777215,fe=de.backgroundColorRGB),de.foregroundColorRGB&&(ie=50331648,Q=de.foregroundColorRGB.rgba>>8&16777215,we=de.foregroundColorRGB),Ee=de.options.layer==="top")}),!Ee&&ee&&(fe=this._coreBrowserService.isFocused?L.selectionBackgroundOpaque:L.selectionInactiveBackgroundOpaque,re=fe.rgba>>8&16777215,ue=50331648,Ee=!0,L.selectionForeground&&(ie=50331648,Q=L.selectionForeground.rgba>>8&16777215,we=L.selectionForeground)),Ee&&se.push("xterm-decoration-top"),ue){case 16777216:case 33554432:be=L.ansi[re],se.push(`xterm-bg-${re}`);break;case 50331648:be=d.channels.toColor(re>>16,re>>8&255,255&re),this._addStyle(T,`background-color:#${S((re>>>0).toString(16),"0",6)}`);break;default:_e?(be=L.foreground,se.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):be=L.background}switch(fe||W.isDim()&&(fe=d.color.multiplyOpacity(be,.5)),ie){case 16777216:case 33554432:W.isBold()&&Q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Q+=8),this._applyMinimumContrast(T,be,L.ansi[Q],W,fe,void 0)||se.push(`xterm-fg-${Q}`);break;case 50331648:const de=d.channels.toColor(Q>>16&255,Q>>8&255,255&Q);this._applyMinimumContrast(T,be,de,W,fe,we)||this._addStyle(T,`color:#${S(Q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(T,be,L.foreground,W,fe,we)||_e&&se.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}se.length&&(T.className=se.join(" "),se.length=0),Z||U||V?T.textContent=q:I++,$!==this.defaultSpacing&&(T.style.letterSpacing=`${$}px`),J.push(T),O=j}return T&&I&&(T.textContent=q),J}_applyMinimumContrast(b,w,v,x,R,M){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,i.treatGlyphAsBackgroundColor)(x.getCode()))return!1;const P=this._getContrastCache(x);let A;if(R||M||(A=P.getColor(w.rgba,v.rgba)),A===void 0){const N=this._optionsService.rawOptions.minimumContrastRatio/(x.isDim()?2:1);A=d.color.ensureContrastRatio(R||w,M||v,N),P.setColor((R||w).rgba,(M||v).rgba,A??null)}return!!A&&(this._addStyle(b,`color:${A.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,w){b.setAttribute("style",`${b.getAttribute("style")||""}${w};`)}_isCellInSelection(b,w){const v=this._selectionStart,x=this._selectionEnd;return!(!v||!x)&&(this._columnSelectMode?v[0]<=x[0]?b>=v[0]&&w>=v[1]&&b<x[0]&&w<=x[1]:b<v[0]&&w>=v[1]&&b>=x[0]&&w<=x[1]:w>v[1]&&w<x[1]||v[1]===x[1]&&w===v[1]&&b>=v[0]&&b<x[0]||v[1]<x[1]&&w===x[1]&&b<x[0]||v[1]<x[1]&&w===v[1]&&b>=v[0])}};function S(b,w,v){for(;b.length<v;)b=w+b;return b}s.DomRendererRowFactory=h=u([f(1,r.ICharacterJoinerService),f(2,C.IOptionsService),f(3,r.ICoreBrowserService),f(4,C.ICoreService),f(5,C.IDecorationService),f(6,r.IThemeService)],h)},2550:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(a,u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const f=a.createElement("span");f.classList.add("xterm-char-measure-element");const l=a.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold";const _=a.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontStyle="italic";const m=a.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[f,l,_,m],this._container.appendChild(f),this._container.appendChild(l),this._container.appendChild(_),this._container.appendChild(m),u.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,u,f,l){a===this._font&&u===this._fontSize&&f===this._weight&&l===this._weightBold||(this._font=a,this._fontSize=u,this._weight=f,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(a,u,f){let l=0;if(!u&&!f&&a.length===1&&(l=a.charCodeAt(0))<256){if(this._flat[l]!==-9999)return this._flat[l];const C=this._measure(a,0);return C>0&&(this._flat[l]=C),C}let _=a;u&&(_+="B"),f&&(_+="I");let m=this._holey.get(_);if(m===void 0){let C=0;u&&(C|=1),f&&(C|=2),m=this._measure(a,C),m>0&&this._holey.set(_,m)}return m}_measure(a,u){const f=this._measureElements[u];return f.textContent=a.repeat(32),f.offsetWidth/32}}},2223:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const u=a(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(y,s)=>{function a(f){return 57508<=f&&f<=57558}function u(f){return f>=128512&&f<=128591||f>=127744&&f<=128511||f>=128640&&f<=128767||f>=9728&&f<=9983||f>=9984&&f<=10175||f>=65024&&f<=65039||f>=129280&&f<=129535||f>=127462&&f<=127487}Object.defineProperty(s,"__esModule",{value:!0}),s.computeNextVariantOffset=s.createRenderDimensions=s.treatGlyphAsBackgroundColor=s.allowRescaling=s.isEmoji=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(f){return 57520<=f&&f<=57527},s.isEmoji=u,s.allowRescaling=function(f,l,_,m){return l===1&&_>Math.ceil(1.5*m)&&f!==void 0&&f>255&&!u(f)&&!a(f)&&!function(C){return 57344<=C&&C<=63743}(f)},s.treatGlyphAsBackgroundColor=function(f){return a(f)||function(l){return 9472<=l&&l<=9631}(f)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},s.computeNextVariantOffset=function(f,l,_=0){return(f-(2*Math.round(l)-_))%(2*Math.round(l))}},6052:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,l,_,m=!1){if(this.selectionStart=l,this.selectionEnd=_,!l||!_||l[0]===_[0]&&l[1]===_[1])return void this.clear();const C=f.buffers.active.ydisp,d=l[1]-C,r=_[1]-C,o=Math.max(d,0),i=Math.min(r,f.rows-1);o>=f.rows||i<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=d,this.viewportEndRow=r,this.viewportCappedStartRow=o,this.viewportCappedEndRow=i,this.startCol=l[0],this.endCol=_[0])}isCellSelected(f,l,_){return!!this.hasSelection&&(_-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?l>=this.startCol&&_>=this.viewportCappedStartRow&&l<this.endCol&&_<=this.viewportCappedEndRow:l<this.startCol&&_>=this.viewportCappedStartRow&&l>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&l>=this.startCol&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&l>=this.startCol)}}s.createSelectionRenderModel=function(){return new a}},456:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,u=this.selectionEnd;return!(!a||!u)&&(a[1]>u[1]||a[1]===u[1]&&a[0]>u[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(y,s,a){var u=this&&this.__decorate||function(i,n,h,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,h):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,h,S);else for(var x=i.length-1;x>=0;x--)(b=i[x])&&(v=(w<3?b(v):w>3?b(n,h,v):b(n,h))||v);return w>3&&v&&Object.defineProperty(n,h,v),v},f=this&&this.__param||function(i,n){return function(h,S){n(h,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const l=a(2585),_=a(8460),m=a(844);let C=s.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(i,n,h){super(),this._optionsService=h,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new o(this._optionsService))}catch{this._measureStrategy=this.register(new r(i,n,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const i=this._measureStrategy.measure();i.width===this.width&&i.height===this.height||(this.width=i.width,this.height=i.height,this._onCharSizeChange.fire())}};s.CharSizeService=C=u([f(2,l.IOptionsService)],C);class d extends m.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(n,h){n!==void 0&&n>0&&h!==void 0&&h>0&&(this._result.width=n,this._result.height=h)}}class r extends d{constructor(n,h,S){super(),this._document=n,this._parentElement=h,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class o extends d{constructor(n){super(),this._optionsService=n,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const h=this._ctx.measureText("W");if(!("width"in h&&"fontBoundingBoxAscent"in h&&"fontBoundingBoxDescent"in h))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const n=this._ctx.measureText("W");return this._validateAndSet(n.width,n.fontBoundingBoxAscent+n.fontBoundingBoxDescent),this._result}}},4269:function(y,s,a){var u=this&&this.__decorate||function(o,i,n,h){var S,b=arguments.length,w=b<3?i:h===null?h=Object.getOwnPropertyDescriptor(i,n):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,i,n,h);else for(var v=o.length-1;v>=0;v--)(S=o[v])&&(w=(b<3?S(w):b>3?S(i,n,w):S(i,n))||w);return b>3&&w&&Object.defineProperty(i,n,w),w},f=this&&this.__param||function(o,i){return function(n,h){i(n,h,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const l=a(3734),_=a(643),m=a(511),C=a(2585);class d extends l.AttributeData{constructor(i,n,h){super(),this.content=0,this.combinedData="",this.fg=i.fg,this.bg=i.bg,this.combinedData=n,this._width=h}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(i){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=d;let r=s.CharacterJoinerService=class Qr{constructor(i){this._bufferService=i,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(i){const n={id:this._nextCharacterJoinerId++,handler:i};return this._characterJoiners.push(n),n.id}deregister(i){for(let n=0;n<this._characterJoiners.length;n++)if(this._characterJoiners[n].id===i)return this._characterJoiners.splice(n,1),!0;return!1}getJoinedCharacters(i){if(this._characterJoiners.length===0)return[];const n=this._bufferService.buffer.lines.get(i);if(!n||n.length===0)return[];const h=[],S=n.translateToString(!0);let b=0,w=0,v=0,x=n.getFg(0),R=n.getBg(0);for(let M=0;M<n.getTrimmedLength();M++)if(n.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==x||this._workCell.bg!==R){if(M-b>1){const P=this._getJoinedRanges(S,v,w,n,b);for(let A=0;A<P.length;A++)h.push(P[A])}b=M,v=w,x=this._workCell.fg,R=this._workCell.bg}w+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){const M=this._getJoinedRanges(S,v,w,n,b);for(let P=0;P<M.length;P++)h.push(M[P])}return h}_getJoinedRanges(i,n,h,S,b){const w=i.substring(n,h);let v=[];try{v=this._characterJoiners[0].handler(w)}catch(x){console.error(x)}for(let x=1;x<this._characterJoiners.length;x++)try{const R=this._characterJoiners[x].handler(w);for(let M=0;M<R.length;M++)Qr._mergeRanges(v,R[M])}catch(R){console.error(R)}return this._stringRangesToCellRanges(v,S,b),v}_stringRangesToCellRanges(i,n,h){let S=0,b=!1,w=0,v=i[S];if(v){for(let x=h;x<this._bufferService.cols;x++){const R=n.getWidth(x),M=n.getString(x).length||_.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!b&&v[0]<=w&&(v[0]=x,b=!0),v[1]<=w){if(v[1]=x,v=i[++S],!v)break;v[0]<=w?(v[0]=x,b=!0):b=!1}w+=M}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(i,n){let h=!1;for(let S=0;S<i.length;S++){const b=i[S];if(h){if(n[1]<=b[0])return i[S-1][1]=n[1],i;if(n[1]<=b[1])return i[S-1][1]=Math.max(n[1],b[1]),i.splice(S,1),i;i.splice(S,1),S--}else{if(n[1]<=b[0])return i.splice(S,0,n),i;if(n[1]<=b[1])return b[0]=Math.min(n[0],b[0]),i;n[0]<b[1]&&(b[0]=Math.min(n[0],b[0]),h=!0)}}return h?i[i.length-1][1]=n[1]:i.push(n),i}};s.CharacterJoinerService=r=u([f(0,C.IBufferService)],r)},5114:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;const u=a(844),f=a(8460),l=a(3656);class _ extends u.Disposable{constructor(d,r,o){super(),this._textarea=d,this._window=r,this.mainDocument=o,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new m(this._window),this._onDprChange=this.register(new f.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new f.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(i=>this._screenDprMonitor.setWindow(i))),this.register((0,f.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(d){this._window!==d&&(this._window=d,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}s.CoreBrowserService=_;class m extends u.Disposable{constructor(d){super(),this._parentWindow=d,this._windowResizeListener=this.register(new u.MutableDisposable),this._onDprChange=this.register(new f.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,u.toDisposable)(()=>this.clearListener()))}setWindow(d){this._parentWindow=d,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,l.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var d;this._outerListener&&((d=this._resolutionMediaMatchList)==null||d.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkProviderService=void 0;const u=a(844);class f extends u.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,u.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(_){return this.linkProviders.push(_),{dispose:()=>{const m=this.linkProviders.indexOf(_);m!==-1&&this.linkProviders.splice(m,1)}}}}s.LinkProviderService=f},8934:function(y,s,a){var u=this&&this.__decorate||function(C,d,r,o){var i,n=arguments.length,h=n<3?d:o===null?o=Object.getOwnPropertyDescriptor(d,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(C,d,r,o);else for(var S=C.length-1;S>=0;S--)(i=C[S])&&(h=(n<3?i(h):n>3?i(d,r,h):i(d,r))||h);return n>3&&h&&Object.defineProperty(d,r,h),h},f=this&&this.__param||function(C,d){return function(r,o){d(r,o,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const l=a(4725),_=a(9806);let m=s.MouseService=class{constructor(C,d){this._renderService=C,this._charSizeService=d}getCoords(C,d,r,o,i){return(0,_.getCoords)(window,C,d,r,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,i)}getMouseReportCoords(C,d){const r=(0,_.getCoordsRelativeToElement)(window,C,d);if(this._charSizeService.hasValidSize)return r[0]=Math.min(Math.max(r[0],0),this._renderService.dimensions.css.canvas.width-1),r[1]=Math.min(Math.max(r[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};s.MouseService=m=u([f(0,l.IRenderService),f(1,l.ICharSizeService)],m)},3230:function(y,s,a){var u=this&&this.__decorate||function(i,n,h,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,h):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,h,S);else for(var x=i.length-1;x>=0;x--)(b=i[x])&&(v=(w<3?b(v):w>3?b(n,h,v):b(n,h))||v);return w>3&&v&&Object.defineProperty(n,h,v),v},f=this&&this.__param||function(i,n){return function(h,S){n(h,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const l=a(6193),_=a(4725),m=a(8460),C=a(844),d=a(7226),r=a(2585);let o=s.RenderService=class extends C.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(i,n,h,S,b,w,v,x){super(),this._rowCount=i,this._charSizeService=S,this._renderer=this.register(new C.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._observerDisposable=this.register(new C.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new l.RenderDebouncer((R,M)=>this._renderRows(R,M),v),this.register(this._renderDebouncer),this.register(v.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var R;return(R=this._renderer.value)==null?void 0:R.clear()})),this.register(h.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(b.onDecorationRegistered(()=>this._fullRefresh())),this.register(b.onDecorationRemoved(()=>this._fullRefresh())),this.register(h.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(h.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register(x.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(v.window,n),this.register(v.onWindowChange(R=>this._registerIntersectionObserver(R,n)))}_registerIntersectionObserver(i,n){if("IntersectionObserver"in i){const h=new i.IntersectionObserver(S=>this._handleIntersectionChange(S[S.length-1]),{threshold:0});h.observe(n),this._observerDisposable.value=(0,C.toDisposable)(()=>h.disconnect())}}_handleIntersectionChange(i){this._isPaused=i.isIntersecting===void 0?i.intersectionRatio===0:!i.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(i,n,h=!1){this._isPaused?this._needsFullRefresh=!0:(h||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(i,n,this._rowCount))}_renderRows(i,n){this._renderer.value&&(i=Math.min(i,this._rowCount-1),n=Math.min(n,this._rowCount-1),this._renderer.value.renderRows(i,n),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:i,end:n}),this._onRender.fire({start:i,end:n}),this._isNextRenderRedrawOnly=!0)}resize(i,n){this._rowCount=n,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(i){this._renderer.value=i,this._renderer.value&&(this._renderer.value.onRequestRedraw(n=>this.refreshRows(n.start,n.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(i){return this._renderDebouncer.addRefreshCallback(i)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var i,n;this._renderer.value&&((n=(i=this._renderer.value).clearTextureAtlas)==null||n.call(i),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(i,n){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var h;return(h=this._renderer.value)==null?void 0:h.handleResize(i,n)}):this._renderer.value.handleResize(i,n),this._fullRefresh())}handleCharSizeChanged(){var i;(i=this._renderer.value)==null||i.handleCharSizeChanged()}handleBlur(){var i;(i=this._renderer.value)==null||i.handleBlur()}handleFocus(){var i;(i=this._renderer.value)==null||i.handleFocus()}handleSelectionChanged(i,n,h){var S;this._selectionState.start=i,this._selectionState.end=n,this._selectionState.columnSelectMode=h,(S=this._renderer.value)==null||S.handleSelectionChanged(i,n,h)}handleCursorMove(){var i;(i=this._renderer.value)==null||i.handleCursorMove()}clear(){var i;(i=this._renderer.value)==null||i.clear()}};s.RenderService=o=u([f(2,r.IOptionsService),f(3,_.ICharSizeService),f(4,r.IDecorationService),f(5,r.IBufferService),f(6,_.ICoreBrowserService),f(7,_.IThemeService)],o)},9312:function(y,s,a){var u=this&&this.__decorate||function(v,x,R,M){var P,A=arguments.length,N=A<3?x:M===null?M=Object.getOwnPropertyDescriptor(x,R):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(v,x,R,M);else for(var K=v.length-1;K>=0;K--)(P=v[K])&&(N=(A<3?P(N):A>3?P(x,R,N):P(x,R))||N);return A>3&&N&&Object.defineProperty(x,R,N),N},f=this&&this.__param||function(v,x){return function(R,M){x(R,M,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const l=a(9806),_=a(9504),m=a(456),C=a(4725),d=a(8460),r=a(844),o=a(6114),i=a(4841),n=a(511),h=a(2585),S="",b=new RegExp(S,"g");let w=s.SelectionService=class extends r.Disposable{constructor(v,x,R,M,P,A,N,K,X){super(),this._element=v,this._screenElement=x,this._linkifier=R,this._bufferService=M,this._coreService=P,this._mouseService=A,this._optionsService=N,this._renderService=K,this._coreBrowserService=X,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new n.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=J=>this._handleMouseMove(J),this._mouseUpListener=J=>this._handleMouseUp(J),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(J=>this._handleTrim(J)),this.register(this._bufferService.buffers.onBufferActivate(J=>this._handleBufferActivate(J))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,r.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const v=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!v||!x||v[0]===x[0]&&v[1]===x[1])}get selectionText(){const v=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;if(!v||!x)return"";const R=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(v[0]===x[0])return"";const P=v[0]<x[0]?v[0]:x[0],A=v[0]<x[0]?x[0]:v[0];for(let N=v[1];N<=x[1];N++){const K=R.translateBufferLineToString(N,!0,P,A);M.push(K)}}else{const P=v[1]===x[1]?x[0]:void 0;M.push(R.translateBufferLineToString(v[1],!0,v[0],P));for(let A=v[1]+1;A<=x[1]-1;A++){const N=R.lines.get(A),K=R.translateBufferLineToString(A,!0);N!=null&&N.isWrapped?M[M.length-1]+=K:M.push(K)}if(v[1]!==x[1]){const A=R.lines.get(x[1]),N=R.translateBufferLineToString(x[1],!0,0,x[0]);A&&A.isWrapped?M[M.length-1]+=N:M.push(N)}}return M.map(P=>P.replace(b," ")).join(o.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),o.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){const x=this._getMouseBufferCoords(v),R=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(R&&M&&x)&&this._areCoordsInSelection(x,R,M)}isCellInSelection(v,x){const R=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!R||!M)&&this._areCoordsInSelection([v,x],R,M)}_areCoordsInSelection(v,x,R){return v[1]>x[1]&&v[1]<R[1]||x[1]===R[1]&&v[1]===x[1]&&v[0]>=x[0]&&v[0]<R[0]||x[1]<R[1]&&v[1]===R[1]&&v[0]<R[0]||x[1]<R[1]&&v[1]===x[1]&&v[0]>=x[0]}_selectWordAtCursor(v,x){var P,A;const R=(A=(P=this._linkifier.currentLink)==null?void 0:P.link)==null?void 0:A.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,i.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const M=this._getMouseBufferCoords(v);return!!M&&(this._selectWordAt(M,x),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,x){this._model.clearSelection(),v=Math.max(v,0),x=Math.min(x,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,x],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){const x=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(x)return x[0]--,x[1]--,x[1]+=this._bufferService.buffer.ydisp,x}_getMouseEventScrollAmount(v){let x=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return x>=0&&x<=R?0:(x>R&&(x-=R),x=Math.min(Math.max(x,-50),50),x/=50,x/Math.abs(x)+Math.round(14*x))}shouldForceSelection(v){return o.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const x=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);x&&x.length!==this._model.selectionStart[0]&&x.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){const x=this._getMouseBufferCoords(v);x&&(this._activeSelectionMode=2,this._selectLineAt(x[1]))}shouldColumnSelect(v){return v.altKey&&!(o.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;const x=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const M=R.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}x&&x[0]===this._model.selectionEnd[0]&&x[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){const x=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&x<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const M=(0,_.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const v=this._model.finalSelectionStart,x=this._model.finalSelectionEnd,R=!(!v||!x||v[0]===x[0]&&v[1]===x[1]);R?v&&x&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&x[0]===this._oldSelectionEnd[0]&&x[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,x,R)):this._oldHasSelection&&this._fireOnSelectionChange(v,x,R)}_fireOnSelectionChange(v,x,R){this._oldSelectionStart=v,this._oldSelectionEnd=x,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(x=>this._handleTrim(x))}_convertViewportColToCharacterIndex(v,x){let R=x;for(let M=0;x>=M;M++){const P=v.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:P>1&&x!==M&&(R+=P-1)}return R}setSelection(v,x,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,x],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,x,R=!0,M=!0){if(v[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,A=P.lines.get(v[1]);if(!A)return;const N=P.translateBufferLineToString(v[1],!1);let K=this._convertViewportColToCharacterIndex(A,v[0]),X=K;const J=v[0]-K;let z=0,L=0,T=0,B=0;if(N.charAt(K)===" "){for(;K>0&&N.charAt(K-1)===" ";)K--;for(;X<N.length&&N.charAt(X+1)===" ";)X++}else{let te=v[0],ae=v[0];A.getWidth(te)===0&&(z++,te--),A.getWidth(ae)===2&&(L++,ae++);const le=A.getString(ae).length;for(le>1&&(B+=le-1,X+=le-1);te>0&&K>0&&!this._isCharWordSeparator(A.loadCell(te-1,this._workCell));){A.loadCell(te-1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===0?(z++,te--):H>1&&(T+=H-1,K-=H-1),K--,te--}for(;ae<A.length&&X+1<N.length&&!this._isCharWordSeparator(A.loadCell(ae+1,this._workCell));){A.loadCell(ae+1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===2?(L++,ae++):H>1&&(B+=H-1,X+=H-1),X++,ae++}}X++;let I=K+J-z+T,q=Math.min(this._bufferService.cols,X-K+z+L-T-B);if(x||N.slice(K,X).trim()!==""){if(R&&I===0&&A.getCodePoint(0)!==32){const te=P.lines.get(v[1]-1);if(te&&A.isWrapped&&te.getCodePoint(this._bufferService.cols-1)!==32){const ae=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(ae){const le=this._bufferService.cols-ae.start;I-=le,q+=le}}}if(M&&I+q===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const te=P.lines.get(v[1]+1);if(te!=null&&te.isWrapped&&te.getCodePoint(0)!==32){const ae=this._getWordAt([0,v[1]+1],!1,!1,!0);ae&&(q+=ae.length)}}return{start:I,length:q}}}_selectWordAt(v,x){const R=this._getWordAt(v,x);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[R.start,v[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(v){const x=this._getWordAt(v,!0);if(x){let R=v[1];for(;x.start<0;)x.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;x.start+x.length>this._bufferService.cols;)x.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?x.start:x.start+x.length,R]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){const x=this._bufferService.buffer.getWrappedRangeForLine(v),R={start:{x:0,y:x.first},end:{x:this._bufferService.cols-1,y:x.last}};this._model.selectionStart=[0,x.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,i.getRangeLength)(R,this._bufferService.cols)}};s.SelectionService=w=u([f(3,h.IBufferService),f(4,h.ICoreService),f(5,C.IMouseService),f(6,h.IOptionsService),f(7,C.IRenderService),f(8,C.ICoreBrowserService)],w)},4725:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ILinkProviderService=s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const u=a(8343);s.ICharSizeService=(0,u.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),s.IMouseService=(0,u.createDecorator)("MouseService"),s.IRenderService=(0,u.createDecorator)("RenderService"),s.ISelectionService=(0,u.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,u.createDecorator)("ThemeService"),s.ILinkProviderService=(0,u.createDecorator)("LinkProviderService")},6731:function(y,s,a){var u=this&&this.__decorate||function(w,v,x,R){var M,P=arguments.length,A=P<3?v:R===null?R=Object.getOwnPropertyDescriptor(v,x):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(w,v,x,R);else for(var N=w.length-1;N>=0;N--)(M=w[N])&&(A=(P<3?M(A):P>3?M(v,x,A):M(v,x))||A);return P>3&&A&&Object.defineProperty(v,x,A),A},f=this&&this.__param||function(w,v){return function(x,R){v(x,R,w)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const l=a(7239),_=a(8055),m=a(8460),C=a(844),d=a(2585),r=_.css.toColor("#ffffff"),o=_.css.toColor("#000000"),i=_.css.toColor("#ffffff"),n=_.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const w=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let x=0;x<216;x++){const R=v[x/36%6|0],M=v[x/6%6|0],P=v[x%6];w.push({css:_.channels.toCss(R,M,P),rgba:_.channels.toRgba(R,M,P)})}for(let x=0;x<24;x++){const R=8+10*x;w.push({css:_.channels.toCss(R,R,R),rgba:_.channels.toRgba(R,R,R)})}return w})());let S=s.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:r,background:o,cursor:i,cursorAccent:n,selectionForeground:void 0,selectionBackgroundTransparent:h,selectionBackgroundOpaque:_.color.blend(o,h),selectionInactiveBackgroundTransparent:h,selectionInactiveBackgroundOpaque:_.color.blend(o,h),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(w={}){const v=this._colors;if(v.foreground=b(w.foreground,r),v.background=b(w.background,o),v.cursor=b(w.cursor,i),v.cursorAccent=b(w.cursorAccent,n),v.selectionBackgroundTransparent=b(w.selectionBackground,h),v.selectionBackgroundOpaque=_.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=b(w.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=_.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=w.selectionForeground?b(w.selectionForeground,_.NULL_COLOR):void 0,v.selectionForeground===_.NULL_COLOR&&(v.selectionForeground=void 0),_.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=_.color.opacity(v.selectionBackgroundTransparent,.3)),_.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=_.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=s.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=b(w.black,s.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=b(w.red,s.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=b(w.green,s.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=b(w.yellow,s.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=b(w.blue,s.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=b(w.magenta,s.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=b(w.cyan,s.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=b(w.white,s.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=b(w.brightBlack,s.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=b(w.brightRed,s.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=b(w.brightGreen,s.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=b(w.brightYellow,s.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=b(w.brightBlue,s.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=b(w.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=b(w.brightCyan,s.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=b(w.brightWhite,s.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){const x=Math.min(v.ansi.length-16,w.extendedAnsi.length);for(let R=0;R<x;R++)v.ansi[R+16]=b(w.extendedAnsi[R],s.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(w,v){if(w!==void 0)try{return _.css.toColor(w)}catch{}return v}s.ThemeService=S=u([f(0,d.IOptionsService)],S)},6349:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const u=a(8460),f=a(844);class l extends f.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;const C=new Array(m);for(let d=0;d<Math.min(m,this.length);d++)C[d]=this._array[this._getCyclicIndex(d)];this._array=C,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let C=this._length;C<m;C++)this._array[C]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,C){this._array[this._getCyclicIndex(m)]=C}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,C,...d){if(C){for(let r=m;r<this._length-C;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+C)];this._length-=C,this.onDeleteEmitter.fire({index:m,amount:C})}for(let r=this._length-1;r>=m;r--)this._array[this._getCyclicIndex(r+d.length)]=this._array[this._getCyclicIndex(r)];for(let r=0;r<d.length;r++)this._array[this._getCyclicIndex(m+r)]=d[r];if(d.length&&this.onInsertEmitter.fire({index:m,amount:d.length}),this._length+d.length>this._maxLength){const r=this._length+d.length-this._maxLength;this._startIndex+=r,this._length=this._maxLength,this.onTrimEmitter.fire(r)}else this._length+=d.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,C,d){if(!(C<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let o=C-1;o>=0;o--)this.set(m+o+d,this.get(m+o));const r=m+C+d-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let r=0;r<C;r++)this.set(m+r+d,this.get(m+r))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}s.CircularList=l},1439:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function a(u,f=5){if(typeof u!="object")return u;const l=Array.isArray(u)?[]:{};for(const _ in u)l[_]=f<=1?u[_]:u[_]&&a(u[_],f-1);return l}},8055:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let a=0,u=0,f=0,l=0;var _,m,C,d,r;function o(n){const h=n.toString(16);return h.length<2?"0"+h:h}function i(n,h){return n<h?(h+.05)/(n+.05):(n+.05)/(h+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(n){n.toCss=function(h,S,b,w){return w!==void 0?`#${o(h)}${o(S)}${o(b)}${o(w)}`:`#${o(h)}${o(S)}${o(b)}`},n.toRgba=function(h,S,b,w=255){return(h<<24|S<<16|b<<8|w)>>>0},n.toColor=function(h,S,b,w){return{css:n.toCss(h,S,b,w),rgba:n.toRgba(h,S,b,w)}}}(_||(s.channels=_={})),function(n){function h(S,b){return l=Math.round(255*b),[a,u,f]=r.toChannels(S.rgba),{css:_.toCss(a,u,f,l),rgba:_.toRgba(a,u,f,l)}}n.blend=function(S,b){if(l=(255&b.rgba)/255,l===1)return{css:b.css,rgba:b.rgba};const w=b.rgba>>24&255,v=b.rgba>>16&255,x=b.rgba>>8&255,R=S.rgba>>24&255,M=S.rgba>>16&255,P=S.rgba>>8&255;return a=R+Math.round((w-R)*l),u=M+Math.round((v-M)*l),f=P+Math.round((x-P)*l),{css:_.toCss(a,u,f),rgba:_.toRgba(a,u,f)}},n.isOpaque=function(S){return(255&S.rgba)==255},n.ensureContrastRatio=function(S,b,w){const v=r.ensureContrastRatio(S.rgba,b.rgba,w);if(v)return _.toColor(v>>24&255,v>>16&255,v>>8&255)},n.opaque=function(S){const b=(255|S.rgba)>>>0;return[a,u,f]=r.toChannels(b),{css:_.toCss(a,u,f),rgba:b}},n.opacity=h,n.multiplyOpacity=function(S,b){return l=255&S.rgba,h(S,l*b/255)},n.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(m||(s.color=m={})),function(n){let h,S;try{const b=document.createElement("canvas");b.width=1,b.height=1;const w=b.getContext("2d",{willReadFrequently:!0});w&&(h=w,h.globalCompositeOperation="copy",S=h.createLinearGradient(0,0,1,1))}catch{}n.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return a=parseInt(b.slice(1,2).repeat(2),16),u=parseInt(b.slice(2,3).repeat(2),16),f=parseInt(b.slice(3,4).repeat(2),16),_.toColor(a,u,f);case 5:return a=parseInt(b.slice(1,2).repeat(2),16),u=parseInt(b.slice(2,3).repeat(2),16),f=parseInt(b.slice(3,4).repeat(2),16),l=parseInt(b.slice(4,5).repeat(2),16),_.toColor(a,u,f,l);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const w=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return a=parseInt(w[1]),u=parseInt(w[2]),f=parseInt(w[3]),l=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),_.toColor(a,u,f,l);if(!h||!S)throw new Error("css.toColor: Unsupported css format");if(h.fillStyle=S,h.fillStyle=b,typeof h.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(h.fillRect(0,0,1,1),[a,u,f,l]=h.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:_.toRgba(a,u,f,l),css:b}}}(C||(s.css=C={})),function(n){function h(S,b,w){const v=S/255,x=b/255,R=w/255;return .2126*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.7152*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}n.relativeLuminance=function(S){return h(S>>16&255,S>>8&255,255&S)},n.relativeLuminance2=h}(d||(s.rgb=d={})),function(n){function h(b,w,v){const x=b>>24&255,R=b>>16&255,M=b>>8&255;let P=w>>24&255,A=w>>16&255,N=w>>8&255,K=i(d.relativeLuminance2(P,A,N),d.relativeLuminance2(x,R,M));for(;K<v&&(P>0||A>0||N>0);)P-=Math.max(0,Math.ceil(.1*P)),A-=Math.max(0,Math.ceil(.1*A)),N-=Math.max(0,Math.ceil(.1*N)),K=i(d.relativeLuminance2(P,A,N),d.relativeLuminance2(x,R,M));return(P<<24|A<<16|N<<8|255)>>>0}function S(b,w,v){const x=b>>24&255,R=b>>16&255,M=b>>8&255;let P=w>>24&255,A=w>>16&255,N=w>>8&255,K=i(d.relativeLuminance2(P,A,N),d.relativeLuminance2(x,R,M));for(;K<v&&(P<255||A<255||N<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),A=Math.min(255,A+Math.ceil(.1*(255-A))),N=Math.min(255,N+Math.ceil(.1*(255-N))),K=i(d.relativeLuminance2(P,A,N),d.relativeLuminance2(x,R,M));return(P<<24|A<<16|N<<8|255)>>>0}n.blend=function(b,w){if(l=(255&w)/255,l===1)return w;const v=w>>24&255,x=w>>16&255,R=w>>8&255,M=b>>24&255,P=b>>16&255,A=b>>8&255;return a=M+Math.round((v-M)*l),u=P+Math.round((x-P)*l),f=A+Math.round((R-A)*l),_.toRgba(a,u,f)},n.ensureContrastRatio=function(b,w,v){const x=d.relativeLuminance(b>>8),R=d.relativeLuminance(w>>8);if(i(x,R)<v){if(R<x){const A=h(b,w,v),N=i(x,d.relativeLuminance(A>>8));if(N<v){const K=S(b,w,v);return N>i(x,d.relativeLuminance(K>>8))?A:K}return A}const M=S(b,w,v),P=i(x,d.relativeLuminance(M>>8));if(P<v){const A=h(b,w,v);return P>i(x,d.relativeLuminance(A>>8))?M:A}return M}},n.reduceLuminance=h,n.increaseLuminance=S,n.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]}}(r||(s.rgba=r={})),s.toPaddedHex=o,s.contrastRatio=i},8969:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const u=a(844),f=a(2585),l=a(4348),_=a(7866),m=a(744),C=a(7302),d=a(6975),r=a(8460),o=a(1753),i=a(1480),n=a(7994),h=a(9282),S=a(5435),b=a(5981),w=a(2660);let v=!1;class x extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new r.EventEmitter),this._onScroll.event(M=>{var P;(P=this._onScrollApi)==null||P.fire(M.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(M){for(const P in M)this.optionsService.options[P]=M[P]}constructor(M){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new r.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new r.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new r.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new r.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new C.OptionsService(M)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(o.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(i.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(n.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,r.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,r.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,r.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,r.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((P,A)=>this._inputHandler.parse(P,A))),this.register((0,r.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(M,P){this._writeBuffer.write(M,P)}writeSync(M,P){this._logService.logLevel<=f.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(M,P)}input(M,P=!0){this.coreService.triggerDataEvent(M,P)}resize(M,P){isNaN(M)||isNaN(P)||(M=Math.max(M,m.MINIMUM_COLS),P=Math.max(P,m.MINIMUM_ROWS),this._bufferService.resize(M,P))}scroll(M,P=!1){this._bufferService.scroll(M,P)}scrollLines(M,P,A){this._bufferService.scrollLines(M,P,A)}scrollPages(M){this.scrollLines(M*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(M){const P=M-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(M,P){return this._inputHandler.registerEscHandler(M,P)}registerDcsHandler(M,P){return this._inputHandler.registerDcsHandler(M,P)}registerCsiHandler(M,P){return this._inputHandler.registerCsiHandler(M,P)}registerOscHandler(M,P){return this._inputHandler.registerOscHandler(M,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let M=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?M=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(M=!0),M?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const M=[];M.push(this.onLineFeed(h.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},()=>((0,h.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const P of M)P.dispose()})}}}s.CoreTerminal=x},8460:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===a)return void this._listeners.splice(u,1)}}})),this._event}fire(a,u){const f=[];for(let l=0;l<this._listeners.length;l++)f.push(this._listeners[l]);for(let l=0;l<f.length;l++)f[l].call(void 0,a,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,u){return a(f=>u.fire(f))},s.runAndSubscribe=function(a,u){return u(void 0),a(f=>u(f))}},5435:function(y,s,a){var u=this&&this.__decorate||function(z,L,T,B){var I,q=arguments.length,te=q<3?L:B===null?B=Object.getOwnPropertyDescriptor(L,T):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(z,L,T,B);else for(var ae=z.length-1;ae>=0;ae--)(I=z[ae])&&(te=(q<3?I(te):q>3?I(L,T,te):I(L,T))||te);return q>3&&te&&Object.defineProperty(L,T,te),te},f=this&&this.__param||function(z,L){return function(T,B){L(T,B,z)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const l=a(2584),_=a(7116),m=a(2015),C=a(844),d=a(482),r=a(8437),o=a(8460),i=a(643),n=a(511),h=a(3734),S=a(2585),b=a(1480),w=a(6242),v=a(6351),x=a(5941),R={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function P(z,L){if(z>24)return L.setWinLines||!1;switch(z){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var A;(function(z){z[z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",z[z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(s.WindowsOptionsReportType=A={}));let N=0;class K extends C.Disposable{getAttrData(){return this._curAttrData}constructor(L,T,B,I,q,te,ae,le,H=new m.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=T,this._coreService=B,this._logService=I,this._optionsService=q,this._oscLinkService=te,this._coreMouseService=ae,this._unicodeService=le,this._parser=H,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new n.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new o.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new o.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new o.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new o.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new o.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new o.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new o.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new o.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new o.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new o.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new o.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new X(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._parser.setCsiHandlerFallback((k,G)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(k),params:G.toArray()})}),this._parser.setEscHandlerFallback(k=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(k)})}),this._parser.setExecuteHandlerFallback(k=>{this._logService.debug("Unknown EXECUTE code: ",{code:k})}),this._parser.setOscHandlerFallback((k,G,$)=>{this._logService.debug("Unknown OSC code: ",{identifier:k,action:G,data:$})}),this._parser.setDcsHandlerFallback((k,G,$)=>{G==="HOOK"&&($=$.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(k),action:G,payload:$})}),this._parser.setPrintHandler((k,G,$)=>this.print(k,G,$)),this._parser.registerCsiHandler({final:"@"},k=>this.insertChars(k)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},k=>this.scrollLeft(k)),this._parser.registerCsiHandler({final:"A"},k=>this.cursorUp(k)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},k=>this.scrollRight(k)),this._parser.registerCsiHandler({final:"B"},k=>this.cursorDown(k)),this._parser.registerCsiHandler({final:"C"},k=>this.cursorForward(k)),this._parser.registerCsiHandler({final:"D"},k=>this.cursorBackward(k)),this._parser.registerCsiHandler({final:"E"},k=>this.cursorNextLine(k)),this._parser.registerCsiHandler({final:"F"},k=>this.cursorPrecedingLine(k)),this._parser.registerCsiHandler({final:"G"},k=>this.cursorCharAbsolute(k)),this._parser.registerCsiHandler({final:"H"},k=>this.cursorPosition(k)),this._parser.registerCsiHandler({final:"I"},k=>this.cursorForwardTab(k)),this._parser.registerCsiHandler({final:"J"},k=>this.eraseInDisplay(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},k=>this.eraseInDisplay(k,!0)),this._parser.registerCsiHandler({final:"K"},k=>this.eraseInLine(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},k=>this.eraseInLine(k,!0)),this._parser.registerCsiHandler({final:"L"},k=>this.insertLines(k)),this._parser.registerCsiHandler({final:"M"},k=>this.deleteLines(k)),this._parser.registerCsiHandler({final:"P"},k=>this.deleteChars(k)),this._parser.registerCsiHandler({final:"S"},k=>this.scrollUp(k)),this._parser.registerCsiHandler({final:"T"},k=>this.scrollDown(k)),this._parser.registerCsiHandler({final:"X"},k=>this.eraseChars(k)),this._parser.registerCsiHandler({final:"Z"},k=>this.cursorBackwardTab(k)),this._parser.registerCsiHandler({final:"`"},k=>this.charPosAbsolute(k)),this._parser.registerCsiHandler({final:"a"},k=>this.hPositionRelative(k)),this._parser.registerCsiHandler({final:"b"},k=>this.repeatPrecedingCharacter(k)),this._parser.registerCsiHandler({final:"c"},k=>this.sendDeviceAttributesPrimary(k)),this._parser.registerCsiHandler({prefix:">",final:"c"},k=>this.sendDeviceAttributesSecondary(k)),this._parser.registerCsiHandler({final:"d"},k=>this.linePosAbsolute(k)),this._parser.registerCsiHandler({final:"e"},k=>this.vPositionRelative(k)),this._parser.registerCsiHandler({final:"f"},k=>this.hVPosition(k)),this._parser.registerCsiHandler({final:"g"},k=>this.tabClear(k)),this._parser.registerCsiHandler({final:"h"},k=>this.setMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"h"},k=>this.setModePrivate(k)),this._parser.registerCsiHandler({final:"l"},k=>this.resetMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"l"},k=>this.resetModePrivate(k)),this._parser.registerCsiHandler({final:"m"},k=>this.charAttributes(k)),this._parser.registerCsiHandler({final:"n"},k=>this.deviceStatus(k)),this._parser.registerCsiHandler({prefix:"?",final:"n"},k=>this.deviceStatusPrivate(k)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},k=>this.softReset(k)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},k=>this.setCursorStyle(k)),this._parser.registerCsiHandler({final:"r"},k=>this.setScrollRegion(k)),this._parser.registerCsiHandler({final:"s"},k=>this.saveCursor(k)),this._parser.registerCsiHandler({final:"t"},k=>this.windowOptions(k)),this._parser.registerCsiHandler({final:"u"},k=>this.restoreCursor(k)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},k=>this.insertColumns(k)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},k=>this.deleteColumns(k)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},k=>this.selectProtected(k)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},k=>this.requestMode(k,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},k=>this.requestMode(k,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new w.OscHandler(k=>(this.setTitle(k),this.setIconName(k),!0))),this._parser.registerOscHandler(1,new w.OscHandler(k=>this.setIconName(k))),this._parser.registerOscHandler(2,new w.OscHandler(k=>this.setTitle(k))),this._parser.registerOscHandler(4,new w.OscHandler(k=>this.setOrReportIndexedColor(k))),this._parser.registerOscHandler(8,new w.OscHandler(k=>this.setHyperlink(k))),this._parser.registerOscHandler(10,new w.OscHandler(k=>this.setOrReportFgColor(k))),this._parser.registerOscHandler(11,new w.OscHandler(k=>this.setOrReportBgColor(k))),this._parser.registerOscHandler(12,new w.OscHandler(k=>this.setOrReportCursorColor(k))),this._parser.registerOscHandler(104,new w.OscHandler(k=>this.restoreIndexedColor(k))),this._parser.registerOscHandler(110,new w.OscHandler(k=>this.restoreFgColor(k))),this._parser.registerOscHandler(111,new w.OscHandler(k=>this.restoreBgColor(k))),this._parser.registerOscHandler(112,new w.OscHandler(k=>this.restoreCursorColor(k))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const k in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:k},()=>this.selectCharset("("+k)),this._parser.registerEscHandler({intermediates:")",final:k},()=>this.selectCharset(")"+k)),this._parser.registerEscHandler({intermediates:"*",final:k},()=>this.selectCharset("*"+k)),this._parser.registerEscHandler({intermediates:"+",final:k},()=>this.selectCharset("+"+k)),this._parser.registerEscHandler({intermediates:"-",final:k},()=>this.selectCharset("-"+k)),this._parser.registerEscHandler({intermediates:".",final:k},()=>this.selectCharset("."+k)),this._parser.registerEscHandler({intermediates:"/",final:k},()=>this.selectCharset("/"+k));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(k=>(this._logService.error("Parsing error: ",k),k)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new v.DcsHandler((k,G)=>this.requestStatusString(k,G)))}_preserveStack(L,T,B,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=B,this._parseStack.position=I}_logSlowResolvingAsync(L){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([L,new Promise((T,B)=>setTimeout(()=>B("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,T){let B,I=this._activeBuffer.x,q=this._activeBuffer.y,te=0;const ae=this._parseStack.paused;if(ae){if(B=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(B),B;I=this._parseStack.cursorStartX,q=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>M&&(te=this._parseStack.position+M)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,k=>String.fromCharCode(k)).join("")}"`),typeof L=="string"?L.split("").map(k=>k.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(L.length,M))),ae||this._dirtyRowTracker.clearRange(),L.length>M)for(let k=te;k<L.length;k+=M){const G=k+M<L.length?k+M:L.length,$=typeof L=="string"?this._stringDecoder.decode(L.substring(k,G),this._parseBuffer):this._utf8Decoder.decode(L.subarray(k,G),this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,$))return this._preserveStack(I,q,$,k),this._logSlowResolvingAsync(B),B}else if(!ae){const k=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,k))return this._preserveStack(I,q,k,0),this._logSlowResolvingAsync(B),B}this._activeBuffer.x===I&&this._activeBuffer.y===q||this._onCursorMove.fire();const le=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),H=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);H<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(H,this._bufferService.rows-1),Math.min(le,this._bufferService.rows-1))}print(L,T,B){let I,q;const te=this._charsetService.charset,ae=this._optionsService.rawOptions.screenReaderMode,le=this._bufferService.cols,H=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,G=this._curAttrData;let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&B-T>0&&$.getWidth(this._activeBuffer.x-1)===2&&$.setCellFromCodepoint(this._activeBuffer.x-1,0,1,G);let se=this._parser.precedingJoinState;for(let D=T;D<B;++D){if(I=L[D],I<127&&te){const j=te[String.fromCharCode(I)];j&&(I=j.charCodeAt(0))}const O=this._unicodeService.charProperties(I,se);q=b.UnicodeService.extractWidth(O);const F=b.UnicodeService.extractShouldJoin(O),U=F?b.UnicodeService.extractWidth(se):0;if(se=O,ae&&this._onA11yChar.fire((0,d.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+q-U>le){if(H){const j=$;let W=this._activeBuffer.x-U;for(this._activeBuffer.x=U,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),$=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),U>0&&$ instanceof r.BufferLine&&$.copyCellsFrom(j,W,0,U,!1);W<le;)j.setCellFromCodepoint(W++,0,1,G)}else if(this._activeBuffer.x=le-1,q===2)continue}if(F&&this._activeBuffer.x){const j=$.getWidth(this._activeBuffer.x-1)?1:2;$.addCodepointToCell(this._activeBuffer.x-j,I,q);for(let W=q-U;--W>=0;)$.setCellFromCodepoint(this._activeBuffer.x++,0,0,G)}else if(k&&($.insertCells(this._activeBuffer.x,q-U,this._activeBuffer.getNullCell(G)),$.getWidth(le-1)===2&&$.setCellFromCodepoint(le-1,i.NULL_CELL_CODE,i.NULL_CELL_WIDTH,G)),$.setCellFromCodepoint(this._activeBuffer.x++,I,q,G),q>0)for(;--q;)$.setCellFromCodepoint(this._activeBuffer.x++,0,0,G)}this._parser.precedingJoinState=se,this._activeBuffer.x<le&&B-T>0&&$.getWidth(this._activeBuffer.x)===0&&!$.hasContent(this._activeBuffer.x)&&$.setCellFromCodepoint(this._activeBuffer.x,0,1,G),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,T){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,T):this._parser.registerCsiHandler(L,B=>!P(B.params[0],this._optionsService.rawOptions.windowOptions)||T(B))}registerDcsHandler(L,T){return this._parser.registerDcsHandler(L,new v.DcsHandler(T))}registerEscHandler(L,T){return this._parser.registerEscHandler(L,T)}registerOscHandler(L,T){return this._parser.registerOscHandler(L,new w.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=L,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+T)}cursorUp(L){const T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const T=L.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=L.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=L.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const T=L.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,T,B,I=!1,q=!1){const te=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);te.replaceCells(T,B,this._activeBuffer.getNullCell(this._eraseAttrData()),q),I&&(te.isWrapped=!1)}_resetBufferLine(L,T=!1){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);B&&(B.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),B.isWrapped=!1)}eraseInDisplay(L,T=!1){let B;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);B<this._bufferService.rows;B++)this._resetBufferLine(B,T);this._dirtyRowTracker.markDirty(B);break;case 1:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(B+1).isWrapped=!1);B--;)this._resetBufferLine(B,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(B=this._bufferService.rows,this._dirtyRowTracker.markDirty(B-1);B--;)this._resetBufferLine(B,T);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(L,T=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let T=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;T--;)this._activeBuffer.lines.splice(q-1,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let T=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;T--;)this._activeBuffer.lines.splice(B,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let T=L.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let T=L.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(r.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=L.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=L.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=L.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=L.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){const T=this._parser.precedingJoinState;if(!T)return!0;const B=L.params[0]||1,I=b.UnicodeService.extractWidth(T),q=this._activeBuffer.x-I,te=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(q),ae=new Uint32Array(te.length*B);let le=0;for(let k=0;k<te.length;){const G=te.codePointAt(k)||0;ae[le++]=G,k+=G>65535?2:1}let H=le;for(let k=1;k<B;++k)ae.copyWithin(H,0,le),H+=le;return this.print(ae,0,H),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let T=0;T<L.length;T++)switch(L.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let T=0;T<L.length;T++)switch(L.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let T=0;T<L.length;T++)switch(L.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let T=0;T<L.length;T++)switch(L.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,T){const B=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:q}=this._coreMouseService,te=this._coreService,{buffers:ae,cols:le}=this._bufferService,{active:H,alt:k}=ae,G=this._optionsService.rawOptions,$=F=>F?1:2,se=L.params[0];return D=se,O=T?se===2?4:se===4?$(te.modes.insertMode):se===12?3:se===20?$(G.convertEol):0:se===1?$(B.applicationCursorKeys):se===3?G.windowOptions.setWinLines?le===80?2:le===132?1:0:0:se===6?$(B.origin):se===7?$(B.wraparound):se===8?3:se===9?$(I==="X10"):se===12?$(G.cursorBlink):se===25?$(!te.isCursorHidden):se===45?$(B.reverseWraparound):se===66?$(B.applicationKeypad):se===67?4:se===1e3?$(I==="VT200"):se===1002?$(I==="DRAG"):se===1003?$(I==="ANY"):se===1004?$(B.sendFocus):se===1005?4:se===1006?$(q==="SGR"):se===1015?4:se===1016?$(q==="SGR_PIXELS"):se===1048?1:se===47||se===1047||se===1049?$(H===k):se===2004?$(B.bracketedPasteMode):0,te.triggerDataEvent(`${l.C0.ESC}[${T?"":"?"}${D};${O}$y`),!0;var D,O}_updateAttrColor(L,T,B,I,q){return T===2?(L|=50331648,L&=-16777216,L|=h.AttributeData.fromColorRGB([B,I,q])):T===5&&(L&=-50331904,L|=33554432|255&B),L}_extractColor(L,T,B){const I=[0,0,-1,0,0,0];let q=0,te=0;do{if(I[te+q]=L.params[T+te],L.hasSubParams(T+te)){const ae=L.getSubParams(T+te);let le=0;do I[1]===5&&(q=1),I[te+le+1+q]=ae[le];while(++le<ae.length&&le+te+1+q<I.length);break}if(I[1]===5&&te+q>=2||I[1]===2&&te+q>=5)break;I[1]&&(q=1)}while(++te+T<L.length&&te+q<I.length);for(let ae=2;ae<I.length;++ae)I[ae]===-1&&(I[ae]=0);switch(I[0]){case 38:B.fg=this._updateAttrColor(B.fg,I[1],I[3],I[4],I[5]);break;case 48:B.bg=this._updateAttrColor(B.bg,I[1],I[3],I[4],I[5]);break;case 58:B.extended=B.extended.clone(),B.extended.underlineColor=this._updateAttrColor(B.extended.underlineColor,I[1],I[3],I[4],I[5])}return te}_processUnderline(L,T){T.extended=T.extended.clone(),(!~L||L>5)&&(L=1),T.extended.underlineStyle=L,T.fg|=268435456,L===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(L){L.fg=r.DEFAULT_ATTR_DATA.fg,L.bg=r.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const T=L.length;let B;const I=this._curAttrData;for(let q=0;q<T;q++)B=L.params[q],B>=30&&B<=37?(I.fg&=-50331904,I.fg|=16777216|B-30):B>=40&&B<=47?(I.bg&=-50331904,I.bg|=16777216|B-40):B>=90&&B<=97?(I.fg&=-50331904,I.fg|=16777224|B-90):B>=100&&B<=107?(I.bg&=-50331904,I.bg|=16777224|B-100):B===0?this._processSGR0(I):B===1?I.fg|=134217728:B===3?I.bg|=67108864:B===4?(I.fg|=268435456,this._processUnderline(L.hasSubParams(q)?L.getSubParams(q)[0]:1,I)):B===5?I.fg|=536870912:B===7?I.fg|=67108864:B===8?I.fg|=1073741824:B===9?I.fg|=2147483648:B===2?I.bg|=134217728:B===21?this._processUnderline(2,I):B===22?(I.fg&=-134217729,I.bg&=-134217729):B===23?I.bg&=-67108865:B===24?(I.fg&=-268435457,this._processUnderline(0,I)):B===25?I.fg&=-536870913:B===27?I.fg&=-67108865:B===28?I.fg&=-1073741825:B===29?I.fg&=2147483647:B===39?(I.fg&=-67108864,I.fg|=16777215&r.DEFAULT_ATTR_DATA.fg):B===49?(I.bg&=-67108864,I.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):B===38||B===48||B===58?q+=this._extractColor(L,q,I):B===53?I.bg|=1073741824:B===55?I.bg&=-1073741825:B===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):B===100?(I.fg&=-67108864,I.fg|=16777215&r.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",B);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const T=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${T};${B}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const T=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${T};${B}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const T=L.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const B=T%2==1;return this._optionsService.options.cursorBlink=B,!0}setScrollRegion(L){const T=L.params[0]||1;let B;return(L.length<2||(B=L.params[1])>this._bufferService.rows||B===0)&&(B=this._bufferService.rows),B>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=B-1,this._setCursor(0,0)),!0}windowOptions(L){if(!P(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const T=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const T=[],B=L.split(";");for(;B.length>1;){const I=B.shift(),q=B.shift();if(/^\d+$/.exec(I)){const te=parseInt(I);if(J(te))if(q==="?")T.push({type:0,index:te});else{const ae=(0,x.parseColor)(q);ae&&T.push({type:1,index:te,color:ae})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(L){const T=L.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(L,T){this._getCurrentLinkId()&&this._finishHyperlink();const B=L.split(":");let I;const q=B.findIndex(te=>te.startsWith("id="));return q!==-1&&(I=B[q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,T){const B=L.split(";");for(let I=0;I<B.length&&!(T>=this._specialColors.length);++I,++T)if(B[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{const q=(0,x.parseColor)(B[I]);q&&this._onColor.fire([{type:1,index:this._specialColors[T],color:q}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const T=[],B=L.split(";");for(let I=0;I<B.length;++I)if(/^\d+$/.exec(B[I])){const q=parseInt(B[I]);J(q)&&T.push({type:2,index:q})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(R[L[0]],_.CHARSETS[L[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new n.CellData;L.content=4194373,L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){const B=this._activeBuffer.ybase+this._activeBuffer.y+T,I=this._activeBuffer.lines.get(B);I&&(I.fill(L),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,T){const B=this._bufferService.buffer,I=this._optionsService.rawOptions;return(q=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${q}${l.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${B.scrollTop+1};${B.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,T){this._dirtyRowTracker.markRangeDirty(L,T)}}s.InputHandler=K;let X=class{constructor(z){this._bufferService=z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(z){z<this.start?this.start=z:z>this.end&&(this.end=z)}markRangeDirty(z,L){z>L&&(N=z,z=L,L=N),z<this.start&&(this.start=z),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function J(z){return 0<=z&&z<256}X=u([f(0,S.IBufferService)],X)},844:(y,s)=>{function a(u){for(const f of u)f.dispose();u.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const f=this._disposables.indexOf(u);f!==-1&&this._disposables.splice(f,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var f;this._isDisposed||u===this._value||((f=this._value)==null||f.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},s.toDisposable=function(u){return{dispose:u}},s.disposeArray=a,s.getDisposeArrayDisposable=function(u){return{dispose:()=>a(u)}}},1505:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(f,l,_){this._data[f]||(this._data[f]={}),this._data[f][l]=_}get(f,l){return this._data[f]?this._data[f][l]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(u,f,l,_,m){this._data.get(u,f)||this._data.set(u,f,new a),this._data.get(u,f).set(l,_,m)}get(u,f,l,_){var m;return(m=this._data.get(u,f))==null?void 0:m.get(l,_)}clear(){this._data.clear()}}},6114:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof process<"u"&&"title"in process;const a=s.isNode?"node":navigator.userAgent,u=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;const f=a.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),s.isIpad=u==="iPad",s.isIphone=u==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),s.isLinux=u.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},6106:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let a=0;s.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(a=this._search(this._getKey(u)),this._array.splice(a,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const f=this._getKey(u);if(f===void 0||(a=this._search(f),a===-1)||this._getKey(this._array[a])!==f)return!1;do if(this._array[a]===u)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===f);return!1}*getKeyIterator(u){if(this._array.length!==0&&(a=this._search(u),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===u))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===u)}forEachByKey(u,f){if(this._array.length!==0&&(a=this._search(u),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===u))do f(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===u)}values(){return[...this._array].values()}_search(u){let f=0,l=this._array.length-1;for(;l>=f;){let _=f+l>>1;const m=this._getKey(this._array[_]);if(m>u)l=_-1;else{if(!(m<u)){for(;_>0&&this._getKey(this._array[_-1])===u;)_--;return _}f=_+1}}return f}}},7226:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const u=a(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let C=0,d=0,r=m.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),d=Math.max(C,d),o=m.timeRemaining(),1.5*d>o)return r-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-C))}ms`),void this._start();r=o}this.clear()}}class l extends f{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){const C=Date.now()+m;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}s.PriorityTaskQueue=l,s.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:l,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const u=a(643);s.updateWindowsModeWrappedState=function(f){const l=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),_=l==null?void 0:l.get(f.cols-1),m=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);m&&_&&(m.isWrapped=_[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&_[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new a;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}s.AttributeData=a;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}get underlineVariantOffset(){const l=(3758096384&this._ext)>>29;return l<0?4294967288^l:l}set underlineVariantOffset(l){this._ext&=536870911,this._ext|=l<<29&3758096384}constructor(l=0,_=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=_}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=u},9092:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const u=a(6349),f=a(7226),l=a(3734),_=a(8437),m=a(4634),C=a(511),d=a(643),r=a(4863),o=a(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(i,n,h){this._hasScrollback=i,this._optionsService=n,this._bufferService=h,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(i){return i?(this._nullCell.fg=i.fg,this._nullCell.bg=i.bg,this._nullCell.extended=i.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(i){return i?(this._whitespaceCell.fg=i.fg,this._whitespaceCell.bg=i.bg,this._whitespaceCell.extended=i.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(i,n){return new _.BufferLine(this._bufferService.cols,this.getNullCell(i),n)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const i=this.ybase+this.y-this.ydisp;return i>=0&&i<this._rows}_getCorrectBufferLength(i){if(!this._hasScrollback)return i;const n=i+this._optionsService.rawOptions.scrollback;return n>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:n}fillViewportRows(i){if(this.lines.length===0){i===void 0&&(i=_.DEFAULT_ATTR_DATA);let n=this._rows;for(;n--;)this.lines.push(this.getBlankLine(i))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(i,n){const h=this.getNullCell(_.DEFAULT_ATTR_DATA);let S=0;const b=this._getCorrectBufferLength(n);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<i)for(let v=0;v<this.lines.length;v++)S+=+this.lines.get(v).resize(i,h);let w=0;if(this._rows<n)for(let v=this._rows;v<n;v++)this.lines.length<n+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(i,h)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(i,h)));else for(let v=this._rows;v>n;v--)this.lines.length>n+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){const v=this.lines.length-b;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=b}this.x=Math.min(this.x,i-1),this.y=Math.min(this.y,n-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,i-1),this.scrollTop=0}if(this.scrollBottom=n-1,this._isReflowEnabled&&(this._reflow(i,n),this._cols>i))for(let w=0;w<this.lines.length;w++)S+=+this.lines.get(w).resize(i,h);this._cols=i,this._rows=n,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let i=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,i=!1);let n=0;for(;this._memoryCleanupPosition<this.lines.length;)if(n+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),n>100)return!0;return i}get _isReflowEnabled(){const i=this._optionsService.rawOptions.windowsPty;return i&&i.buildNumber?this._hasScrollback&&i.backend==="conpty"&&i.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(i,n){this._cols!==i&&(i>this._cols?this._reflowLarger(i,n):this._reflowSmaller(i,n))}_reflowLarger(i,n){const h=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,i,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(h.length>0){const S=(0,m.reflowLargerCreateNewLayout)(this.lines,h);(0,m.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(i,n,S.countRemoved)}}_reflowLargerAdjustViewport(i,n,h){const S=this.getNullCell(_.DEFAULT_ATTR_DATA);let b=h;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<n&&this.lines.push(new _.BufferLine(i,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-h,0)}_reflowSmaller(i,n){const h=this.getNullCell(_.DEFAULT_ATTR_DATA),S=[];let b=0;for(let w=this.lines.length-1;w>=0;w--){let v=this.lines.get(w);if(!v||!v.isWrapped&&v.getTrimmedLength()<=i)continue;const x=[v];for(;v.isWrapped&&w>0;)v=this.lines.get(--w),x.unshift(v);const R=this.ybase+this.y;if(R>=w&&R<w+x.length)continue;const M=x[x.length-1].getTrimmedLength(),P=(0,m.reflowSmallerGetNewLineLengths)(x,this._cols,i),A=P.length-x.length;let N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const K=[];for(let B=0;B<A;B++){const I=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);K.push(I)}K.length>0&&(S.push({start:w+x.length+b,newLines:K}),b+=K.length),x.push(...K);let X=P.length-1,J=P[X];J===0&&(X--,J=P[X]);let z=x.length-A-1,L=M;for(;z>=0;){const B=Math.min(L,J);if(x[X]===void 0)break;if(x[X].copyCellsFrom(x[z],L-B,J-B,B,!0),J-=B,J===0&&(X--,J=P[X]),L-=B,L===0){z--;const I=Math.max(z,0);L=(0,m.getWrappedLineTrimmedLength)(x,I,this._cols)}}for(let B=0;B<x.length;B++)P[B]<i&&x[B].setCell(P[B],h);let T=A-N;for(;T-- >0;)this.ybase===0?this.y<n-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-n&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+n-1)}if(S.length>0){const w=[],v=[];for(let X=0;X<this.lines.length;X++)v.push(this.lines.get(X));const x=this.lines.length;let R=x-1,M=0,P=S[M];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let A=0;for(let X=Math.min(this.lines.maxLength-1,x+b-1);X>=0;X--)if(P&&P.start>R+A){for(let J=P.newLines.length-1;J>=0;J--)this.lines.set(X--,P.newLines[J]);X++,w.push({index:R+1,amount:P.newLines.length}),A+=P.newLines.length,P=S[++M]}else this.lines.set(X,v[R--]);let N=0;for(let X=w.length-1;X>=0;X--)w[X].index+=N,this.lines.onInsertEmitter.fire(w[X]),N+=w[X].amount;const K=Math.max(0,x+b-this.lines.maxLength);K>0&&this.lines.onTrimEmitter.fire(K)}}translateBufferLineToString(i,n,h=0,S){const b=this.lines.get(i);return b?b.translateToString(n,h,S):""}getWrappedRangeForLine(i){let n=i,h=i;for(;n>0&&this.lines.get(n).isWrapped;)n--;for(;h+1<this.lines.length&&this.lines.get(h+1).isWrapped;)h++;return{first:n,last:h}}setupTabStops(i){for(i!=null?this.tabs[i]||(i=this.prevStop(i)):(this.tabs={},i=0);i<this._cols;i+=this._optionsService.rawOptions.tabStopWidth)this.tabs[i]=!0}prevStop(i){for(i==null&&(i=this.x);!this.tabs[--i]&&i>0;);return i>=this._cols?this._cols-1:i<0?0:i}nextStop(i){for(i==null&&(i=this.x);!this.tabs[++i]&&i<this._cols;);return i>=this._cols?this._cols-1:i<0?0:i}clearMarkers(i){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].line===i&&(this.markers[n].dispose(),this.markers.splice(n--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].dispose(),this.markers.splice(i--,1);this._isClearing=!1}addMarker(i){const n=new r.Marker(i);return this.markers.push(n),n.register(this.lines.onTrim(h=>{n.line-=h,n.line<0&&n.dispose()})),n.register(this.lines.onInsert(h=>{n.line>=h.index&&(n.line+=h.amount)})),n.register(this.lines.onDelete(h=>{n.line>=h.index&&n.line<h.index+h.amount&&n.dispose(),n.line>h.index&&(n.line-=h.amount)})),n.register(n.onDispose(()=>this._removeMarker(n))),n}_removeMarker(i){this._isClearing||this.markers.splice(this.markers.indexOf(i),1)}}},8437:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const u=a(3734),f=a(511),l=a(643),_=a(482);s.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let m=0;class C{constructor(r,o,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*r);const n=o||f.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let h=0;h<r;++h)this.setCell(h,n);this.length=r}get(r){const o=this._data[3*r+0],i=2097151&o;return[this._data[3*r+1],2097152&o?this._combined[r]:i?(0,_.stringFromCodePoint)(i):"",o>>22,2097152&o?this._combined[r].charCodeAt(this._combined[r].length-1):i]}set(r,o){this._data[3*r+1]=o[l.CHAR_DATA_ATTR_INDEX],o[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[r]=o[1],this._data[3*r+0]=2097152|r|o[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*r+0]=o[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(r){return this._data[3*r+0]>>22}hasWidth(r){return 12582912&this._data[3*r+0]}getFg(r){return this._data[3*r+1]}getBg(r){return this._data[3*r+2]}hasContent(r){return 4194303&this._data[3*r+0]}getCodePoint(r){const o=this._data[3*r+0];return 2097152&o?this._combined[r].charCodeAt(this._combined[r].length-1):2097151&o}isCombined(r){return 2097152&this._data[3*r+0]}getString(r){const o=this._data[3*r+0];return 2097152&o?this._combined[r]:2097151&o?(0,_.stringFromCodePoint)(2097151&o):""}isProtected(r){return 536870912&this._data[3*r+2]}loadCell(r,o){return m=3*r,o.content=this._data[m+0],o.fg=this._data[m+1],o.bg=this._data[m+2],2097152&o.content&&(o.combinedData=this._combined[r]),268435456&o.bg&&(o.extended=this._extendedAttrs[r]),o}setCell(r,o){2097152&o.content&&(this._combined[r]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[r]=o.extended),this._data[3*r+0]=o.content,this._data[3*r+1]=o.fg,this._data[3*r+2]=o.bg}setCellFromCodepoint(r,o,i,n){268435456&n.bg&&(this._extendedAttrs[r]=n.extended),this._data[3*r+0]=o|i<<22,this._data[3*r+1]=n.fg,this._data[3*r+2]=n.bg}addCodepointToCell(r,o,i){let n=this._data[3*r+0];2097152&n?this._combined[r]+=(0,_.stringFromCodePoint)(o):2097151&n?(this._combined[r]=(0,_.stringFromCodePoint)(2097151&n)+(0,_.stringFromCodePoint)(o),n&=-2097152,n|=2097152):n=o|4194304,i&&(n&=-12582913,n|=i<<22),this._data[3*r+0]=n}insertCells(r,o,i){if((r%=this.length)&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,i),o<this.length-r){const n=new f.CellData;for(let h=this.length-r-o-1;h>=0;--h)this.setCell(r+o+h,this.loadCell(r+h,n));for(let h=0;h<o;++h)this.setCell(r+h,i)}else for(let n=r;n<this.length;++n)this.setCell(n,i);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,i)}deleteCells(r,o,i){if(r%=this.length,o<this.length-r){const n=new f.CellData;for(let h=0;h<this.length-r-o;++h)this.setCell(r+h,this.loadCell(r+o+h,n));for(let h=this.length-o;h<this.length;++h)this.setCell(h,i)}else for(let n=r;n<this.length;++n)this.setCell(n,i);r&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,i),this.getWidth(r)!==0||this.hasContent(r)||this.setCellFromCodepoint(r,0,1,i)}replaceCells(r,o,i,n=!1){if(n)for(r&&this.getWidth(r-1)===2&&!this.isProtected(r-1)&&this.setCellFromCodepoint(r-1,0,1,i),o<this.length&&this.getWidth(o-1)===2&&!this.isProtected(o)&&this.setCellFromCodepoint(o,0,1,i);r<o&&r<this.length;)this.isProtected(r)||this.setCell(r,i),r++;else for(r&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,i),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o,0,1,i);r<o&&r<this.length;)this.setCell(r++,i)}resize(r,o){if(r===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*r;if(r>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const n=new Uint32Array(i);n.set(this._data),this._data=n}for(let n=this.length;n<r;++n)this.setCell(n,o)}else{this._data=this._data.subarray(0,i);const n=Object.keys(this._combined);for(let S=0;S<n.length;S++){const b=parseInt(n[S],10);b>=r&&delete this._combined[b]}const h=Object.keys(this._extendedAttrs);for(let S=0;S<h.length;S++){const b=parseInt(h[S],10);b>=r&&delete this._extendedAttrs[b]}}return this.length=r,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const r=new Uint32Array(this._data.length);return r.set(this._data),this._data=r,1}return 0}fill(r,o=!1){if(o)for(let i=0;i<this.length;++i)this.isProtected(i)||this.setCell(i,r);else{this._combined={},this._extendedAttrs={};for(let i=0;i<this.length;++i)this.setCell(i,r)}}copyFrom(r){this.length!==r.length?this._data=new Uint32Array(r._data):this._data.set(r._data),this.length=r.length,this._combined={};for(const o in r._combined)this._combined[o]=r._combined[o];this._extendedAttrs={};for(const o in r._extendedAttrs)this._extendedAttrs[o]=r._extendedAttrs[o];this.isWrapped=r.isWrapped}clone(){const r=new C(0);r._data=new Uint32Array(this._data),r.length=this.length;for(const o in this._combined)r._combined[o]=this._combined[o];for(const o in this._extendedAttrs)r._extendedAttrs[o]=this._extendedAttrs[o];return r.isWrapped=this.isWrapped,r}getTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0])return r+(this._data[3*r+0]>>22);return 0}getNoBgTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0]||50331648&this._data[3*r+2])return r+(this._data[3*r+0]>>22);return 0}copyCellsFrom(r,o,i,n,h){const S=r._data;if(h)for(let w=n-1;w>=0;w--){for(let v=0;v<3;v++)this._data[3*(i+w)+v]=S[3*(o+w)+v];268435456&S[3*(o+w)+2]&&(this._extendedAttrs[i+w]=r._extendedAttrs[o+w])}else for(let w=0;w<n;w++){for(let v=0;v<3;v++)this._data[3*(i+w)+v]=S[3*(o+w)+v];268435456&S[3*(o+w)+2]&&(this._extendedAttrs[i+w]=r._extendedAttrs[o+w])}const b=Object.keys(r._combined);for(let w=0;w<b.length;w++){const v=parseInt(b[w],10);v>=o&&(this._combined[v-o+i]=r._combined[v])}}translateToString(r,o,i,n){o=o??0,i=i??this.length,r&&(i=Math.min(i,this.getTrimmedLength())),n&&(n.length=0);let h="";for(;o<i;){const S=this._data[3*o+0],b=2097151&S,w=2097152&S?this._combined[o]:b?(0,_.stringFromCodePoint)(b):l.WHITESPACE_CELL_CHAR;if(h+=w,n)for(let v=0;v<w.length;++v)n.push(o);o+=S>>22||1}return n&&n.push(o),h}}s.BufferLine=C},4841:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(a,u){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return u*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(y,s)=>{function a(u,f,l){if(f===u.length-1)return u[f].getTrimmedLength();const _=!u[f].hasContent(l-1)&&u[f].getWidth(l-1)===1,m=u[f+1].getWidth(0)===2;return _&&m?l-1:l}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(u,f,l,_,m){const C=[];for(let d=0;d<u.length-1;d++){let r=d,o=u.get(++r);if(!o.isWrapped)continue;const i=[u.get(d)];for(;r<u.length&&o.isWrapped;)i.push(o),o=u.get(++r);if(_>=d&&_<r){d+=i.length-1;continue}let n=0,h=a(i,n,f),S=1,b=0;for(;S<i.length;){const v=a(i,S,f),x=v-b,R=l-h,M=Math.min(x,R);i[n].copyCellsFrom(i[S],b,h,M,!1),h+=M,h===l&&(n++,h=0),b+=M,b===v&&(S++,b=0),h===0&&n!==0&&i[n-1].getWidth(l-1)===2&&(i[n].copyCellsFrom(i[n-1],l-1,h++,1,!1),i[n-1].setCell(l-1,m))}i[n].replaceCells(h,l,m);let w=0;for(let v=i.length-1;v>0&&(v>n||i[v].getTrimmedLength()===0);v--)w++;w>0&&(C.push(d+i.length-w),C.push(w)),d+=i.length-1}return C},s.reflowLargerCreateNewLayout=function(u,f){const l=[];let _=0,m=f[_],C=0;for(let d=0;d<u.length;d++)if(m===d){const r=f[++_];u.onDeleteEmitter.fire({index:d-C,amount:r}),d+=r-1,C+=r,m=f[++_]}else l.push(d);return{layout:l,countRemoved:C}},s.reflowLargerApplyNewLayout=function(u,f){const l=[];for(let _=0;_<f.length;_++)l.push(u.get(f[_]));for(let _=0;_<l.length;_++)u.set(_,l[_]);u.length=f.length},s.reflowSmallerGetNewLineLengths=function(u,f,l){const _=[],m=u.map((o,i)=>a(u,i,f)).reduce((o,i)=>o+i);let C=0,d=0,r=0;for(;r<m;){if(m-r<l){_.push(m-r);break}C+=l;const o=a(u,d,f);C>o&&(C-=o,d++);const i=u[d].getWidth(C-1)===2;i&&C--;const n=i?l-1:l;_.push(n),r+=n}return _},s.getWrappedLineTrimmedLength=a},5295:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const u=a(8460),f=a(844),l=a(9092);class _ extends f.Disposable{constructor(C,d){super(),this._optionsService=C,this._bufferService=d,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,d){this._normal.resize(C,d),this._alt.resize(C,d),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}s.BufferSet=_},511:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const u=a(482),f=a(643),l=a(3734);class _ extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const d=new _;return d.setFromCharData(C),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(C[f.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(C[f.CHAR_DATA_CHAR_INDEX].length===2){const r=C[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){const o=C[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(r-55296)+o-56320+65536|C[f.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=C[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[f.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=C[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=_},643:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const u=a(8460),f=a(844);class l{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}s.Marker=l,l._nextId=1},7116:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},s.CHARSETS.A={"#":""},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},s.CHARSETS.C=s.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.E=s.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},s.CHARSETS.H=s.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(y,s)=>{var a,u,f;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(a||(s.C0=a={})),function(l){l.PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC=""}(u||(s.C1=u={})),function(l){l.ST=`${a.ESC}\\`}(f||(s.C1_ESCAPED=f={}))},7399:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const u=a(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(l,_,m,C){const d={type:0,cancel:!1,key:void 0},r=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?d.key=_?u.C0.ESC+"OA":u.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?d.key=_?u.C0.ESC+"OD":u.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?d.key=_?u.C0.ESC+"OC":u.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(d.key=_?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:d.key=l.ctrlKey?"\b":u.C0.DEL,l.altKey&&(d.key=u.C0.ESC+d.key);break;case 9:if(l.shiftKey){d.key=u.C0.ESC+"[Z";break}d.key=u.C0.HT,d.cancel=!0;break;case 13:d.key=l.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,d.cancel=!0;break;case 27:d.key=u.C0.ESC,l.altKey&&(d.key=u.C0.ESC+u.C0.ESC),d.cancel=!0;break;case 37:if(l.metaKey)break;r?(d.key=u.C0.ESC+"[1;"+(r+1)+"D",d.key===u.C0.ESC+"[1;3D"&&(d.key=u.C0.ESC+(m?"b":"[1;5D"))):d.key=_?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(l.metaKey)break;r?(d.key=u.C0.ESC+"[1;"+(r+1)+"C",d.key===u.C0.ESC+"[1;3C"&&(d.key=u.C0.ESC+(m?"f":"[1;5C"))):d.key=_?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(l.metaKey)break;r?(d.key=u.C0.ESC+"[1;"+(r+1)+"A",m||d.key!==u.C0.ESC+"[1;3A"||(d.key=u.C0.ESC+"[1;5A")):d.key=_?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(l.metaKey)break;r?(d.key=u.C0.ESC+"[1;"+(r+1)+"B",m||d.key!==u.C0.ESC+"[1;3B"||(d.key=u.C0.ESC+"[1;5B")):d.key=_?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(d.key=u.C0.ESC+"[2~");break;case 46:d.key=r?u.C0.ESC+"[3;"+(r+1)+"~":u.C0.ESC+"[3~";break;case 36:d.key=r?u.C0.ESC+"[1;"+(r+1)+"H":_?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:d.key=r?u.C0.ESC+"[1;"+(r+1)+"F":_?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:l.shiftKey?d.type=2:l.ctrlKey?d.key=u.C0.ESC+"[5;"+(r+1)+"~":d.key=u.C0.ESC+"[5~";break;case 34:l.shiftKey?d.type=3:l.ctrlKey?d.key=u.C0.ESC+"[6;"+(r+1)+"~":d.key=u.C0.ESC+"[6~";break;case 112:d.key=r?u.C0.ESC+"[1;"+(r+1)+"P":u.C0.ESC+"OP";break;case 113:d.key=r?u.C0.ESC+"[1;"+(r+1)+"Q":u.C0.ESC+"OQ";break;case 114:d.key=r?u.C0.ESC+"[1;"+(r+1)+"R":u.C0.ESC+"OR";break;case 115:d.key=r?u.C0.ESC+"[1;"+(r+1)+"S":u.C0.ESC+"OS";break;case 116:d.key=r?u.C0.ESC+"[15;"+(r+1)+"~":u.C0.ESC+"[15~";break;case 117:d.key=r?u.C0.ESC+"[17;"+(r+1)+"~":u.C0.ESC+"[17~";break;case 118:d.key=r?u.C0.ESC+"[18;"+(r+1)+"~":u.C0.ESC+"[18~";break;case 119:d.key=r?u.C0.ESC+"[19;"+(r+1)+"~":u.C0.ESC+"[19~";break;case 120:d.key=r?u.C0.ESC+"[20;"+(r+1)+"~":u.C0.ESC+"[20~";break;case 121:d.key=r?u.C0.ESC+"[21;"+(r+1)+"~":u.C0.ESC+"[21~";break;case 122:d.key=r?u.C0.ESC+"[23;"+(r+1)+"~":u.C0.ESC+"[23~";break;case 123:d.key=r?u.C0.ESC+"[24;"+(r+1)+"~":u.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(m&&!C||!l.altKey||l.metaKey)!m||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?d.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(d.key=u.C0.US),l.key==="@"&&(d.key=u.C0.NUL)):l.keyCode===65&&(d.type=1);else{const o=f[l.keyCode],i=o==null?void 0:o[l.shiftKey?1:0];if(i)d.key=u.C0.ESC+i;else if(l.keyCode>=65&&l.keyCode<=90){const n=l.ctrlKey?l.keyCode-64:l.keyCode+32;let h=String.fromCharCode(n);l.shiftKey&&(h=h.toUpperCase()),d.key=u.C0.ESC+h}else if(l.keyCode===32)d.key=u.C0.ESC+(l.ctrlKey?u.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let n=l.code.slice(3,4);l.shiftKey||(n=n.toLowerCase()),d.key=u.C0.ESC+n,d.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?d.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?d.key=u.C0.NUL:l.keyCode>=51&&l.keyCode<=55?d.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?d.key=u.C0.DEL:l.keyCode===219?d.key=u.C0.ESC:l.keyCode===220?d.key=u.C0.FS:l.keyCode===221&&(d.key=u.C0.GS)}return d}},482:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,u=0,f=a.length){let l="";for(let _=u;_<f;++_){let m=a[_];m>65535?(m-=65536,l+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):l+=String.fromCharCode(m)}return l},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,u){const f=a.length;if(!f)return 0;let l=0,_=0;if(this._interim){const m=a.charCodeAt(_++);56320<=m&&m<=57343?u[l++]=1024*(this._interim-55296)+m-56320+65536:(u[l++]=this._interim,u[l++]=m),this._interim=0}for(let m=_;m<f;++m){const C=a.charCodeAt(m);if(55296<=C&&C<=56319){if(++m>=f)return this._interim=C,l;const d=a.charCodeAt(m);56320<=d&&d<=57343?u[l++]=1024*(C-55296)+d-56320+65536:(u[l++]=C,u[l++]=d)}else C!==65279&&(u[l++]=C)}return l}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,u){const f=a.length;if(!f)return 0;let l,_,m,C,d=0,r=0,o=0;if(this.interim[0]){let h=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let b,w=0;for(;(b=63&this.interim[++w])&&w<4;)S<<=6,S|=b;const v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,x=v-w;for(;o<x;){if(o>=f)return 0;if(b=a[o++],(192&b)!=128){o--,h=!0;break}this.interim[w++]=b,S<<=6,S|=63&b}h||(v===2?S<128?o--:u[d++]=S:v===3?S<2048||S>=55296&&S<=57343||S===65279||(u[d++]=S):S<65536||S>1114111||(u[d++]=S)),this.interim.fill(0)}const i=f-4;let n=o;for(;n<f;){for(;!(!(n<i)||128&(l=a[n])||128&(_=a[n+1])||128&(m=a[n+2])||128&(C=a[n+3]));)u[d++]=l,u[d++]=_,u[d++]=m,u[d++]=C,n+=4;if(l=a[n++],l<128)u[d++]=l;else if((224&l)==192){if(n>=f)return this.interim[0]=l,d;if(_=a[n++],(192&_)!=128){n--;continue}if(r=(31&l)<<6|63&_,r<128){n--;continue}u[d++]=r}else if((240&l)==224){if(n>=f)return this.interim[0]=l,d;if(_=a[n++],(192&_)!=128){n--;continue}if(n>=f)return this.interim[0]=l,this.interim[1]=_,d;if(m=a[n++],(192&m)!=128){n--;continue}if(r=(15&l)<<12|(63&_)<<6|63&m,r<2048||r>=55296&&r<=57343||r===65279)continue;u[d++]=r}else if((248&l)==240){if(n>=f)return this.interim[0]=l,d;if(_=a[n++],(192&_)!=128){n--;continue}if(n>=f)return this.interim[0]=l,this.interim[1]=_,d;if(m=a[n++],(192&m)!=128){n--;continue}if(n>=f)return this.interim[0]=l,this.interim[1]=_,this.interim[2]=m,d;if(C=a[n++],(192&C)!=128){n--;continue}if(r=(7&l)<<18|(63&_)<<12|(63&m)<<6|63&C,r<65536||r>1114111)continue;u[d++]=r}}return d}}},225:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const u=a(1480),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;s.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let m=0;m<f.length;++m)_.fill(0,f[m][0],f[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?_[m]:function(C,d){let r,o=0,i=d.length-1;if(C<d[0][0]||C>d[i][1])return!1;for(;i>=o;)if(r=o+i>>1,C>d[r][1])o=r+1;else{if(!(C<d[r][0]))return!0;i=r-1}return!1}(m,l)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}charProperties(m,C){let d=this.wcwidth(m),r=d===0&&C!==0;if(r){const o=u.UnicodeService.extractWidth(C);o===0?r=!1:o>d&&(d=o)}return u.UnicodeService.createPropertyValue(0,d,r)}}},5981:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const u=a(8460),f=a(844);class l extends f.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);const r=this._callbacks.shift();r&&r()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(C)}_innerWrite(m=0,C=!0){const d=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const r=this._writeBuffer[this._bufferOffset],o=this._action(r,C);if(o){const n=h=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,h)):this._innerWrite(d,h);return void o.catch(h=>(queueMicrotask(()=>{throw h}),Promise.resolve(!1))).then(n)}const i=this._callbacks[this._bufferOffset];if(i&&i(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=l},5941:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function f(l,_){const m=l.toString(16),C=m.length<2?"0"+m:m;switch(_){case 4:return m[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}s.parseColor=function(l){if(!l)return;let _=l.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const m=a.exec(_);if(m){const C=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/C*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/C*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/C*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),u.exec(_)&&[3,6,9,12].includes(_.length))){const m=_.length/3,C=[0,0,0];for(let d=0;d<3;++d){const r=parseInt(_.slice(m*d,m*d+m),16);C[d]=m===1?r<<4:m===2?r:m===3?r>>4:r>>8}return C}},s.toRgbString=function(l,_=16){const[m,C,d]=l;return`rgb:${f(m,_)}/${f(C,_)}/${f(d,_)}`}},5770:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const u=a(482),f=a(8742),l=a(5770),_=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(C,d){this._handlers[C]===void 0&&(this._handlers[C]=[]);const r=this._handlers[C];return r.push(d),{dispose:()=>{const o=r.indexOf(d);o!==-1&&r.splice(o,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(C,d){if(this.reset(),this._ident=C,this._active=this._handlers[C]||_,this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(C,d,r){if(this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].put(C,d,r);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(C,d,r))}unhook(C,d=!0){if(this._active.length){let r=!1,o=this._active.length-1,i=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,r=d,i=this._stack.fallThrough,this._stack.paused=!1),!i&&r===!1){for(;o>=0&&(r=this._active[o].unhook(C),r!==!0);o--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,r;o--}for(;o>=0;o--)if(r=this._active[o].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",C);this._active=_,this._ident=0}};const m=new f.Params;m.addParam(0),s.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=m,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():m,this._data="",this._hitLimit=!1}put(C,d,r){this._hitLimit||(this._data+=(0,u.utf32ToString)(C,d,r),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let d=!1;if(this._hitLimit)d=!1;else if(C&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(r=>(this._params=m,this._data="",this._hitLimit=!1,r));return this._params=m,this._data="",this._hitLimit=!1,d}}},2015:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const u=a(844),f=a(8742),l=a(6242),_=a(6351);class m{constructor(o){this.table=new Uint8Array(o)}setDefault(o,i){this.table.fill(o<<4|i)}add(o,i,n,h){this.table[i<<8|o]=n<<4|h}addMany(o,i,n,h){for(let S=0;S<o.length;S++)this.table[i<<8|o[S]]=n<<4|h}}s.TransitionTable=m;const C=160;s.VT500_TRANSITION_TABLE=function(){const r=new m(4095),o=Array.apply(null,Array(256)).map((w,v)=>v),i=(w,v)=>o.slice(w,v),n=i(32,127),h=i(0,24);h.push(25),h.push.apply(h,i(28,32));const S=i(0,14);let b;for(b in r.setDefault(1,0),r.addMany(n,0,2,0),S)r.addMany([24,26,153,154],b,3,0),r.addMany(i(128,144),b,3,0),r.addMany(i(144,152),b,3,0),r.add(156,b,0,0),r.add(27,b,11,1),r.add(157,b,4,8),r.addMany([152,158,159],b,0,7),r.add(155,b,11,3),r.add(144,b,11,9);return r.addMany(h,0,3,0),r.addMany(h,1,3,1),r.add(127,1,0,1),r.addMany(h,8,0,8),r.addMany(h,3,3,3),r.add(127,3,0,3),r.addMany(h,4,3,4),r.add(127,4,0,4),r.addMany(h,6,3,6),r.addMany(h,5,3,5),r.add(127,5,0,5),r.addMany(h,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(n,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(i(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(n,7,0,7),r.addMany(h,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(i(64,127),3,7,0),r.addMany(i(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(i(48,60),4,8,4),r.addMany(i(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(i(32,64),6,0,6),r.add(127,6,0,6),r.addMany(i(64,127),6,0,0),r.addMany(i(32,48),3,9,5),r.addMany(i(32,48),5,9,5),r.addMany(i(48,64),5,0,6),r.addMany(i(64,127),5,7,0),r.addMany(i(32,48),4,9,5),r.addMany(i(32,48),1,9,2),r.addMany(i(32,48),2,9,2),r.addMany(i(48,127),2,10,0),r.addMany(i(48,80),1,10,0),r.addMany(i(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(i(96,127),1,10,0),r.add(80,1,11,9),r.addMany(h,9,0,9),r.add(127,9,0,9),r.addMany(i(28,32),9,0,9),r.addMany(i(32,48),9,9,12),r.addMany(i(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(h,11,0,11),r.addMany(i(32,128),11,0,11),r.addMany(i(28,32),11,0,11),r.addMany(h,10,0,10),r.add(127,10,0,10),r.addMany(i(28,32),10,0,10),r.addMany(i(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(i(32,48),10,9,12),r.addMany(h,12,0,12),r.add(127,12,0,12),r.addMany(i(28,32),12,0,12),r.addMany(i(32,48),12,9,12),r.addMany(i(48,64),12,0,11),r.addMany(i(64,127),12,12,13),r.addMany(i(64,127),10,12,13),r.addMany(i(64,127),9,12,13),r.addMany(h,13,13,13),r.addMany(n,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(C,0,2,0),r.add(C,8,5,8),r.add(C,6,0,6),r.add(C,11,0,11),r.add(C,13,13,13),r}();class d extends u.Disposable{constructor(o=s.VT500_TRANSITION_TABLE){super(),this._transitions=o,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(i,n,h)=>{},this._executeHandlerFb=i=>{},this._csiHandlerFb=(i,n)=>{},this._escHandlerFb=i=>{},this._errorHandlerFb=i=>i,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(o,i=[64,126]){let n=0;if(o.prefix){if(o.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=o.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(o.intermediates){if(o.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<o.intermediates.length;++S){const b=o.intermediates.charCodeAt(S);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=b}}if(o.final.length!==1)throw new Error("final must be a single byte");const h=o.final.charCodeAt(0);if(i[0]>h||h>i[1])throw new Error(`final must be in range ${i[0]} .. ${i[1]}`);return n<<=8,n|=h,n}identToString(o){const i=[];for(;o;)i.push(String.fromCharCode(255&o)),o>>=8;return i.reverse().join("")}setPrintHandler(o){this._printHandler=o}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(o,i){const n=this._identifier(o,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);const h=this._escHandlers[n];return h.push(i),{dispose:()=>{const S=h.indexOf(i);S!==-1&&h.splice(S,1)}}}clearEscHandler(o){this._escHandlers[this._identifier(o,[48,126])]&&delete this._escHandlers[this._identifier(o,[48,126])]}setEscHandlerFallback(o){this._escHandlerFb=o}setExecuteHandler(o,i){this._executeHandlers[o.charCodeAt(0)]=i}clearExecuteHandler(o){this._executeHandlers[o.charCodeAt(0)]&&delete this._executeHandlers[o.charCodeAt(0)]}setExecuteHandlerFallback(o){this._executeHandlerFb=o}registerCsiHandler(o,i){const n=this._identifier(o);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);const h=this._csiHandlers[n];return h.push(i),{dispose:()=>{const S=h.indexOf(i);S!==-1&&h.splice(S,1)}}}clearCsiHandler(o){this._csiHandlers[this._identifier(o)]&&delete this._csiHandlers[this._identifier(o)]}setCsiHandlerFallback(o){this._csiHandlerFb=o}registerDcsHandler(o,i){return this._dcsParser.registerHandler(this._identifier(o),i)}clearDcsHandler(o){this._dcsParser.clearHandler(this._identifier(o))}setDcsHandlerFallback(o){this._dcsParser.setHandlerFallback(o)}registerOscHandler(o,i){return this._oscParser.registerHandler(o,i)}clearOscHandler(o){this._oscParser.clearHandler(o)}setOscHandlerFallback(o){this._oscParser.setHandlerFallback(o)}setErrorHandler(o){this._errorHandler=o}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(o,i,n,h,S){this._parseStack.state=o,this._parseStack.handlers=i,this._parseStack.handlerPos=n,this._parseStack.transition=h,this._parseStack.chunkPos=S}parse(o,i,n){let h,S=0,b=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const v=this._parseStack.handlers;let x=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&x>-1){for(;x>=0&&(h=v[x](this._params),h!==!0);x--)if(h instanceof Promise)return this._parseStack.handlerPos=x,h}this._parseStack.handlers=[];break;case 4:if(n===!1&&x>-1){for(;x>=0&&(h=v[x](),h!==!0);x--)if(h instanceof Promise)return this._parseStack.handlerPos=x,h}this._parseStack.handlers=[];break;case 6:if(S=o[this._parseStack.chunkPos],h=this._dcsParser.unhook(S!==24&&S!==26,n),h)return h;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=o[this._parseStack.chunkPos],h=this._oscParser.end(S!==24&&S!==26,n),h)return h;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let v=w;v<i;++v){switch(S=o[v],b=this._transitions.table[this.currentState<<8|(S<160?S:C)],b>>4){case 2:for(let A=v+1;;++A){if(A>=i||(S=o[A])<32||S>126&&S<C){this._printHandler(o,v,A),v=A-1;break}if(++A>=i||(S=o[A])<32||S>126&&S<C){this._printHandler(o,v,A),v=A-1;break}if(++A>=i||(S=o[A])<32||S>126&&S<C){this._printHandler(o,v,A),v=A-1;break}if(++A>=i||(S=o[A])<32||S>126&&S<C){this._printHandler(o,v,A),v=A-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const x=this._csiHandlers[this._collect<<8|S];let R=x?x.length-1:-1;for(;R>=0&&(h=x[R](this._params),h!==!0);R--)if(h instanceof Promise)return this._preserveStack(3,x,R,b,v),h;R<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++v<i&&(S=o[v])>47&&S<60);v--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const M=this._escHandlers[this._collect<<8|S];let P=M?M.length-1:-1;for(;P>=0&&(h=M[P](),h!==!0);P--)if(h instanceof Promise)return this._preserveStack(4,M,P,b,v),h;P<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let A=v+1;;++A)if(A>=i||(S=o[A])===24||S===26||S===27||S>127&&S<C){this._dcsParser.put(o,v,A),v=A-1;break}break;case 14:if(h=this._dcsParser.unhook(S!==24&&S!==26),h)return this._preserveStack(6,[],0,b,v),h;S===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=v+1;;A++)if(A>=i||(S=o[A])<32||S>127&&S<C){this._oscParser.put(o,v,A),v=A-1;break}break;case 6:if(h=this._oscParser.end(S!==24&&S!==26),h)return this._preserveStack(5,[],0,b,v),h;S===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&b}}}s.EscapeSequenceParser=d},6242:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const u=a(5770),f=a(482),l=[];s.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,m){this._handlers[_]===void 0&&(this._handlers[_]=[]);const C=this._handlers[_];return C.push(m),{dispose:()=>{const d=C.indexOf(m);d!==-1&&C.splice(d,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,m,C){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(_,m,C);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(_,m,C))}start(){this.reset(),this._state=1}put(_,m,C){if(this._state!==3){if(this._state===1)for(;m<C;){const d=_[m++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&C-m>0&&this._put(_,m,C)}}end(_,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,d=this._active.length-1,r=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,C=m,r=this._stack.fallThrough,this._stack.paused=!1),!r&&C===!1){for(;d>=0&&(C=this._active[d].end(_),C!==!0);d--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,C;d--}for(;d>=0;d--)if(C=this._active[d].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",_);this._active=l,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,m,C){this._hitLimit||(this._data+=(0,f.utf32ToString)(_,m,C),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let m=!1;if(this._hitLimit)m=!1;else if(_&&(m=this._handler(this._data),m instanceof Promise))return m.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,m}}},8742:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const a=2147483647;class u{static fromArray(l){const _=new u;if(!l.length)return _;for(let m=Array.isArray(l[0])?1:0;m<l.length;++m){const C=l[m];if(Array.isArray(C))for(let d=0;d<C.length;++d)_.addSubParam(C[d]);else _.addParam(C)}return _}constructor(l=32,_=32){if(this.maxLength=l,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const l=new u(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let _=0;_<this.length;++_){l.push(this.params[_]);const m=this._subParamsIdx[_]>>8,C=255&this._subParamsIdx[_];C-m>0&&l.push(Array.prototype.slice.call(this._subParams,m,C))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>a?a:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>a?a:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const _=this._subParamsIdx[l]>>8,m=255&this._subParamsIdx[l];return m-_>0?this._subParams.subarray(_,m):null}getSubParamsAll(){const l={};for(let _=0;_<this.length;++_){const m=this._subParamsIdx[_]>>8,C=255&this._subParamsIdx[_];C-m>0&&(l[_]=this._subParams.slice(m,C))}return l}addDigit(l){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const m=this._digitIsSub?this._subParams:this.params,C=m[_-1];m[_-1]=~C?Math.min(10*C+l,a):l}}s.Params=u},5741:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,u){const f={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(f),u.dispose=()=>this._wrappedAddonDispose(f),u.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let u=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===a){u=f;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(u,1)}}},8771:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const u=a(3785),f=a(511);s.BufferApiView=class{constructor(l,_){this._buffer=l,this.type=_}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const _=this._buffer.lines.get(l);if(_)return new u.BufferLineApiView(_)}getNullCell(){return new f.CellData}}},3785:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const u=a(511);s.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,l){if(!(f<0||f>=this._line.length))return l?(this._line.loadCell(f,l),l):this._line.loadCell(f,new u.CellData)}translateToString(f,l,_){return this._line.translateToString(f,l,_)}}},8285:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const u=a(8771),f=a(8460),l=a(844);class _ extends l.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=_},7975:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,u){return this._core.registerCsiHandler(a,f=>u(f.toArray()))}addCsiHandler(a,u){return this.registerCsiHandler(a,u)}registerDcsHandler(a,u){return this._core.registerDcsHandler(a,(f,l)=>u(f,l.toArray()))}addDcsHandler(a,u){return this.registerDcsHandler(a,u)}registerEscHandler(a,u){return this._core.registerEscHandler(a,u)}addEscHandler(a,u){return this.registerEscHandler(a,u)}registerOscHandler(a,u){return this._core.registerOscHandler(a,u)}addOscHandler(a,u){return this.registerOscHandler(a,u)}}},7090:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(y,s,a){var u=this&&this.__decorate||function(r,o,i,n){var h,S=arguments.length,b=S<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,o,i,n);else for(var w=r.length-1;w>=0;w--)(h=r[w])&&(b=(S<3?h(b):S>3?h(o,i,b):h(o,i))||b);return S>3&&b&&Object.defineProperty(o,i,b),b},f=this&&this.__param||function(r,o){return function(i,n){o(i,n,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const l=a(8460),_=a(844),m=a(5295),C=a(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let d=s.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(r){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(r.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(r.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(r,this))}resize(r,o){this.cols=r,this.rows=o,this.buffers.resize(r,o),this._onResize.fire({cols:r,rows:o})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(r,o=!1){const i=this.buffer;let n;n=this._cachedBlankLine,n&&n.length===this.cols&&n.getFg(0)===r.fg&&n.getBg(0)===r.bg||(n=i.getBlankLine(r,o),this._cachedBlankLine=n),n.isWrapped=o;const h=i.ybase+i.scrollTop,S=i.ybase+i.scrollBottom;if(i.scrollTop===0){const b=i.lines.isFull;S===i.lines.length-1?b?i.lines.recycle().copyFrom(n):i.lines.push(n.clone()):i.lines.splice(S+1,0,n.clone()),b?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const b=S-h+1;i.lines.shiftElements(h+1,b-1,-1),i.lines.set(S,n.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(r,o,i){const n=this.buffer;if(r<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else r+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);const h=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+r,n.ybase),0),h!==n.ydisp&&(o||this._onScroll.fire(n.ydisp))}};s.BufferService=d=u([f(0,C.IOptionsService)],d)},7994:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,u){this._charsets[a]=u,this.glevel===a&&(this.charset=u)}}},1753:function(y,s,a){var u=this&&this.__decorate||function(n,h,S,b){var w,v=arguments.length,x=v<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,h,S,b);else for(var R=n.length-1;R>=0;R--)(w=n[R])&&(x=(v<3?w(x):v>3?w(h,S,x):w(h,S))||x);return v>3&&x&&Object.defineProperty(h,S,x),x},f=this&&this.__param||function(n,h){return function(S,b){h(S,b,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const l=a(2585),_=a(8460),m=a(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:n=>n.button!==4&&n.action===1&&(n.ctrl=!1,n.alt=!1,n.shift=!1,!0)},VT200:{events:19,restrict:n=>n.action!==32},DRAG:{events:23,restrict:n=>n.action!==32||n.button!==3},ANY:{events:31,restrict:n=>!0}};function d(n,h){let S=(n.ctrl?16:0)|(n.shift?4:0)|(n.alt?8:0);return n.button===4?(S|=64,S|=n.action):(S|=3&n.button,4&n.button&&(S|=64),8&n.button&&(S|=128),n.action===32?S|=32:n.action!==0||h||(S|=3)),S}const r=String.fromCharCode,o={DEFAULT:n=>{const h=[d(n,!1)+32,n.col+32,n.row+32];return h[0]>255||h[1]>255||h[2]>255?"":`\x1B[M${r(h[0])}${r(h[1])}${r(h[2])}`},SGR:n=>{const h=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${d(n,!0)};${n.col};${n.row}${h}`},SGR_PIXELS:n=>{const h=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${d(n,!0)};${n.x};${n.y}${h}`}};let i=s.CoreMouseService=class extends m.Disposable{constructor(n,h){super(),this._bufferService=n,this._coreService=h,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(C))this.addProtocol(S,C[S]);for(const S of Object.keys(o))this.addEncoding(S,o[S]);this.reset()}addProtocol(n,h){this._protocols[n]=h}addEncoding(n,h){this._encodings[n]=h}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(n){if(!this._protocols[n])throw new Error(`unknown protocol "${n}"`);this._activeProtocol=n,this._onProtocolChange.fire(this._protocols[n].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(n){if(!this._encodings[n])throw new Error(`unknown encoding "${n}"`);this._activeEncoding=n}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(n){if(n.col<0||n.col>=this._bufferService.cols||n.row<0||n.row>=this._bufferService.rows||n.button===4&&n.action===32||n.button===3&&n.action!==32||n.button!==4&&(n.action===2||n.action===3)||(n.col++,n.row++,n.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,n,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(n))return!1;const h=this._encodings[this._activeEncoding](n);return h&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(h):this._coreService.triggerDataEvent(h,!0)),this._lastEvent=n,!0}explainEvents(n){return{down:!!(1&n),up:!!(2&n),drag:!!(4&n),move:!!(8&n),wheel:!!(16&n)}}_equalEvents(n,h,S){if(S){if(n.x!==h.x||n.y!==h.y)return!1}else if(n.col!==h.col||n.row!==h.row)return!1;return n.button===h.button&&n.action===h.action&&n.ctrl===h.ctrl&&n.alt===h.alt&&n.shift===h.shift}};s.CoreMouseService=i=u([f(0,l.IBufferService),f(1,l.ICoreService)],i)},6975:function(y,s,a){var u=this&&this.__decorate||function(i,n,h,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,h):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,h,S);else for(var x=i.length-1;x>=0;x--)(b=i[x])&&(v=(w<3?b(v):w>3?b(n,h,v):b(n,h))||v);return w>3&&v&&Object.defineProperty(n,h,v),v},f=this&&this.__param||function(i,n){return function(h,S){n(h,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const l=a(1439),_=a(8460),m=a(844),C=a(2585),d=Object.freeze({insertMode:!1}),r=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let o=s.CoreService=class extends m.Disposable{constructor(i,n,h){super(),this._bufferService=i,this._logService=n,this._optionsService=h,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(d),this.decPrivateModes=(0,l.clone)(r)}reset(){this.modes=(0,l.clone)(d),this.decPrivateModes=(0,l.clone)(r)}triggerDataEvent(i,n=!1){if(this._optionsService.rawOptions.disableStdin)return;const h=this._bufferService.buffer;n&&this._optionsService.rawOptions.scrollOnUserInput&&h.ybase!==h.ydisp&&this._onRequestScrollToBottom.fire(),n&&this._onUserInput.fire(),this._logService.debug(`sending data "${i}"`,()=>i.split("").map(S=>S.charCodeAt(0))),this._onData.fire(i)}triggerBinaryEvent(i){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${i}"`,()=>i.split("").map(n=>n.charCodeAt(0))),this._onBinary.fire(i))}};s.CoreService=o=u([f(0,C.IBufferService),f(1,C.ILogService),f(2,C.IOptionsService)],o)},9074:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const u=a(8055),f=a(8460),l=a(844),_=a(6106);let m=0,C=0;class d extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(i=>i==null?void 0:i.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(i){if(i.marker.isDisposed)return;const n=new r(i);if(n){const h=n.marker.onDispose(()=>n.dispose());n.onDispose(()=>{n&&(this._decorations.delete(n)&&this._onDecorationRemoved.fire(n),h.dispose())}),this._decorations.insert(n),this._onDecorationRegistered.fire(n)}return n}reset(){for(const i of this._decorations.values())i.dispose();this._decorations.clear()}*getDecorationsAtCell(i,n,h){let S=0,b=0;for(const w of this._decorations.getKeyIterator(n))S=w.options.x??0,b=S+(w.options.width??1),i>=S&&i<b&&(!h||(w.options.layer??"bottom")===h)&&(yield w)}forEachDecorationAtCell(i,n,h,S){this._decorations.forEachByKey(n,b=>{m=b.options.x??0,C=m+(b.options.width??1),i>=m&&i<C&&(!h||(b.options.layer??"bottom")===h)&&S(b)})}}s.DecorationService=d;class r extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(i){super(),this.options=i,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=i.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const u=a(2585),f=a(8343);class l{constructor(...m){this._entries=new Map;for(const[C,d]of m)this.set(C,d)}set(m,C){const d=this._entries.get(m);return this._entries.set(m,C),d}forEach(m){for(const[C,d]of this._entries.entries())m(C,d)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}s.ServiceCollection=l,s.InstantiationService=class{constructor(){this._services=new l,this._services.set(u.IInstantiationService,this)}setService(_,m){this._services.set(_,m)}getService(_){return this._services.get(_)}createInstance(_,...m){const C=(0,f.getServiceDependencies)(_).sort((o,i)=>o.index-i.index),d=[];for(const o of C){const i=this._services.get(o.id);if(!i)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${o.id}.`);d.push(i)}const r=C.length>0?C[0].index:m.length;if(m.length!==r)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${r+1} conflicts with ${m.length} static arguments`);return new _(...m,...d)}}},7866:function(y,s,a){var u=this&&this.__decorate||function(r,o,i,n){var h,S=arguments.length,b=S<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,o,i,n);else for(var w=r.length-1;w>=0;w--)(h=r[w])&&(b=(S<3?h(b):S>3?h(o,i,b):h(o,i))||b);return S>3&&b&&Object.defineProperty(o,i,b),b},f=this&&this.__param||function(r,o){return function(i,n){o(i,n,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const l=a(844),_=a(2585),m={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let C,d=s.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(r){super(),this._optionsService=r,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(r){for(let o=0;o<r.length;o++)typeof r[o]=="function"&&(r[o]=r[o]())}_log(r,o,i){this._evalLazyOptionalParams(i),r.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+o,...i)}trace(r,...o){var i;this._logLevel<=_.LogLevelEnum.TRACE&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.trace.bind(this._optionsService.options.logger))??console.log,r,o)}debug(r,...o){var i;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.debug.bind(this._optionsService.options.logger))??console.log,r,o)}info(r,...o){var i;this._logLevel<=_.LogLevelEnum.INFO&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.info.bind(this._optionsService.options.logger))??console.info,r,o)}warn(r,...o){var i;this._logLevel<=_.LogLevelEnum.WARN&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.warn.bind(this._optionsService.options.logger))??console.warn,r,o)}error(r,...o){var i;this._logLevel<=_.LogLevelEnum.ERROR&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.error.bind(this._optionsService.options.logger))??console.error,r,o)}};s.LogService=d=u([f(0,_.IOptionsService)],d),s.setTraceLogger=function(r){C=r},s.traceCall=function(r,o,i){if(typeof i.value!="function")throw new Error("not supported");const n=i.value;i.value=function(...h){if(C.logLevel!==_.LogLevelEnum.TRACE)return n.apply(this,h);C.trace(`GlyphRenderer#${n.name}(${h.map(b=>JSON.stringify(b)).join(", ")})`);const S=n.apply(this,h);return C.trace(`GlyphRenderer#${n.name} return`,S),S}}},7302:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const u=a(8460),f=a(844),l=a(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends f.Disposable{constructor(d){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const r={...s.DEFAULT_OPTIONS};for(const o in d)if(o in r)try{const i=d[o];r[o]=this._sanitizeAndValidateOption(o,i)}catch(i){console.error(i)}this.rawOptions=r,this.options={...r},this._setupOptions(),this.register((0,f.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(d,r){return this.onOptionChange(o=>{o===d&&r(this.rawOptions[d])})}onMultipleOptionChange(d,r){return this.onOptionChange(o=>{d.indexOf(o)!==-1&&r()})}_setupOptions(){const d=o=>{if(!(o in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);return this.rawOptions[o]},r=(o,i)=>{if(!(o in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);i=this._sanitizeAndValidateOption(o,i),this.rawOptions[o]!==i&&(this.rawOptions[o]=i,this._onOptionChange.fire(o))};for(const o in this.rawOptions){const i={get:d.bind(this,o),set:r.bind(this,o)};Object.defineProperty(this.options,o,i)}}_sanitizeAndValidateOption(d,r){switch(d){case"cursorStyle":if(r||(r=s.DEFAULT_OPTIONS[d]),!function(o){return o==="block"||o==="underline"||o==="bar"}(r))throw new Error(`"${r}" is not a valid value for ${d}`);break;case"wordSeparator":r||(r=s.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof r=="number"&&1<=r&&r<=1e3)break;r=_.includes(r)?r:s.DEFAULT_OPTIONS[d];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(`${d} cannot be less than 1, value: ${r}`);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${r}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${r}`);break;case"rows":case"cols":if(!r&&r!==0)throw new Error(`${d} must be numeric, value: ${r}`);break;case"windowsPty":r=r??{}}return r}}s.OptionsService=m},2660:function(y,s,a){var u=this&&this.__decorate||function(m,C,d,r){var o,i=arguments.length,n=i<3?C:r===null?r=Object.getOwnPropertyDescriptor(C,d):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(m,C,d,r);else for(var h=m.length-1;h>=0;h--)(o=m[h])&&(n=(i<3?o(n):i>3?o(C,d,n):o(C,d))||n);return i>3&&n&&Object.defineProperty(C,d,n),n},f=this&&this.__param||function(m,C){return function(d,r){C(d,r,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const l=a(2585);let _=s.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){const C=this._bufferService.buffer;if(m.id===void 0){const h=C.addMarker(C.ybase+C.y),S={data:m,id:this._nextId++,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(S,h)),this._dataByLinkId.set(S.id,S),S.id}const d=m,r=this._getEntryIdKey(d),o=this._entriesWithId.get(r);if(o)return this.addLineToLink(o.id,C.ybase+C.y),o.id;const i=C.addMarker(C.ybase+C.y),n={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[i]};return i.onDispose(()=>this._removeMarkerFromLink(n,i)),this._entriesWithId.set(n.key,n),this._dataByLinkId.set(n.id,n),n.id}addLineToLink(m,C){const d=this._dataByLinkId.get(m);if(d&&d.lines.every(r=>r.line!==C)){const r=this._bufferService.buffer.addMarker(C);d.lines.push(r),r.onDispose(()=>this._removeMarkerFromLink(d,r))}}getLinkData(m){var C;return(C=this._dataByLinkId.get(m))==null?void 0:C.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,C){const d=m.lines.indexOf(C);d!==-1&&(m.lines.splice(d,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};s.OscLinkService=_=u([f(0,l.IBufferService)],_)},8343:(y,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const a="di$target",u="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(f){return f[u]||[]},s.createDecorator=function(f){if(s.serviceRegistry.has(f))return s.serviceRegistry.get(f);const l=function(_,m,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,r,o){r[a]===r?r[u].push({id:d,index:o}):(r[u]=[{id:d,index:o}],r[a]=r)})(l,_,C)};return l.toString=()=>f,s.serviceRegistry.set(f,l),l}},2585:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const u=a(8343);var f;s.IBufferService=(0,u.createDecorator)("BufferService"),s.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),s.ICoreService=(0,u.createDecorator)("CoreService"),s.ICharsetService=(0,u.createDecorator)("CharsetService"),s.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(f||(s.LogLevelEnum=f={})),s.ILogService=(0,u.createDecorator)("LogService"),s.IOptionsService=(0,u.createDecorator)("OptionsService"),s.IOscLinkService=(0,u.createDecorator)("OscLinkService"),s.IUnicodeService=(0,u.createDecorator)("UnicodeService"),s.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(y,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const u=a(8460),f=a(225);class l{static extractShouldJoin(m){return(1&m)!=0}static extractWidth(m){return m>>1&3}static extractCharKind(m){return m>>3}static createPropertyValue(m,C,d=!1){return(16777215&m)<<3|(3&C)<<1|(d?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const m=new f.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let C=0,d=0;const r=m.length;for(let o=0;o<r;++o){let i=m.charCodeAt(o);if(55296<=i&&i<=56319){if(++o>=r)return C+this.wcwidth(i);const S=m.charCodeAt(o);56320<=S&&S<=57343?i=1024*(i-55296)+S-56320+65536:C+=this.wcwidth(S)}const n=this.charProperties(i,d);let h=l.extractWidth(n);l.extractShouldJoin(n)&&(h-=l.extractWidth(d)),C+=h,d=n}return C}charProperties(m,C){return this._activeProvider.charProperties(m,C)}}s.UnicodeService=l}},p={};function g(y){var s=p[y];if(s!==void 0)return s.exports;var a=p[y]={exports:{}};return c[y].call(a.exports,a,a.exports,g),a.exports}var E={};return(()=>{var y=E;Object.defineProperty(y,"__esModule",{value:!0}),y.Terminal=void 0;const s=g(9042),a=g(3236),u=g(844),f=g(5741),l=g(8285),_=g(7975),m=g(7090),C=["cols","rows"];class d extends u.Disposable{constructor(o){super(),this._core=this.register(new a.Terminal(o)),this._addonManager=this.register(new f.AddonManager),this._publicOptions={...this._core.options};const i=h=>this._core.options[h],n=(h,S)=>{this._checkReadonlyOptions(h),this._core.options[h]=S};for(const h in this._core.options){const S={get:i.bind(this,h),set:n.bind(this,h)};Object.defineProperty(this._publicOptions,h,S)}}_checkReadonlyOptions(o){if(C.includes(o))throw new Error(`Option "${o}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const o=this._core.coreService.decPrivateModes;let i="none";switch(this._core.coreMouseService.activeProtocol){case"X10":i="x10";break;case"VT200":i="vt200";break;case"DRAG":i="drag";break;case"ANY":i="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:i,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}}get options(){return this._publicOptions}set options(o){for(const i in o)this._publicOptions[i]=o[i]}blur(){this._core.blur()}focus(){this._core.focus()}input(o,i=!0){this._core.input(o,i)}resize(o,i){this._verifyIntegers(o,i),this._core.resize(o,i)}open(o){this._core.open(o)}attachCustomKeyEventHandler(o){this._core.attachCustomKeyEventHandler(o)}attachCustomWheelEventHandler(o){this._core.attachCustomWheelEventHandler(o)}registerLinkProvider(o){return this._core.registerLinkProvider(o)}registerCharacterJoiner(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)}deregisterCharacterJoiner(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)}registerMarker(o=0){return this._verifyIntegers(o),this._core.registerMarker(o)}registerDecoration(o){return this._checkProposedApi(),this._verifyPositiveIntegers(o.x??0,o.width??0,o.height??0),this._core.registerDecoration(o)}hasSelection(){return this._core.hasSelection()}select(o,i,n){this._verifyIntegers(o,i,n),this._core.select(o,i,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(o,i){this._verifyIntegers(o,i),this._core.selectLines(o,i)}dispose(){super.dispose()}scrollLines(o){this._verifyIntegers(o),this._core.scrollLines(o)}scrollPages(o){this._verifyIntegers(o),this._core.scrollPages(o)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(o){this._verifyIntegers(o),this._core.scrollToLine(o)}clear(){this._core.clear()}write(o,i){this._core.write(o,i)}writeln(o,i){this._core.write(o),this._core.write(`\r
`,i)}paste(o){this._core.paste(o)}refresh(o,i){this._verifyIntegers(o,i),this._core.refresh(o,i)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(o){this._addonManager.loadAddon(this,o)}static get strings(){return s}_verifyIntegers(...o){for(const i of o)if(i===1/0||isNaN(i)||i%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...o){for(const i of o)if(i&&(i===1/0||isNaN(i)||i%1!=0||i<0))throw new Error("This API only accepts positive integers")}}y.Terminal=d})(),E})())})(Zr);var Ma=Zr.exports,en={exports:{}};(function(e,t){(function(c,p){e.exports=p()})(self,()=>(()=>{var c={};return(()=>{var p=c;Object.defineProperty(p,"__esModule",{value:!0}),p.FitAddon=void 0,p.FitAddon=class{activate(g){this._terminal=g}dispose(){}fit(){const g=this.proposeDimensions();if(!g||!this._terminal||isNaN(g.cols)||isNaN(g.rows))return;const E=this._terminal._core;this._terminal.rows===g.rows&&this._terminal.cols===g.cols||(E._renderService.clear(),this._terminal.resize(g.cols,g.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const g=this._terminal._core,E=g._renderService.dimensions;if(E.css.cell.width===0||E.css.cell.height===0)return;const y=this._terminal.options.scrollback===0?0:g.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(s.getPropertyValue("height")),u=Math.max(0,parseInt(s.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),l=a-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),_=u-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-y;return{cols:Math.max(2,Math.floor(_/E.css.cell.width)),rows:Math.max(1,Math.floor(l/E.css.cell.height))}}}})(),c})())})(en);var Ba=en.exports,tn={exports:{}};(function(e,t){(function(c,p){e.exports=p()})(self,()=>(()=>{var c={6:(y,s)=>{function a(f){try{const l=new URL(f),_=l.password&&l.username?`${l.protocol}//${l.username}:${l.password}@${l.host}`:l.username?`${l.protocol}//${l.username}@${l.host}`:`${l.protocol}//${l.host}`;return f.toLocaleLowerCase().startsWith(_.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(s,"__esModule",{value:!0}),s.LinkComputer=s.WebLinkProvider=void 0,s.WebLinkProvider=class{constructor(f,l,_,m={}){this._terminal=f,this._regex=l,this._handler=_,this._options=m}provideLinks(f,l){const _=u.computeLink(f,this._regex,this._terminal,this._handler);l(this._addCallbacks(_))}_addCallbacks(f){return f.map(l=>(l.leave=this._options.leave,l.hover=(_,m)=>{if(this._options.hover){const{range:C}=l;this._options.hover(_,m,C)}},l))}};class u{static computeLink(l,_,m,C){const d=new RegExp(_.source,(_.flags||"")+"g"),[r,o]=u._getWindowedLineStrings(l-1,m),i=r.join("");let n;const h=[];for(;n=d.exec(i);){const S=n[0];if(!a(S))continue;const[b,w]=u._mapStrIdx(m,o,0,n.index),[v,x]=u._mapStrIdx(m,b,w,S.length);if(b===-1||w===-1||v===-1||x===-1)continue;const R={start:{x:w+1,y:b+1},end:{x,y:v+1}};h.push({range:R,text:S,activate:C})}return h}static _getWindowedLineStrings(l,_){let m,C=l,d=l,r=0,o="";const i=[];if(m=_.buffer.active.getLine(l)){const n=m.translateToString(!0);if(m.isWrapped&&n[0]!==" "){for(r=0;(m=_.buffer.active.getLine(--C))&&r<2048&&(o=m.translateToString(!0),r+=o.length,i.push(o),m.isWrapped&&o.indexOf(" ")===-1););i.reverse()}for(i.push(n),r=0;(m=_.buffer.active.getLine(++d))&&m.isWrapped&&r<2048&&(o=m.translateToString(!0),r+=o.length,i.push(o),o.indexOf(" ")===-1););}return[i,C]}static _mapStrIdx(l,_,m,C){const d=l.buffer.active,r=d.getNullCell();let o=m;for(;C;){const i=d.getLine(_);if(!i)return[-1,-1];for(let n=o;n<i.length;++n){i.getCell(n,r);const h=r.getChars();if(r.getWidth()&&(C-=h.length||1,n===i.length-1&&h==="")){const S=d.getLine(_+1);S&&S.isWrapped&&(S.getCell(0,r),r.getWidth()===2&&(C+=1))}if(C<0)return[_,n]}_++,o=0}return[_,o]}}s.LinkComputer=u}},p={};function g(y){var s=p[y];if(s!==void 0)return s.exports;var a=p[y]={exports:{}};return c[y](a,a.exports,g),a.exports}var E={};return(()=>{var y=E;Object.defineProperty(y,"__esModule",{value:!0}),y.WebLinksAddon=void 0;const s=g(6),a=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function u(f,l){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}y.WebLinksAddon=class{constructor(f=u,l={}){this._handler=f,this._options=l}activate(f){this._terminal=f;const l=this._options,_=l.urlRegex||a;this._linkProvider=this._terminal.registerLinkProvider(new s.WebLinkProvider(this._terminal,_,this._handler,l))}dispose(){var f;(f=this._linkProvider)==null||f.dispose()}}})(),E})())})(tn);var Oa=tn.exports;function sn(e={}){const{wasmPath:t="/megaport.wasm",wasmExecPath:c="/wasm_exec.js",debug:p=!1,useWorker:g=!0}=e,E=Ve(!0),y=Ve(!1),s=Ve(null);Ve(null);const a=Ve(new Map),u=()=>new Promise((n,h)=>{if(window.Go){n();return}const S=document.createElement("script");S.src=c,S.onload=()=>n(),S.onerror=()=>h(new Error("Failed to load wasm_exec.js")),document.head.appendChild(S)}),f=()=>{window.wasmStartSpinner=n=>{const h=`spinner_${Date.now()}`;return a.value.set(h,n),p&&console.log(` Spinner started: ${h} - ${n}`),h},window.wasmStopSpinner=n=>{const h=a.value.get(n);a.value.delete(n),p&&h&&console.log(` Spinner stopped: ${n} - ${h}`)},p&&console.log(" Spinner functions registered on window")},l=async()=>{try{if(f(),await u(),!window.Go)throw new Error("Go WASM runtime not loaded");const n=new window.Go,S=await(await fetch(t)).arrayBuffer(),b=await WebAssembly.instantiate(S,n.importObject);if(n.run(b.instance),await new Promise(w=>setTimeout(w,100)),!window.executeMegaportCommandAsync)throw new Error("WASM functions not exposed");window.registerPromptHandler&&(window.registerPromptHandler(w=>{p&&console.log(" Prompt requested:",w),console.warn(" No custom prompt handler registered. Interactive commands require a prompt handler. Use registerPromptHandler() to provide one.")}),p&&console.log(" Default prompt handler registered (does nothing - override required)")),y.value=!0,E.value=!1,p&&(console.log(" Megaport WASM ready (direct mode)"),console.log("Available functions:",{executeMegaportCommand:typeof window.executeMegaportCommand,executeMegaportCommandAsync:typeof window.executeMegaportCommandAsync,debugAuthInfo:typeof window.debugAuthInfo}))}catch(n){throw s.value=n,E.value=!1,n}},_=async n=>{if(!y.value)throw new Error("WASM not ready");return new Promise((h,S)=>{try{if(p&&console.log(` Executing command: ${n}`),window.executeMegaportCommandAsync)window.executeMegaportCommandAsync(n,b=>{p&&console.log(" Command result:",b),h(b)});else if(window.executeMegaportCommand){const b=window.executeMegaportCommand(n);h(b)}else S(new Error("No WASM execute function available"))}catch(b){S(b)}})},m=(n,h,S="staging")=>{if(window.setAuthCredentials){const b=window.setAuthCredentials(n,h,S);p&&(console.log(" Auth credentials set securely (in-memory only)"),b&&!b.success&&console.error("Failed to set credentials:",b.error),window.debugAuthInfo&&console.log("Auth info:",window.debugAuthInfo()))}else console.error(" setAuthCredentials function not available. WASM may not be initialized.")},C=()=>{window.clearAuthCredentials?(window.clearAuthCredentials(),p&&console.log(" Auth credentials cleared from memory")):console.error(" clearAuthCredentials function not available. WASM may not be initialized.")},d=()=>window.debugAuthInfo?window.debugAuthInfo():null,r=()=>{window.resetWasmOutput&&window.resetWasmOutput()},o=()=>window.toggleWasmDebug?window.toggleWasmDebug():!1,i=n=>window.registerPromptHandler?window.registerPromptHandler(n):(console.warn("registerPromptHandler not available - WASM may not be initialized"),!1);return Ss(async()=>{try{g?(console.warn(" Worker mode not fully implemented. Falling back to direct mode."),await l()):await l()}catch(n){console.error("Failed to initialize Megaport WASM:",n),s.value=n}}),{isLoading:gt(E),isReady:gt(y),error:gt(s),activeSpinners:gt(a),execute:_,setAuth:m,clearAuth:C,getAuthInfo:d,resetOutput:r,toggleDebug:o,registerPromptHandler:i}}const Pa={class:"megaport-terminal-container"},Ia={key:0,class:"terminal-loading"},Ha={key:1,class:"terminal-error"},Fa={key:2,class:"terminal-container"},Wa={key:0,class:"spinner-overlay"},Na={class:"spinner-content"},$a=wr({__name:"MegaportTerminal",props:{wasmPath:{default:"/megaport.wasm"},wasmExecPath:{default:"/wasm_exec.js"},welcomeMessage:{default:`Welcome to Megaport CLI (WebAssembly)
Type "help" for available commands.
`},theme:{default:()=>({background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#aeafad"})}},setup(e,{expose:t}){const c=e,p=Ve(null);let g=null,E=null,y="",s=0,a=!1;const{isLoading:u,isReady:f,error:l,execute:_,setAuth:m,registerPromptHandler:C,activeSpinners:d}=sn({wasmPath:c.wasmPath,wasmExecPath:c.wasmExecPath,debug:!0,useWorker:!1});let r=null,o="",i=!1;const n=()=>{if(!C||typeof C!="function"){console.warn("registerPromptHandler not available - WASM may not be initialized");return}C(x=>{g&&(console.log(" Prompt handler called:",x.id,x.message),g.write(`\r
\x1B[36m${x.message}\x1B[0m `),r={id:x.id,resolve:R=>{window.submitPromptResponse&&window.submitPromptResponse(x.id,R)}},console.log(" activePrompt set:",r.id),o="")})},h=()=>{p.value&&(g=new Ma.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:c.theme.background,foreground:c.theme.foreground,cursor:c.theme.cursor}}),E=new Ba.FitAddon,g.loadAddon(E),g.loadAddon(new Oa.WebLinksAddon),g.open(p.value),E.fit(),g.write(c.welcomeMessage),S(),g.onData(x=>{b(x)}),window.addEventListener("resize",()=>{E==null||E.fit()}))},S=()=>{a?(g==null||g.write("\x1B[32mmegaport>\x1B[0m "),a=!1):g==null||g.write(`\r
\x1B[32mmegaport>\x1B[0m `),y="",s=0},b=x=>{if(!g)return;const R=x.charCodeAt(0);if(console.log(" Input:",x,"code:",R,"activePrompt:",!!r,"isInInteractiveCommand:",i),r){if(R===13){g.write(`\r
`);const M=o;r.id,r.resolve(M),o="";return}if(R===127){o.length>0&&(o=o.slice(0,-1),g.write("\b \b"));return}if(R===3){g.write(`^C\r
`),window.cancelPrompt&&r&&window.cancelPrompt(r.id),r=null,o="",S();return}R>=32&&R<=126&&(o+=x,g.write(x));return}if(!(i&&!r)){if(R===13){if(g.write(`\r
`),y.trim()){const M=y.trim();y="",s=0,w(M)}else S();return}if(R===127){s>0&&(y=y.slice(0,s-1)+y.slice(s),s--,g.write("\b \b"));return}if(x==="\x1B[D"){s>0&&(s--,g.write("\x1B[D"));return}if(x==="\x1B[C"){s<y.length&&(s++,g.write("\x1B[C"));return}if(R===3){g.write("^C"),S();return}if(R===12){g.clear(),g.write("\x1B[H"),a=!0,S();return}R>=32&&R<=126&&(y=y.slice(0,s)+x+y.slice(s),s++,g.write(x))}},w=async x=>{if(!g||!f.value){g==null||g.write("\x1B[31mCLI not ready\x1B[0m"),S();return}try{if(x==="clear"||x==="cls"){g.clear(),g.write("\x1B[H"),a=!0,S();return}if(x==="help"){g.write(`Available commands:\r
`),g.write(`  port list           - List all ports\r
`),g.write(`  vxc list            - List all VXCs\r
`),g.write(`  mcr list            - List all MCRs\r
`),g.write(`  mve list            - List all MVEs\r
`),g.write(`  location list       - List all locations\r
`),g.write(`  servicekey list     - List all service keys\r
`),g.write(`  partner list        - List partner configurations\r
`),g.write(`  clear               - Clear the terminal\r
`),S();return}const R=x.includes("--interactive")||x.includes("-i");R?i=!0:g.write(`\x1B[90mExecuting...\x1B[0m\r
`);const M=await _(x);if(M.error)g.write(`\x1B[31mError: ${M.error}\x1B[0m\r
`);else if(M.output){let P=M.output;R&&([/^Enter port name \(required\): ?\n?/gm,/^Enter term \([^)]+\) \(required\): ?\n?/gm,/^Enter port speed \([^)]+\) \(required\): ?\n?/gm,/^Enter location ID \(required\): ?\n?/gm,/^Enter marketplace visibility \([^)]+\) \(required\): ?\n?/gm,/^Enter diversity zone \(optional\): ?\n?/gm,/^Enter cost centre \(optional\): ?\n?/gm,/^Enter promo code \(optional\): ?\n?/gm,/^Would you like to add resource tags\? \[y\/N\] ?\n?/gm,/^Tag key \([^)]+\): ?\n?/gm,/^Tag value for '[^']+': ?\n?/gm].forEach(N=>{P=P.replace(N,"")}),P=P.replace(/\n{3,}/g,`

`)),P.trim()&&P.split(`
`).forEach(N=>{g&&g.write(N+`\r
`)})}else R||g.write(`\x1B[90mCommand completed with no output\x1B[0m\r
`)}catch(R){g&&g.write(`\x1B[31mError: ${R.message}\x1B[0m\r
`)}i=!1,r=null,o="",r||S()},v=()=>{window.location.reload()};return Ss(()=>{const x=setInterval(()=>{f.value&&(clearInterval(x),h(),n())},100);setTimeout(()=>clearInterval(x),3e4)}),Lr(()=>{E==null||E.dispose(),g==null||g.dispose()}),t({terminal:g,fitAddon:E,execute:w,setAuth:m}),(x,R)=>(Me(),Pe("div",Pa,[Ie(u)?(Me(),Pe("div",Ia,[...R[0]||(R[0]=[ne("div",{class:"spinner"},null,-1),ne("p",null,"Loading Megaport CLI...",-1)])])):Ie(l)?(Me(),Pe("div",Ha,[R[1]||(R[1]=ne("h3",null," Failed to load Megaport CLI",-1)),ne("p",null,pt(Ie(l).message),1),ne("button",{onClick:v},"Retry")])):(Me(),Pe("div",Fa,[Ie(d)&&Ie(d).size>0?(Me(),Pe("div",Wa,[ne("div",Na,[R[2]||(R[2]=ne("div",{class:"spinner"},null,-1)),(Me(!0),Pe(Ke,null,ho(Ie(d),([M,P])=>(Me(),Pe("p",{key:M},pt(P),1))),128))])])):Qt("",!0),ne("div",{ref_key:"terminalRef",ref:p,class:"terminal-wrapper"},null,512)]))]))}}),rn=(e,t)=>{const c=e.__vccOpts||e;for(const[p,g]of t)c[p]=g;return c},Ua=rn($a,[["__scopeId","data-v-4bf833f4"]]),ja={id:"app",class:"app-container"},Ka={class:"app-main"},za={key:0,class:"auth-panel"},Va={class:"form-group"},qa={class:"form-group"},Ga={class:"form-group"},Xa={key:1,class:"terminal-section"},Ja={key:2,class:"quick-actions"},Ya={class:"action-buttons"},Za={class:"status-info"},Qa={class:"status-item"},el={class:"status-item"},tl={key:0,class:"status-item"},sl={class:"value error"},il={key:1,class:"status-item"},rl={class:"value"},nl=wr({__name:"App",setup(e){const{isLoading:t,isReady:c,error:p,setAuth:g,clearAuth:E,getAuthInfo:y}=sn({debug:!0,useWorker:!1}),s=Ve({accessKey:"",secretKey:"",environment:"staging"}),a=Ve(!1),u=Ve(null),f=Ve(null),l=Jr(()=>`Welcome to Megaport CLI (WebAssembly)
Environment: ${s.value.environment}
Type "help" for available commands.

`),_=()=>{var d;g(s.value.accessKey,s.value.secretKey,s.value.environment),a.value=!0,u.value=y(),(d=f.value)!=null&&d.setAuth&&f.value.setAuth(s.value.accessKey,s.value.secretKey,s.value.environment)},m=()=>{E(),a.value=!1,u.value=null,s.value={accessKey:"",secretKey:"",environment:"staging"}},C=d=>{var r;(r=f.value)!=null&&r.execute&&f.value.execute(d)};return Ss(()=>{var d,r;u.value=y(),(d=u.value)!=null&&d.accessKeySet&&((r=u.value)!=null&&r.secretKeySet)&&(a.value=!0)}),(d,r)=>(Me(),Pe("div",ja,[r[23]||(r[23]=ne("header",{class:"app-header"},[ne("h1",null," Megaport CLI WebAssembly Demo"),ne("p",null,"Vue 3 + Vite + WASM Integration")],-1)),ne("main",Ka,[a.value?(Me(),Pe("section",Xa,[ne("div",{class:"terminal-header"},[r[16]||(r[16]=ne("h2",null,"Interactive Terminal",-1)),ne("button",{onClick:m,class:"btn-secondary"},"  Clear Auth ")]),Ge(Ua,{ref_key:"terminalRef",ref:f,"wasm-path":"/megaport.wasm","wasm-exec-path":"/wasm_exec.js","welcome-message":l.value},null,8,["welcome-message"])])):(Me(),Pe("section",za,[r[14]||(r[14]=ne("h2",null,"Authentication",-1)),r[15]||(r[15]=ne("p",null,"Configure your Megaport API credentials to get started.",-1)),ne("form",{onSubmit:La(_,["prevent"])},[ne("div",Va,[r[9]||(r[9]=ne("label",{for:"accessKey"},"Access Key:",-1)),Ds(ne("input",{id:"accessKey","onUpdate:modelValue":r[0]||(r[0]=o=>s.value.accessKey=o),type:"password",placeholder:"Enter access key",autocomplete:"off","data-1p-ignore":"",required:""},null,512),[[ji,s.value.accessKey]])]),ne("div",qa,[r[10]||(r[10]=ne("label",{for:"secretKey"},"Secret Key:",-1)),Ds(ne("input",{id:"secretKey","onUpdate:modelValue":r[1]||(r[1]=o=>s.value.secretKey=o),type:"password",placeholder:"Enter secret key",autocomplete:"off","data-1p-ignore":"",required:""},null,512),[[ji,s.value.secretKey]])]),ne("div",Ga,[r[12]||(r[12]=ne("label",{for:"environment"},"Environment:",-1)),Ds(ne("select",{id:"environment","onUpdate:modelValue":r[2]||(r[2]=o=>s.value.environment=o)},[...r[11]||(r[11]=[ne("option",{value:"staging"},"Staging",-1),ne("option",{value:"production"},"Production",-1)])],512),[[ya,s.value.environment]])]),r[13]||(r[13]=ne("button",{type:"submit",class:"btn-primary"},"Set Credentials",-1))],32)])),a.value?(Me(),Pe("aside",Ja,[r[17]||(r[17]=ne("h3",null,"Quick Actions",-1)),ne("div",Ya,[ne("button",{onClick:r[3]||(r[3]=o=>C("ports list --output json")),class:"btn-action"},"  List Ports "),ne("button",{onClick:r[4]||(r[4]=o=>C("mcr list --output json")),class:"btn-action"},"  List MCRs "),ne("button",{onClick:r[5]||(r[5]=o=>C("mve list --output json")),class:"btn-action"},"  List MVEs "),ne("button",{onClick:r[6]||(r[6]=o=>C("locations list --output json")),class:"btn-action"},"  List Locations "),ne("button",{onClick:r[7]||(r[7]=o=>C("help")),class:"btn-action"},"  Help "),ne("button",{onClick:r[8]||(r[8]=o=>C("clear")),class:"btn-action"},"  Clear ")])])):Qt("",!0),ne("aside",Za,[r[22]||(r[22]=ne("h3",null,"WASM Status",-1)),ne("div",Qa,[r[18]||(r[18]=ne("span",{class:"label"},"Loading:",-1)),ne("span",{class:Ft(["value",Ie(t)?"loading":"ready"])},pt(Ie(t)?" Yes":" No"),3)]),ne("div",el,[r[19]||(r[19]=ne("span",{class:"label"},"Ready:",-1)),ne("span",{class:Ft(["value",Ie(c)?"ready":"not-ready"])},pt(Ie(c)?" Yes":" No"),3)]),Ie(p)?(Me(),Pe("div",tl,[r[20]||(r[20]=ne("span",{class:"label"},"Error:",-1)),ne("span",sl,pt(Ie(p).message),1)])):Qt("",!0),u.value?(Me(),Pe("div",il,[r[21]||(r[21]=ne("span",{class:"label"},"Environment:",-1)),ne("span",rl,pt(u.value.environment),1)])):Qt("",!0)])]),r[24]||(r[24]=ne("footer",{class:"app-footer"},[ne("p",null,[js(" Megaport CLI WASM Integration Demo | "),ne("a",{href:"https://github.com/megaport",target:"_blank"},"GitHub"),js(" | "),ne("a",{href:"https://docs.megaport.com",target:"_blank"},"Documentation")])],-1))]))}}),ol=rn(nl,[["__scopeId","data-v-8fee4306"]]),al=Ra(ol);al.mount("#app");
