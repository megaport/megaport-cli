(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))v(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const w of x.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&v(w)}).observe(document,{childList:!0,subtree:!0});function c(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function v(p){if(p.ep)return;p.ep=!0;const x=c(p);fetch(p.href,x)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qs(e){const t=Object.create(null);for(const c of e.split(","))t[c]=1;return c=>c in t}const ve={},Ct=[],qe=()=>{},Xi=()=>!1,us=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Gs=e=>e.startsWith("onUpdate:"),ke=Object.assign,Xs=(e,t)=>{const c=e.indexOf(t);c>-1&&e.splice(c,1)},an=Object.prototype.hasOwnProperty,ge=(e,t)=>an.call(e,t),ce=Array.isArray,wt=e=>Kt(e)==="[object Map]",fs=e=>Kt(e)==="[object Set]",pi=e=>Kt(e)==="[object Date]",he=e=>typeof e=="function",Ce=e=>typeof e=="string",Xe=e=>typeof e=="symbol",Se=e=>e!==null&&typeof e=="object",Ji=e=>(Se(e)||he(e))&&he(e.then)&&he(e.catch),Yi=Object.prototype.toString,Kt=e=>Yi.call(e),ln=e=>Kt(e).slice(8,-1),Zi=e=>Kt(e)==="[object Object]",Js=e=>Ce(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Tt=qs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ds=e=>{const t=Object.create(null);return c=>t[c]||(t[c]=e(c))},cn=/-\w/g,at=ds(e=>e.replace(cn,t=>t.slice(1).toUpperCase())),hn=/\B([A-Z])/g,mt=ds(e=>e.replace(hn,"-$1").toLowerCase()),Qi=ds(e=>e.charAt(0).toUpperCase()+e.slice(1)),Es=ds(e=>e?`on${Qi(e)}`:""),ot=(e,t)=>!Object.is(e,t),Jt=(e,...t)=>{for(let c=0;c<e.length;c++)e[c](...t)},er=(e,t,c,v=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:v,value:c})},_s=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let gi;const ps=()=>gi||(gi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ys(e){if(ce(e)){const t={};for(let c=0;c<e.length;c++){const v=e[c],p=Ce(v)?_n(v):Ys(v);if(p)for(const x in p)t[x]=p[x]}return t}else if(Ce(e)||Se(e))return e}const un=/;(?![^(]*\))/g,fn=/:([^]+)/,dn=/\/\*[^]*?\*\//g;function _n(e){const t={};return e.replace(dn,"").split(un).forEach(c=>{if(c){const v=c.split(fn);v.length>1&&(t[v[0].trim()]=v[1].trim())}}),t}function Ft(e){let t="";if(Ce(e))t=e;else if(ce(e))for(let c=0;c<e.length;c++){const v=Ft(e[c]);v&&(t+=v+" ")}else if(Se(e))for(const c in e)e[c]&&(t+=c+" ");return t.trim()}const pn="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gn=qs(pn);function tr(e){return!!e||e===""}function vn(e,t){if(e.length!==t.length)return!1;let c=!0;for(let v=0;c&&v<e.length;v++)c=gs(e[v],t[v]);return c}function gs(e,t){if(e===t)return!0;let c=pi(e),v=pi(t);if(c||v)return c&&v?e.getTime()===t.getTime():!1;if(c=Xe(e),v=Xe(t),c||v)return e===t;if(c=ce(e),v=ce(t),c||v)return c&&v?vn(e,t):!1;if(c=Se(e),v=Se(t),c||v){if(!c||!v)return!1;const p=Object.keys(e).length,x=Object.keys(t).length;if(p!==x)return!1;for(const w in e){const s=e.hasOwnProperty(w),a=t.hasOwnProperty(w);if(s&&!a||!s&&a||!gs(e[w],t[w]))return!1}}return String(e)===String(t)}function mn(e,t){return e.findIndex(c=>gs(c,t))}const sr=e=>!!(e&&e.__v_isRef===!0),pt=e=>Ce(e)?e:e==null?"":ce(e)||Se(e)&&(e.toString===Yi||!he(e.toString))?sr(e)?pt(e.value):JSON.stringify(e,ir,2):String(e),ir=(e,t)=>sr(t)?ir(e,t.value):wt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((c,[v,p],x)=>(c[xs(v,x)+" =>"]=p,c),{})}:fs(t)?{[`Set(${t.size})`]:[...t.values()].map(c=>xs(c))}:Xe(t)?xs(t):Se(t)&&!ce(t)&&!Zi(t)?String(t):t,xs=(e,t="")=>{var c;return Xe(e)?`Symbol(${(c=e.description)!=null?c:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Te;class Sn{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Te,!t&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,c;if(this.scopes)for(t=0,c=this.scopes.length;t<c;t++)this.scopes[t].pause();for(t=0,c=this.effects.length;t<c;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,c;if(this.scopes)for(t=0,c=this.scopes.length;t<c;t++)this.scopes[t].resume();for(t=0,c=this.effects.length;t<c;t++)this.effects[t].resume()}}run(t){if(this._active){const c=Te;try{return Te=this,t()}finally{Te=c}}}on(){++this._on===1&&(this.prevScope=Te,Te=this)}off(){this._on>0&&--this._on===0&&(Te=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let c,v;for(c=0,v=this.effects.length;c<v;c++)this.effects[c].stop();for(this.effects.length=0,c=0,v=this.cleanups.length;c<v;c++)this.cleanups[c]();if(this.cleanups.length=0,this.scopes){for(c=0,v=this.scopes.length;c<v;c++)this.scopes[c].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const p=this.parent.scopes.pop();p&&p!==this&&(this.parent.scopes[this.index]=p,p.index=this.index)}this.parent=void 0}}}function bn(){return Te}let me;const Ls=new WeakSet;class rr{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Te&&Te.active&&Te.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ls.has(this)&&(Ls.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||or(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vi(this),ar(this);const t=me,c=$e;me=this,$e=!0;try{return this.fn()}finally{lr(this),me=t,$e=c,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ei(t);this.deps=this.depsTail=void 0,vi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ls.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Is(this)&&this.run()}get dirty(){return Is(this)}}let nr=0,Mt,Bt;function or(e,t=!1){if(e.flags|=8,t){e.next=Bt,Bt=e;return}e.next=Mt,Mt=e}function Zs(){nr++}function Qs(){if(--nr>0)return;if(Bt){let t=Bt;for(Bt=void 0;t;){const c=t.next;t.next=void 0,t.flags&=-9,t=c}}let e;for(;Mt;){let t=Mt;for(Mt=void 0;t;){const c=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(v){e||(e=v)}t=c}}if(e)throw e}function ar(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function lr(e){let t,c=e.depsTail,v=c;for(;v;){const p=v.prevDep;v.version===-1?(v===c&&(c=p),ei(v),Cn(v)):t=v,v.dep.activeLink=v.prevActiveLink,v.prevActiveLink=void 0,v=p}e.deps=t,e.depsTail=c}function Is(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(cr(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function cr(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Wt)||(e.globalVersion=Wt,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Is(e))))return;e.flags|=2;const t=e.dep,c=me,v=$e;me=e,$e=!0;try{ar(e);const p=e.fn(e._value);(t.version===0||ot(p,e._value))&&(e.flags|=128,e._value=p,t.version++)}catch(p){throw t.version++,p}finally{me=c,$e=v,lr(e),e.flags&=-3}}function ei(e,t=!1){const{dep:c,prevSub:v,nextSub:p}=e;if(v&&(v.nextSub=p,e.prevSub=void 0),p&&(p.prevSub=v,e.nextSub=void 0),c.subs===e&&(c.subs=v,!v&&c.computed)){c.computed.flags&=-5;for(let x=c.computed.deps;x;x=x.nextDep)ei(x,!0)}!t&&!--c.sc&&c.map&&c.map.delete(c.key)}function Cn(e){const{prevDep:t,nextDep:c}=e;t&&(t.nextDep=c,e.prevDep=void 0),c&&(c.prevDep=t,e.nextDep=void 0)}let $e=!0;const hr=[];function tt(){hr.push($e),$e=!1}function st(){const e=hr.pop();$e=e===void 0?!0:e}function vi(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const c=me;me=void 0;try{t()}finally{me=c}}}let Wt=0;class wn{constructor(t,c){this.sub=t,this.dep=c,this.version=c.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ti{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!me||!$e||me===this.computed)return;let c=this.activeLink;if(c===void 0||c.sub!==me)c=this.activeLink=new wn(me,this),me.deps?(c.prevDep=me.depsTail,me.depsTail.nextDep=c,me.depsTail=c):me.deps=me.depsTail=c,ur(c);else if(c.version===-1&&(c.version=this.version,c.nextDep)){const v=c.nextDep;v.prevDep=c.prevDep,c.prevDep&&(c.prevDep.nextDep=v),c.prevDep=me.depsTail,c.nextDep=void 0,me.depsTail.nextDep=c,me.depsTail=c,me.deps===c&&(me.deps=v)}return c}trigger(t){this.version++,Wt++,this.notify(t)}notify(t){Zs();try{for(let c=this.subs;c;c=c.prevSub)c.sub.notify()&&c.sub.dep.notify()}finally{Qs()}}}function ur(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let v=t.deps;v;v=v.nextDep)ur(v)}const c=e.dep.subs;c!==e&&(e.prevSub=c,c&&(c.nextSub=e)),e.dep.subs=e}}const Hs=new WeakMap,vt=Symbol(""),Fs=Symbol(""),Nt=Symbol("");function xe(e,t,c){if($e&&me){let v=Hs.get(e);v||Hs.set(e,v=new Map);let p=v.get(c);p||(v.set(c,p=new ti),p.map=v,p.key=c),p.track()}}function Qe(e,t,c,v,p,x){const w=Hs.get(e);if(!w){Wt++;return}const s=a=>{a&&a.trigger()};if(Zs(),t==="clear")w.forEach(s);else{const a=ce(e),h=a&&Js(c);if(a&&c==="length"){const u=Number(v);w.forEach((l,d)=>{(d==="length"||d===Nt||!Xe(d)&&d>=u)&&s(l)})}else switch((c!==void 0||w.has(void 0))&&s(w.get(c)),h&&s(w.get(Nt)),t){case"add":a?h&&s(w.get("length")):(s(w.get(vt)),wt(e)&&s(w.get(Fs)));break;case"delete":a||(s(w.get(vt)),wt(e)&&s(w.get(Fs)));break;case"set":wt(e)&&s(w.get(vt));break}}Qs()}function St(e){const t=pe(e);return t===e?t:(xe(t,"iterate",Nt),We(e)?t:t.map(ye))}function vs(e){return xe(e=pe(e),"iterate",Nt),e}const yn={__proto__:null,[Symbol.iterator](){return ks(this,Symbol.iterator,ye)},concat(...e){return St(this).concat(...e.map(t=>ce(t)?St(t):t))},entries(){return ks(this,"entries",e=>(e[1]=ye(e[1]),e))},every(e,t){return Ye(this,"every",e,t,void 0,arguments)},filter(e,t){return Ye(this,"filter",e,t,c=>c.map(ye),arguments)},find(e,t){return Ye(this,"find",e,t,ye,arguments)},findIndex(e,t){return Ye(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ye(this,"findLast",e,t,ye,arguments)},findLastIndex(e,t){return Ye(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ye(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ds(this,"includes",e)},indexOf(...e){return Ds(this,"indexOf",e)},join(e){return St(this).join(e)},lastIndexOf(...e){return Ds(this,"lastIndexOf",e)},map(e,t){return Ye(this,"map",e,t,void 0,arguments)},pop(){return Dt(this,"pop")},push(...e){return Dt(this,"push",e)},reduce(e,...t){return mi(this,"reduce",e,t)},reduceRight(e,...t){return mi(this,"reduceRight",e,t)},shift(){return Dt(this,"shift")},some(e,t){return Ye(this,"some",e,t,void 0,arguments)},splice(...e){return Dt(this,"splice",e)},toReversed(){return St(this).toReversed()},toSorted(e){return St(this).toSorted(e)},toSpliced(...e){return St(this).toSpliced(...e)},unshift(...e){return Dt(this,"unshift",e)},values(){return ks(this,"values",ye)}};function ks(e,t,c){const v=vs(e),p=v[t]();return v!==e&&!We(e)&&(p._next=p.next,p.next=()=>{const x=p._next();return x.done||(x.value=c(x.value)),x}),p}const En=Array.prototype;function Ye(e,t,c,v,p,x){const w=vs(e),s=w!==e&&!We(e),a=w[t];if(a!==En[t]){const l=a.apply(e,x);return s?ye(l):l}let h=c;w!==e&&(s?h=function(l,d){return c.call(this,ye(l),d,e)}:c.length>2&&(h=function(l,d){return c.call(this,l,d,e)}));const u=a.call(w,h,v);return s&&p?p(u):u}function mi(e,t,c,v){const p=vs(e);let x=c;return p!==e&&(We(e)?c.length>3&&(x=function(w,s,a){return c.call(this,w,s,a,e)}):x=function(w,s,a){return c.call(this,w,ye(s),a,e)}),p[t](x,...v)}function Ds(e,t,c){const v=pe(e);xe(v,"iterate",Nt);const p=v[t](...c);return(p===-1||p===!1)&&ni(c[0])?(c[0]=pe(c[0]),v[t](...c)):p}function Dt(e,t,c=[]){tt(),Zs();const v=pe(e)[t].apply(e,c);return Qs(),st(),v}const xn=qs("__proto__,__v_isRef,__isVue"),fr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Xe));function Ln(e){Xe(e)||(e=String(e));const t=pe(this);return xe(t,"has",e),t.hasOwnProperty(e)}class dr{constructor(t=!1,c=!1){this._isReadonly=t,this._isShallow=c}get(t,c,v){if(c==="__v_skip")return t.__v_skip;const p=this._isReadonly,x=this._isShallow;if(c==="__v_isReactive")return!p;if(c==="__v_isReadonly")return p;if(c==="__v_isShallow")return x;if(c==="__v_raw")return v===(p?x?In:vr:x?gr:pr).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(v)?t:void 0;const w=ce(t);if(!p){let a;if(w&&(a=yn[c]))return a;if(c==="hasOwnProperty")return Ln}const s=Reflect.get(t,c,Le(t)?t:v);if((Xe(c)?fr.has(c):xn(c))||(p||xe(t,"get",c),x))return s;if(Le(s)){const a=w&&Js(c)?s:s.value;return p&&Se(a)?gt(a):a}return Se(s)?p?gt(s):ii(s):s}}class _r extends dr{constructor(t=!1){super(!1,t)}set(t,c,v,p){let x=t[c];if(!this._isShallow){const a=lt(x);if(!We(v)&&!lt(v)&&(x=pe(x),v=pe(v)),!ce(t)&&Le(x)&&!Le(v))return a||(x.value=v),!0}const w=ce(t)&&Js(c)?Number(c)<t.length:ge(t,c),s=Reflect.set(t,c,v,Le(t)?t:p);return t===pe(p)&&(w?ot(v,x)&&Qe(t,"set",c,v):Qe(t,"add",c,v)),s}deleteProperty(t,c){const v=ge(t,c);t[c];const p=Reflect.deleteProperty(t,c);return p&&v&&Qe(t,"delete",c,void 0),p}has(t,c){const v=Reflect.has(t,c);return(!Xe(c)||!fr.has(c))&&xe(t,"has",c),v}ownKeys(t){return xe(t,"iterate",ce(t)?"length":vt),Reflect.ownKeys(t)}}class kn extends dr{constructor(t=!1){super(!0,t)}set(t,c){return!0}deleteProperty(t,c){return!0}}const Dn=new _r,Rn=new kn,An=new _r(!0);const Ws=e=>e,qt=e=>Reflect.getPrototypeOf(e);function Tn(e,t,c){return function(...v){const p=this.__v_raw,x=pe(p),w=wt(x),s=e==="entries"||e===Symbol.iterator&&w,a=e==="keys"&&w,h=p[e](...v),u=c?Ws:t?ts:ye;return!t&&xe(x,"iterate",a?Fs:vt),{next(){const{value:l,done:d}=h.next();return d?{value:l,done:d}:{value:s?[u(l[0]),u(l[1])]:u(l),done:d}},[Symbol.iterator](){return this}}}}function Gt(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Mn(e,t){const c={get(p){const x=this.__v_raw,w=pe(x),s=pe(p);e||(ot(p,s)&&xe(w,"get",p),xe(w,"get",s));const{has:a}=qt(w),h=t?Ws:e?ts:ye;if(a.call(w,p))return h(x.get(p));if(a.call(w,s))return h(x.get(s));x!==w&&x.get(p)},get size(){const p=this.__v_raw;return!e&&xe(pe(p),"iterate",vt),p.size},has(p){const x=this.__v_raw,w=pe(x),s=pe(p);return e||(ot(p,s)&&xe(w,"has",p),xe(w,"has",s)),p===s?x.has(p):x.has(p)||x.has(s)},forEach(p,x){const w=this,s=w.__v_raw,a=pe(s),h=t?Ws:e?ts:ye;return!e&&xe(a,"iterate",vt),s.forEach((u,l)=>p.call(x,h(u),h(l),w))}};return ke(c,e?{add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear")}:{add(p){!t&&!We(p)&&!lt(p)&&(p=pe(p));const x=pe(this);return qt(x).has.call(x,p)||(x.add(p),Qe(x,"add",p,p)),this},set(p,x){!t&&!We(x)&&!lt(x)&&(x=pe(x));const w=pe(this),{has:s,get:a}=qt(w);let h=s.call(w,p);h||(p=pe(p),h=s.call(w,p));const u=a.call(w,p);return w.set(p,x),h?ot(x,u)&&Qe(w,"set",p,x):Qe(w,"add",p,x),this},delete(p){const x=pe(this),{has:w,get:s}=qt(x);let a=w.call(x,p);a||(p=pe(p),a=w.call(x,p)),s&&s.call(x,p);const h=x.delete(p);return a&&Qe(x,"delete",p,void 0),h},clear(){const p=pe(this),x=p.size!==0,w=p.clear();return x&&Qe(p,"clear",void 0,void 0),w}}),["keys","values","entries",Symbol.iterator].forEach(p=>{c[p]=Tn(p,e,t)}),c}function si(e,t){const c=Mn(e,t);return(v,p,x)=>p==="__v_isReactive"?!e:p==="__v_isReadonly"?e:p==="__v_raw"?v:Reflect.get(ge(c,p)&&p in v?c:v,p,x)}const Bn={get:si(!1,!1)},On={get:si(!1,!0)},Pn={get:si(!0,!1)};const pr=new WeakMap,gr=new WeakMap,vr=new WeakMap,In=new WeakMap;function Hn(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Fn(e){return e.__v_skip||!Object.isExtensible(e)?0:Hn(ln(e))}function ii(e){return lt(e)?e:ri(e,!1,Dn,Bn,pr)}function Wn(e){return ri(e,!1,An,On,gr)}function gt(e){return ri(e,!0,Rn,Pn,vr)}function ri(e,t,c,v,p){if(!Se(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const x=Fn(e);if(x===0)return e;const w=p.get(e);if(w)return w;const s=new Proxy(e,x===2?v:c);return p.set(e,s),s}function yt(e){return lt(e)?yt(e.__v_raw):!!(e&&e.__v_isReactive)}function lt(e){return!!(e&&e.__v_isReadonly)}function We(e){return!!(e&&e.__v_isShallow)}function ni(e){return e?!!e.__v_raw:!1}function pe(e){const t=e&&e.__v_raw;return t?pe(t):e}function Nn(e){return!ge(e,"__v_skip")&&Object.isExtensible(e)&&er(e,"__v_skip",!0),e}const ye=e=>Se(e)?ii(e):e,ts=e=>Se(e)?gt(e):e;function Le(e){return e?e.__v_isRef===!0:!1}function He(e){return $n(e,!1)}function $n(e,t){return Le(e)?e:new Un(e,t)}class Un{constructor(t,c){this.dep=new ti,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=c?t:pe(t),this._value=c?t:ye(t),this.__v_isShallow=c}get value(){return this.dep.track(),this._value}set value(t){const c=this._rawValue,v=this.__v_isShallow||We(t)||lt(t);t=v?t:pe(t),ot(t,c)&&(this._rawValue=t,this._value=v?t:ye(t),this.dep.trigger())}}function Si(e){e.dep&&e.dep.trigger()}function Ne(e){return Le(e)?e.value:e}const jn={get:(e,t,c)=>t==="__v_raw"?e:Ne(Reflect.get(e,t,c)),set:(e,t,c,v)=>{const p=e[t];return Le(p)&&!Le(c)?(p.value=c,!0):Reflect.set(e,t,c,v)}};function mr(e){return yt(e)?e:new Proxy(e,jn)}class Kn{constructor(t,c,v){this.fn=t,this.setter=c,this._value=void 0,this.dep=new ti(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wt-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!c,this.isSSR=v}notify(){if(this.flags|=16,!(this.flags&8)&&me!==this)return or(this,!0),!0}get value(){const t=this.dep.track();return cr(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function zn(e,t,c=!1){let v,p;return he(e)?v=e:(v=e.get,p=e.set),new Kn(v,p,c)}const Xt={},ss=new WeakMap;let dt;function Vn(e,t=!1,c=dt){if(c){let v=ss.get(c);v||ss.set(c,v=[]),v.push(e)}}function qn(e,t,c=ve){const{immediate:v,deep:p,once:x,scheduler:w,augmentJob:s,call:a}=c,h=f=>p?f:We(f)||p===!1||p===0?et(f,1):et(f);let u,l,d,m,C=!1,_=!1;if(Le(e)?(l=()=>e.value,C=We(e)):yt(e)?(l=()=>h(e),C=!0):ce(e)?(_=!0,C=e.some(f=>yt(f)||We(f)),l=()=>e.map(f=>{if(Le(f))return f.value;if(yt(f))return h(f);if(he(f))return a?a(f,2):f()})):he(e)?t?l=a?()=>a(e,2):e:l=()=>{if(d){tt();try{d()}finally{st()}}const f=dt;dt=u;try{return a?a(e,3,[m]):e(m)}finally{dt=f}}:l=qe,t&&p){const f=l,S=p===!0?1/0:p;l=()=>et(f(),S)}const r=bn(),o=()=>{u.stop(),r&&r.active&&Xs(r.effects,u)};if(x&&t){const f=t;t=(...S)=>{f(...S),o()}}let i=_?new Array(e.length).fill(Xt):Xt;const n=f=>{if(!(!(u.flags&1)||!u.dirty&&!f))if(t){const S=u.run();if(p||C||(_?S.some((b,y)=>ot(b,i[y])):ot(S,i))){d&&d();const b=dt;dt=u;try{const y=[S,i===Xt?void 0:_&&i[0]===Xt?[]:i,m];i=S,a?a(t,3,y):t(...y)}finally{dt=b}}}else u.run()};return s&&s(n),u=new rr(l),u.scheduler=w?()=>w(n,!1):n,m=f=>Vn(f,!1,u),d=u.onStop=()=>{const f=ss.get(u);if(f){if(a)a(f,4);else for(const S of f)S();ss.delete(u)}},t?v?n(!0):i=u.run():w?w(n.bind(null,!0),!0):u.run(),o.pause=u.pause.bind(u),o.resume=u.resume.bind(u),o.stop=o,o}function et(e,t=1/0,c){if(t<=0||!Se(e)||e.__v_skip||(c=c||new Map,(c.get(e)||0)>=t))return e;if(c.set(e,t),t--,Le(e))et(e.value,t,c);else if(ce(e))for(let v=0;v<e.length;v++)et(e[v],t,c);else if(fs(e)||wt(e))e.forEach(v=>{et(v,t,c)});else if(Zi(e)){for(const v in e)et(e[v],t,c);for(const v of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,v)&&et(e[v],t,c)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zt(e,t,c,v){try{return v?e(...v):e()}catch(p){ms(p,t,c)}}function Je(e,t,c,v){if(he(e)){const p=zt(e,t,c,v);return p&&Ji(p)&&p.catch(x=>{ms(x,t,c)}),p}if(ce(e)){const p=[];for(let x=0;x<e.length;x++)p.push(Je(e[x],t,c,v));return p}}function ms(e,t,c,v=!0){const p=t?t.vnode:null,{errorHandler:x,throwUnhandledErrorInProduction:w}=t&&t.appContext.config||ve;if(t){let s=t.parent;const a=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${c}`;for(;s;){const u=s.ec;if(u){for(let l=0;l<u.length;l++)if(u[l](e,a,h)===!1)return}s=s.parent}if(x){tt(),zt(x,null,10,[e,a,h]),st();return}}Gn(e,c,p,v,w)}function Gn(e,t,c,v=!0,p=!1){if(p)throw e;console.error(e)}const Re=[];let Ke=-1;const Et=[];let rt=null,bt=0;const Sr=Promise.resolve();let is=null;function br(e){const t=is||Sr;return e?t.then(this?e.bind(this):e):t}function Xn(e){let t=Ke+1,c=Re.length;for(;t<c;){const v=t+c>>>1,p=Re[v],x=$t(p);x<e||x===e&&p.flags&2?t=v+1:c=v}return t}function oi(e){if(!(e.flags&1)){const t=$t(e),c=Re[Re.length-1];!c||!(e.flags&2)&&t>=$t(c)?Re.push(e):Re.splice(Xn(t),0,e),e.flags|=1,Cr()}}function Cr(){is||(is=Sr.then(yr))}function Jn(e){ce(e)?Et.push(...e):rt&&e.id===-1?rt.splice(bt+1,0,e):e.flags&1||(Et.push(e),e.flags|=1),Cr()}function bi(e,t,c=Ke+1){for(;c<Re.length;c++){const v=Re[c];if(v&&v.flags&2){if(e&&v.id!==e.uid)continue;Re.splice(c,1),c--,v.flags&4&&(v.flags&=-2),v(),v.flags&4||(v.flags&=-2)}}}function wr(e){if(Et.length){const t=[...new Set(Et)].sort((c,v)=>$t(c)-$t(v));if(Et.length=0,rt){rt.push(...t);return}for(rt=t,bt=0;bt<rt.length;bt++){const c=rt[bt];c.flags&4&&(c.flags&=-2),c.flags&8||c(),c.flags&=-2}rt=null,bt=0}}const $t=e=>e.id==null?e.flags&2?-1:1/0:e.id;function yr(e){try{for(Ke=0;Ke<Re.length;Ke++){const t=Re[Ke];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),zt(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ke<Re.length;Ke++){const t=Re[Ke];t&&(t.flags&=-2)}Ke=-1,Re.length=0,wr(),is=null,(Re.length||Et.length)&&yr()}}let Fe=null,Er=null;function rs(e){const t=Fe;return Fe=e,Er=e&&e.type.__scopeId||null,t}function Yn(e,t=Fe,c){if(!t||e._n)return e;const v=(...p)=>{v._d&&Ai(-1);const x=rs(t);let w;try{w=e(...p)}finally{rs(x),v._d&&Ai(1)}return w};return v._n=!0,v._c=!0,v._d=!0,v}function Rs(e,t){if(Fe===null)return e;const c=ys(Fe),v=e.dirs||(e.dirs=[]);for(let p=0;p<t.length;p++){let[x,w,s,a=ve]=t[p];x&&(he(x)&&(x={mounted:x,updated:x}),x.deep&&et(w),v.push({dir:x,instance:c,value:w,oldValue:void 0,arg:s,modifiers:a}))}return e}function ut(e,t,c,v){const p=e.dirs,x=t&&t.dirs;for(let w=0;w<p.length;w++){const s=p[w];x&&(s.oldValue=x[w].value);let a=s.dir[v];a&&(tt(),Je(a,c,8,[e.el,s,e,t]),st())}}const Zn=Symbol("_vte"),Qn=e=>e.__isTeleport,eo=Symbol("_leaveCb");function ai(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ai(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function xr(e,t){return he(e)?ke({name:e.name},t,{setup:e}):e}function Lr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ns=new WeakMap;function Ot(e,t,c,v,p=!1){if(ce(e)){e.forEach((C,_)=>Ot(C,t&&(ce(t)?t[_]:t),c,v,p));return}if(Pt(v)&&!p){v.shapeFlag&512&&v.type.__asyncResolved&&v.component.subTree.component&&Ot(e,t,c,v.component.subTree);return}const x=v.shapeFlag&4?ys(v.component):v.el,w=p?null:x,{i:s,r:a}=e,h=t&&t.r,u=s.refs===ve?s.refs={}:s.refs,l=s.setupState,d=pe(l),m=l===ve?Xi:C=>ge(d,C);if(h!=null&&h!==a){if(Ci(t),Ce(h))u[h]=null,m(h)&&(l[h]=null);else if(Le(h)){h.value=null;const C=t;C.k&&(u[C.k]=null)}}if(he(a))zt(a,s,12,[w,u]);else{const C=Ce(a),_=Le(a);if(C||_){const r=()=>{if(e.f){const o=C?m(a)?l[a]:u[a]:a.value;if(p)ce(o)&&Xs(o,x);else if(ce(o))o.includes(x)||o.push(x);else if(C)u[a]=[x],m(a)&&(l[a]=u[a]);else{const i=[x];a.value=i,e.k&&(u[e.k]=i)}}else C?(u[a]=w,m(a)&&(l[a]=w)):_&&(a.value=w,e.k&&(u[e.k]=w))};if(w){const o=()=>{r(),ns.delete(e)};o.id=-1,ns.set(e,o),Oe(o,c)}else Ci(e),r()}}}function Ci(e){const t=ns.get(e);t&&(t.flags|=8,ns.delete(e))}ps().requestIdleCallback;ps().cancelIdleCallback;const Pt=e=>!!e.type.__asyncLoader,kr=e=>e.type.__isKeepAlive;function to(e,t){Dr(e,"a",t)}function so(e,t){Dr(e,"da",t)}function Dr(e,t,c=Ae){const v=e.__wdc||(e.__wdc=()=>{let p=c;for(;p;){if(p.isDeactivated)return;p=p.parent}return e()});if(Ss(t,v,c),c){let p=c.parent;for(;p&&p.parent;)kr(p.parent.vnode)&&io(v,t,c,p),p=p.parent}}function io(e,t,c,v){const p=Ss(t,e,v,!0);li(()=>{Xs(v[t],p)},c)}function Ss(e,t,c=Ae,v=!1){if(c){const p=c[e]||(c[e]=[]),x=t.__weh||(t.__weh=(...w)=>{tt();const s=Vt(c),a=Je(t,c,e,w);return s(),st(),a});return v?p.unshift(x):p.push(x),x}}const it=e=>(t,c=Ae)=>{(!jt||e==="sp")&&Ss(e,(...v)=>t(...v),c)},ro=it("bm"),bs=it("m"),no=it("bu"),oo=it("u"),Rr=it("bum"),li=it("um"),ao=it("sp"),lo=it("rtg"),co=it("rtc");function Ar(e,t=Ae){Ss("ec",e,t)}const ho=Symbol.for("v-ndc");function uo(e,t,c,v){let p;const x=c,w=ce(e);if(w||Ce(e)){const s=w&&yt(e);let a=!1,h=!1;s&&(a=!We(e),h=lt(e),e=vs(e)),p=new Array(e.length);for(let u=0,l=e.length;u<l;u++)p[u]=t(a?h?ts(ye(e[u])):ye(e[u]):e[u],u,void 0,x)}else if(typeof e=="number"){p=new Array(e);for(let s=0;s<e;s++)p[s]=t(s+1,s,void 0,x)}else if(Se(e))if(e[Symbol.iterator])p=Array.from(e,(s,a)=>t(s,a,void 0,x));else{const s=Object.keys(e);p=new Array(s.length);for(let a=0,h=s.length;a<h;a++){const u=s[a];p[a]=t(e[u],u,a,x)}}else p=[];return p}const Ns=e=>e?Yr(e)?ys(e):Ns(e.parent):null,It=ke(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ns(e.parent),$root:e=>Ns(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Mr(e),$forceUpdate:e=>e.f||(e.f=()=>{oi(e.update)}),$nextTick:e=>e.n||(e.n=br.bind(e.proxy)),$watch:e=>Oo.bind(e)}),As=(e,t)=>e!==ve&&!e.__isScriptSetup&&ge(e,t),fo={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:c,setupState:v,data:p,props:x,accessCache:w,type:s,appContext:a}=e;let h;if(t[0]!=="$"){const m=w[t];if(m!==void 0)switch(m){case 1:return v[t];case 2:return p[t];case 4:return c[t];case 3:return x[t]}else{if(As(v,t))return w[t]=1,v[t];if(p!==ve&&ge(p,t))return w[t]=2,p[t];if((h=e.propsOptions[0])&&ge(h,t))return w[t]=3,x[t];if(c!==ve&&ge(c,t))return w[t]=4,c[t];$s&&(w[t]=0)}}const u=It[t];let l,d;if(u)return t==="$attrs"&&xe(e.attrs,"get",""),u(e);if((l=s.__cssModules)&&(l=l[t]))return l;if(c!==ve&&ge(c,t))return w[t]=4,c[t];if(d=a.config.globalProperties,ge(d,t))return d[t]},set({_:e},t,c){const{data:v,setupState:p,ctx:x}=e;return As(p,t)?(p[t]=c,!0):v!==ve&&ge(v,t)?(v[t]=c,!0):ge(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(x[t]=c,!0)},has({_:{data:e,setupState:t,accessCache:c,ctx:v,appContext:p,propsOptions:x,type:w}},s){let a,h;return!!(c[s]||e!==ve&&s[0]!=="$"&&ge(e,s)||As(t,s)||(a=x[0])&&ge(a,s)||ge(v,s)||ge(It,s)||ge(p.config.globalProperties,s)||(h=w.__cssModules)&&h[s])},defineProperty(e,t,c){return c.get!=null?e._.accessCache[t]=0:ge(c,"value")&&this.set(e,t,c.value,null),Reflect.defineProperty(e,t,c)}};function wi(e){return ce(e)?e.reduce((t,c)=>(t[c]=null,t),{}):e}let $s=!0;function _o(e){const t=Mr(e),c=e.proxy,v=e.ctx;$s=!1,t.beforeCreate&&yi(t.beforeCreate,e,"bc");const{data:p,computed:x,methods:w,watch:s,provide:a,inject:h,created:u,beforeMount:l,mounted:d,beforeUpdate:m,updated:C,activated:_,deactivated:r,beforeDestroy:o,beforeUnmount:i,destroyed:n,unmounted:f,render:S,renderTracked:b,renderTriggered:y,errorCaptured:g,serverPrefetch:L,expose:M,inheritAttrs:P,components:B,directives:A,filters:F}=t;if(h&&po(h,v,null),w)for(const X in w){const z=w[X];he(z)&&(v[X]=z.bind(c))}if(p){const X=p.call(c,c);Se(X)&&(e.data=ii(X))}if($s=!0,x)for(const X in x){const z=x[X],E=he(z)?z.bind(c,c):he(z.get)?z.get.bind(c,c):qe,R=!he(z)&&he(z.set)?z.set.bind(c):qe,T=ls({get:E,set:R});Object.defineProperty(v,X,{enumerable:!0,configurable:!0,get:()=>T.value,set:I=>T.value=I})}if(s)for(const X in s)Tr(s[X],v,c,X);if(a){const X=he(a)?a.call(c):a;Reflect.ownKeys(X).forEach(z=>{Co(z,X[z])})}u&&yi(u,e,"c");function V(X,z){ce(z)?z.forEach(E=>X(E.bind(c))):z&&X(z.bind(c))}if(V(ro,l),V(bs,d),V(no,m),V(oo,C),V(to,_),V(so,r),V(Ar,g),V(co,b),V(lo,y),V(Rr,i),V(li,f),V(ao,L),ce(M))if(M.length){const X=e.exposed||(e.exposed={});M.forEach(z=>{Object.defineProperty(X,z,{get:()=>c[z],set:E=>c[z]=E,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===qe&&(e.render=S),P!=null&&(e.inheritAttrs=P),B&&(e.components=B),A&&(e.directives=A),L&&Lr(e)}function po(e,t,c=qe){ce(e)&&(e=Us(e));for(const v in e){const p=e[v];let x;Se(p)?"default"in p?x=Yt(p.from||v,p.default,!0):x=Yt(p.from||v):x=Yt(p),Le(x)?Object.defineProperty(t,v,{enumerable:!0,configurable:!0,get:()=>x.value,set:w=>x.value=w}):t[v]=x}}function yi(e,t,c){Je(ce(e)?e.map(v=>v.bind(t.proxy)):e.bind(t.proxy),t,c)}function Tr(e,t,c,v){let p=v.includes(".")?zr(c,v):()=>c[v];if(Ce(e)){const x=t[e];he(x)&&Ms(p,x)}else if(he(e))Ms(p,e.bind(c));else if(Se(e))if(ce(e))e.forEach(x=>Tr(x,t,c,v));else{const x=he(e.handler)?e.handler.bind(c):t[e.handler];he(x)&&Ms(p,x,e)}}function Mr(e){const t=e.type,{mixins:c,extends:v}=t,{mixins:p,optionsCache:x,config:{optionMergeStrategies:w}}=e.appContext,s=x.get(t);let a;return s?a=s:!p.length&&!c&&!v?a=t:(a={},p.length&&p.forEach(h=>os(a,h,w,!0)),os(a,t,w)),Se(t)&&x.set(t,a),a}function os(e,t,c,v=!1){const{mixins:p,extends:x}=t;x&&os(e,x,c,!0),p&&p.forEach(w=>os(e,w,c,!0));for(const w in t)if(!(v&&w==="expose")){const s=go[w]||c&&c[w];e[w]=s?s(e[w],t[w]):t[w]}return e}const go={data:Ei,props:xi,emits:xi,methods:At,computed:At,beforeCreate:De,created:De,beforeMount:De,mounted:De,beforeUpdate:De,updated:De,beforeDestroy:De,beforeUnmount:De,destroyed:De,unmounted:De,activated:De,deactivated:De,errorCaptured:De,serverPrefetch:De,components:At,directives:At,watch:mo,provide:Ei,inject:vo};function Ei(e,t){return t?e?function(){return ke(he(e)?e.call(this,this):e,he(t)?t.call(this,this):t)}:t:e}function vo(e,t){return At(Us(e),Us(t))}function Us(e){if(ce(e)){const t={};for(let c=0;c<e.length;c++)t[e[c]]=e[c];return t}return e}function De(e,t){return e?[...new Set([].concat(e,t))]:t}function At(e,t){return e?ke(Object.create(null),e,t):t}function xi(e,t){return e?ce(e)&&ce(t)?[...new Set([...e,...t])]:ke(Object.create(null),wi(e),wi(t??{})):t}function mo(e,t){if(!e)return t;if(!t)return e;const c=ke(Object.create(null),e);for(const v in t)c[v]=De(e[v],t[v]);return c}function Br(){return{app:null,config:{isNativeTag:Xi,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let So=0;function bo(e,t){return function(v,p=null){he(v)||(v=ke({},v)),p!=null&&!Se(p)&&(p=null);const x=Br(),w=new WeakSet,s=[];let a=!1;const h=x.app={_uid:So++,_component:v,_props:p,_container:null,_context:x,_instance:null,version:ia,get config(){return x.config},set config(u){},use(u,...l){return w.has(u)||(u&&he(u.install)?(w.add(u),u.install(h,...l)):he(u)&&(w.add(u),u(h,...l))),h},mixin(u){return x.mixins.includes(u)||x.mixins.push(u),h},component(u,l){return l?(x.components[u]=l,h):x.components[u]},directive(u,l){return l?(x.directives[u]=l,h):x.directives[u]},mount(u,l,d){if(!a){const m=h._ceVNode||Ge(v,p);return m.appContext=x,d===!0?d="svg":d===!1&&(d=void 0),e(m,u,d),a=!0,h._container=u,u.__vue_app__=h,ys(m.component)}},onUnmount(u){s.push(u)},unmount(){a&&(Je(s,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(u,l){return x.provides[u]=l,h},runWithContext(u){const l=xt;xt=h;try{return u()}finally{xt=l}}};return h}}let xt=null;function Co(e,t){if(Ae){let c=Ae.provides;const v=Ae.parent&&Ae.parent.provides;v===c&&(c=Ae.provides=Object.create(v)),c[e]=t}}function Yt(e,t,c=!1){const v=Yo();if(v||xt){let p=xt?xt._context.provides:v?v.parent==null||v.ce?v.vnode.appContext&&v.vnode.appContext.provides:v.parent.provides:void 0;if(p&&e in p)return p[e];if(arguments.length>1)return c&&he(t)?t.call(v&&v.proxy):t}}const Or={},Pr=()=>Object.create(Or),Ir=e=>Object.getPrototypeOf(e)===Or;function wo(e,t,c,v=!1){const p={},x=Pr();e.propsDefaults=Object.create(null),Hr(e,t,p,x);for(const w in e.propsOptions[0])w in p||(p[w]=void 0);c?e.props=v?p:Wn(p):e.type.props?e.props=p:e.props=x,e.attrs=x}function yo(e,t,c,v){const{props:p,attrs:x,vnode:{patchFlag:w}}=e,s=pe(p),[a]=e.propsOptions;let h=!1;if((v||w>0)&&!(w&16)){if(w&8){const u=e.vnode.dynamicProps;for(let l=0;l<u.length;l++){let d=u[l];if(Cs(e.emitsOptions,d))continue;const m=t[d];if(a)if(ge(x,d))m!==x[d]&&(x[d]=m,h=!0);else{const C=at(d);p[C]=js(a,s,C,m,e,!1)}else m!==x[d]&&(x[d]=m,h=!0)}}}else{Hr(e,t,p,x)&&(h=!0);let u;for(const l in s)(!t||!ge(t,l)&&((u=mt(l))===l||!ge(t,u)))&&(a?c&&(c[l]!==void 0||c[u]!==void 0)&&(p[l]=js(a,s,l,void 0,e,!0)):delete p[l]);if(x!==s)for(const l in x)(!t||!ge(t,l))&&(delete x[l],h=!0)}h&&Qe(e.attrs,"set","")}function Hr(e,t,c,v){const[p,x]=e.propsOptions;let w=!1,s;if(t)for(let a in t){if(Tt(a))continue;const h=t[a];let u;p&&ge(p,u=at(a))?!x||!x.includes(u)?c[u]=h:(s||(s={}))[u]=h:Cs(e.emitsOptions,a)||(!(a in v)||h!==v[a])&&(v[a]=h,w=!0)}if(x){const a=pe(c),h=s||ve;for(let u=0;u<x.length;u++){const l=x[u];c[l]=js(p,a,l,h[l],e,!ge(h,l))}}return w}function js(e,t,c,v,p,x){const w=e[c];if(w!=null){const s=ge(w,"default");if(s&&v===void 0){const a=w.default;if(w.type!==Function&&!w.skipFactory&&he(a)){const{propsDefaults:h}=p;if(c in h)v=h[c];else{const u=Vt(p);v=h[c]=a.call(null,t),u()}}else v=a;p.ce&&p.ce._setProp(c,v)}w[0]&&(x&&!s?v=!1:w[1]&&(v===""||v===mt(c))&&(v=!0))}return v}const Eo=new WeakMap;function Fr(e,t,c=!1){const v=c?Eo:t.propsCache,p=v.get(e);if(p)return p;const x=e.props,w={},s=[];let a=!1;if(!he(e)){const u=l=>{a=!0;const[d,m]=Fr(l,t,!0);ke(w,d),m&&s.push(...m)};!c&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!x&&!a)return Se(e)&&v.set(e,Ct),Ct;if(ce(x))for(let u=0;u<x.length;u++){const l=at(x[u]);Li(l)&&(w[l]=ve)}else if(x)for(const u in x){const l=at(u);if(Li(l)){const d=x[u],m=w[l]=ce(d)||he(d)?{type:d}:ke({},d),C=m.type;let _=!1,r=!0;if(ce(C))for(let o=0;o<C.length;++o){const i=C[o],n=he(i)&&i.name;if(n==="Boolean"){_=!0;break}else n==="String"&&(r=!1)}else _=he(C)&&C.name==="Boolean";m[0]=_,m[1]=r,(_||ge(m,"default"))&&s.push(l)}}const h=[w,s];return Se(e)&&v.set(e,h),h}function Li(e){return e[0]!=="$"&&!Tt(e)}const ci=e=>e==="_"||e==="_ctx"||e==="$stable",hi=e=>ce(e)?e.map(Ve):[Ve(e)],xo=(e,t,c)=>{if(t._n)return t;const v=Yn((...p)=>hi(t(...p)),c);return v._c=!1,v},Wr=(e,t,c)=>{const v=e._ctx;for(const p in e){if(ci(p))continue;const x=e[p];if(he(x))t[p]=xo(p,x,v);else if(x!=null){const w=hi(x);t[p]=()=>w}}},Nr=(e,t)=>{const c=hi(t);e.slots.default=()=>c},$r=(e,t,c)=>{for(const v in t)(c||!ci(v))&&(e[v]=t[v])},Lo=(e,t,c)=>{const v=e.slots=Pr();if(e.vnode.shapeFlag&32){const p=t._;p?($r(v,t,c),c&&er(v,"_",p,!0)):Wr(t,v)}else t&&Nr(e,t)},ko=(e,t,c)=>{const{vnode:v,slots:p}=e;let x=!0,w=ve;if(v.shapeFlag&32){const s=t._;s?c&&s===1?x=!1:$r(p,t,c):(x=!t.$stable,Wr(t,p)),w=t}else t&&(Nr(e,t),w={default:1});if(x)for(const s in p)!ci(s)&&w[s]==null&&delete p[s]},Oe=Uo;function Do(e){return Ro(e)}function Ro(e,t){const c=ps();c.__VUE__=!0;const{insert:v,remove:p,patchProp:x,createElement:w,createText:s,createComment:a,setText:h,setElementText:u,parentNode:l,nextSibling:d,setScopeId:m=qe,insertStaticContent:C}=e,_=(D,O,W,j=null,K=null,N=null,te=void 0,Z=null,Y=!!O.dynamicChildren)=>{if(D===O)return;D&&!Rt(D,O)&&(j=H(D),I(D,K,N,!0),D=null),O.patchFlag===-2&&(Y=!1,O.dynamicChildren=null);const{type:G,ref:oe,shapeFlag:Q}=O;switch(G){case ws:r(D,O,W,j);break;case ct:o(D,O,W,j);break;case Bs:D==null&&i(O,W,j,te);break;case ze:B(D,O,W,j,K,N,te,Z,Y);break;default:Q&1?S(D,O,W,j,K,N,te,Z,Y):Q&6?A(D,O,W,j,K,N,te,Z,Y):(Q&64||Q&128)&&G.process(D,O,W,j,K,N,te,Z,Y,$)}oe!=null&&K?Ot(oe,D&&D.ref,N,O||D,!O):oe==null&&D&&D.ref!=null&&Ot(D.ref,null,N,D,!0)},r=(D,O,W,j)=>{if(D==null)v(O.el=s(O.children),W,j);else{const K=O.el=D.el;O.children!==D.children&&h(K,O.children)}},o=(D,O,W,j)=>{D==null?v(O.el=a(O.children||""),W,j):O.el=D.el},i=(D,O,W,j)=>{[D.el,D.anchor]=C(D.children,O,W,j,D.el,D.anchor)},n=({el:D,anchor:O},W,j)=>{let K;for(;D&&D!==O;)K=d(D),v(D,W,j),D=K;v(O,W,j)},f=({el:D,anchor:O})=>{let W;for(;D&&D!==O;)W=d(D),p(D),D=W;p(O)},S=(D,O,W,j,K,N,te,Z,Y)=>{if(O.type==="svg"?te="svg":O.type==="math"&&(te="mathml"),D==null)b(O,W,j,K,N,te,Z,Y);else{const G=D.el&&D.el._isVueCE?D.el:null;try{G&&G._beginPatch(),L(D,O,K,N,te,Z,Y)}finally{G&&G._endPatch()}}},b=(D,O,W,j,K,N,te,Z)=>{let Y,G;const{props:oe,shapeFlag:Q,transition:ie,dirs:re}=D;if(Y=D.el=w(D.type,N,oe&&oe.is,oe),Q&8?u(Y,D.children):Q&16&&g(D.children,Y,null,j,K,Ts(D,N),te,Z),re&&ut(D,null,j,"created"),y(Y,D,D.scopeId,te,j),oe){for(const _e in oe)_e!=="value"&&!Tt(_e)&&x(Y,_e,null,oe[_e],N,j);"value"in oe&&x(Y,"value",null,oe.value,N),(G=oe.onVnodeBeforeMount)&&je(G,j,D)}re&&ut(D,null,j,"beforeMount");const ue=Ao(K,ie);ue&&ie.beforeEnter(Y),v(Y,O,W),((G=oe&&oe.onVnodeMounted)||ue||re)&&Oe(()=>{G&&je(G,j,D),ue&&ie.enter(Y),re&&ut(D,null,j,"mounted")},K)},y=(D,O,W,j,K)=>{if(W&&m(D,W),j)for(let N=0;N<j.length;N++)m(D,j[N]);if(K){let N=K.subTree;if(O===N||qr(N.type)&&(N.ssContent===O||N.ssFallback===O)){const te=K.vnode;y(D,te,te.scopeId,te.slotScopeIds,K.parent)}}},g=(D,O,W,j,K,N,te,Z,Y=0)=>{for(let G=Y;G<D.length;G++){const oe=D[G]=Z?nt(D[G]):Ve(D[G]);_(null,oe,O,W,j,K,N,te,Z)}},L=(D,O,W,j,K,N,te)=>{const Z=O.el=D.el;let{patchFlag:Y,dynamicChildren:G,dirs:oe}=O;Y|=D.patchFlag&16;const Q=D.props||ve,ie=O.props||ve;let re;if(W&&ft(W,!1),(re=ie.onVnodeBeforeUpdate)&&je(re,W,O,D),oe&&ut(O,D,W,"beforeUpdate"),W&&ft(W,!0),(Q.innerHTML&&ie.innerHTML==null||Q.textContent&&ie.textContent==null)&&u(Z,""),G?M(D.dynamicChildren,G,Z,W,j,Ts(O,K),N):te||z(D,O,Z,null,W,j,Ts(O,K),N,!1),Y>0){if(Y&16)P(Z,Q,ie,W,K);else if(Y&2&&Q.class!==ie.class&&x(Z,"class",null,ie.class,K),Y&4&&x(Z,"style",Q.style,ie.style,K),Y&8){const ue=O.dynamicProps;for(let _e=0;_e<ue.length;_e++){const fe=ue[_e],we=Q[fe],be=ie[fe];(be!==we||fe==="value")&&x(Z,fe,we,be,K,W)}}Y&1&&D.children!==O.children&&u(Z,O.children)}else!te&&G==null&&P(Z,Q,ie,W,K);((re=ie.onVnodeUpdated)||oe)&&Oe(()=>{re&&je(re,W,O,D),oe&&ut(O,D,W,"updated")},j)},M=(D,O,W,j,K,N,te)=>{for(let Z=0;Z<O.length;Z++){const Y=D[Z],G=O[Z],oe=Y.el&&(Y.type===ze||!Rt(Y,G)||Y.shapeFlag&198)?l(Y.el):W;_(Y,G,oe,null,j,K,N,te,!0)}},P=(D,O,W,j,K)=>{if(O!==W){if(O!==ve)for(const N in O)!Tt(N)&&!(N in W)&&x(D,N,O[N],null,K,j);for(const N in W){if(Tt(N))continue;const te=W[N],Z=O[N];te!==Z&&N!=="value"&&x(D,N,Z,te,K,j)}"value"in W&&x(D,"value",O.value,W.value,K)}},B=(D,O,W,j,K,N,te,Z,Y)=>{const G=O.el=D?D.el:s(""),oe=O.anchor=D?D.anchor:s("");let{patchFlag:Q,dynamicChildren:ie,slotScopeIds:re}=O;re&&(Z=Z?Z.concat(re):re),D==null?(v(G,W,j),v(oe,W,j),g(O.children||[],W,oe,K,N,te,Z,Y)):Q>0&&Q&64&&ie&&D.dynamicChildren?(M(D.dynamicChildren,ie,W,K,N,te,Z),(O.key!=null||K&&O===K.subTree)&&Ur(D,O,!0)):z(D,O,W,oe,K,N,te,Z,Y)},A=(D,O,W,j,K,N,te,Z,Y)=>{O.slotScopeIds=Z,D==null?O.shapeFlag&512?K.ctx.activate(O,W,j,te,Y):F(O,W,j,K,N,te,Y):U(D,O,Y)},F=(D,O,W,j,K,N,te)=>{const Z=D.component=Jo(D,j,K);if(kr(D)&&(Z.ctx.renderer=$),Zo(Z,!1,te),Z.asyncDep){if(K&&K.registerDep(Z,V,te),!D.el){const Y=Z.subTree=Ge(ct);o(null,Y,O,W),D.placeholder=Y.el}}else V(Z,D,O,W,K,N,te)},U=(D,O,W)=>{const j=O.component=D.component;if(No(D,O,W))if(j.asyncDep&&!j.asyncResolved){X(j,O,W);return}else j.next=O,j.update();else O.el=D.el,j.vnode=O},V=(D,O,W,j,K,N,te)=>{const Z=()=>{if(D.isMounted){let{next:Q,bu:ie,u:re,parent:ue,vnode:_e}=D;{const de=jr(D);if(de){Q&&(Q.el=_e.el,X(D,Q,te)),de.asyncDep.then(()=>{D.isUnmounted||Z()});return}}let fe=Q,we;ft(D,!1),Q?(Q.el=_e.el,X(D,Q,te)):Q=_e,ie&&Jt(ie),(we=Q.props&&Q.props.onVnodeBeforeUpdate)&&je(we,ue,Q,_e),ft(D,!0);const be=Di(D),Ee=D.subTree;D.subTree=be,_(Ee,be,l(Ee.el),H(Ee),D,K,N),Q.el=be.el,fe===null&&$o(D,be.el),re&&Oe(re,K),(we=Q.props&&Q.props.onVnodeUpdated)&&Oe(()=>je(we,ue,Q,_e),K)}else{let Q;const{el:ie,props:re}=O,{bm:ue,m:_e,parent:fe,root:we,type:be}=D,Ee=Pt(O);ft(D,!1),ue&&Jt(ue),!Ee&&(Q=re&&re.onVnodeBeforeMount)&&je(Q,fe,O),ft(D,!0);{we.ce&&we.ce._def.shadowRoot!==!1&&we.ce._injectChildStyle(be);const de=D.subTree=Di(D);_(null,de,W,j,D,K,N),O.el=de.el}if(_e&&Oe(_e,K),!Ee&&(Q=re&&re.onVnodeMounted)){const de=O;Oe(()=>je(Q,fe,de),K)}(O.shapeFlag&256||fe&&Pt(fe.vnode)&&fe.vnode.shapeFlag&256)&&D.a&&Oe(D.a,K),D.isMounted=!0,O=W=j=null}};D.scope.on();const Y=D.effect=new rr(Z);D.scope.off();const G=D.update=Y.run.bind(Y),oe=D.job=Y.runIfDirty.bind(Y);oe.i=D,oe.id=D.uid,Y.scheduler=()=>oi(oe),ft(D,!0),G()},X=(D,O,W)=>{O.component=D;const j=D.vnode.props;D.vnode=O,D.next=null,yo(D,O.props,j,W),ko(D,O.children,W),tt(),bi(D),st()},z=(D,O,W,j,K,N,te,Z,Y=!1)=>{const G=D&&D.children,oe=D?D.shapeFlag:0,Q=O.children,{patchFlag:ie,shapeFlag:re}=O;if(ie>0){if(ie&128){R(G,Q,W,j,K,N,te,Z,Y);return}else if(ie&256){E(G,Q,W,j,K,N,te,Z,Y);return}}re&8?(oe&16&&le(G,K,N),Q!==G&&u(W,Q)):oe&16?re&16?R(G,Q,W,j,K,N,te,Z,Y):le(G,K,N,!0):(oe&8&&u(W,""),re&16&&g(Q,W,j,K,N,te,Z,Y))},E=(D,O,W,j,K,N,te,Z,Y)=>{D=D||Ct,O=O||Ct;const G=D.length,oe=O.length,Q=Math.min(G,oe);let ie;for(ie=0;ie<Q;ie++){const re=O[ie]=Y?nt(O[ie]):Ve(O[ie]);_(D[ie],re,W,null,K,N,te,Z,Y)}G>oe?le(D,K,N,!0,!1,Q):g(O,W,j,K,N,te,Z,Y,Q)},R=(D,O,W,j,K,N,te,Z,Y)=>{let G=0;const oe=O.length;let Q=D.length-1,ie=oe-1;for(;G<=Q&&G<=ie;){const re=D[G],ue=O[G]=Y?nt(O[G]):Ve(O[G]);if(Rt(re,ue))_(re,ue,W,null,K,N,te,Z,Y);else break;G++}for(;G<=Q&&G<=ie;){const re=D[Q],ue=O[ie]=Y?nt(O[ie]):Ve(O[ie]);if(Rt(re,ue))_(re,ue,W,null,K,N,te,Z,Y);else break;Q--,ie--}if(G>Q){if(G<=ie){const re=ie+1,ue=re<oe?O[re].el:j;for(;G<=ie;)_(null,O[G]=Y?nt(O[G]):Ve(O[G]),W,ue,K,N,te,Z,Y),G++}}else if(G>ie)for(;G<=Q;)I(D[G],K,N,!0),G++;else{const re=G,ue=G,_e=new Map;for(G=ue;G<=ie;G++){const Be=O[G]=Y?nt(O[G]):Ve(O[G]);Be.key!=null&&_e.set(Be.key,G)}let fe,we=0;const be=ie-ue+1;let Ee=!1,de=0;const ht=new Array(be);for(G=0;G<be;G++)ht[G]=0;for(G=re;G<=Q;G++){const Be=D[G];if(we>=be){I(Be,K,N,!0);continue}let Ue;if(Be.key!=null)Ue=_e.get(Be.key);else for(fe=ue;fe<=ie;fe++)if(ht[fe-ue]===0&&Rt(Be,O[fe])){Ue=fe;break}Ue===void 0?I(Be,K,N,!0):(ht[Ue-ue]=G+1,Ue>=de?de=Ue:Ee=!0,_(Be,O[Ue],W,null,K,N,te,Z,Y),we++)}const fi=Ee?To(ht):Ct;for(fe=fi.length-1,G=be-1;G>=0;G--){const Be=ue+G,Ue=O[Be],di=O[Be+1],_i=Be+1<oe?di.el||di.placeholder:j;ht[G]===0?_(null,Ue,W,_i,K,N,te,Z,Y):Ee&&(fe<0||G!==fi[fe]?T(Ue,W,_i,2):fe--)}}},T=(D,O,W,j,K=null)=>{const{el:N,type:te,transition:Z,children:Y,shapeFlag:G}=D;if(G&6){T(D.component.subTree,O,W,j);return}if(G&128){D.suspense.move(O,W,j);return}if(G&64){te.move(D,O,W,$);return}if(te===ze){v(N,O,W);for(let Q=0;Q<Y.length;Q++)T(Y[Q],O,W,j);v(D.anchor,O,W);return}if(te===Bs){n(D,O,W);return}if(j!==2&&G&1&&Z)if(j===0)Z.beforeEnter(N),v(N,O,W),Oe(()=>Z.enter(N),K);else{const{leave:Q,delayLeave:ie,afterLeave:re}=Z,ue=()=>{D.ctx.isUnmounted?p(N):v(N,O,W)},_e=()=>{N._isLeaving&&N[eo](!0),Q(N,()=>{ue(),re&&re()})};ie?ie(N,ue,_e):_e()}else v(N,O,W)},I=(D,O,W,j=!1,K=!1)=>{const{type:N,props:te,ref:Z,children:Y,dynamicChildren:G,shapeFlag:oe,patchFlag:Q,dirs:ie,cacheIndex:re}=D;if(Q===-2&&(K=!1),Z!=null&&(tt(),Ot(Z,null,W,D,!0),st()),re!=null&&(O.renderCache[re]=void 0),oe&256){O.ctx.deactivate(D);return}const ue=oe&1&&ie,_e=!Pt(D);let fe;if(_e&&(fe=te&&te.onVnodeBeforeUnmount)&&je(fe,O,D),oe&6)ae(D.component,W,j);else{if(oe&128){D.suspense.unmount(W,j);return}ue&&ut(D,null,O,"beforeUnmount"),oe&64?D.type.remove(D,O,W,$,j):G&&!G.hasOnce&&(N!==ze||Q>0&&Q&64)?le(G,O,W,!1,!0):(N===ze&&Q&384||!K&&oe&16)&&le(Y,O,W),j&&q(D)}(_e&&(fe=te&&te.onVnodeUnmounted)||ue)&&Oe(()=>{fe&&je(fe,O,D),ue&&ut(D,null,O,"unmounted")},W)},q=D=>{const{type:O,el:W,anchor:j,transition:K}=D;if(O===ze){ee(W,j);return}if(O===Bs){f(D);return}const N=()=>{p(W),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(D.shapeFlag&1&&K&&!K.persisted){const{leave:te,delayLeave:Z}=K,Y=()=>te(W,N);Z?Z(D.el,N,Y):Y()}else N()},ee=(D,O)=>{let W;for(;D!==O;)W=d(D),p(D),D=W;p(O)},ae=(D,O,W)=>{const{bum:j,scope:K,job:N,subTree:te,um:Z,m:Y,a:G}=D;ki(Y),ki(G),j&&Jt(j),K.stop(),N&&(N.flags|=8,I(te,D,O,W)),Z&&Oe(Z,O),Oe(()=>{D.isUnmounted=!0},O)},le=(D,O,W,j=!1,K=!1,N=0)=>{for(let te=N;te<D.length;te++)I(D[te],O,W,j,K)},H=D=>{if(D.shapeFlag&6)return H(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const O=d(D.anchor||D.el),W=O&&O[Zn];return W?d(W):O};let k=!1;const J=(D,O,W)=>{D==null?O._vnode&&I(O._vnode,null,null,!0):_(O._vnode||null,D,O,null,null,null,W),O._vnode=D,k||(k=!0,bi(),wr(),k=!1)},$={p:_,um:I,m:T,r:q,mt:F,mc:g,pc:z,pbc:M,n:H,o:e};return{render:J,hydrate:void 0,createApp:bo(J)}}function Ts({type:e,props:t},c){return c==="svg"&&e==="foreignObject"||c==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:c}function ft({effect:e,job:t},c){c?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ao(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ur(e,t,c=!1){const v=e.children,p=t.children;if(ce(v)&&ce(p))for(let x=0;x<v.length;x++){const w=v[x];let s=p[x];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=p[x]=nt(p[x]),s.el=w.el),!c&&s.patchFlag!==-2&&Ur(w,s)),s.type===ws&&s.patchFlag!==-1&&(s.el=w.el),s.type===ct&&!s.el&&(s.el=w.el)}}function To(e){const t=e.slice(),c=[0];let v,p,x,w,s;const a=e.length;for(v=0;v<a;v++){const h=e[v];if(h!==0){if(p=c[c.length-1],e[p]<h){t[v]=p,c.push(v);continue}for(x=0,w=c.length-1;x<w;)s=x+w>>1,e[c[s]]<h?x=s+1:w=s;h<e[c[x]]&&(x>0&&(t[v]=c[x-1]),c[x]=v)}}for(x=c.length,w=c[x-1];x-- >0;)c[x]=w,w=t[w];return c}function jr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:jr(t)}function ki(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Mo=Symbol.for("v-scx"),Bo=()=>Yt(Mo);function Ms(e,t,c){return Kr(e,t,c)}function Kr(e,t,c=ve){const{immediate:v,deep:p,flush:x,once:w}=c,s=ke({},c),a=t&&v||!t&&x!=="post";let h;if(jt){if(x==="sync"){const m=Bo();h=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=qe,m.resume=qe,m.pause=qe,m}}const u=Ae;s.call=(m,C,_)=>Je(m,u,C,_);let l=!1;x==="post"?s.scheduler=m=>{Oe(m,u&&u.suspense)}:x!=="sync"&&(l=!0,s.scheduler=(m,C)=>{C?m():oi(m)}),s.augmentJob=m=>{t&&(m.flags|=4),l&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const d=qn(e,t,s);return jt&&(h?h.push(d):a&&d()),d}function Oo(e,t,c){const v=this.proxy,p=Ce(e)?e.includes(".")?zr(v,e):()=>v[e]:e.bind(v,v);let x;he(t)?x=t:(x=t.handler,c=t);const w=Vt(this),s=Kr(p,x.bind(v),c);return w(),s}function zr(e,t){const c=t.split(".");return()=>{let v=e;for(let p=0;p<c.length&&v;p++)v=v[c[p]];return v}}const Po=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${at(t)}Modifiers`]||e[`${mt(t)}Modifiers`];function Io(e,t,...c){if(e.isUnmounted)return;const v=e.vnode.props||ve;let p=c;const x=t.startsWith("update:"),w=x&&Po(v,t.slice(7));w&&(w.trim&&(p=c.map(u=>Ce(u)?u.trim():u)),w.number&&(p=c.map(_s)));let s,a=v[s=Es(t)]||v[s=Es(at(t))];!a&&x&&(a=v[s=Es(mt(t))]),a&&Je(a,e,6,p);const h=v[s+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Je(h,e,6,p)}}const Ho=new WeakMap;function Vr(e,t,c=!1){const v=c?Ho:t.emitsCache,p=v.get(e);if(p!==void 0)return p;const x=e.emits;let w={},s=!1;if(!he(e)){const a=h=>{const u=Vr(h,t,!0);u&&(s=!0,ke(w,u))};!c&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!x&&!s?(Se(e)&&v.set(e,null),null):(ce(x)?x.forEach(a=>w[a]=null):ke(w,x),Se(e)&&v.set(e,w),w)}function Cs(e,t){return!e||!us(t)?!1:(t=t.slice(2).replace(/Once$/,""),ge(e,t[0].toLowerCase()+t.slice(1))||ge(e,mt(t))||ge(e,t))}function Di(e){const{type:t,vnode:c,proxy:v,withProxy:p,propsOptions:[x],slots:w,attrs:s,emit:a,render:h,renderCache:u,props:l,data:d,setupState:m,ctx:C,inheritAttrs:_}=e,r=rs(e);let o,i;try{if(c.shapeFlag&4){const f=p||v,S=f;o=Ve(h.call(S,f,u,l,m,d,C)),i=s}else{const f=t;o=Ve(f.length>1?f(l,{attrs:s,slots:w,emit:a}):f(l,null)),i=t.props?s:Fo(s)}}catch(f){Ht.length=0,ms(f,e,1),o=Ge(ct)}let n=o;if(i&&_!==!1){const f=Object.keys(i),{shapeFlag:S}=n;f.length&&S&7&&(x&&f.some(Gs)&&(i=Wo(i,x)),n=kt(n,i,!1,!0))}return c.dirs&&(n=kt(n,null,!1,!0),n.dirs=n.dirs?n.dirs.concat(c.dirs):c.dirs),c.transition&&ai(n,c.transition),o=n,rs(r),o}const Fo=e=>{let t;for(const c in e)(c==="class"||c==="style"||us(c))&&((t||(t={}))[c]=e[c]);return t},Wo=(e,t)=>{const c={};for(const v in e)(!Gs(v)||!(v.slice(9)in t))&&(c[v]=e[v]);return c};function No(e,t,c){const{props:v,children:p,component:x}=e,{props:w,children:s,patchFlag:a}=t,h=x.emitsOptions;if(t.dirs||t.transition)return!0;if(c&&a>=0){if(a&1024)return!0;if(a&16)return v?Ri(v,w,h):!!w;if(a&8){const u=t.dynamicProps;for(let l=0;l<u.length;l++){const d=u[l];if(w[d]!==v[d]&&!Cs(h,d))return!0}}}else return(p||s)&&(!s||!s.$stable)?!0:v===w?!1:v?w?Ri(v,w,h):!0:!!w;return!1}function Ri(e,t,c){const v=Object.keys(t);if(v.length!==Object.keys(e).length)return!0;for(let p=0;p<v.length;p++){const x=v[p];if(t[x]!==e[x]&&!Cs(c,x))return!0}return!1}function $o({vnode:e,parent:t},c){for(;t;){const v=t.subTree;if(v.suspense&&v.suspense.activeBranch===e&&(v.el=e.el),v===e)(e=t.vnode).el=c,t=t.parent;else break}}const qr=e=>e.__isSuspense;function Uo(e,t){t&&t.pendingBranch?ce(e)?t.effects.push(...e):t.effects.push(e):Jn(e)}const ze=Symbol.for("v-fgt"),ws=Symbol.for("v-txt"),ct=Symbol.for("v-cmt"),Bs=Symbol.for("v-stc"),Ht=[];let Ie=null;function Me(e=!1){Ht.push(Ie=e?null:[])}function jo(){Ht.pop(),Ie=Ht[Ht.length-1]||null}let Ut=1;function Ai(e,t=!1){Ut+=e,e<0&&Ie&&t&&(Ie.hasOnce=!0)}function Gr(e){return e.dynamicChildren=Ut>0?Ie||Ct:null,jo(),Ut>0&&Ie&&Ie.push(e),e}function Pe(e,t,c,v,p,x){return Gr(ne(e,t,c,v,p,x,!0))}function Ko(e,t,c,v,p){return Gr(Ge(e,t,c,v,p,!0))}function Xr(e){return e?e.__v_isVNode===!0:!1}function Rt(e,t){return e.type===t.type&&e.key===t.key}const Jr=({key:e})=>e??null,Zt=({ref:e,ref_key:t,ref_for:c})=>(typeof e=="number"&&(e=""+e),e!=null?Ce(e)||Le(e)||he(e)?{i:Fe,r:e,k:t,f:!!c}:e:null);function ne(e,t=null,c=null,v=0,p=null,x=e===ze?0:1,w=!1,s=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Jr(t),ref:t&&Zt(t),scopeId:Er,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:x,patchFlag:v,dynamicProps:p,dynamicChildren:null,appContext:null,ctx:Fe};return s?(ui(a,c),x&128&&e.normalize(a)):c&&(a.shapeFlag|=Ce(c)?8:16),Ut>0&&!w&&Ie&&(a.patchFlag>0||x&6)&&a.patchFlag!==32&&Ie.push(a),a}const Ge=zo;function zo(e,t=null,c=null,v=0,p=null,x=!1){if((!e||e===ho)&&(e=ct),Xr(e)){const s=kt(e,t,!0);return c&&ui(s,c),Ut>0&&!x&&Ie&&(s.shapeFlag&6?Ie[Ie.indexOf(e)]=s:Ie.push(s)),s.patchFlag=-2,s}if(sa(e)&&(e=e.__vccOpts),t){t=Vo(t);let{class:s,style:a}=t;s&&!Ce(s)&&(t.class=Ft(s)),Se(a)&&(ni(a)&&!ce(a)&&(a=ke({},a)),t.style=Ys(a))}const w=Ce(e)?1:qr(e)?128:Qn(e)?64:Se(e)?4:he(e)?2:0;return ne(e,t,c,v,p,w,x,!0)}function Vo(e){return e?ni(e)||Ir(e)?ke({},e):e:null}function kt(e,t,c=!1,v=!1){const{props:p,ref:x,patchFlag:w,children:s,transition:a}=e,h=t?qo(p||{},t):p,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&Jr(h),ref:t&&t.ref?c&&x?ce(x)?x.concat(Zt(t)):[x,Zt(t)]:Zt(t):x,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ze?w===-1?16:w|16:w,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&kt(e.ssContent),ssFallback:e.ssFallback&&kt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&v&&ai(u,a.clone(u)),u}function Ks(e=" ",t=0){return Ge(ws,null,e,t)}function Qt(e="",t=!1){return t?(Me(),Ko(ct,null,e)):Ge(ct,null,e)}function Ve(e){return e==null||typeof e=="boolean"?Ge(ct):ce(e)?Ge(ze,null,e.slice()):Xr(e)?nt(e):Ge(ws,null,String(e))}function nt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:kt(e)}function ui(e,t){let c=0;const{shapeFlag:v}=e;if(t==null)t=null;else if(ce(t))c=16;else if(typeof t=="object")if(v&65){const p=t.default;p&&(p._c&&(p._d=!1),ui(e,p()),p._c&&(p._d=!0));return}else{c=32;const p=t._;!p&&!Ir(t)?t._ctx=Fe:p===3&&Fe&&(Fe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else he(t)?(t={default:t,_ctx:Fe},c=32):(t=String(t),v&64?(c=16,t=[Ks(t)]):c=8);e.children=t,e.shapeFlag|=c}function qo(...e){const t={};for(let c=0;c<e.length;c++){const v=e[c];for(const p in v)if(p==="class")t.class!==v.class&&(t.class=Ft([t.class,v.class]));else if(p==="style")t.style=Ys([t.style,v.style]);else if(us(p)){const x=t[p],w=v[p];w&&x!==w&&!(ce(x)&&x.includes(w))&&(t[p]=x?[].concat(x,w):w)}else p!==""&&(t[p]=v[p])}return t}function je(e,t,c,v=null){Je(e,t,7,[c,v])}const Go=Br();let Xo=0;function Jo(e,t,c){const v=e.type,p=(t?t.appContext:e.appContext)||Go,x={uid:Xo++,vnode:e,type:v,parent:t,appContext:p,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Sn(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(p.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fr(v,p),emitsOptions:Vr(v,p),emit:null,emitted:null,propsDefaults:ve,inheritAttrs:v.inheritAttrs,ctx:ve,data:ve,props:ve,attrs:ve,slots:ve,refs:ve,setupState:ve,setupContext:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return x.ctx={_:x},x.root=t?t.root:x,x.emit=Io.bind(null,x),e.ce&&e.ce(x),x}let Ae=null;const Yo=()=>Ae||Fe;let as,zs;{const e=ps(),t=(c,v)=>{let p;return(p=e[c])||(p=e[c]=[]),p.push(v),x=>{p.length>1?p.forEach(w=>w(x)):p[0](x)}};as=t("__VUE_INSTANCE_SETTERS__",c=>Ae=c),zs=t("__VUE_SSR_SETTERS__",c=>jt=c)}const Vt=e=>{const t=Ae;return as(e),e.scope.on(),()=>{e.scope.off(),as(t)}},Ti=()=>{Ae&&Ae.scope.off(),as(null)};function Yr(e){return e.vnode.shapeFlag&4}let jt=!1;function Zo(e,t=!1,c=!1){t&&zs(t);const{props:v,children:p}=e.vnode,x=Yr(e);wo(e,v,x,t),Lo(e,p,c||t);const w=x?Qo(e,t):void 0;return t&&zs(!1),w}function Qo(e,t){const c=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,fo);const{setup:v}=c;if(v){tt();const p=e.setupContext=v.length>1?ta(e):null,x=Vt(e),w=zt(v,e,0,[e.props,p]),s=Ji(w);if(st(),x(),(s||e.sp)&&!Pt(e)&&Lr(e),s){if(w.then(Ti,Ti),t)return w.then(a=>{Mi(e,a)}).catch(a=>{ms(a,e,0)});e.asyncDep=w}else Mi(e,w)}else Zr(e)}function Mi(e,t,c){he(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Se(t)&&(e.setupState=mr(t)),Zr(e)}function Zr(e,t,c){const v=e.type;e.render||(e.render=v.render||qe);{const p=Vt(e);tt();try{_o(e)}finally{st(),p()}}}const ea={get(e,t){return xe(e,"get",""),e[t]}};function ta(e){const t=c=>{e.exposed=c||{}};return{attrs:new Proxy(e.attrs,ea),slots:e.slots,emit:e.emit,expose:t}}function ys(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(mr(Nn(e.exposed)),{get(t,c){if(c in t)return t[c];if(c in It)return It[c](e)},has(t,c){return c in t||c in It}})):e.proxy}function sa(e){return he(e)&&"__vccOpts"in e}const ls=(e,t)=>zn(e,t,jt),ia="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vs;const Bi=typeof window<"u"&&window.trustedTypes;if(Bi)try{Vs=Bi.createPolicy("vue",{createHTML:e=>e})}catch{}const Qr=Vs?e=>Vs.createHTML(e):e=>e,ra="http://www.w3.org/2000/svg",na="http://www.w3.org/1998/Math/MathML",Ze=typeof document<"u"?document:null,Oi=Ze&&Ze.createElement("template"),oa={insert:(e,t,c)=>{t.insertBefore(e,c||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,c,v)=>{const p=t==="svg"?Ze.createElementNS(ra,e):t==="mathml"?Ze.createElementNS(na,e):c?Ze.createElement(e,{is:c}):Ze.createElement(e);return e==="select"&&v&&v.multiple!=null&&p.setAttribute("multiple",v.multiple),p},createText:e=>Ze.createTextNode(e),createComment:e=>Ze.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ze.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,c,v,p,x){const w=c?c.previousSibling:t.lastChild;if(p&&(p===x||p.nextSibling))for(;t.insertBefore(p.cloneNode(!0),c),!(p===x||!(p=p.nextSibling)););else{Oi.innerHTML=Qr(v==="svg"?`<svg>${e}</svg>`:v==="mathml"?`<math>${e}</math>`:e);const s=Oi.content;if(v==="svg"||v==="mathml"){const a=s.firstChild;for(;a.firstChild;)s.appendChild(a.firstChild);s.removeChild(a)}t.insertBefore(s,c)}return[w?w.nextSibling:t.firstChild,c?c.previousSibling:t.lastChild]}},aa=Symbol("_vtc");function la(e,t,c){const v=e[aa];v&&(t=(t?[t,...v]:[...v]).join(" ")),t==null?e.removeAttribute("class"):c?e.setAttribute("class",t):e.className=t}const Pi=Symbol("_vod"),ca=Symbol("_vsh"),ha=Symbol(""),ua=/(?:^|;)\s*display\s*:/;function fa(e,t,c){const v=e.style,p=Ce(c);let x=!1;if(c&&!p){if(t)if(Ce(t))for(const w of t.split(";")){const s=w.slice(0,w.indexOf(":")).trim();c[s]==null&&es(v,s,"")}else for(const w in t)c[w]==null&&es(v,w,"");for(const w in c)w==="display"&&(x=!0),es(v,w,c[w])}else if(p){if(t!==c){const w=v[ha];w&&(c+=";"+w),v.cssText=c,x=ua.test(c)}}else t&&e.removeAttribute("style");Pi in e&&(e[Pi]=x?v.display:"",e[ca]&&(v.display="none"))}const Ii=/\s*!important$/;function es(e,t,c){if(ce(c))c.forEach(v=>es(e,t,v));else if(c==null&&(c=""),t.startsWith("--"))e.setProperty(t,c);else{const v=da(e,t);Ii.test(c)?e.setProperty(mt(v),c.replace(Ii,""),"important"):e[v]=c}}const Hi=["Webkit","Moz","ms"],Os={};function da(e,t){const c=Os[t];if(c)return c;let v=at(t);if(v!=="filter"&&v in e)return Os[t]=v;v=Qi(v);for(let p=0;p<Hi.length;p++){const x=Hi[p]+v;if(x in e)return Os[t]=x}return t}const Fi="http://www.w3.org/1999/xlink";function Wi(e,t,c,v,p,x=gn(t)){v&&t.startsWith("xlink:")?c==null?e.removeAttributeNS(Fi,t.slice(6,t.length)):e.setAttributeNS(Fi,t,c):c==null||x&&!tr(c)?e.removeAttribute(t):e.setAttribute(t,x?"":Xe(c)?String(c):c)}function Ni(e,t,c,v,p){if(t==="innerHTML"||t==="textContent"){c!=null&&(e[t]=t==="innerHTML"?Qr(c):c);return}const x=e.tagName;if(t==="value"&&x!=="PROGRESS"&&!x.includes("-")){const s=x==="OPTION"?e.getAttribute("value")||"":e.value,a=c==null?e.type==="checkbox"?"on":"":String(c);(s!==a||!("_value"in e))&&(e.value=a),c==null&&e.removeAttribute(t),e._value=c;return}let w=!1;if(c===""||c==null){const s=typeof e[t];s==="boolean"?c=tr(c):c==null&&s==="string"?(c="",w=!0):s==="number"&&(c=0,w=!0)}try{e[t]=c}catch{}w&&e.removeAttribute(p||t)}function _t(e,t,c,v){e.addEventListener(t,c,v)}function _a(e,t,c,v){e.removeEventListener(t,c,v)}const $i=Symbol("_vei");function pa(e,t,c,v,p=null){const x=e[$i]||(e[$i]={}),w=x[t];if(v&&w)w.value=v;else{const[s,a]=ga(t);if(v){const h=x[t]=Sa(v,p);_t(e,s,h,a)}else w&&(_a(e,s,w,a),x[t]=void 0)}}const Ui=/(?:Once|Passive|Capture)$/;function ga(e){let t;if(Ui.test(e)){t={};let v;for(;v=e.match(Ui);)e=e.slice(0,e.length-v[0].length),t[v[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):mt(e.slice(2)),t]}let Ps=0;const va=Promise.resolve(),ma=()=>Ps||(va.then(()=>Ps=0),Ps=Date.now());function Sa(e,t){const c=v=>{if(!v._vts)v._vts=Date.now();else if(v._vts<=c.attached)return;Je(ba(v,c.value),t,5,[v])};return c.value=e,c.attached=ma(),c}function ba(e,t){if(ce(t)){const c=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{c.call(e),e._stopped=!0},t.map(v=>p=>!p._stopped&&v&&v(p))}else return t}const ji=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ca=(e,t,c,v,p,x)=>{const w=p==="svg";t==="class"?la(e,v,w):t==="style"?fa(e,c,v):us(t)?Gs(t)||pa(e,t,c,v,x):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):wa(e,t,v,w))?(Ni(e,t,v),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Wi(e,t,v,w,x,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ce(v))?Ni(e,at(t),v,x,t):(t==="true-value"?e._trueValue=v:t==="false-value"&&(e._falseValue=v),Wi(e,t,v,w))};function wa(e,t,c,v){if(v)return!!(t==="innerHTML"||t==="textContent"||t in e&&ji(t)&&he(c));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const p=e.tagName;if(p==="IMG"||p==="VIDEO"||p==="CANVAS"||p==="SOURCE")return!1}return ji(t)&&Ce(c)?!1:t in e}const cs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ce(t)?c=>Jt(t,c):t};function ya(e){e.target.composing=!0}function Ki(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Lt=Symbol("_assign");function zi(e,t,c){return t&&(e=e.trim()),c&&(e=_s(e)),e}const Vi={created(e,{modifiers:{lazy:t,trim:c,number:v}},p){e[Lt]=cs(p);const x=v||p.props&&p.props.type==="number";_t(e,t?"change":"input",w=>{w.target.composing||e[Lt](zi(e.value,c,x))}),(c||x)&&_t(e,"change",()=>{e.value=zi(e.value,c,x)}),t||(_t(e,"compositionstart",ya),_t(e,"compositionend",Ki),_t(e,"change",Ki))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:c,modifiers:{lazy:v,trim:p,number:x}},w){if(e[Lt]=cs(w),e.composing)return;const s=(x||e.type==="number")&&!/^0\d/.test(e.value)?_s(e.value):e.value,a=t??"";s!==a&&(document.activeElement===e&&e.type!=="range"&&(v&&t===c||p&&e.value.trim()===a)||(e.value=a))}},Ea={deep:!0,created(e,{value:t,modifiers:{number:c}},v){const p=fs(t);_t(e,"change",()=>{const x=Array.prototype.filter.call(e.options,w=>w.selected).map(w=>c?_s(hs(w)):hs(w));e[Lt](e.multiple?p?new Set(x):x:x[0]),e._assigning=!0,br(()=>{e._assigning=!1})}),e[Lt]=cs(v)},mounted(e,{value:t}){qi(e,t)},beforeUpdate(e,t,c){e[Lt]=cs(c)},updated(e,{value:t}){e._assigning||qi(e,t)}};function qi(e,t){const c=e.multiple,v=ce(t);if(!(c&&!v&&!fs(t))){for(let p=0,x=e.options.length;p<x;p++){const w=e.options[p],s=hs(w);if(c)if(v){const a=typeof s;a==="string"||a==="number"?w.selected=t.some(h=>String(h)===String(s)):w.selected=mn(t,s)>-1}else w.selected=t.has(s);else if(gs(hs(w),t)){e.selectedIndex!==p&&(e.selectedIndex=p);return}}!c&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function hs(e){return"_value"in e?e._value:e.value}const xa=["ctrl","shift","alt","meta"],La={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>xa.some(c=>e[`${c}Key`]&&!t.includes(c))},ka=(e,t)=>{const c=e._withMods||(e._withMods={}),v=t.join(".");return c[v]||(c[v]=(p,...x)=>{for(let w=0;w<t.length;w++){const s=La[t[w]];if(s&&s(p,t))return}return e(p,...x)})},Da=ke({patchProp:Ca},oa);let Gi;function Ra(){return Gi||(Gi=Do(Da))}const Aa=(...e)=>{const t=Ra().createApp(...e),{mount:c}=t;return t.mount=v=>{const p=Ma(v);if(!p)return;const x=t._component;!he(x)&&!x.render&&!x.template&&(x.template=p.innerHTML),p.nodeType===1&&(p.textContent="");const w=c(p,!1,Ta(p));return p instanceof Element&&(p.removeAttribute("v-cloak"),p.setAttribute("data-v-app","")),w},t};function Ta(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ma(e){return Ce(e)?document.querySelector(e):e}var en={exports:{}};(function(e,t){(function(c,v){e.exports=v()})(globalThis,()=>(()=>{var c={4567:function(w,s,a){var h=this&&this.__decorate||function(i,n,f,S){var b,y=arguments.length,g=y<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(i,n,f,S);else for(var L=i.length-1;L>=0;L--)(b=i[L])&&(g=(y<3?b(g):y>3?b(n,f,g):b(n,f))||g);return y>3&&g&&Object.defineProperty(n,f,g),g},u=this&&this.__param||function(i,n){return function(f,S){n(f,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const l=a(9042),d=a(9924),m=a(844),C=a(4725),_=a(2585),r=a(3656);let o=s.AccessibilityManager=class extends m.Disposable{constructor(i,n,f,S){super(),this._terminal=i,this._coreBrowserService=f,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new d.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(b=>this._handleResize(b.rows))),this.register(this._terminal.onRender(b=>this._refreshRows(b.start,b.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(b=>this._handleChar(b))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(b=>this._handleTab(b))),this.register(this._terminal.onKey(b=>this._handleKey(b.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,r.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(i){for(let n=0;n<i;n++)this._handleChar(" ")}_handleChar(i){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(i){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(i)||this._charsToConsume.push(i)}_refreshRows(i,n){this._liveRegionDebouncer.refresh(i,n,this._terminal.rows)}_renderRows(i,n){const f=this._terminal.buffer,S=f.lines.length.toString();for(let b=i;b<=n;b++){const y=f.lines.get(f.ydisp+b),g=[],L=(y==null?void 0:y.translateToString(!0,void 0,void 0,g))||"",M=(f.ydisp+b+1).toString(),P=this._rowElements[b];P&&(L.length===0?(P.innerText="",this._rowColumns.set(P,[0,1])):(P.textContent=L,this._rowColumns.set(P,g)),P.setAttribute("aria-posinset",M),P.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(i,n){const f=i.target,S=this._rowElements[n===0?1:this._rowElements.length-2];if(f.getAttribute("aria-posinset")===(n===0?"1":`${this._terminal.buffer.lines.length}`)||i.relatedTarget!==S)return;let b,y;if(n===0?(b=f,y=this._rowElements.pop(),this._rowContainer.removeChild(y)):(b=this._rowElements.shift(),y=f,this._rowContainer.removeChild(b)),b.removeEventListener("focus",this._topBoundaryFocusListener),y.removeEventListener("focus",this._bottomBoundaryFocusListener),n===0){const g=this._createAccessibilityTreeNode();this._rowElements.unshift(g),this._rowContainer.insertAdjacentElement("afterbegin",g)}else{const g=this._createAccessibilityTreeNode();this._rowElements.push(g),this._rowContainer.appendChild(g)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(n===0?-1:1),this._rowElements[n===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}_handleSelectionChange(){var L;if(this._rowElements.length===0)return;const i=document.getSelection();if(!i)return;if(i.isCollapsed)return void(this._rowContainer.contains(i.anchorNode)&&this._terminal.clearSelection());if(!i.anchorNode||!i.focusNode)return void console.error("anchorNode and/or focusNode are null");let n={node:i.anchorNode,offset:i.anchorOffset},f={node:i.focusNode,offset:i.focusOffset};if((n.node.compareDocumentPosition(f.node)&Node.DOCUMENT_POSITION_PRECEDING||n.node===f.node&&n.offset>f.offset)&&([n,f]=[f,n]),n.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(n={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(n.node))return;const S=this._rowElements.slice(-1)[0];if(f.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(f={node:S,offset:((L=S.textContent)==null?void 0:L.length)??0}),!this._rowContainer.contains(f.node))return;const b=({node:M,offset:P})=>{const B=M instanceof Text?M.parentNode:M;let A=parseInt(B==null?void 0:B.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const F=this._rowColumns.get(B);if(!F)return console.warn("columns is null. Race condition?"),null;let U=P<F.length?F[P]:F.slice(-1)[0]+1;return U>=this._terminal.cols&&(++A,U=0),{row:A,column:U}},y=b(n),g=b(f);if(y&&g){if(y.row>g.row||y.row===g.row&&y.column>=g.column)throw new Error("invalid range");this._terminal.select(y.column,y.row,(g.row-y.row)*this._terminal.cols-y.column+g.column)}}_handleResize(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let n=this._rowContainer.children.length;n<this._terminal.rows;n++)this._rowElements[n]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[n]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const i=this._coreBrowserService.mainDocument.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}}_refreshRowDimensions(i){i.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=o=h([u(1,_.IInstantiationService),u(2,C.ICoreBrowserService),u(3,C.IRenderService)],o)},3614:(w,s)=>{function a(d){return d.replace(/\r?\n/g,"\r")}function h(d,m){return m?"\x1B[200~"+d+"\x1B[201~":d}function u(d,m,C,_){d=h(d=a(d),C.decPrivateModes.bracketedPasteMode&&_.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(d,!0),m.value=""}function l(d,m,C){const _=C.getBoundingClientRect(),r=d.clientX-_.left-10,o=d.clientY-_.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${r}px`,m.style.top=`${o}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=a,s.bracketTextForPaste=h,s.copyHandler=function(d,m){d.clipboardData&&d.clipboardData.setData("text/plain",m.selectionText),d.preventDefault()},s.handlePasteEvent=function(d,m,C,_){d.stopPropagation(),d.clipboardData&&u(d.clipboardData.getData("text/plain"),m,C,_)},s.paste=u,s.moveTextAreaUnderMouseCursor=l,s.rightClickHandler=function(d,m,C,_,r){l(d,m,C),r&&_.rightClickSelect(d),m.value=_.selectionText,m.select()}},7239:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const h=a(1505);s.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(u,l,d){this._css.set(u,l,d)}getCss(u,l){return this._css.get(u,l)}setColor(u,l,d){this._color.set(u,l,d)}getColor(u,l){return this._color.get(u,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,h,u,l){a.addEventListener(h,u,l);let d=!1;return{dispose:()=>{d||(d=!0,a.removeEventListener(h,u,l))}}}},3551:function(w,s,a){var h=this&&this.__decorate||function(o,i,n,f){var S,b=arguments.length,y=b<3?i:f===null?f=Object.getOwnPropertyDescriptor(i,n):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,i,n,f);else for(var g=o.length-1;g>=0;g--)(S=o[g])&&(y=(b<3?S(y):b>3?S(i,n,y):S(i,n))||y);return b>3&&y&&Object.defineProperty(i,n,y),y},u=this&&this.__param||function(o,i){return function(n,f){i(n,f,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier=void 0;const l=a(3656),d=a(8460),m=a(844),C=a(2585),_=a(4725);let r=s.Linkifier=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(o,i,n,f,S){super(),this._element=o,this._mouseService=i,this._renderService=n,this._bufferService=f,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new d.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new d.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{var b;this._lastMouseEvent=void 0,(b=this._activeProviderReplies)==null||b.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){this._lastMouseEvent=o;const i=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!i)return;this._isMouseOut=!1;const n=o.composedPath();for(let f=0;f<n.length;f++){const S=n[f];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._handleHover(i),this._lastBufferCell=i)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,i){var f,S;this._activeProviderReplies&&i||((f=this._activeProviderReplies)==null||f.forEach(b=>{b==null||b.forEach(y=>{y.link.dispose&&y.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let n=!1;for(const[b,y]of this._linkProviderService.linkProviders.entries())i?(S=this._activeProviderReplies)!=null&&S.get(b)&&(n=this._checkLinkProviderResult(b,o,n)):y.provideLinks(o.y,g=>{var M,P;if(this._isMouseOut)return;const L=g==null?void 0:g.map(B=>({link:B}));(M=this._activeProviderReplies)==null||M.set(b,L),n=this._checkLinkProviderResult(b,o,n),((P=this._activeProviderReplies)==null?void 0:P.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,i){const n=new Set;for(let f=0;f<i.size;f++){const S=i.get(f);if(S)for(let b=0;b<S.length;b++){const y=S[b],g=y.link.range.start.y<o?0:y.link.range.start.x,L=y.link.range.end.y>o?this._bufferService.cols:y.link.range.end.x;for(let M=g;M<=L;M++){if(n.has(M)){S.splice(b--,1);break}n.add(M)}}}}_checkLinkProviderResult(o,i,n){var b;if(!this._activeProviderReplies)return n;const f=this._activeProviderReplies.get(o);let S=!1;for(let y=0;y<o;y++)this._activeProviderReplies.has(y)&&!this._activeProviderReplies.get(y)||(S=!0);if(!S&&f){const y=f.find(g=>this._linkAtPosition(g.link,i));y&&(n=!0,this._handleNewLink(y))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let y=0;y<this._activeProviderReplies.size;y++){const g=(b=this._activeProviderReplies.get(y))==null?void 0:b.find(L=>this._linkAtPosition(L.link,i));if(g){n=!0,this._handleNewLink(g);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._currentLink)return;const i=this._positionFromMouseEvent(o,this._element,this._mouseService);i&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,i){this._currentLink&&this._lastMouseEvent&&(!o||!i||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._lastMouseEvent)return;const i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(o.link,i)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var n,f;return(f=(n=this._currentLink)==null?void 0:n.state)==null?void 0:f.decorations.pointerCursor},set:n=>{var f;(f=this._currentLink)!=null&&f.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>{var n,f;return(f=(n=this._currentLink)==null?void 0:n.state)==null?void 0:f.decorations.underline},set:n=>{var f,S,b;(f=this._currentLink)!=null&&f.state&&((b=(S=this._currentLink)==null?void 0:S.state)==null?void 0:b.decorations.underline)!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;const f=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(f,S),this._lastMouseEvent)){const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}})))}_linkHover(o,i,n){var f;(f=this._currentLink)!=null&&f.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(n,i.text)}_fireUnderlineEvent(o,i){const n=o.range,f=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-f-1,n.end.x,n.end.y-f-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(o,i,n){var f;(f=this._currentLink)!=null&&f.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(n,i.text)}_linkAtPosition(o,i){const n=o.range.start.y*this._bufferService.cols+o.range.start.x,f=o.range.end.y*this._bufferService.cols+o.range.end.x,S=i.y*this._bufferService.cols+i.x;return n<=S&&S<=f}_positionFromMouseEvent(o,i,n){const f=n.getCoords(o,i,this._bufferService.cols,this._bufferService.rows);if(f)return{x:f[0],y:f[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,i,n,f,S){return{x1:o,y1:i,x2:n,y2:f,cols:this._bufferService.cols,fg:S}}};s.Linkifier=r=h([u(1,_.IMouseService),u(2,_.IRenderService),u(3,C.IBufferService),u(4,_.ILinkProviderService)],r)},9042:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(w,s,a){var h=this&&this.__decorate||function(_,r,o,i){var n,f=arguments.length,S=f<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(_,r,o,i);else for(var b=_.length-1;b>=0;b--)(n=_[b])&&(S=(f<3?n(S):f>3?n(r,o,S):n(r,o))||S);return f>3&&S&&Object.defineProperty(r,o,S),S},u=this&&this.__param||function(_,r){return function(o,i){r(o,i,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const l=a(511),d=a(2585);let m=s.OscLinkProvider=class{constructor(_,r,o){this._bufferService=_,this._optionsService=r,this._oscLinkService=o}provideLinks(_,r){var L;const o=this._bufferService.buffer.lines.get(_-1);if(!o)return void r(void 0);const i=[],n=this._optionsService.rawOptions.linkHandler,f=new l.CellData,S=o.getTrimmedLength();let b=-1,y=-1,g=!1;for(let M=0;M<S;M++)if(y!==-1||o.hasContent(M)){if(o.loadCell(M,f),f.hasExtendedAttrs()&&f.extended.urlId){if(y===-1){y=M,b=f.extended.urlId;continue}g=f.extended.urlId!==b}else y!==-1&&(g=!0);if(g||y!==-1&&M===S-1){const P=(L=this._oscLinkService.getLinkData(b))==null?void 0:L.uri;if(P){const B={start:{x:y+1,y:_},end:{x:M+(g||M!==S-1?0:1),y:_}};let A=!1;if(!(n!=null&&n.allowNonHttpProtocols))try{const F=new URL(P);["http:","https:"].includes(F.protocol)||(A=!0)}catch{A=!0}A||i.push({text:P,range:B,activate:(F,U)=>n?n.activate(F,U,B):C(0,U),hover:(F,U)=>{var V;return(V=n==null?void 0:n.hover)==null?void 0:V.call(n,F,U,B)},leave:(F,U)=>{var V;return(V=n==null?void 0:n.leave)==null?void 0:V.call(n,F,U,B)}})}g=!1,f.hasExtendedAttrs()&&f.extended.urlId?(y=M,b=f.extended.urlId):(y=-1,b=-1)}}r(i)}};function C(_,r){if(confirm(`Do you want to navigate to ${r}?

WARNING: This link could potentially be dangerous`)){const o=window.open();if(o){try{o.opener=null}catch{}o.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=m=h([u(0,d.IBufferService),u(1,d.IOptionsService),u(2,d.IOscLinkService)],m)},6193:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(a,h){this._renderCallback=a,this._coreBrowserService=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,h,u){this._rowCount=u,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},3236:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const h=a(3614),u=a(3656),l=a(3551),d=a(9042),m=a(3730),C=a(1680),_=a(3107),r=a(5744),o=a(2950),i=a(1296),n=a(428),f=a(4269),S=a(5114),b=a(8934),y=a(3230),g=a(9312),L=a(4725),M=a(6731),P=a(8055),B=a(8969),A=a(8460),F=a(844),U=a(6114),V=a(8437),X=a(2584),z=a(7399),E=a(5941),R=a(9074),T=a(2585),I=a(5435),q=a(4567),ee=a(779);class ae extends B.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(H={}){super(H),this.browser=U,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new F.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(R.DecorationService),this._instantiationService.setService(T.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ee.LinkProviderService),this._instantiationService.setService(L.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((k,J)=>this.refresh(k,J))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(k=>this._reportWindowsOptions(k))),this.register(this._inputHandler.onColor(k=>this._handleColorEvent(k))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(k=>this._afterResize(k.cols,k.rows))),this.register((0,F.toDisposable)(()=>{var k,J;this._customKeyEventHandler=void 0,(J=(k=this.element)==null?void 0:k.parentNode)==null||J.removeChild(this.element)}))}_handleColorEvent(H){if(this._themeService)for(const k of H){let J,$="";switch(k.index){case 256:J="foreground",$="10";break;case 257:J="background",$="11";break;case 258:J="cursor",$="12";break;default:J="ansi",$="4;"+k.index}switch(k.type){case 0:const se=P.color.toColorRGB(J==="ansi"?this._themeService.colors.ansi[k.index]:this._themeService.colors[J]);this.coreService.triggerDataEvent(`${X.C0.ESC}]${$};${(0,E.toRgbString)(se)}${X.C1_ESCAPED.ST}`);break;case 1:if(J==="ansi")this._themeService.modifyColors(D=>D.ansi[k.index]=P.channels.toColor(...k.color));else{const D=J;this._themeService.modifyColors(O=>O[D]=P.channels.toColor(...k.color))}break;case 2:this._themeService.restoreColor(k.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(H){H?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(H){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(X.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var H;return(H=this.textarea)==null?void 0:H.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(X.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const H=this.buffer.ybase+this.buffer.y,k=this.buffer.lines.get(H);if(!k)return;const J=Math.min(this.buffer.x,this.cols-1),$=this._renderService.dimensions.css.cell.height,se=k.getWidth(J),D=this._renderService.dimensions.css.cell.width*se,O=this.buffer.y*this._renderService.dimensions.css.cell.height,W=J*this._renderService.dimensions.css.cell.width;this.textarea.style.left=W+"px",this.textarea.style.top=O+"px",this.textarea.style.width=D+"px",this.textarea.style.height=$+"px",this.textarea.style.lineHeight=$+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",k=>{this.hasSelection()&&(0,h.copyHandler)(k,this._selectionService)}));const H=k=>(0,h.handlePasteEvent)(k,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",H)),this.register((0,u.addDisposableDomListener)(this.element,"paste",H)),U.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",k=>{k.button===2&&(0,h.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",k=>{(0,h.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),U.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",k=>{k.button===1&&(0,h.moveTextAreaUnderMouseCursor)(k,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",H=>this._keyUp(H),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",H=>this._keyDown(H),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",H=>this._keyPress(H),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",H=>this._compositionHelper.compositionupdate(H))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",H=>this._inputEvent(H),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(H){var J;if(!H)throw new Error("Terminal requires a parent element.");if(H.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((J=this.element)==null?void 0:J.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=H.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),H.appendChild(this.element);const k=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),k.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",$=>this.updateCursorStyle($))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),k.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",d.promptLabel),U.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,H.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(L.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",$=>this._handleTextAreaFocus($))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(n.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(M.ThemeService),this._instantiationService.setService(L.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(y.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange($=>this._onRender.fire($))),this.onResize($=>this._renderService.resize($.cols,$.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(o.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(l.Linkifier,this.screenElement)),this.element.appendChild(k);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw($=>this._renderService.handleSelectionChanged($.start,$.end,$.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection($=>{this.textarea.value=$,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event($=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(_.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",$=>this._selectionService.handleMouseDown($))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",$=>this._handleScreenReaderModeOptionChange($))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(r.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",$=>{!this._overviewRulerRenderer&&$&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(r.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(i.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const H=this,k=this.element;function J(D){const O=H._mouseService.getMouseReportCoords(D,H.screenElement);if(!O)return!1;let W,j;switch(D.overrideType||D.type){case"mousemove":j=32,D.buttons===void 0?(W=3,D.button!==void 0&&(W=D.button<3?D.button:3)):W=1&D.buttons?0:4&D.buttons?1:2&D.buttons?2:3;break;case"mouseup":j=0,W=D.button<3?D.button:3;break;case"mousedown":j=1,W=D.button<3?D.button:3;break;case"wheel":if(H._customWheelEventHandler&&H._customWheelEventHandler(D)===!1||H.viewport.getLinesScrolled(D)===0)return!1;j=D.deltaY<0?0:1,W=4;break;default:return!1}return!(j===void 0||W===void 0||W>4)&&H.coreMouseService.triggerMouseEvent({col:O.col,row:O.row,x:O.x,y:O.y,button:W,action:j,ctrl:D.ctrlKey,alt:D.altKey,shift:D.shiftKey})}const $={mouseup:null,wheel:null,mousedrag:null,mousemove:null},se={mouseup:D=>(J(D),D.buttons||(this._document.removeEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.removeEventListener("mousemove",$.mousedrag)),this.cancel(D)),wheel:D=>(J(D),this.cancel(D,!0)),mousedrag:D=>{D.buttons&&J(D)},mousemove:D=>{D.buttons||J(D)}};this.register(this.coreMouseService.onProtocolChange(D=>{D?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(D)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&D?$.mousemove||(k.addEventListener("mousemove",se.mousemove),$.mousemove=se.mousemove):(k.removeEventListener("mousemove",$.mousemove),$.mousemove=null),16&D?$.wheel||(k.addEventListener("wheel",se.wheel,{passive:!1}),$.wheel=se.wheel):(k.removeEventListener("wheel",$.wheel),$.wheel=null),2&D?$.mouseup||($.mouseup=se.mouseup):(this._document.removeEventListener("mouseup",$.mouseup),$.mouseup=null),4&D?$.mousedrag||($.mousedrag=se.mousedrag):(this._document.removeEventListener("mousemove",$.mousedrag),$.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(k,"mousedown",D=>{if(D.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(D))return J(D),$.mouseup&&this._document.addEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.addEventListener("mousemove",$.mousedrag),this.cancel(D)})),this.register((0,u.addDisposableDomListener)(k,"wheel",D=>{if(!$.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(D)===!1)return!1;if(!this.buffer.hasScrollback){const O=this.viewport.getLinesScrolled(D);if(O===0)return;const W=X.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(D.deltaY<0?"A":"B");let j="";for(let K=0;K<Math.abs(O);K++)j+=W;return this.coreService.triggerDataEvent(j,!0),this.cancel(D,!0)}return this.viewport.handleWheel(D)?this.cancel(D):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(k,"touchstart",D=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(D),this.cancel(D)},{passive:!0})),this.register((0,u.addDisposableDomListener)(k,"touchmove",D=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(D)?void 0:this.cancel(D)},{passive:!1}))}refresh(H,k){var J;(J=this._renderService)==null||J.refreshRows(H,k)}updateCursorStyle(H){var k;(k=this._selectionService)!=null&&k.shouldColumnSelect(H)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(H,k,J=0){var $;J===1?(super.scrollLines(H,k,J),this.refresh(0,this.rows-1)):($=this.viewport)==null||$.scrollLines(H)}paste(H){(0,h.paste)(H,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(H){this._customKeyEventHandler=H}attachCustomWheelEventHandler(H){this._customWheelEventHandler=H}registerLinkProvider(H){return this._linkProviderService.registerLinkProvider(H)}registerCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const k=this._characterJoinerService.register(H);return this.refresh(0,this.rows-1),k}deregisterCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(H)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(H){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+H)}registerDecoration(H){return this._decorationService.registerDecoration(H)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(H,k,J){this._selectionService.setSelection(H,k,J)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var H;(H=this._selectionService)==null||H.clearSelection()}selectAll(){var H;(H=this._selectionService)==null||H.selectAll()}selectLines(H,k){var J;(J=this._selectionService)==null||J.selectLines(H,k)}_keyDown(H){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;const k=this.browser.isMac&&this.options.macOptionIsMeta&&H.altKey;if(!k&&!this._compositionHelper.keydown(H))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;k||H.key!=="Dead"&&H.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const J=(0,z.evaluateKeyboardEvent)(H,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(H),J.type===3||J.type===2){const $=this.rows-1;return this.scrollLines(J.type===2?-$:$),this.cancel(H,!0)}return J.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,H)||(J.cancel&&this.cancel(H,!0),!J.key||!!(H.key&&!H.ctrlKey&&!H.altKey&&!H.metaKey&&H.key.length===1&&H.key.charCodeAt(0)>=65&&H.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(J.key!==X.C0.ETX&&J.key!==X.C0.CR||(this.textarea.value=""),this._onKey.fire({key:J.key,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(J.key,!0),!this.optionsService.rawOptions.screenReaderMode||H.altKey||H.ctrlKey?this.cancel(H,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(H,k){const J=H.isMac&&!this.options.macOptionIsMeta&&k.altKey&&!k.ctrlKey&&!k.metaKey||H.isWindows&&k.altKey&&k.ctrlKey&&!k.metaKey||H.isWindows&&k.getModifierState("AltGraph");return k.type==="keypress"?J:J&&(!k.keyCode||k.keyCode>47)}_keyUp(H){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1||(function(k){return k.keyCode===16||k.keyCode===17||k.keyCode===18}(H)||this.focus(),this.updateCursorStyle(H),this._keyPressHandled=!1)}_keyPress(H){let k;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;if(this.cancel(H),H.charCode)k=H.charCode;else if(H.which===null||H.which===void 0)k=H.keyCode;else{if(H.which===0||H.charCode===0)return!1;k=H.which}return!(!k||(H.altKey||H.ctrlKey||H.metaKey)&&!this._isThirdLevelShift(this.browser,H)||(k=String.fromCharCode(k),this._onKey.fire({key:k,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(k,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(H){if(H.data&&H.inputType==="insertText"&&(!H.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const k=H.data;return this.coreService.triggerDataEvent(k,!0),this.cancel(H),!0}return!1}resize(H,k){H!==this.cols||k!==this.rows?super.resize(H,k):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(H,k){var J,$;(J=this._charSizeService)==null||J.measure(),($=this.viewport)==null||$.syncScrollArea(!0)}clear(){var H;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let k=1;k<this.rows;k++)this.buffer.lines.push(this.buffer.getBlankLine(V.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(H=this.viewport)==null||H.reset(),this.refresh(0,this.rows-1)}}reset(){var k,J;this.options.rows=this.rows,this.options.cols=this.cols;const H=this._customKeyEventHandler;this._setup(),super.reset(),(k=this._selectionService)==null||k.reset(),this._decorationService.reset(),(J=this.viewport)==null||J.reset(),this._customKeyEventHandler=H,this.refresh(0,this.rows-1)}clearTextureAtlas(){var H;(H=this._renderService)==null||H.clearTextureAtlas()}_reportFocus(){var H;(H=this.element)!=null&&H.classList.contains("focus")?this.coreService.triggerDataEvent(X.C0.ESC+"[I"):this.coreService.triggerDataEvent(X.C0.ESC+"[O")}_reportWindowsOptions(H){if(this._renderService)switch(H){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const k=this._renderService.dimensions.css.canvas.width.toFixed(0),J=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${X.C0.ESC}[4;${J};${k}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const $=this._renderService.dimensions.css.cell.width.toFixed(0),se=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${X.C0.ESC}[6;${se};${$}t`)}}cancel(H,k){if(this.options.cancelEvents||k)return H.preventDefault(),H.stopPropagation(),!1}}s.Terminal=ae},9924:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(a,h=1e3){this._renderCallback=a,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,h,u){this._rowCount=u,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const d=l-this._lastRefreshMs,m=this._debounceThresholdMS-d;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h)}}},1680:function(w,s,a){var h=this&&this.__decorate||function(o,i,n,f){var S,b=arguments.length,y=b<3?i:f===null?f=Object.getOwnPropertyDescriptor(i,n):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,i,n,f);else for(var g=o.length-1;g>=0;g--)(S=o[g])&&(y=(b<3?S(y):b>3?S(i,n,y):S(i,n))||y);return b>3&&y&&Object.defineProperty(i,n,y),y},u=this&&this.__param||function(o,i){return function(n,f){i(n,f,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const l=a(3656),d=a(4725),m=a(8460),C=a(844),_=a(2585);let r=s.Viewport=class extends C.Disposable{constructor(o,i,n,f,S,b,y,g){super(),this._viewportElement=o,this._scrollArea=i,this._bufferService=n,this._optionsService=f,this._charSizeService=S,this._renderService=b,this._coreBrowserService=y,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(L=>this._renderDimensions=L)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(L=>this._handleThemeChange(L))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(o){this._viewportElement.style.backgroundColor=o.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(o){if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const i=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==i&&(this._lastRecordedBufferHeight=i,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const o=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==o&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=o),this._refreshAnimationFrame=null}syncScrollArea(o=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(o)}_handleScroll(o){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:i,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const o=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(o*(this._smoothScrollState.target-this._smoothScrollState.origin)),o<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(o,i){const n=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&n<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)}handleWheel(o){const i=this._getPixelsScrolled(o);return i!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+i:this._smoothScrollState.target+=i,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=i,this._bubbleScroll(o,i))}scrollLines(o){if(o!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const i=o*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+i,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!1})}_getPixelsScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let i=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i}getBufferElements(o,i){var g;let n,f="";const S=[],b=i??this._bufferService.buffer.lines.length,y=this._bufferService.buffer.lines;for(let L=o;L<b;L++){const M=y.get(L);if(!M)continue;const P=(g=y.get(L+1))==null?void 0:g.isWrapped;if(f+=M.translateToString(!P),!P||L===y.length-1){const B=document.createElement("div");B.textContent=f,S.push(B),f.length>0&&(n=B),f=""}}return{bufferElements:S,cursorElement:n}}getLinesScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let i=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i}_applyScrollModifier(o,i){const n=this._optionsService.rawOptions.fastScrollModifier;return n==="alt"&&i.altKey||n==="ctrl"&&i.ctrlKey||n==="shift"&&i.shiftKey?o*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:o*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(o){this._lastTouchY=o.touches[0].pageY}handleTouchMove(o){const i=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(o,i))}};s.Viewport=r=h([u(2,_.IBufferService),u(3,_.IOptionsService),u(4,d.ICharSizeService),u(5,d.IRenderService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],r)},3107:function(w,s,a){var h=this&&this.__decorate||function(_,r,o,i){var n,f=arguments.length,S=f<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(_,r,o,i);else for(var b=_.length-1;b>=0;b--)(n=_[b])&&(S=(f<3?n(S):f>3?n(r,o,S):n(r,o))||S);return f>3&&S&&Object.defineProperty(r,o,S),S},u=this&&this.__param||function(_,r){return function(o,i){r(o,i,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const l=a(4725),d=a(844),m=a(2585);let C=s.BufferDecorationRenderer=class extends d.Disposable{constructor(_,r,o,i,n){super(),this._screenElement=_,this._bufferService=r,this._coreBrowserService=o,this._decorationService=i,this._renderService=n,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(f=>this._removeDecoration(f))),this.register((0,d.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const _ of this._decorationService.decorations)this._renderDecoration(_);this._dimensionsChanged=!1}_renderDecoration(_){this._refreshStyle(_),this._dimensionsChanged&&this._refreshXPosition(_)}_createElement(_){var i;const r=this._coreBrowserService.mainDocument.createElement("div");r.classList.add("xterm-decoration"),r.classList.toggle("xterm-decoration-top-layer",((i=_==null?void 0:_.options)==null?void 0:i.layer)==="top"),r.style.width=`${Math.round((_.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,r.style.height=(_.options.height||1)*this._renderService.dimensions.css.cell.height+"px",r.style.top=(_.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",r.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const o=_.options.x??0;return o&&o>this._bufferService.cols&&(r.style.display="none"),this._refreshXPosition(_,r),r}_refreshStyle(_){const r=_.marker.line-this._bufferService.buffers.active.ydisp;if(r<0||r>=this._bufferService.rows)_.element&&(_.element.style.display="none",_.onRenderEmitter.fire(_.element));else{let o=this._decorationElements.get(_);o||(o=this._createElement(_),_.element=o,this._decorationElements.set(_,o),this._container.appendChild(o),_.onDispose(()=>{this._decorationElements.delete(_),o.remove()})),o.style.top=r*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",_.onRenderEmitter.fire(o)}}_refreshXPosition(_,r=_.element){if(!r)return;const o=_.options.x??0;(_.options.anchor||"left")==="right"?r.style.right=o?o*this._renderService.dimensions.css.cell.width+"px":"":r.style.left=o?o*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(_){var r;(r=this._decorationElements.get(_))==null||r.remove(),this._decorationElements.delete(_),_.dispose()}};s.BufferDecorationRenderer=C=h([u(1,m.IBufferService),u(2,l.ICoreBrowserService),u(3,m.IDecorationService),u(4,l.IRenderService)],C)},5871:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const h of this._zones)if(h.color===a.options.overviewRulerOptions.color&&h.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,a.marker.line))return;if(this._lineAdjacentToZone(h,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(h,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,h){return h>=a.startBufferLine&&h<=a.endBufferLine}_lineAdjacentToZone(a,h,u){return h>=a.startBufferLine-this._linePadding[u||"full"]&&h<=a.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(a,h){a.startBufferLine=Math.min(a.startBufferLine,h),a.endBufferLine=Math.max(a.endBufferLine,h)}}},5744:function(w,s,a){var h=this&&this.__decorate||function(n,f,S,b){var y,g=arguments.length,L=g<3?f:b===null?b=Object.getOwnPropertyDescriptor(f,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(n,f,S,b);else for(var M=n.length-1;M>=0;M--)(y=n[M])&&(L=(g<3?y(L):g>3?y(f,S,L):y(f,S))||L);return g>3&&L&&Object.defineProperty(f,S,L),L},u=this&&this.__param||function(n,f){return function(S,b){f(S,b,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const l=a(5871),d=a(4725),m=a(844),C=a(2585),_={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let i=s.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(n,f,S,b,y,g,L){var P;super(),this._viewportElement=n,this._screenElement=f,this._bufferService=S,this._decorationService=b,this._renderService=y,this._optionsService=g,this._coreBrowserService=L,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(P=this._viewportElement.parentElement)==null||P.insertBefore(this._canvas,this._viewportElement);const M=this._canvas.getContext("2d");if(!M)throw new Error("Ctx cannot be null");this._ctx=M,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{var B;(B=this._canvas)==null||B.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const n=Math.floor(this._canvas.width/3),f=Math.ceil(this._canvas.width/3);r.full=this._canvas.width,r.left=n,r.center=f,r.right=n,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=r.left,o.right=r.left+r.center}_refreshDrawHeightConstants(){_.full=Math.round(2*this._coreBrowserService.dpr);const n=this._canvas.height/this._bufferService.buffer.lines.length,f=Math.round(Math.max(Math.min(n,12),6)*this._coreBrowserService.dpr);_.left=f,_.center=f,_.right=f}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const f of this._decorationService.decorations)this._colorZoneStore.addDecoration(f);this._ctx.lineWidth=1;const n=this._colorZoneStore.zones;for(const f of n)f.position!=="full"&&this._renderColorZone(f);for(const f of n)f.position==="full"&&this._renderColorZone(f);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(n){this._ctx.fillStyle=n.color,this._ctx.fillRect(o[n.position||"full"],Math.round((this._canvas.height-1)*(n.startBufferLine/this._bufferService.buffers.active.lines.length)-_[n.position||"full"]/2),r[n.position||"full"],Math.round((this._canvas.height-1)*((n.endBufferLine-n.startBufferLine)/this._bufferService.buffers.active.lines.length)+_[n.position||"full"]))}_queueRefresh(n,f){this._shouldUpdateDimensions=n||this._shouldUpdateDimensions,this._shouldUpdateAnchor=f||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=i=h([u(2,C.IBufferService),u(3,C.IDecorationService),u(4,d.IRenderService),u(5,C.IOptionsService),u(6,d.ICoreBrowserService)],i)},2950:function(w,s,a){var h=this&&this.__decorate||function(_,r,o,i){var n,f=arguments.length,S=f<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(_,r,o,i);else for(var b=_.length-1;b>=0;b--)(n=_[b])&&(S=(f<3?n(S):f>3?n(r,o,S):n(r,o))||S);return f>3&&S&&Object.defineProperty(r,o,S),S},u=this&&this.__param||function(_,r){return function(o,i){r(o,i,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const l=a(4725),d=a(2585),m=a(2584);let C=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(_,r,o,i,n,f){this._textarea=_,this._compositionView=r,this._bufferService=o,this._optionsService=i,this._coreService=n,this._renderService=f,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(_){this._compositionView.textContent=_.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(_){if(this._isComposing||this._isSendingComposition){if(_.keyCode===229||_.keyCode===16||_.keyCode===17||_.keyCode===18)return!1;this._finalizeComposition(!1)}return _.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(_){if(this._compositionView.classList.remove("active"),this._isComposing=!1,_){const r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let o;this._isSendingComposition=!1,r.start+=this._dataAlreadySent.length,o=this._isComposing?this._textarea.value.substring(r.start,r.end):this._textarea.value.substring(r.start),o.length>0&&this._coreService.triggerDataEvent(o,!0)}},0)}else{this._isSendingComposition=!1;const r=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(r,!0)}}_handleAnyTextareaChanges(){const _=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const r=this._textarea.value,o=r.replace(_,"");this._dataAlreadySent=o,r.length>_.length?this._coreService.triggerDataEvent(o,!0):r.length<_.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):r.length===_.length&&r!==_&&this._coreService.triggerDataEvent(r,!0)}},0)}updateCompositionElements(_){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,n=r*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=n+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const f=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(f.width,1)+"px",this._textarea.style.height=Math.max(f.height,1)+"px",this._textarea.style.lineHeight=f.height+"px"}_||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=C=h([u(2,d.IBufferService),u(3,d.IOptionsService),u(4,d.ICoreService),u(5,l.IRenderService)],C)},9806:(w,s)=>{function a(h,u,l){const d=l.getBoundingClientRect(),m=h.getComputedStyle(l),C=parseInt(m.getPropertyValue("padding-left")),_=parseInt(m.getPropertyValue("padding-top"));return[u.clientX-d.left-C,u.clientY-d.top-_]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=a,s.getCoords=function(h,u,l,d,m,C,_,r,o){if(!C)return;const i=a(h,u,l);return i?(i[0]=Math.ceil((i[0]+(o?_/2:0))/_),i[1]=Math.ceil(i[1]/r),i[0]=Math.min(Math.max(i[0],1),d+(o?1:0)),i[1]=Math.min(Math.max(i[1],1),m),i):void 0}},9504:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const h=a(2584);function u(r,o,i,n){const f=r-l(r,i),S=o-l(o,i),b=Math.abs(f-S)-function(y,g,L){let M=0;const P=y-l(y,L),B=g-l(g,L);for(let A=0;A<Math.abs(P-B);A++){const F=d(y,g)==="A"?-1:1,U=L.buffer.lines.get(P+F*A);U!=null&&U.isWrapped&&M++}return M}(r,o,i);return _(b,C(d(r,o),n))}function l(r,o){let i=0,n=o.buffer.lines.get(r),f=n==null?void 0:n.isWrapped;for(;f&&r>=0&&r<o.rows;)i++,n=o.buffer.lines.get(--r),f=n==null?void 0:n.isWrapped;return i}function d(r,o){return r>o?"A":"B"}function m(r,o,i,n,f,S){let b=r,y=o,g="";for(;b!==i||y!==n;)b+=f?1:-1,f&&b>S.cols-1?(g+=S.buffer.translateBufferLineToString(y,!1,r,b),b=0,r=0,y++):!f&&b<0&&(g+=S.buffer.translateBufferLineToString(y,!1,0,r+1),b=S.cols-1,r=b,y--);return g+S.buffer.translateBufferLineToString(y,!1,r,b)}function C(r,o){const i=o?"O":"[";return h.C0.ESC+i+r}function _(r,o){r=Math.floor(r);let i="";for(let n=0;n<r;n++)i+=o;return i}s.moveToCellSequence=function(r,o,i,n){const f=i.buffer.x,S=i.buffer.y;if(!i.buffer.hasScrollback)return function(g,L,M,P,B,A){return u(L,P,B,A).length===0?"":_(m(g,L,g,L-l(L,B),!1,B).length,C("D",A))}(f,S,0,o,i,n)+u(S,o,i,n)+function(g,L,M,P,B,A){let F;F=u(L,P,B,A).length>0?P-l(P,B):L;const U=P,V=function(X,z,E,R,T,I){let q;return q=u(E,R,T,I).length>0?R-l(R,T):z,X<E&&q<=R||X>=E&&q<R?"C":"D"}(g,L,M,P,B,A);return _(m(g,F,M,U,V==="C",B).length,C(V,A))}(f,S,r,o,i,n);let b;if(S===o)return b=f>r?"D":"C",_(Math.abs(f-r),C(b,n));b=S>o?"D":"C";const y=Math.abs(S-o);return _(function(g,L){return L.cols-g}(S>o?r:f,i)+(y-1)*i.cols+1+((S>o?f:r)-1),C(b,n))}},1296:function(w,s,a){var h=this&&this.__decorate||function(A,F,U,V){var X,z=arguments.length,E=z<3?F:V===null?V=Object.getOwnPropertyDescriptor(F,U):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(A,F,U,V);else for(var R=A.length-1;R>=0;R--)(X=A[R])&&(E=(z<3?X(E):z>3?X(F,U,E):X(F,U))||E);return z>3&&E&&Object.defineProperty(F,U,E),E},u=this&&this.__param||function(A,F){return function(U,V){F(U,V,A)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const l=a(3787),d=a(2550),m=a(2223),C=a(6171),_=a(6052),r=a(4725),o=a(8055),i=a(8460),n=a(844),f=a(2585),S="xterm-dom-renderer-owner-",b="xterm-rows",y="xterm-fg-",g="xterm-bg-",L="xterm-focus",M="xterm-selection";let P=1,B=s.DomRenderer=class extends n.Disposable{constructor(A,F,U,V,X,z,E,R,T,I,q,ee,ae){super(),this._terminal=A,this._document=F,this._element=U,this._screenElement=V,this._viewportElement=X,this._helperContainer=z,this._linkifier2=E,this._charSizeService=T,this._optionsService=I,this._bufferService=q,this._coreBrowserService=ee,this._themeService=ae,this._terminalClass=P++,this._rowElements=[],this._selectionRenderModel=(0,_.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new i.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(M),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(le=>this._injectCss(le))),this._injectCss(this._themeService.colors),this._rowFactory=R.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(le=>this._handleLinkHover(le))),this.register(this._linkifier2.onHideLinkUnderline(le=>this._handleLinkLeave(le))),this.register((0,n.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new d.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const U of this._rowElements)U.style.width=`${this.dimensions.css.canvas.width}px`,U.style.height=`${this.dimensions.css.cell.height}px`,U.style.lineHeight=`${this.dimensions.css.cell.height}px`,U.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const F=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=F,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let F=`${this._terminalSelector} .${b} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;F+=`${this._terminalSelector} .${b} .xterm-dim { color: ${o.color.multiplyOpacity(A.foreground,.5).css};}`,F+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const U=`blink_underline_${this._terminalClass}`,V=`blink_bar_${this._terminalClass}`,X=`blink_block_${this._terminalClass}`;F+=`@keyframes ${U} { 50% {  border-bottom-style: hidden; }}`,F+=`@keyframes ${V} { 50% {  box-shadow: none; }}`,F+=`@keyframes ${X} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,F+=`${this._terminalSelector} .${b}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${U} 1s step-end infinite;}${this._terminalSelector} .${b}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${V} 1s step-end infinite;}${this._terminalSelector} .${b}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,F+=`${this._terminalSelector} .${M} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${M} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${M} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[z,E]of A.ansi.entries())F+=`${this._terminalSelector} .${y}${z} { color: ${E.css}; }${this._terminalSelector} .${y}${z}.xterm-dim { color: ${o.color.multiplyOpacity(E,.5).css}; }${this._terminalSelector} .${g}${z} { background-color: ${E.css}; }`;F+=`${this._terminalSelector} .${y}${m.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(A.background).css}; }${this._terminalSelector} .${y}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${g}${m.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=F}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,F){for(let U=this._rowElements.length;U<=F;U++){const V=this._document.createElement("div");this._rowContainer.appendChild(V),this._rowElements.push(V)}for(;this._rowElements.length>F;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,F){this._refreshRowElements(A,F),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(L),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(L),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,F,U){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,F,U),this.renderRows(0,this._bufferService.rows-1),!A||!F)return;this._selectionRenderModel.update(this._terminal,A,F,U);const V=this._selectionRenderModel.viewportStartRow,X=this._selectionRenderModel.viewportEndRow,z=this._selectionRenderModel.viewportCappedStartRow,E=this._selectionRenderModel.viewportCappedEndRow;if(z>=this._bufferService.rows||E<0)return;const R=this._document.createDocumentFragment();if(U){const T=A[0]>F[0];R.appendChild(this._createSelectionElement(z,T?F[0]:A[0],T?A[0]:F[0],E-z+1))}else{const T=V===z?A[0]:0,I=z===X?F[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(z,T,I));const q=E-z-1;if(R.appendChild(this._createSelectionElement(z+1,0,this._bufferService.cols,q)),z!==E){const ee=X===E?F[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(E,0,ee))}}this._selectionContainer.appendChild(R)}_createSelectionElement(A,F,U,V=1){const X=this._document.createElement("div"),z=F*this.dimensions.css.cell.width;let E=this.dimensions.css.cell.width*(U-F);return z+E>this.dimensions.css.canvas.width&&(E=this.dimensions.css.canvas.width-z),X.style.height=V*this.dimensions.css.cell.height+"px",X.style.top=A*this.dimensions.css.cell.height+"px",X.style.left=`${z}px`,X.style.width=`${E}px`,X}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,F){const U=this._bufferService.buffer,V=U.ybase+U.y,X=Math.min(U.x,this._bufferService.cols-1),z=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,R=this._optionsService.rawOptions.cursorInactiveStyle;for(let T=A;T<=F;T++){const I=T+U.ydisp,q=this._rowElements[T],ee=U.lines.get(I);if(!q||!ee)break;q.replaceChildren(...this._rowFactory.createRow(ee,I,I===V,E,R,X,z,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,F,U,V,X,z){U<0&&(A=0),V<0&&(F=0);const E=this._bufferService.rows-1;U=Math.max(Math.min(U,E),0),V=Math.max(Math.min(V,E),0),X=Math.min(X,this._bufferService.cols);const R=this._bufferService.buffer,T=R.ybase+R.y,I=Math.min(R.x,X-1),q=this._optionsService.rawOptions.cursorBlink,ee=this._optionsService.rawOptions.cursorStyle,ae=this._optionsService.rawOptions.cursorInactiveStyle;for(let le=U;le<=V;++le){const H=le+R.ydisp,k=this._rowElements[le],J=R.lines.get(H);if(!k||!J)break;k.replaceChildren(...this._rowFactory.createRow(J,H,H===T,ee,ae,I,q,this.dimensions.css.cell.width,this._widthCache,z?le===U?A:0:-1,z?(le===V?F:X)-1:-1))}}};s.DomRenderer=B=h([u(7,f.IInstantiationService),u(8,r.ICharSizeService),u(9,f.IOptionsService),u(10,f.IBufferService),u(11,r.ICoreBrowserService),u(12,r.IThemeService)],B)},3787:function(w,s,a){var h=this&&this.__decorate||function(b,y,g,L){var M,P=arguments.length,B=P<3?y:L===null?L=Object.getOwnPropertyDescriptor(y,g):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(b,y,g,L);else for(var A=b.length-1;A>=0;A--)(M=b[A])&&(B=(P<3?M(B):P>3?M(y,g,B):M(y,g))||B);return P>3&&B&&Object.defineProperty(y,g,B),B},u=this&&this.__param||function(b,y){return function(g,L){y(g,L,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const l=a(2223),d=a(643),m=a(511),C=a(2585),_=a(8055),r=a(4725),o=a(4269),i=a(6171),n=a(3734);let f=s.DomRendererRowFactory=class{constructor(b,y,g,L,M,P,B){this._document=b,this._characterJoinerService=y,this._optionsService=g,this._coreBrowserService=L,this._coreService=M,this._decorationService=P,this._themeService=B,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,y,g){this._selectionStart=b,this._selectionEnd=y,this._columnSelectMode=g}createRow(b,y,g,L,M,P,B,A,F,U,V){const X=[],z=this._characterJoinerService.getJoinedCharacters(y),E=this._themeService.colors;let R,T=b.getNoBgTrimmedLength();g&&T<P+1&&(T=P+1);let I=0,q="",ee=0,ae=0,le=0,H=!1,k=0,J=!1,$=0;const se=[],D=U!==-1&&V!==-1;for(let O=0;O<T;O++){b.loadCell(O,this._workCell);let W=this._workCell.getWidth();if(W===0)continue;let j=!1,K=O,N=this._workCell;if(z.length>0&&O===z[0][0]){j=!0;const de=z.shift();N=new o.JoinedCellData(this._workCell,b.translateToString(!0,de[0],de[1]),de[1]-de[0]),K=de[1]-1,W=N.getWidth()}const te=this._isCellInSelection(O,y),Z=g&&O===P,Y=D&&O>=U&&O<=V;let G=!1;this._decorationService.forEachDecorationAtCell(O,y,void 0,de=>{G=!0});let oe=N.getChars()||d.WHITESPACE_CELL_CHAR;if(oe===" "&&(N.isUnderline()||N.isOverline())&&(oe=""),$=W*A-F.get(oe,N.isBold(),N.isItalic()),R){if(I&&(te&&J||!te&&!J&&N.bg===ee)&&(te&&J&&E.selectionForeground||N.fg===ae)&&N.extended.ext===le&&Y===H&&$===k&&!Z&&!j&&!G){N.isInvisible()?q+=d.WHITESPACE_CELL_CHAR:q+=oe,I++;continue}I&&(R.textContent=q),R=this._document.createElement("span"),I=0,q=""}else R=this._document.createElement("span");if(ee=N.bg,ae=N.fg,le=N.extended.ext,H=Y,k=$,J=te,j&&P>=O&&P<=K&&(P=O),!this._coreService.isCursorHidden&&Z&&this._coreService.isCursorInitialized){if(se.push("xterm-cursor"),this._coreBrowserService.isFocused)B&&se.push("xterm-cursor-blink"),se.push(L==="bar"?"xterm-cursor-bar":L==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(M)switch(M){case"outline":se.push("xterm-cursor-outline");break;case"block":se.push("xterm-cursor-block");break;case"bar":se.push("xterm-cursor-bar");break;case"underline":se.push("xterm-cursor-underline")}}if(N.isBold()&&se.push("xterm-bold"),N.isItalic()&&se.push("xterm-italic"),N.isDim()&&se.push("xterm-dim"),q=N.isInvisible()?d.WHITESPACE_CELL_CHAR:N.getChars()||d.WHITESPACE_CELL_CHAR,N.isUnderline()&&(se.push(`xterm-underline-${N.extended.underlineStyle}`),q===" "&&(q=""),!N.isUnderlineColorDefault()))if(N.isUnderlineColorRGB())R.style.textDecorationColor=`rgb(${n.AttributeData.toColorRGB(N.getUnderlineColor()).join(",")})`;else{let de=N.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&N.isBold()&&de<8&&(de+=8),R.style.textDecorationColor=E.ansi[de].css}N.isOverline()&&(se.push("xterm-overline"),q===" "&&(q="")),N.isStrikethrough()&&se.push("xterm-strikethrough"),Y&&(R.style.textDecoration="underline");let Q=N.getFgColor(),ie=N.getFgColorMode(),re=N.getBgColor(),ue=N.getBgColorMode();const _e=!!N.isInverse();if(_e){const de=Q;Q=re,re=de;const ht=ie;ie=ue,ue=ht}let fe,we,be,Ee=!1;switch(this._decorationService.forEachDecorationAtCell(O,y,void 0,de=>{de.options.layer!=="top"&&Ee||(de.backgroundColorRGB&&(ue=50331648,re=de.backgroundColorRGB.rgba>>8&16777215,fe=de.backgroundColorRGB),de.foregroundColorRGB&&(ie=50331648,Q=de.foregroundColorRGB.rgba>>8&16777215,we=de.foregroundColorRGB),Ee=de.options.layer==="top")}),!Ee&&te&&(fe=this._coreBrowserService.isFocused?E.selectionBackgroundOpaque:E.selectionInactiveBackgroundOpaque,re=fe.rgba>>8&16777215,ue=50331648,Ee=!0,E.selectionForeground&&(ie=50331648,Q=E.selectionForeground.rgba>>8&16777215,we=E.selectionForeground)),Ee&&se.push("xterm-decoration-top"),ue){case 16777216:case 33554432:be=E.ansi[re],se.push(`xterm-bg-${re}`);break;case 50331648:be=_.channels.toColor(re>>16,re>>8&255,255&re),this._addStyle(R,`background-color:#${S((re>>>0).toString(16),"0",6)}`);break;default:_e?(be=E.foreground,se.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):be=E.background}switch(fe||N.isDim()&&(fe=_.color.multiplyOpacity(be,.5)),ie){case 16777216:case 33554432:N.isBold()&&Q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Q+=8),this._applyMinimumContrast(R,be,E.ansi[Q],N,fe,void 0)||se.push(`xterm-fg-${Q}`);break;case 50331648:const de=_.channels.toColor(Q>>16&255,Q>>8&255,255&Q);this._applyMinimumContrast(R,be,de,N,fe,we)||this._addStyle(R,`color:#${S(Q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(R,be,E.foreground,N,fe,we)||_e&&se.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}se.length&&(R.className=se.join(" "),se.length=0),Z||j||G?R.textContent=q:I++,$!==this.defaultSpacing&&(R.style.letterSpacing=`${$}px`),X.push(R),O=K}return R&&I&&(R.textContent=q),X}_applyMinimumContrast(b,y,g,L,M,P){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,i.treatGlyphAsBackgroundColor)(L.getCode()))return!1;const B=this._getContrastCache(L);let A;if(M||P||(A=B.getColor(y.rgba,g.rgba)),A===void 0){const F=this._optionsService.rawOptions.minimumContrastRatio/(L.isDim()?2:1);A=_.color.ensureContrastRatio(M||y,P||g,F),B.setColor((M||y).rgba,(P||g).rgba,A??null)}return!!A&&(this._addStyle(b,`color:${A.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,y){b.setAttribute("style",`${b.getAttribute("style")||""}${y};`)}_isCellInSelection(b,y){const g=this._selectionStart,L=this._selectionEnd;return!(!g||!L)&&(this._columnSelectMode?g[0]<=L[0]?b>=g[0]&&y>=g[1]&&b<L[0]&&y<=L[1]:b<g[0]&&y>=g[1]&&b>=L[0]&&y<=L[1]:y>g[1]&&y<L[1]||g[1]===L[1]&&y===g[1]&&b>=g[0]&&b<L[0]||g[1]<L[1]&&y===L[1]&&b<L[0]||g[1]<L[1]&&y===g[1]&&b>=g[0])}};function S(b,y,g){for(;b.length<g;)b=y+b;return b}s.DomRendererRowFactory=f=h([u(1,r.ICharacterJoinerService),u(2,C.IOptionsService),u(3,r.ICoreBrowserService),u(4,C.ICoreService),u(5,C.IDecorationService),u(6,r.IThemeService)],f)},2550:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(a,h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=a.createElement("span");u.classList.add("xterm-char-measure-element");const l=a.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold";const d=a.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontStyle="italic";const m=a.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[u,l,d,m],this._container.appendChild(u),this._container.appendChild(l),this._container.appendChild(d),this._container.appendChild(m),h.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,h,u,l){a===this._font&&h===this._fontSize&&u===this._weight&&l===this._weightBold||(this._font=a,this._fontSize=h,this._weight=u,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(a,h,u){let l=0;if(!h&&!u&&a.length===1&&(l=a.charCodeAt(0))<256){if(this._flat[l]!==-9999)return this._flat[l];const C=this._measure(a,0);return C>0&&(this._flat[l]=C),C}let d=a;h&&(d+="B"),u&&(d+="I");let m=this._holey.get(d);if(m===void 0){let C=0;h&&(C|=1),u&&(C|=2),m=this._measure(a,C),m>0&&this._holey.set(d,m)}return m}_measure(a,h){const u=this._measureElements[h];return u.textContent=a.repeat(32),u.offsetWidth/32}}},2223:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const h=a(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(w,s)=>{function a(u){return 57508<=u&&u<=57558}function h(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(s,"__esModule",{value:!0}),s.computeNextVariantOffset=s.createRenderDimensions=s.treatGlyphAsBackgroundColor=s.allowRescaling=s.isEmoji=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},s.isEmoji=h,s.allowRescaling=function(u,l,d,m){return l===1&&d>Math.ceil(1.5*m)&&u!==void 0&&u>255&&!h(u)&&!a(u)&&!function(C){return 57344<=C&&C<=63743}(u)},s.treatGlyphAsBackgroundColor=function(u){return a(u)||function(l){return 9472<=l&&l<=9631}(u)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},s.computeNextVariantOffset=function(u,l,d=0){return(u-(2*Math.round(l)-d))%(2*Math.round(l))}},6052:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,l,d,m=!1){if(this.selectionStart=l,this.selectionEnd=d,!l||!d||l[0]===d[0]&&l[1]===d[1])return void this.clear();const C=u.buffers.active.ydisp,_=l[1]-C,r=d[1]-C,o=Math.max(_,0),i=Math.min(r,u.rows-1);o>=u.rows||i<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=_,this.viewportEndRow=r,this.viewportCappedStartRow=o,this.viewportCappedEndRow=i,this.startCol=l[0],this.endCol=d[0])}isCellSelected(u,l,d){return!!this.hasSelection&&(d-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?l>=this.startCol&&d>=this.viewportCappedStartRow&&l<this.endCol&&d<=this.viewportCappedEndRow:l<this.startCol&&d>=this.viewportCappedStartRow&&l>=this.endCol&&d<=this.viewportCappedEndRow:d>this.viewportStartRow&&d<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&d===this.viewportStartRow&&l>=this.startCol&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&d===this.viewportEndRow&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&d===this.viewportStartRow&&l>=this.startCol)}}s.createSelectionRenderModel=function(){return new a}},456:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,h=this.selectionEnd;return!(!a||!h)&&(a[1]>h[1]||a[1]===h[1]&&a[0]>h[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(w,s,a){var h=this&&this.__decorate||function(i,n,f,S){var b,y=arguments.length,g=y<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(i,n,f,S);else for(var L=i.length-1;L>=0;L--)(b=i[L])&&(g=(y<3?b(g):y>3?b(n,f,g):b(n,f))||g);return y>3&&g&&Object.defineProperty(n,f,g),g},u=this&&this.__param||function(i,n){return function(f,S){n(f,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const l=a(2585),d=a(8460),m=a(844);let C=s.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(i,n,f){super(),this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=this.register(new d.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new o(this._optionsService))}catch{this._measureStrategy=this.register(new r(i,n,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const i=this._measureStrategy.measure();i.width===this.width&&i.height===this.height||(this.width=i.width,this.height=i.height,this._onCharSizeChange.fire())}};s.CharSizeService=C=h([u(2,l.IOptionsService)],C);class _ extends m.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(n,f){n!==void 0&&n>0&&f!==void 0&&f>0&&(this._result.width=n,this._result.height=f)}}class r extends _{constructor(n,f,S){super(),this._document=n,this._parentElement=f,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class o extends _{constructor(n){super(),this._optionsService=n,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const f=this._ctx.measureText("W");if(!("width"in f&&"fontBoundingBoxAscent"in f&&"fontBoundingBoxDescent"in f))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const n=this._ctx.measureText("W");return this._validateAndSet(n.width,n.fontBoundingBoxAscent+n.fontBoundingBoxDescent),this._result}}},4269:function(w,s,a){var h=this&&this.__decorate||function(o,i,n,f){var S,b=arguments.length,y=b<3?i:f===null?f=Object.getOwnPropertyDescriptor(i,n):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,i,n,f);else for(var g=o.length-1;g>=0;g--)(S=o[g])&&(y=(b<3?S(y):b>3?S(i,n,y):S(i,n))||y);return b>3&&y&&Object.defineProperty(i,n,y),y},u=this&&this.__param||function(o,i){return function(n,f){i(n,f,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const l=a(3734),d=a(643),m=a(511),C=a(2585);class _ extends l.AttributeData{constructor(i,n,f){super(),this.content=0,this.combinedData="",this.fg=i.fg,this.bg=i.bg,this.combinedData=n,this._width=f}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(i){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=_;let r=s.CharacterJoinerService=class tn{constructor(i){this._bufferService=i,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(i){const n={id:this._nextCharacterJoinerId++,handler:i};return this._characterJoiners.push(n),n.id}deregister(i){for(let n=0;n<this._characterJoiners.length;n++)if(this._characterJoiners[n].id===i)return this._characterJoiners.splice(n,1),!0;return!1}getJoinedCharacters(i){if(this._characterJoiners.length===0)return[];const n=this._bufferService.buffer.lines.get(i);if(!n||n.length===0)return[];const f=[],S=n.translateToString(!0);let b=0,y=0,g=0,L=n.getFg(0),M=n.getBg(0);for(let P=0;P<n.getTrimmedLength();P++)if(n.loadCell(P,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==M){if(P-b>1){const B=this._getJoinedRanges(S,g,y,n,b);for(let A=0;A<B.length;A++)f.push(B[A])}b=P,g=y,L=this._workCell.fg,M=this._workCell.bg}y+=this._workCell.getChars().length||d.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){const P=this._getJoinedRanges(S,g,y,n,b);for(let B=0;B<P.length;B++)f.push(P[B])}return f}_getJoinedRanges(i,n,f,S,b){const y=i.substring(n,f);let g=[];try{g=this._characterJoiners[0].handler(y)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const M=this._characterJoiners[L].handler(y);for(let P=0;P<M.length;P++)tn._mergeRanges(g,M[P])}catch(M){console.error(M)}return this._stringRangesToCellRanges(g,S,b),g}_stringRangesToCellRanges(i,n,f){let S=0,b=!1,y=0,g=i[S];if(g){for(let L=f;L<this._bufferService.cols;L++){const M=n.getWidth(L),P=n.getString(L).length||d.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!b&&g[0]<=y&&(g[0]=L,b=!0),g[1]<=y){if(g[1]=L,g=i[++S],!g)break;g[0]<=y?(g[0]=L,b=!0):b=!1}y+=P}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(i,n){let f=!1;for(let S=0;S<i.length;S++){const b=i[S];if(f){if(n[1]<=b[0])return i[S-1][1]=n[1],i;if(n[1]<=b[1])return i[S-1][1]=Math.max(n[1],b[1]),i.splice(S,1),i;i.splice(S,1),S--}else{if(n[1]<=b[0])return i.splice(S,0,n),i;if(n[1]<=b[1])return b[0]=Math.min(n[0],b[0]),i;n[0]<b[1]&&(b[0]=Math.min(n[0],b[0]),f=!0)}}return f?i[i.length-1][1]=n[1]:i.push(n),i}};s.CharacterJoinerService=r=h([u(0,C.IBufferService)],r)},5114:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;const h=a(844),u=a(8460),l=a(3656);class d extends h.Disposable{constructor(_,r,o){super(),this._textarea=_,this._window=r,this.mainDocument=o,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new m(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(i=>this._screenDprMonitor.setWindow(i))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(_){this._window!==_&&(this._window=_,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}s.CoreBrowserService=d;class m extends h.Disposable{constructor(_){super(),this._parentWindow=_,this._windowResizeListener=this.register(new h.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,h.toDisposable)(()=>this.clearListener()))}setWindow(_){this._parentWindow=_,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,l.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)==null||_.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkProviderService=void 0;const h=a(844);class u extends h.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,h.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(d){return this.linkProviders.push(d),{dispose:()=>{const m=this.linkProviders.indexOf(d);m!==-1&&this.linkProviders.splice(m,1)}}}}s.LinkProviderService=u},8934:function(w,s,a){var h=this&&this.__decorate||function(C,_,r,o){var i,n=arguments.length,f=n<3?_:o===null?o=Object.getOwnPropertyDescriptor(_,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(C,_,r,o);else for(var S=C.length-1;S>=0;S--)(i=C[S])&&(f=(n<3?i(f):n>3?i(_,r,f):i(_,r))||f);return n>3&&f&&Object.defineProperty(_,r,f),f},u=this&&this.__param||function(C,_){return function(r,o){_(r,o,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const l=a(4725),d=a(9806);let m=s.MouseService=class{constructor(C,_){this._renderService=C,this._charSizeService=_}getCoords(C,_,r,o,i){return(0,d.getCoords)(window,C,_,r,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,i)}getMouseReportCoords(C,_){const r=(0,d.getCoordsRelativeToElement)(window,C,_);if(this._charSizeService.hasValidSize)return r[0]=Math.min(Math.max(r[0],0),this._renderService.dimensions.css.canvas.width-1),r[1]=Math.min(Math.max(r[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};s.MouseService=m=h([u(0,l.IRenderService),u(1,l.ICharSizeService)],m)},3230:function(w,s,a){var h=this&&this.__decorate||function(i,n,f,S){var b,y=arguments.length,g=y<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(i,n,f,S);else for(var L=i.length-1;L>=0;L--)(b=i[L])&&(g=(y<3?b(g):y>3?b(n,f,g):b(n,f))||g);return y>3&&g&&Object.defineProperty(n,f,g),g},u=this&&this.__param||function(i,n){return function(f,S){n(f,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const l=a(6193),d=a(4725),m=a(8460),C=a(844),_=a(7226),r=a(2585);let o=s.RenderService=class extends C.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(i,n,f,S,b,y,g,L){super(),this._rowCount=i,this._charSizeService=S,this._renderer=this.register(new C.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._observerDisposable=this.register(new C.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new l.RenderDebouncer((M,P)=>this._renderRows(M,P),g),this.register(this._renderDebouncer),this.register(g.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(y.onResize(()=>this._fullRefresh())),this.register(y.buffers.onBufferActivate(()=>{var M;return(M=this._renderer.value)==null?void 0:M.clear()})),this.register(f.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(b.onDecorationRegistered(()=>this._fullRefresh())),this.register(b.onDecorationRemoved(()=>this._fullRefresh())),this.register(f.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(y.cols,y.rows),this._fullRefresh()})),this.register(f.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(y.buffer.y,y.buffer.y,!0))),this.register(L.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(g.window,n),this.register(g.onWindowChange(M=>this._registerIntersectionObserver(M,n)))}_registerIntersectionObserver(i,n){if("IntersectionObserver"in i){const f=new i.IntersectionObserver(S=>this._handleIntersectionChange(S[S.length-1]),{threshold:0});f.observe(n),this._observerDisposable.value=(0,C.toDisposable)(()=>f.disconnect())}}_handleIntersectionChange(i){this._isPaused=i.isIntersecting===void 0?i.intersectionRatio===0:!i.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(i,n,f=!1){this._isPaused?this._needsFullRefresh=!0:(f||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(i,n,this._rowCount))}_renderRows(i,n){this._renderer.value&&(i=Math.min(i,this._rowCount-1),n=Math.min(n,this._rowCount-1),this._renderer.value.renderRows(i,n),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:i,end:n}),this._onRender.fire({start:i,end:n}),this._isNextRenderRedrawOnly=!0)}resize(i,n){this._rowCount=n,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(i){this._renderer.value=i,this._renderer.value&&(this._renderer.value.onRequestRedraw(n=>this.refreshRows(n.start,n.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(i){return this._renderDebouncer.addRefreshCallback(i)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var i,n;this._renderer.value&&((n=(i=this._renderer.value).clearTextureAtlas)==null||n.call(i),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(i,n){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var f;return(f=this._renderer.value)==null?void 0:f.handleResize(i,n)}):this._renderer.value.handleResize(i,n),this._fullRefresh())}handleCharSizeChanged(){var i;(i=this._renderer.value)==null||i.handleCharSizeChanged()}handleBlur(){var i;(i=this._renderer.value)==null||i.handleBlur()}handleFocus(){var i;(i=this._renderer.value)==null||i.handleFocus()}handleSelectionChanged(i,n,f){var S;this._selectionState.start=i,this._selectionState.end=n,this._selectionState.columnSelectMode=f,(S=this._renderer.value)==null||S.handleSelectionChanged(i,n,f)}handleCursorMove(){var i;(i=this._renderer.value)==null||i.handleCursorMove()}clear(){var i;(i=this._renderer.value)==null||i.clear()}};s.RenderService=o=h([u(2,r.IOptionsService),u(3,d.ICharSizeService),u(4,r.IDecorationService),u(5,r.IBufferService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],o)},9312:function(w,s,a){var h=this&&this.__decorate||function(g,L,M,P){var B,A=arguments.length,F=A<3?L:P===null?P=Object.getOwnPropertyDescriptor(L,M):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(g,L,M,P);else for(var U=g.length-1;U>=0;U--)(B=g[U])&&(F=(A<3?B(F):A>3?B(L,M,F):B(L,M))||F);return A>3&&F&&Object.defineProperty(L,M,F),F},u=this&&this.__param||function(g,L){return function(M,P){L(M,P,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const l=a(9806),d=a(9504),m=a(456),C=a(4725),_=a(8460),r=a(844),o=a(6114),i=a(4841),n=a(511),f=a(2585),S="",b=new RegExp(S,"g");let y=s.SelectionService=class extends r.Disposable{constructor(g,L,M,P,B,A,F,U,V){super(),this._element=g,this._screenElement=L,this._linkifier=M,this._bufferService=P,this._coreService=B,this._mouseService=A,this._optionsService=F,this._renderService=U,this._coreBrowserService=V,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new n.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new _.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=X=>this._handleMouseMove(X),this._mouseUpListener=X=>this._handleMouseUp(X),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(X=>this._handleTrim(X)),this.register(this._bufferService.buffers.onBufferActivate(X=>this._handleBufferActivate(X))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,r.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const g=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!g||!L||g[0]===L[0]&&g[1]===L[1])}get selectionText(){const g=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!g||!L)return"";const M=this._bufferService.buffer,P=[];if(this._activeSelectionMode===3){if(g[0]===L[0])return"";const B=g[0]<L[0]?g[0]:L[0],A=g[0]<L[0]?L[0]:g[0];for(let F=g[1];F<=L[1];F++){const U=M.translateBufferLineToString(F,!0,B,A);P.push(U)}}else{const B=g[1]===L[1]?L[0]:void 0;P.push(M.translateBufferLineToString(g[1],!0,g[0],B));for(let A=g[1]+1;A<=L[1]-1;A++){const F=M.lines.get(A),U=M.translateBufferLineToString(A,!0);F!=null&&F.isWrapped?P[P.length-1]+=U:P.push(U)}if(g[1]!==L[1]){const A=M.lines.get(L[1]),F=M.translateBufferLineToString(L[1],!0,0,L[0]);A&&A.isWrapped?P[P.length-1]+=F:P.push(F)}}return P.map(B=>B.replace(b," ")).join(o.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),o.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){const L=this._getMouseBufferCoords(g),M=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!!(M&&P&&L)&&this._areCoordsInSelection(L,M,P)}isCellInSelection(g,L){const M=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!(!M||!P)&&this._areCoordsInSelection([g,L],M,P)}_areCoordsInSelection(g,L,M){return g[1]>L[1]&&g[1]<M[1]||L[1]===M[1]&&g[1]===L[1]&&g[0]>=L[0]&&g[0]<M[0]||L[1]<M[1]&&g[1]===M[1]&&g[0]<M[0]||L[1]<M[1]&&g[1]===L[1]&&g[0]>=L[0]}_selectWordAtCursor(g,L){var B,A;const M=(A=(B=this._linkifier.currentLink)==null?void 0:B.link)==null?void 0:A.range;if(M)return this._model.selectionStart=[M.start.x-1,M.start.y-1],this._model.selectionStartLength=(0,i.getRangeLength)(M,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const P=this._getMouseBufferCoords(g);return!!P&&(this._selectWordAt(P,L),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,L){this._model.clearSelection(),g=Math.max(g,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){const L=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L}_getMouseEventScrollAmount(g){let L=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1];const M=this._renderService.dimensions.css.canvas.height;return L>=0&&L<=M?0:(L>M&&(L-=M),L=Math.min(Math.max(L,-50),50),L/=50,L/Math.abs(L)+Math.round(14*L))}shouldForceSelection(g){return o.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&L.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){const L=this._getMouseBufferCoords(g);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))}shouldColumnSelect(g){return g.altKey&&!(o.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;const L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const M=this._bufferService.buffer;if(this._model.selectionEnd[1]<M.lines.length){const P=M.lines.get(this._model.selectionEnd[1]);P&&P.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){const L=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const M=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(M&&M[0]!==void 0&&M[1]!==void 0){const P=(0,d.moveToCellSequence)(M[0]-1,M[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(P,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const g=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,M=!(!g||!L||g[0]===L[0]&&g[1]===L[1]);M?g&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,L,M)):this._oldHasSelection&&this._fireOnSelectionChange(g,L,M)}_fireOnSelectionChange(g,L,M){this._oldSelectionStart=g,this._oldSelectionEnd=L,this._oldHasSelection=M,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(L=>this._handleTrim(L))}_convertViewportColToCharacterIndex(g,L){let M=L;for(let P=0;L>=P;P++){const B=g.loadCell(P,this._workCell).getChars().length;this._workCell.getWidth()===0?M--:B>1&&L!==P&&(M+=B-1)}return M}setSelection(g,L,M){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,L],this._model.selectionStartLength=M,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,L,M=!0,P=!0){if(g[0]>=this._bufferService.cols)return;const B=this._bufferService.buffer,A=B.lines.get(g[1]);if(!A)return;const F=B.translateBufferLineToString(g[1],!1);let U=this._convertViewportColToCharacterIndex(A,g[0]),V=U;const X=g[0]-U;let z=0,E=0,R=0,T=0;if(F.charAt(U)===" "){for(;U>0&&F.charAt(U-1)===" ";)U--;for(;V<F.length&&F.charAt(V+1)===" ";)V++}else{let ee=g[0],ae=g[0];A.getWidth(ee)===0&&(z++,ee--),A.getWidth(ae)===2&&(E++,ae++);const le=A.getString(ae).length;for(le>1&&(T+=le-1,V+=le-1);ee>0&&U>0&&!this._isCharWordSeparator(A.loadCell(ee-1,this._workCell));){A.loadCell(ee-1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===0?(z++,ee--):H>1&&(R+=H-1,U-=H-1),U--,ee--}for(;ae<A.length&&V+1<F.length&&!this._isCharWordSeparator(A.loadCell(ae+1,this._workCell));){A.loadCell(ae+1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===2?(E++,ae++):H>1&&(T+=H-1,V+=H-1),V++,ae++}}V++;let I=U+X-z+R,q=Math.min(this._bufferService.cols,V-U+z+E-R-T);if(L||F.slice(U,V).trim()!==""){if(M&&I===0&&A.getCodePoint(0)!==32){const ee=B.lines.get(g[1]-1);if(ee&&A.isWrapped&&ee.getCodePoint(this._bufferService.cols-1)!==32){const ae=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(ae){const le=this._bufferService.cols-ae.start;I-=le,q+=le}}}if(P&&I+q===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const ee=B.lines.get(g[1]+1);if(ee!=null&&ee.isWrapped&&ee.getCodePoint(0)!==32){const ae=this._getWordAt([0,g[1]+1],!1,!1,!0);ae&&(q+=ae.length)}}return{start:I,length:q}}}_selectWordAt(g,L){const M=this._getWordAt(g,L);if(M){for(;M.start<0;)M.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[M.start,g[1]],this._model.selectionStartLength=M.length}}_selectToWordAt(g){const L=this._getWordAt(g,!0);if(L){let M=g[1];for(;L.start<0;)L.start+=this._bufferService.cols,M--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,M++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,M]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){const L=this._bufferService.buffer.getWrappedRangeForLine(g),M={start:{x:0,y:L.first},end:{x:this._bufferService.cols-1,y:L.last}};this._model.selectionStart=[0,L.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,i.getRangeLength)(M,this._bufferService.cols)}};s.SelectionService=y=h([u(3,f.IBufferService),u(4,f.ICoreService),u(5,C.IMouseService),u(6,f.IOptionsService),u(7,C.IRenderService),u(8,C.ICoreBrowserService)],y)},4725:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ILinkProviderService=s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const h=a(8343);s.ICharSizeService=(0,h.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),s.IMouseService=(0,h.createDecorator)("MouseService"),s.IRenderService=(0,h.createDecorator)("RenderService"),s.ISelectionService=(0,h.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,h.createDecorator)("ThemeService"),s.ILinkProviderService=(0,h.createDecorator)("LinkProviderService")},6731:function(w,s,a){var h=this&&this.__decorate||function(y,g,L,M){var P,B=arguments.length,A=B<3?g:M===null?M=Object.getOwnPropertyDescriptor(g,L):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(y,g,L,M);else for(var F=y.length-1;F>=0;F--)(P=y[F])&&(A=(B<3?P(A):B>3?P(g,L,A):P(g,L))||A);return B>3&&A&&Object.defineProperty(g,L,A),A},u=this&&this.__param||function(y,g){return function(L,M){g(L,M,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const l=a(7239),d=a(8055),m=a(8460),C=a(844),_=a(2585),r=d.css.toColor("#ffffff"),o=d.css.toColor("#000000"),i=d.css.toColor("#ffffff"),n=d.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const y=[d.css.toColor("#2e3436"),d.css.toColor("#cc0000"),d.css.toColor("#4e9a06"),d.css.toColor("#c4a000"),d.css.toColor("#3465a4"),d.css.toColor("#75507b"),d.css.toColor("#06989a"),d.css.toColor("#d3d7cf"),d.css.toColor("#555753"),d.css.toColor("#ef2929"),d.css.toColor("#8ae234"),d.css.toColor("#fce94f"),d.css.toColor("#729fcf"),d.css.toColor("#ad7fa8"),d.css.toColor("#34e2e2"),d.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let L=0;L<216;L++){const M=g[L/36%6|0],P=g[L/6%6|0],B=g[L%6];y.push({css:d.channels.toCss(M,P,B),rgba:d.channels.toRgba(M,P,B)})}for(let L=0;L<24;L++){const M=8+10*L;y.push({css:d.channels.toCss(M,M,M),rgba:d.channels.toRgba(M,M,M)})}return y})());let S=s.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(y){super(),this._optionsService=y,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:r,background:o,cursor:i,cursorAccent:n,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:d.color.blend(o,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:d.color.blend(o,f),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(y={}){const g=this._colors;if(g.foreground=b(y.foreground,r),g.background=b(y.background,o),g.cursor=b(y.cursor,i),g.cursorAccent=b(y.cursorAccent,n),g.selectionBackgroundTransparent=b(y.selectionBackground,f),g.selectionBackgroundOpaque=d.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=b(y.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=d.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=y.selectionForeground?b(y.selectionForeground,d.NULL_COLOR):void 0,g.selectionForeground===d.NULL_COLOR&&(g.selectionForeground=void 0),d.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=d.color.opacity(g.selectionBackgroundTransparent,.3)),d.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=d.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=s.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=b(y.black,s.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=b(y.red,s.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=b(y.green,s.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=b(y.yellow,s.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=b(y.blue,s.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=b(y.magenta,s.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=b(y.cyan,s.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=b(y.white,s.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=b(y.brightBlack,s.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=b(y.brightRed,s.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=b(y.brightGreen,s.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=b(y.brightYellow,s.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=b(y.brightBlue,s.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=b(y.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=b(y.brightCyan,s.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=b(y.brightWhite,s.DEFAULT_ANSI_COLORS[15]),y.extendedAnsi){const L=Math.min(g.ansi.length-16,y.extendedAnsi.length);for(let M=0;M<L;M++)g.ansi[M+16]=b(y.extendedAnsi[M],s.DEFAULT_ANSI_COLORS[M+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(y){this._restoreColor(y),this._onChangeColors.fire(this.colors)}_restoreColor(y){if(y!==void 0)switch(y){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[y]=this._restoreColors.ansi[y]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(y){y(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(y,g){if(y!==void 0)try{return d.css.toColor(y)}catch{}return g}s.ThemeService=S=h([u(0,_.IOptionsService)],S)},6349:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const h=a(8460),u=a(844);class l extends u.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;const C=new Array(m);for(let _=0;_<Math.min(m,this.length);_++)C[_]=this._array[this._getCyclicIndex(_)];this._array=C,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let C=this._length;C<m;C++)this._array[C]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,C){this._array[this._getCyclicIndex(m)]=C}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,C,..._){if(C){for(let r=m;r<this._length-C;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+C)];this._length-=C,this.onDeleteEmitter.fire({index:m,amount:C})}for(let r=this._length-1;r>=m;r--)this._array[this._getCyclicIndex(r+_.length)]=this._array[this._getCyclicIndex(r)];for(let r=0;r<_.length;r++)this._array[this._getCyclicIndex(m+r)]=_[r];if(_.length&&this.onInsertEmitter.fire({index:m,amount:_.length}),this._length+_.length>this._maxLength){const r=this._length+_.length-this._maxLength;this._startIndex+=r,this._length=this._maxLength,this.onTrimEmitter.fire(r)}else this._length+=_.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,C,_){if(!(C<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(let o=C-1;o>=0;o--)this.set(m+o+_,this.get(m+o));const r=m+C+_-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let r=0;r<C;r++)this.set(m+r+_,this.get(m+r))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}s.CircularList=l},1439:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function a(h,u=5){if(typeof h!="object")return h;const l=Array.isArray(h)?[]:{};for(const d in h)l[d]=u<=1?h[d]:h[d]&&a(h[d],u-1);return l}},8055:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let a=0,h=0,u=0,l=0;var d,m,C,_,r;function o(n){const f=n.toString(16);return f.length<2?"0"+f:f}function i(n,f){return n<f?(f+.05)/(n+.05):(n+.05)/(f+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(n){n.toCss=function(f,S,b,y){return y!==void 0?`#${o(f)}${o(S)}${o(b)}${o(y)}`:`#${o(f)}${o(S)}${o(b)}`},n.toRgba=function(f,S,b,y=255){return(f<<24|S<<16|b<<8|y)>>>0},n.toColor=function(f,S,b,y){return{css:n.toCss(f,S,b,y),rgba:n.toRgba(f,S,b,y)}}}(d||(s.channels=d={})),function(n){function f(S,b){return l=Math.round(255*b),[a,h,u]=r.toChannels(S.rgba),{css:d.toCss(a,h,u,l),rgba:d.toRgba(a,h,u,l)}}n.blend=function(S,b){if(l=(255&b.rgba)/255,l===1)return{css:b.css,rgba:b.rgba};const y=b.rgba>>24&255,g=b.rgba>>16&255,L=b.rgba>>8&255,M=S.rgba>>24&255,P=S.rgba>>16&255,B=S.rgba>>8&255;return a=M+Math.round((y-M)*l),h=P+Math.round((g-P)*l),u=B+Math.round((L-B)*l),{css:d.toCss(a,h,u),rgba:d.toRgba(a,h,u)}},n.isOpaque=function(S){return(255&S.rgba)==255},n.ensureContrastRatio=function(S,b,y){const g=r.ensureContrastRatio(S.rgba,b.rgba,y);if(g)return d.toColor(g>>24&255,g>>16&255,g>>8&255)},n.opaque=function(S){const b=(255|S.rgba)>>>0;return[a,h,u]=r.toChannels(b),{css:d.toCss(a,h,u),rgba:b}},n.opacity=f,n.multiplyOpacity=function(S,b){return l=255&S.rgba,f(S,l*b/255)},n.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(m||(s.color=m={})),function(n){let f,S;try{const b=document.createElement("canvas");b.width=1,b.height=1;const y=b.getContext("2d",{willReadFrequently:!0});y&&(f=y,f.globalCompositeOperation="copy",S=f.createLinearGradient(0,0,1,1))}catch{}n.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return a=parseInt(b.slice(1,2).repeat(2),16),h=parseInt(b.slice(2,3).repeat(2),16),u=parseInt(b.slice(3,4).repeat(2),16),d.toColor(a,h,u);case 5:return a=parseInt(b.slice(1,2).repeat(2),16),h=parseInt(b.slice(2,3).repeat(2),16),u=parseInt(b.slice(3,4).repeat(2),16),l=parseInt(b.slice(4,5).repeat(2),16),d.toColor(a,h,u,l);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const y=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(y)return a=parseInt(y[1]),h=parseInt(y[2]),u=parseInt(y[3]),l=Math.round(255*(y[5]===void 0?1:parseFloat(y[5]))),d.toColor(a,h,u,l);if(!f||!S)throw new Error("css.toColor: Unsupported css format");if(f.fillStyle=S,f.fillStyle=b,typeof f.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(f.fillRect(0,0,1,1),[a,h,u,l]=f.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:d.toRgba(a,h,u,l),css:b}}}(C||(s.css=C={})),function(n){function f(S,b,y){const g=S/255,L=b/255,M=y/255;return .2126*(g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4))+.7152*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.0722*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))}n.relativeLuminance=function(S){return f(S>>16&255,S>>8&255,255&S)},n.relativeLuminance2=f}(_||(s.rgb=_={})),function(n){function f(b,y,g){const L=b>>24&255,M=b>>16&255,P=b>>8&255;let B=y>>24&255,A=y>>16&255,F=y>>8&255,U=i(_.relativeLuminance2(B,A,F),_.relativeLuminance2(L,M,P));for(;U<g&&(B>0||A>0||F>0);)B-=Math.max(0,Math.ceil(.1*B)),A-=Math.max(0,Math.ceil(.1*A)),F-=Math.max(0,Math.ceil(.1*F)),U=i(_.relativeLuminance2(B,A,F),_.relativeLuminance2(L,M,P));return(B<<24|A<<16|F<<8|255)>>>0}function S(b,y,g){const L=b>>24&255,M=b>>16&255,P=b>>8&255;let B=y>>24&255,A=y>>16&255,F=y>>8&255,U=i(_.relativeLuminance2(B,A,F),_.relativeLuminance2(L,M,P));for(;U<g&&(B<255||A<255||F<255);)B=Math.min(255,B+Math.ceil(.1*(255-B))),A=Math.min(255,A+Math.ceil(.1*(255-A))),F=Math.min(255,F+Math.ceil(.1*(255-F))),U=i(_.relativeLuminance2(B,A,F),_.relativeLuminance2(L,M,P));return(B<<24|A<<16|F<<8|255)>>>0}n.blend=function(b,y){if(l=(255&y)/255,l===1)return y;const g=y>>24&255,L=y>>16&255,M=y>>8&255,P=b>>24&255,B=b>>16&255,A=b>>8&255;return a=P+Math.round((g-P)*l),h=B+Math.round((L-B)*l),u=A+Math.round((M-A)*l),d.toRgba(a,h,u)},n.ensureContrastRatio=function(b,y,g){const L=_.relativeLuminance(b>>8),M=_.relativeLuminance(y>>8);if(i(L,M)<g){if(M<L){const A=f(b,y,g),F=i(L,_.relativeLuminance(A>>8));if(F<g){const U=S(b,y,g);return F>i(L,_.relativeLuminance(U>>8))?A:U}return A}const P=S(b,y,g),B=i(L,_.relativeLuminance(P>>8));if(B<g){const A=f(b,y,g);return B>i(L,_.relativeLuminance(A>>8))?P:A}return P}},n.reduceLuminance=f,n.increaseLuminance=S,n.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]}}(r||(s.rgba=r={})),s.toPaddedHex=o,s.contrastRatio=i},8969:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const h=a(844),u=a(2585),l=a(4348),d=a(7866),m=a(744),C=a(7302),_=a(6975),r=a(8460),o=a(1753),i=a(1480),n=a(7994),f=a(9282),S=a(5435),b=a(5981),y=a(2660);let g=!1;class L extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new r.EventEmitter),this._onScroll.event(P=>{var B;(B=this._onScrollApi)==null||B.fire(P.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(P){for(const B in P)this.optionsService.options[B]=P[B]}constructor(P){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new r.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new r.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new r.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new r.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new C.OptionsService(P)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(d.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(_.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(o.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(i.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(n.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(y.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,r.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,r.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,r.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,r.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(B=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(B=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((B,A)=>this._inputHandler.parse(B,A))),this.register((0,r.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(P,B){this._writeBuffer.write(P,B)}writeSync(P,B){this._logService.logLevel<=u.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(P,B)}input(P,B=!0){this.coreService.triggerDataEvent(P,B)}resize(P,B){isNaN(P)||isNaN(B)||(P=Math.max(P,m.MINIMUM_COLS),B=Math.max(B,m.MINIMUM_ROWS),this._bufferService.resize(P,B))}scroll(P,B=!1){this._bufferService.scroll(P,B)}scrollLines(P,B,A){this._bufferService.scrollLines(P,B,A)}scrollPages(P){this.scrollLines(P*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(P){const B=P-this._bufferService.buffer.ydisp;B!==0&&this.scrollLines(B)}registerEscHandler(P,B){return this._inputHandler.registerEscHandler(P,B)}registerDcsHandler(P,B){return this._inputHandler.registerDcsHandler(P,B)}registerCsiHandler(P,B){return this._inputHandler.registerCsiHandler(P,B)}registerOscHandler(P,B){return this._inputHandler.registerOscHandler(P,B)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let P=!1;const B=this.optionsService.rawOptions.windowsPty;B&&B.buildNumber!==void 0&&B.buildNumber!==void 0?P=B.backend==="conpty"&&B.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(P=!0),P?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const P=[];P.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),P.push(this.registerCsiHandler({final:"H"},()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)(()=>{for(const B of P)B.dispose()})}}}s.CoreTerminal=L},8460:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===a)return void this._listeners.splice(h,1)}}})),this._event}fire(a,h){const u=[];for(let l=0;l<this._listeners.length;l++)u.push(this._listeners[l]);for(let l=0;l<u.length;l++)u[l].call(void 0,a,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,h){return a(u=>h.fire(u))},s.runAndSubscribe=function(a,h){return h(void 0),a(u=>h(u))}},5435:function(w,s,a){var h=this&&this.__decorate||function(z,E,R,T){var I,q=arguments.length,ee=q<3?E:T===null?T=Object.getOwnPropertyDescriptor(E,R):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(z,E,R,T);else for(var ae=z.length-1;ae>=0;ae--)(I=z[ae])&&(ee=(q<3?I(ee):q>3?I(E,R,ee):I(E,R))||ee);return q>3&&ee&&Object.defineProperty(E,R,ee),ee},u=this&&this.__param||function(z,E){return function(R,T){E(R,T,z)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const l=a(2584),d=a(7116),m=a(2015),C=a(844),_=a(482),r=a(8437),o=a(8460),i=a(643),n=a(511),f=a(3734),S=a(2585),b=a(1480),y=a(6242),g=a(6351),L=a(5941),M={"(":0,")":1,"*":2,"+":3,"-":1,".":2},P=131072;function B(z,E){if(z>24)return E.setWinLines||!1;switch(z){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var A;(function(z){z[z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",z[z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(s.WindowsOptionsReportType=A={}));let F=0;class U extends C.Disposable{getAttrData(){return this._curAttrData}constructor(E,R,T,I,q,ee,ae,le,H=new m.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=R,this._coreService=T,this._logService=I,this._optionsService=q,this._oscLinkService=ee,this._coreMouseService=ae,this._unicodeService=le,this._parser=H,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _.StringToUtf32,this._utf8Decoder=new _.Utf8ToUtf32,this._workCell=new n.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new o.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new o.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new o.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new o.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new o.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new o.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new o.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new o.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new o.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new o.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new o.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new V(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._parser.setCsiHandlerFallback((k,J)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(k),params:J.toArray()})}),this._parser.setEscHandlerFallback(k=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(k)})}),this._parser.setExecuteHandlerFallback(k=>{this._logService.debug("Unknown EXECUTE code: ",{code:k})}),this._parser.setOscHandlerFallback((k,J,$)=>{this._logService.debug("Unknown OSC code: ",{identifier:k,action:J,data:$})}),this._parser.setDcsHandlerFallback((k,J,$)=>{J==="HOOK"&&($=$.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(k),action:J,payload:$})}),this._parser.setPrintHandler((k,J,$)=>this.print(k,J,$)),this._parser.registerCsiHandler({final:"@"},k=>this.insertChars(k)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},k=>this.scrollLeft(k)),this._parser.registerCsiHandler({final:"A"},k=>this.cursorUp(k)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},k=>this.scrollRight(k)),this._parser.registerCsiHandler({final:"B"},k=>this.cursorDown(k)),this._parser.registerCsiHandler({final:"C"},k=>this.cursorForward(k)),this._parser.registerCsiHandler({final:"D"},k=>this.cursorBackward(k)),this._parser.registerCsiHandler({final:"E"},k=>this.cursorNextLine(k)),this._parser.registerCsiHandler({final:"F"},k=>this.cursorPrecedingLine(k)),this._parser.registerCsiHandler({final:"G"},k=>this.cursorCharAbsolute(k)),this._parser.registerCsiHandler({final:"H"},k=>this.cursorPosition(k)),this._parser.registerCsiHandler({final:"I"},k=>this.cursorForwardTab(k)),this._parser.registerCsiHandler({final:"J"},k=>this.eraseInDisplay(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},k=>this.eraseInDisplay(k,!0)),this._parser.registerCsiHandler({final:"K"},k=>this.eraseInLine(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},k=>this.eraseInLine(k,!0)),this._parser.registerCsiHandler({final:"L"},k=>this.insertLines(k)),this._parser.registerCsiHandler({final:"M"},k=>this.deleteLines(k)),this._parser.registerCsiHandler({final:"P"},k=>this.deleteChars(k)),this._parser.registerCsiHandler({final:"S"},k=>this.scrollUp(k)),this._parser.registerCsiHandler({final:"T"},k=>this.scrollDown(k)),this._parser.registerCsiHandler({final:"X"},k=>this.eraseChars(k)),this._parser.registerCsiHandler({final:"Z"},k=>this.cursorBackwardTab(k)),this._parser.registerCsiHandler({final:"`"},k=>this.charPosAbsolute(k)),this._parser.registerCsiHandler({final:"a"},k=>this.hPositionRelative(k)),this._parser.registerCsiHandler({final:"b"},k=>this.repeatPrecedingCharacter(k)),this._parser.registerCsiHandler({final:"c"},k=>this.sendDeviceAttributesPrimary(k)),this._parser.registerCsiHandler({prefix:">",final:"c"},k=>this.sendDeviceAttributesSecondary(k)),this._parser.registerCsiHandler({final:"d"},k=>this.linePosAbsolute(k)),this._parser.registerCsiHandler({final:"e"},k=>this.vPositionRelative(k)),this._parser.registerCsiHandler({final:"f"},k=>this.hVPosition(k)),this._parser.registerCsiHandler({final:"g"},k=>this.tabClear(k)),this._parser.registerCsiHandler({final:"h"},k=>this.setMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"h"},k=>this.setModePrivate(k)),this._parser.registerCsiHandler({final:"l"},k=>this.resetMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"l"},k=>this.resetModePrivate(k)),this._parser.registerCsiHandler({final:"m"},k=>this.charAttributes(k)),this._parser.registerCsiHandler({final:"n"},k=>this.deviceStatus(k)),this._parser.registerCsiHandler({prefix:"?",final:"n"},k=>this.deviceStatusPrivate(k)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},k=>this.softReset(k)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},k=>this.setCursorStyle(k)),this._parser.registerCsiHandler({final:"r"},k=>this.setScrollRegion(k)),this._parser.registerCsiHandler({final:"s"},k=>this.saveCursor(k)),this._parser.registerCsiHandler({final:"t"},k=>this.windowOptions(k)),this._parser.registerCsiHandler({final:"u"},k=>this.restoreCursor(k)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},k=>this.insertColumns(k)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},k=>this.deleteColumns(k)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},k=>this.selectProtected(k)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},k=>this.requestMode(k,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},k=>this.requestMode(k,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new y.OscHandler(k=>(this.setTitle(k),this.setIconName(k),!0))),this._parser.registerOscHandler(1,new y.OscHandler(k=>this.setIconName(k))),this._parser.registerOscHandler(2,new y.OscHandler(k=>this.setTitle(k))),this._parser.registerOscHandler(4,new y.OscHandler(k=>this.setOrReportIndexedColor(k))),this._parser.registerOscHandler(8,new y.OscHandler(k=>this.setHyperlink(k))),this._parser.registerOscHandler(10,new y.OscHandler(k=>this.setOrReportFgColor(k))),this._parser.registerOscHandler(11,new y.OscHandler(k=>this.setOrReportBgColor(k))),this._parser.registerOscHandler(12,new y.OscHandler(k=>this.setOrReportCursorColor(k))),this._parser.registerOscHandler(104,new y.OscHandler(k=>this.restoreIndexedColor(k))),this._parser.registerOscHandler(110,new y.OscHandler(k=>this.restoreFgColor(k))),this._parser.registerOscHandler(111,new y.OscHandler(k=>this.restoreBgColor(k))),this._parser.registerOscHandler(112,new y.OscHandler(k=>this.restoreCursorColor(k))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const k in d.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:k},()=>this.selectCharset("("+k)),this._parser.registerEscHandler({intermediates:")",final:k},()=>this.selectCharset(")"+k)),this._parser.registerEscHandler({intermediates:"*",final:k},()=>this.selectCharset("*"+k)),this._parser.registerEscHandler({intermediates:"+",final:k},()=>this.selectCharset("+"+k)),this._parser.registerEscHandler({intermediates:"-",final:k},()=>this.selectCharset("-"+k)),this._parser.registerEscHandler({intermediates:".",final:k},()=>this.selectCharset("."+k)),this._parser.registerEscHandler({intermediates:"/",final:k},()=>this.selectCharset("/"+k));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(k=>(this._logService.error("Parsing error: ",k),k)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new g.DcsHandler((k,J)=>this.requestStatusString(k,J)))}_preserveStack(E,R,T,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=R,this._parseStack.decodedLength=T,this._parseStack.position=I}_logSlowResolvingAsync(E){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([E,new Promise((R,T)=>setTimeout(()=>T("#SLOW_TIMEOUT"),5e3))]).catch(R=>{if(R!=="#SLOW_TIMEOUT")throw R;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,R){let T,I=this._activeBuffer.x,q=this._activeBuffer.y,ee=0;const ae=this._parseStack.paused;if(ae){if(T=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,R))return this._logSlowResolvingAsync(T),T;I=this._parseStack.cursorStartX,q=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>P&&(ee=this._parseStack.position+P)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,k=>String.fromCharCode(k)).join("")}"`),typeof E=="string"?E.split("").map(k=>k.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<P&&(this._parseBuffer=new Uint32Array(Math.min(E.length,P))),ae||this._dirtyRowTracker.clearRange(),E.length>P)for(let k=ee;k<E.length;k+=P){const J=k+P<E.length?k+P:E.length,$=typeof E=="string"?this._stringDecoder.decode(E.substring(k,J),this._parseBuffer):this._utf8Decoder.decode(E.subarray(k,J),this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,$))return this._preserveStack(I,q,$,k),this._logSlowResolvingAsync(T),T}else if(!ae){const k=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,k))return this._preserveStack(I,q,k,0),this._logSlowResolvingAsync(T),T}this._activeBuffer.x===I&&this._activeBuffer.y===q||this._onCursorMove.fire();const le=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),H=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);H<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(H,this._bufferService.rows-1),Math.min(le,this._bufferService.rows-1))}print(E,R,T){let I,q;const ee=this._charsetService.charset,ae=this._optionsService.rawOptions.screenReaderMode,le=this._bufferService.cols,H=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,J=this._curAttrData;let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&T-R>0&&$.getWidth(this._activeBuffer.x-1)===2&&$.setCellFromCodepoint(this._activeBuffer.x-1,0,1,J);let se=this._parser.precedingJoinState;for(let D=R;D<T;++D){if(I=E[D],I<127&&ee){const K=ee[String.fromCharCode(I)];K&&(I=K.charCodeAt(0))}const O=this._unicodeService.charProperties(I,se);q=b.UnicodeService.extractWidth(O);const W=b.UnicodeService.extractShouldJoin(O),j=W?b.UnicodeService.extractWidth(se):0;if(se=O,ae&&this._onA11yChar.fire((0,_.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+q-j>le){if(H){const K=$;let N=this._activeBuffer.x-j;for(this._activeBuffer.x=j,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),$=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),j>0&&$ instanceof r.BufferLine&&$.copyCellsFrom(K,N,0,j,!1);N<le;)K.setCellFromCodepoint(N++,0,1,J)}else if(this._activeBuffer.x=le-1,q===2)continue}if(W&&this._activeBuffer.x){const K=$.getWidth(this._activeBuffer.x-1)?1:2;$.addCodepointToCell(this._activeBuffer.x-K,I,q);for(let N=q-j;--N>=0;)$.setCellFromCodepoint(this._activeBuffer.x++,0,0,J)}else if(k&&($.insertCells(this._activeBuffer.x,q-j,this._activeBuffer.getNullCell(J)),$.getWidth(le-1)===2&&$.setCellFromCodepoint(le-1,i.NULL_CELL_CODE,i.NULL_CELL_WIDTH,J)),$.setCellFromCodepoint(this._activeBuffer.x++,I,q,J),q>0)for(;--q;)$.setCellFromCodepoint(this._activeBuffer.x++,0,0,J)}this._parser.precedingJoinState=se,this._activeBuffer.x<le&&T-R>0&&$.getWidth(this._activeBuffer.x)===0&&!$.hasContent(this._activeBuffer.x)&&$.setCellFromCodepoint(this._activeBuffer.x,0,1,J),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,R){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,R):this._parser.registerCsiHandler(E,T=>!B(T.params[0],this._optionsService.rawOptions.windowOptions)||R(T))}registerDcsHandler(E,R){return this._parser.registerDcsHandler(E,new g.DcsHandler(R))}registerEscHandler(E,R){return this._parser.registerEscHandler(E,R)}registerOscHandler(E,R){return this._parser.registerOscHandler(E,new y.OscHandler(R))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);R.hasWidth(this._activeBuffer.x)&&!R.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,R){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+R):(this._activeBuffer.x=E,this._activeBuffer.y=R),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,R){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+R)}cursorUp(E){const R=this._activeBuffer.y-this._activeBuffer.scrollTop;return R>=0?this._moveCursor(0,-Math.min(R,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){const R=this._activeBuffer.scrollBottom-this._activeBuffer.y;return R>=0?this._moveCursor(0,Math.min(R,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){const R=E.params[0];return R===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:R===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let R=E.params[0]||1;for(;R--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let R=E.params[0]||1;for(;R--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){const R=E.params[0];return R===1&&(this._curAttrData.bg|=536870912),R!==2&&R!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,R,T,I=!1,q=!1){const ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);ee.replaceCells(R,T,this._activeBuffer.getNullCell(this._eraseAttrData()),q),I&&(ee.isWrapped=!1)}_resetBufferLine(E,R=!1){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);T&&(T.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),R),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),T.isWrapped=!1)}eraseInDisplay(E,R=!1){let T;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,R);T<this._bufferService.rows;T++)this._resetBufferLine(T,R);this._dirtyRowTracker.markDirty(T);break;case 1:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T,0,this._activeBuffer.x+1,!0,R),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(T+1).isWrapped=!1);T--;)this._resetBufferLine(T,R);this._dirtyRowTracker.markDirty(0);break;case 2:for(T=this._bufferService.rows,this._dirtyRowTracker.markDirty(T-1);T--;)this._resetBufferLine(T,R);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(E,R=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,R);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,R);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,R)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let R=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;R--;)this._activeBuffer.lines.splice(q-1,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let R=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;R--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let R=E.params[0]||1;for(;R--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let R=E.params[0]||1;for(;R--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(r.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);I.deleteCells(0,R,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);I.insertCells(0,R,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);I.insertCells(this._activeBuffer.x,R,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);I.deleteCells(this._activeBuffer.x,R,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){const R=this._parser.precedingJoinState;if(!R)return!0;const T=E.params[0]||1,I=b.UnicodeService.extractWidth(R),q=this._activeBuffer.x-I,ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(q),ae=new Uint32Array(ee.length*T);let le=0;for(let k=0;k<ee.length;){const J=ee.codePointAt(k)||0;ae[le++]=J,k+=J>65535?2:1}let H=le;for(let k=1;k<T;++k)ae.copyWithin(H,0,le),H+=le;return this.print(ae,0,H),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,d.DEFAULT_CHARSET),this._charsetService.setgCharset(1,d.DEFAULT_CHARSET),this._charsetService.setgCharset(2,d.DEFAULT_CHARSET),this._charsetService.setgCharset(3,d.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[R]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,R){const T=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:q}=this._coreMouseService,ee=this._coreService,{buffers:ae,cols:le}=this._bufferService,{active:H,alt:k}=ae,J=this._optionsService.rawOptions,$=W=>W?1:2,se=E.params[0];return D=se,O=R?se===2?4:se===4?$(ee.modes.insertMode):se===12?3:se===20?$(J.convertEol):0:se===1?$(T.applicationCursorKeys):se===3?J.windowOptions.setWinLines?le===80?2:le===132?1:0:0:se===6?$(T.origin):se===7?$(T.wraparound):se===8?3:se===9?$(I==="X10"):se===12?$(J.cursorBlink):se===25?$(!ee.isCursorHidden):se===45?$(T.reverseWraparound):se===66?$(T.applicationKeypad):se===67?4:se===1e3?$(I==="VT200"):se===1002?$(I==="DRAG"):se===1003?$(I==="ANY"):se===1004?$(T.sendFocus):se===1005?4:se===1006?$(q==="SGR"):se===1015?4:se===1016?$(q==="SGR_PIXELS"):se===1048?1:se===47||se===1047||se===1049?$(H===k):se===2004?$(T.bracketedPasteMode):0,ee.triggerDataEvent(`${l.C0.ESC}[${R?"":"?"}${D};${O}$y`),!0;var D,O}_updateAttrColor(E,R,T,I,q){return R===2?(E|=50331648,E&=-16777216,E|=f.AttributeData.fromColorRGB([T,I,q])):R===5&&(E&=-50331904,E|=33554432|255&T),E}_extractColor(E,R,T){const I=[0,0,-1,0,0,0];let q=0,ee=0;do{if(I[ee+q]=E.params[R+ee],E.hasSubParams(R+ee)){const ae=E.getSubParams(R+ee);let le=0;do I[1]===5&&(q=1),I[ee+le+1+q]=ae[le];while(++le<ae.length&&le+ee+1+q<I.length);break}if(I[1]===5&&ee+q>=2||I[1]===2&&ee+q>=5)break;I[1]&&(q=1)}while(++ee+R<E.length&&ee+q<I.length);for(let ae=2;ae<I.length;++ae)I[ae]===-1&&(I[ae]=0);switch(I[0]){case 38:T.fg=this._updateAttrColor(T.fg,I[1],I[3],I[4],I[5]);break;case 48:T.bg=this._updateAttrColor(T.bg,I[1],I[3],I[4],I[5]);break;case 58:T.extended=T.extended.clone(),T.extended.underlineColor=this._updateAttrColor(T.extended.underlineColor,I[1],I[3],I[4],I[5])}return ee}_processUnderline(E,R){R.extended=R.extended.clone(),(!~E||E>5)&&(E=1),R.extended.underlineStyle=E,R.fg|=268435456,E===0&&(R.fg&=-268435457),R.updateExtended()}_processSGR0(E){E.fg=r.DEFAULT_ATTR_DATA.fg,E.bg=r.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;const R=E.length;let T;const I=this._curAttrData;for(let q=0;q<R;q++)T=E.params[q],T>=30&&T<=37?(I.fg&=-50331904,I.fg|=16777216|T-30):T>=40&&T<=47?(I.bg&=-50331904,I.bg|=16777216|T-40):T>=90&&T<=97?(I.fg&=-50331904,I.fg|=16777224|T-90):T>=100&&T<=107?(I.bg&=-50331904,I.bg|=16777224|T-100):T===0?this._processSGR0(I):T===1?I.fg|=134217728:T===3?I.bg|=67108864:T===4?(I.fg|=268435456,this._processUnderline(E.hasSubParams(q)?E.getSubParams(q)[0]:1,I)):T===5?I.fg|=536870912:T===7?I.fg|=67108864:T===8?I.fg|=1073741824:T===9?I.fg|=2147483648:T===2?I.bg|=134217728:T===21?this._processUnderline(2,I):T===22?(I.fg&=-134217729,I.bg&=-134217729):T===23?I.bg&=-67108865:T===24?(I.fg&=-268435457,this._processUnderline(0,I)):T===25?I.fg&=-536870913:T===27?I.fg&=-67108865:T===28?I.fg&=-1073741825:T===29?I.fg&=2147483647:T===39?(I.fg&=-67108864,I.fg|=16777215&r.DEFAULT_ATTR_DATA.fg):T===49?(I.bg&=-67108864,I.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):T===38||T===48||T===58?q+=this._extractColor(E,q,I):T===53?I.bg|=1073741824:T===55?I.bg&=-1073741825:T===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):T===100?(I.fg&=-67108864,I.fg|=16777215&r.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",T);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const R=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${R};${T}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){const R=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${R};${T}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){const R=E.params[0]||1;switch(R){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const T=R%2==1;return this._optionsService.options.cursorBlink=T,!0}setScrollRegion(E){const R=E.params[0]||1;let T;return(E.length<2||(T=E.params[1])>this._bufferService.rows||T===0)&&(T=this._bufferService.rows),T>R&&(this._activeBuffer.scrollTop=R-1,this._activeBuffer.scrollBottom=T-1,this._setCursor(0,0)),!0}windowOptions(E){if(!B(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;const R=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:R!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:R!==0&&R!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),R!==0&&R!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:R!==0&&R!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),R!==0&&R!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){const R=[],T=E.split(";");for(;T.length>1;){const I=T.shift(),q=T.shift();if(/^\d+$/.exec(I)){const ee=parseInt(I);if(X(ee))if(q==="?")R.push({type:0,index:ee});else{const ae=(0,L.parseColor)(q);ae&&R.push({type:1,index:ee,color:ae})}}}return R.length&&this._onColor.fire(R),!0}setHyperlink(E){const R=E.split(";");return!(R.length<2)&&(R[1]?this._createHyperlink(R[0],R[1]):!R[0]&&this._finishHyperlink())}_createHyperlink(E,R){this._getCurrentLinkId()&&this._finishHyperlink();const T=E.split(":");let I;const q=T.findIndex(ee=>ee.startsWith("id="));return q!==-1&&(I=T[q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:R}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,R){const T=E.split(";");for(let I=0;I<T.length&&!(R>=this._specialColors.length);++I,++R)if(T[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[R]}]);else{const q=(0,L.parseColor)(T[I]);q&&this._onColor.fire([{type:1,index:this._specialColors[R],color:q}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;const R=[],T=E.split(";");for(let I=0;I<T.length;++I)if(/^\d+$/.exec(T[I])){const q=parseInt(T[I]);X(q)&&R.push({type:2,index:q})}return R.length&&this._onColor.fire(R),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,d.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(M[E[0]],d.CHARSETS[E[1]]||d.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){const E=new n.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let R=0;R<this._bufferService.rows;++R){const T=this._activeBuffer.ybase+this._activeBuffer.y+R,I=this._activeBuffer.lines.get(T);I&&(I.fill(E),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,R){const T=this._bufferService.buffer,I=this._optionsService.rawOptions;return(q=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${q}${l.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${T.scrollTop+1};${T.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,R){this._dirtyRowTracker.markRangeDirty(E,R)}}s.InputHandler=U;let V=class{constructor(z){this._bufferService=z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(z){z<this.start?this.start=z:z>this.end&&(this.end=z)}markRangeDirty(z,E){z>E&&(F=z,z=E,E=F),z<this.start&&(this.start=z),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function X(z){return 0<=z&&z<256}V=h([u(0,S.IBufferService)],V)},844:(w,s)=>{function a(h){for(const u of h)u.dispose();h.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const u=this._disposables.indexOf(h);u!==-1&&this._disposables.splice(u,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var u;this._isDisposed||h===this._value||((u=this._value)==null||u.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)==null||h.dispose(),this._value=void 0}},s.toDisposable=function(h){return{dispose:h}},s.disposeArray=a,s.getDisposeArrayDisposable=function(h){return{dispose:()=>a(h)}}},1505:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(u,l,d){this._data[u]||(this._data[u]={}),this._data[u][l]=d}get(u,l){return this._data[u]?this._data[u][l]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(h,u,l,d,m){this._data.get(h,u)||this._data.set(h,u,new a),this._data.get(h,u).set(l,d,m)}get(h,u,l,d){var m;return(m=this._data.get(h,u))==null?void 0:m.get(l,d)}clear(){this._data.clear()}}},6114:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof process<"u"&&"title"in process;const a=s.isNode?"node":navigator.userAgent,h=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;const u=a.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),s.isIpad=h==="iPad",s.isIphone=h==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),s.isLinux=h.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},6106:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let a=0;s.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(a=this._search(this._getKey(h)),this._array.splice(a,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const u=this._getKey(h);if(u===void 0||(a=this._search(u),a===-1)||this._getKey(this._array[a])!==u)return!1;do if(this._array[a]===h)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===u);return!1}*getKeyIterator(h){if(this._array.length!==0&&(a=this._search(h),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===h)}forEachByKey(h,u){if(this._array.length!==0&&(a=this._search(h),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do u(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===h)}values(){return[...this._array].values()}_search(h){let u=0,l=this._array.length-1;for(;l>=u;){let d=u+l>>1;const m=this._getKey(this._array[d]);if(m>h)l=d-1;else{if(!(m<h)){for(;d>0&&this._getKey(this._array[d-1])===h;)d--;return d}u=d+1}}return u}}},7226:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const h=a(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let C=0,_=0,r=m.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),_=Math.max(C,_),o=m.timeRemaining(),1.5*_>o)return r-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-C))}ms`),void this._start();r=o}this.clear()}}class l extends u{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){const C=Date.now()+m;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}s.PriorityTaskQueue=l,s.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(d){return requestIdleCallback(d)}_cancelCallback(d){cancelIdleCallback(d)}}:l,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(d){this._queue.clear(),this._queue.enqueue(d)}flush(){this._queue.flush()}}},9282:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const h=a(643);s.updateWindowsModeWrappedState=function(u){const l=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),d=l==null?void 0:l.get(u.cols-1),m=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);m&&d&&(m.isWrapped=d[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&d[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new a;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}s.AttributeData=a;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}get underlineVariantOffset(){const l=(3758096384&this._ext)>>29;return l<0?4294967288^l:l}set underlineVariantOffset(l){this._ext&=536870911,this._ext|=l<<29&3758096384}constructor(l=0,d=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=d}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=h},9092:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const h=a(6349),u=a(7226),l=a(3734),d=a(8437),m=a(4634),C=a(511),_=a(643),r=a(4863),o=a(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(i,n,f){this._hasScrollback=i,this._optionsService=n,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=d.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(i){return i?(this._nullCell.fg=i.fg,this._nullCell.bg=i.bg,this._nullCell.extended=i.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(i){return i?(this._whitespaceCell.fg=i.fg,this._whitespaceCell.bg=i.bg,this._whitespaceCell.extended=i.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(i,n){return new d.BufferLine(this._bufferService.cols,this.getNullCell(i),n)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const i=this.ybase+this.y-this.ydisp;return i>=0&&i<this._rows}_getCorrectBufferLength(i){if(!this._hasScrollback)return i;const n=i+this._optionsService.rawOptions.scrollback;return n>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:n}fillViewportRows(i){if(this.lines.length===0){i===void 0&&(i=d.DEFAULT_ATTR_DATA);let n=this._rows;for(;n--;)this.lines.push(this.getBlankLine(i))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(i,n){const f=this.getNullCell(d.DEFAULT_ATTR_DATA);let S=0;const b=this._getCorrectBufferLength(n);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<i)for(let g=0;g<this.lines.length;g++)S+=+this.lines.get(g).resize(i,f);let y=0;if(this._rows<n)for(let g=this._rows;g<n;g++)this.lines.length<n+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new d.BufferLine(i,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+y+1?(this.ybase--,y++,this.ydisp>0&&this.ydisp--):this.lines.push(new d.BufferLine(i,f)));else for(let g=this._rows;g>n;g--)this.lines.length>n+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){const g=this.lines.length-b;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=b}this.x=Math.min(this.x,i-1),this.y=Math.min(this.y,n-1),y&&(this.y+=y),this.savedX=Math.min(this.savedX,i-1),this.scrollTop=0}if(this.scrollBottom=n-1,this._isReflowEnabled&&(this._reflow(i,n),this._cols>i))for(let y=0;y<this.lines.length;y++)S+=+this.lines.get(y).resize(i,f);this._cols=i,this._rows=n,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let i=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,i=!1);let n=0;for(;this._memoryCleanupPosition<this.lines.length;)if(n+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),n>100)return!0;return i}get _isReflowEnabled(){const i=this._optionsService.rawOptions.windowsPty;return i&&i.buildNumber?this._hasScrollback&&i.backend==="conpty"&&i.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(i,n){this._cols!==i&&(i>this._cols?this._reflowLarger(i,n):this._reflowSmaller(i,n))}_reflowLarger(i,n){const f=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,i,this.ybase+this.y,this.getNullCell(d.DEFAULT_ATTR_DATA));if(f.length>0){const S=(0,m.reflowLargerCreateNewLayout)(this.lines,f);(0,m.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(i,n,S.countRemoved)}}_reflowLargerAdjustViewport(i,n,f){const S=this.getNullCell(d.DEFAULT_ATTR_DATA);let b=f;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<n&&this.lines.push(new d.BufferLine(i,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)}_reflowSmaller(i,n){const f=this.getNullCell(d.DEFAULT_ATTR_DATA),S=[];let b=0;for(let y=this.lines.length-1;y>=0;y--){let g=this.lines.get(y);if(!g||!g.isWrapped&&g.getTrimmedLength()<=i)continue;const L=[g];for(;g.isWrapped&&y>0;)g=this.lines.get(--y),L.unshift(g);const M=this.ybase+this.y;if(M>=y&&M<y+L.length)continue;const P=L[L.length-1].getTrimmedLength(),B=(0,m.reflowSmallerGetNewLineLengths)(L,this._cols,i),A=B.length-L.length;let F;F=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const U=[];for(let T=0;T<A;T++){const I=this.getBlankLine(d.DEFAULT_ATTR_DATA,!0);U.push(I)}U.length>0&&(S.push({start:y+L.length+b,newLines:U}),b+=U.length),L.push(...U);let V=B.length-1,X=B[V];X===0&&(V--,X=B[V]);let z=L.length-A-1,E=P;for(;z>=0;){const T=Math.min(E,X);if(L[V]===void 0)break;if(L[V].copyCellsFrom(L[z],E-T,X-T,T,!0),X-=T,X===0&&(V--,X=B[V]),E-=T,E===0){z--;const I=Math.max(z,0);E=(0,m.getWrappedLineTrimmedLength)(L,I,this._cols)}}for(let T=0;T<L.length;T++)B[T]<i&&L[T].setCell(B[T],f);let R=A-F;for(;R-- >0;)this.ybase===0?this.y<n-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-n&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+n-1)}if(S.length>0){const y=[],g=[];for(let V=0;V<this.lines.length;V++)g.push(this.lines.get(V));const L=this.lines.length;let M=L-1,P=0,B=S[P];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let A=0;for(let V=Math.min(this.lines.maxLength-1,L+b-1);V>=0;V--)if(B&&B.start>M+A){for(let X=B.newLines.length-1;X>=0;X--)this.lines.set(V--,B.newLines[X]);V++,y.push({index:M+1,amount:B.newLines.length}),A+=B.newLines.length,B=S[++P]}else this.lines.set(V,g[M--]);let F=0;for(let V=y.length-1;V>=0;V--)y[V].index+=F,this.lines.onInsertEmitter.fire(y[V]),F+=y[V].amount;const U=Math.max(0,L+b-this.lines.maxLength);U>0&&this.lines.onTrimEmitter.fire(U)}}translateBufferLineToString(i,n,f=0,S){const b=this.lines.get(i);return b?b.translateToString(n,f,S):""}getWrappedRangeForLine(i){let n=i,f=i;for(;n>0&&this.lines.get(n).isWrapped;)n--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:n,last:f}}setupTabStops(i){for(i!=null?this.tabs[i]||(i=this.prevStop(i)):(this.tabs={},i=0);i<this._cols;i+=this._optionsService.rawOptions.tabStopWidth)this.tabs[i]=!0}prevStop(i){for(i==null&&(i=this.x);!this.tabs[--i]&&i>0;);return i>=this._cols?this._cols-1:i<0?0:i}nextStop(i){for(i==null&&(i=this.x);!this.tabs[++i]&&i<this._cols;);return i>=this._cols?this._cols-1:i<0?0:i}clearMarkers(i){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].line===i&&(this.markers[n].dispose(),this.markers.splice(n--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].dispose(),this.markers.splice(i--,1);this._isClearing=!1}addMarker(i){const n=new r.Marker(i);return this.markers.push(n),n.register(this.lines.onTrim(f=>{n.line-=f,n.line<0&&n.dispose()})),n.register(this.lines.onInsert(f=>{n.line>=f.index&&(n.line+=f.amount)})),n.register(this.lines.onDelete(f=>{n.line>=f.index&&n.line<f.index+f.amount&&n.dispose(),n.line>f.index&&(n.line-=f.amount)})),n.register(n.onDispose(()=>this._removeMarker(n))),n}_removeMarker(i){this._isClearing||this.markers.splice(this.markers.indexOf(i),1)}}},8437:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const h=a(3734),u=a(511),l=a(643),d=a(482);s.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let m=0;class C{constructor(r,o,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*r);const n=o||u.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let f=0;f<r;++f)this.setCell(f,n);this.length=r}get(r){const o=this._data[3*r+0],i=2097151&o;return[this._data[3*r+1],2097152&o?this._combined[r]:i?(0,d.stringFromCodePoint)(i):"",o>>22,2097152&o?this._combined[r].charCodeAt(this._combined[r].length-1):i]}set(r,o){this._data[3*r+1]=o[l.CHAR_DATA_ATTR_INDEX],o[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[r]=o[1],this._data[3*r+0]=2097152|r|o[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*r+0]=o[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(r){return this._data[3*r+0]>>22}hasWidth(r){return 12582912&this._data[3*r+0]}getFg(r){return this._data[3*r+1]}getBg(r){return this._data[3*r+2]}hasContent(r){return 4194303&this._data[3*r+0]}getCodePoint(r){const o=this._data[3*r+0];return 2097152&o?this._combined[r].charCodeAt(this._combined[r].length-1):2097151&o}isCombined(r){return 2097152&this._data[3*r+0]}getString(r){const o=this._data[3*r+0];return 2097152&o?this._combined[r]:2097151&o?(0,d.stringFromCodePoint)(2097151&o):""}isProtected(r){return 536870912&this._data[3*r+2]}loadCell(r,o){return m=3*r,o.content=this._data[m+0],o.fg=this._data[m+1],o.bg=this._data[m+2],2097152&o.content&&(o.combinedData=this._combined[r]),268435456&o.bg&&(o.extended=this._extendedAttrs[r]),o}setCell(r,o){2097152&o.content&&(this._combined[r]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[r]=o.extended),this._data[3*r+0]=o.content,this._data[3*r+1]=o.fg,this._data[3*r+2]=o.bg}setCellFromCodepoint(r,o,i,n){268435456&n.bg&&(this._extendedAttrs[r]=n.extended),this._data[3*r+0]=o|i<<22,this._data[3*r+1]=n.fg,this._data[3*r+2]=n.bg}addCodepointToCell(r,o,i){let n=this._data[3*r+0];2097152&n?this._combined[r]+=(0,d.stringFromCodePoint)(o):2097151&n?(this._combined[r]=(0,d.stringFromCodePoint)(2097151&n)+(0,d.stringFromCodePoint)(o),n&=-2097152,n|=2097152):n=o|4194304,i&&(n&=-12582913,n|=i<<22),this._data[3*r+0]=n}insertCells(r,o,i){if((r%=this.length)&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,i),o<this.length-r){const n=new u.CellData;for(let f=this.length-r-o-1;f>=0;--f)this.setCell(r+o+f,this.loadCell(r+f,n));for(let f=0;f<o;++f)this.setCell(r+f,i)}else for(let n=r;n<this.length;++n)this.setCell(n,i);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,i)}deleteCells(r,o,i){if(r%=this.length,o<this.length-r){const n=new u.CellData;for(let f=0;f<this.length-r-o;++f)this.setCell(r+f,this.loadCell(r+o+f,n));for(let f=this.length-o;f<this.length;++f)this.setCell(f,i)}else for(let n=r;n<this.length;++n)this.setCell(n,i);r&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,i),this.getWidth(r)!==0||this.hasContent(r)||this.setCellFromCodepoint(r,0,1,i)}replaceCells(r,o,i,n=!1){if(n)for(r&&this.getWidth(r-1)===2&&!this.isProtected(r-1)&&this.setCellFromCodepoint(r-1,0,1,i),o<this.length&&this.getWidth(o-1)===2&&!this.isProtected(o)&&this.setCellFromCodepoint(o,0,1,i);r<o&&r<this.length;)this.isProtected(r)||this.setCell(r,i),r++;else for(r&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r-1,0,1,i),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o,0,1,i);r<o&&r<this.length;)this.setCell(r++,i)}resize(r,o){if(r===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*r;if(r>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const n=new Uint32Array(i);n.set(this._data),this._data=n}for(let n=this.length;n<r;++n)this.setCell(n,o)}else{this._data=this._data.subarray(0,i);const n=Object.keys(this._combined);for(let S=0;S<n.length;S++){const b=parseInt(n[S],10);b>=r&&delete this._combined[b]}const f=Object.keys(this._extendedAttrs);for(let S=0;S<f.length;S++){const b=parseInt(f[S],10);b>=r&&delete this._extendedAttrs[b]}}return this.length=r,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const r=new Uint32Array(this._data.length);return r.set(this._data),this._data=r,1}return 0}fill(r,o=!1){if(o)for(let i=0;i<this.length;++i)this.isProtected(i)||this.setCell(i,r);else{this._combined={},this._extendedAttrs={};for(let i=0;i<this.length;++i)this.setCell(i,r)}}copyFrom(r){this.length!==r.length?this._data=new Uint32Array(r._data):this._data.set(r._data),this.length=r.length,this._combined={};for(const o in r._combined)this._combined[o]=r._combined[o];this._extendedAttrs={};for(const o in r._extendedAttrs)this._extendedAttrs[o]=r._extendedAttrs[o];this.isWrapped=r.isWrapped}clone(){const r=new C(0);r._data=new Uint32Array(this._data),r.length=this.length;for(const o in this._combined)r._combined[o]=this._combined[o];for(const o in this._extendedAttrs)r._extendedAttrs[o]=this._extendedAttrs[o];return r.isWrapped=this.isWrapped,r}getTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0])return r+(this._data[3*r+0]>>22);return 0}getNoBgTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0]||50331648&this._data[3*r+2])return r+(this._data[3*r+0]>>22);return 0}copyCellsFrom(r,o,i,n,f){const S=r._data;if(f)for(let y=n-1;y>=0;y--){for(let g=0;g<3;g++)this._data[3*(i+y)+g]=S[3*(o+y)+g];268435456&S[3*(o+y)+2]&&(this._extendedAttrs[i+y]=r._extendedAttrs[o+y])}else for(let y=0;y<n;y++){for(let g=0;g<3;g++)this._data[3*(i+y)+g]=S[3*(o+y)+g];268435456&S[3*(o+y)+2]&&(this._extendedAttrs[i+y]=r._extendedAttrs[o+y])}const b=Object.keys(r._combined);for(let y=0;y<b.length;y++){const g=parseInt(b[y],10);g>=o&&(this._combined[g-o+i]=r._combined[g])}}translateToString(r,o,i,n){o=o??0,i=i??this.length,r&&(i=Math.min(i,this.getTrimmedLength())),n&&(n.length=0);let f="";for(;o<i;){const S=this._data[3*o+0],b=2097151&S,y=2097152&S?this._combined[o]:b?(0,d.stringFromCodePoint)(b):l.WHITESPACE_CELL_CHAR;if(f+=y,n)for(let g=0;g<y.length;++g)n.push(o);o+=S>>22||1}return n&&n.push(o),f}}s.BufferLine=C},4841:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(a,h){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return h*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(w,s)=>{function a(h,u,l){if(u===h.length-1)return h[u].getTrimmedLength();const d=!h[u].hasContent(l-1)&&h[u].getWidth(l-1)===1,m=h[u+1].getWidth(0)===2;return d&&m?l-1:l}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(h,u,l,d,m){const C=[];for(let _=0;_<h.length-1;_++){let r=_,o=h.get(++r);if(!o.isWrapped)continue;const i=[h.get(_)];for(;r<h.length&&o.isWrapped;)i.push(o),o=h.get(++r);if(d>=_&&d<r){_+=i.length-1;continue}let n=0,f=a(i,n,u),S=1,b=0;for(;S<i.length;){const g=a(i,S,u),L=g-b,M=l-f,P=Math.min(L,M);i[n].copyCellsFrom(i[S],b,f,P,!1),f+=P,f===l&&(n++,f=0),b+=P,b===g&&(S++,b=0),f===0&&n!==0&&i[n-1].getWidth(l-1)===2&&(i[n].copyCellsFrom(i[n-1],l-1,f++,1,!1),i[n-1].setCell(l-1,m))}i[n].replaceCells(f,l,m);let y=0;for(let g=i.length-1;g>0&&(g>n||i[g].getTrimmedLength()===0);g--)y++;y>0&&(C.push(_+i.length-y),C.push(y)),_+=i.length-1}return C},s.reflowLargerCreateNewLayout=function(h,u){const l=[];let d=0,m=u[d],C=0;for(let _=0;_<h.length;_++)if(m===_){const r=u[++d];h.onDeleteEmitter.fire({index:_-C,amount:r}),_+=r-1,C+=r,m=u[++d]}else l.push(_);return{layout:l,countRemoved:C}},s.reflowLargerApplyNewLayout=function(h,u){const l=[];for(let d=0;d<u.length;d++)l.push(h.get(u[d]));for(let d=0;d<l.length;d++)h.set(d,l[d]);h.length=u.length},s.reflowSmallerGetNewLineLengths=function(h,u,l){const d=[],m=h.map((o,i)=>a(h,i,u)).reduce((o,i)=>o+i);let C=0,_=0,r=0;for(;r<m;){if(m-r<l){d.push(m-r);break}C+=l;const o=a(h,_,u);C>o&&(C-=o,_++);const i=h[_].getWidth(C-1)===2;i&&C--;const n=i?l-1:l;d.push(n),r+=n}return d},s.getWrappedLineTrimmedLength=a},5295:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const h=a(8460),u=a(844),l=a(9092);class d extends u.Disposable{constructor(C,_){super(),this._optionsService=C,this._bufferService=_,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,_){this._normal.resize(C,_),this._alt.resize(C,_),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}s.BufferSet=d},511:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const h=a(482),u=a(643),l=a(3734);class d extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const _=new d;return _.setFromCharData(C),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(C[u.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(C[u.CHAR_DATA_CHAR_INDEX].length===2){const r=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){const o=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(r-55296)+o-56320+65536|C[u.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[u.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=C[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=d},643:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const h=a(8460),u=a(844);class l{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}s.Marker=l,l._nextId=1},7116:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},s.CHARSETS.A={"#":""},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},s.CHARSETS.C=s.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.E=s.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},s.CHARSETS.H=s.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(w,s)=>{var a,h,u;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(a||(s.C0=a={})),function(l){l.PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC=""}(h||(s.C1=h={})),function(l){l.ST=`${a.ESC}\\`}(u||(s.C1_ESCAPED=u={}))},7399:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const h=a(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(l,d,m,C){const _={type:0,cancel:!1,key:void 0},r=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?_.key=d?h.C0.ESC+"OA":h.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?_.key=d?h.C0.ESC+"OD":h.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?_.key=d?h.C0.ESC+"OC":h.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(_.key=d?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:_.key=l.ctrlKey?"\b":h.C0.DEL,l.altKey&&(_.key=h.C0.ESC+_.key);break;case 9:if(l.shiftKey){_.key=h.C0.ESC+"[Z";break}_.key=h.C0.HT,_.cancel=!0;break;case 13:_.key=l.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,_.cancel=!0;break;case 27:_.key=h.C0.ESC,l.altKey&&(_.key=h.C0.ESC+h.C0.ESC),_.cancel=!0;break;case 37:if(l.metaKey)break;r?(_.key=h.C0.ESC+"[1;"+(r+1)+"D",_.key===h.C0.ESC+"[1;3D"&&(_.key=h.C0.ESC+(m?"b":"[1;5D"))):_.key=d?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(l.metaKey)break;r?(_.key=h.C0.ESC+"[1;"+(r+1)+"C",_.key===h.C0.ESC+"[1;3C"&&(_.key=h.C0.ESC+(m?"f":"[1;5C"))):_.key=d?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(l.metaKey)break;r?(_.key=h.C0.ESC+"[1;"+(r+1)+"A",m||_.key!==h.C0.ESC+"[1;3A"||(_.key=h.C0.ESC+"[1;5A")):_.key=d?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(l.metaKey)break;r?(_.key=h.C0.ESC+"[1;"+(r+1)+"B",m||_.key!==h.C0.ESC+"[1;3B"||(_.key=h.C0.ESC+"[1;5B")):_.key=d?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(_.key=h.C0.ESC+"[2~");break;case 46:_.key=r?h.C0.ESC+"[3;"+(r+1)+"~":h.C0.ESC+"[3~";break;case 36:_.key=r?h.C0.ESC+"[1;"+(r+1)+"H":d?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:_.key=r?h.C0.ESC+"[1;"+(r+1)+"F":d?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:l.shiftKey?_.type=2:l.ctrlKey?_.key=h.C0.ESC+"[5;"+(r+1)+"~":_.key=h.C0.ESC+"[5~";break;case 34:l.shiftKey?_.type=3:l.ctrlKey?_.key=h.C0.ESC+"[6;"+(r+1)+"~":_.key=h.C0.ESC+"[6~";break;case 112:_.key=r?h.C0.ESC+"[1;"+(r+1)+"P":h.C0.ESC+"OP";break;case 113:_.key=r?h.C0.ESC+"[1;"+(r+1)+"Q":h.C0.ESC+"OQ";break;case 114:_.key=r?h.C0.ESC+"[1;"+(r+1)+"R":h.C0.ESC+"OR";break;case 115:_.key=r?h.C0.ESC+"[1;"+(r+1)+"S":h.C0.ESC+"OS";break;case 116:_.key=r?h.C0.ESC+"[15;"+(r+1)+"~":h.C0.ESC+"[15~";break;case 117:_.key=r?h.C0.ESC+"[17;"+(r+1)+"~":h.C0.ESC+"[17~";break;case 118:_.key=r?h.C0.ESC+"[18;"+(r+1)+"~":h.C0.ESC+"[18~";break;case 119:_.key=r?h.C0.ESC+"[19;"+(r+1)+"~":h.C0.ESC+"[19~";break;case 120:_.key=r?h.C0.ESC+"[20;"+(r+1)+"~":h.C0.ESC+"[20~";break;case 121:_.key=r?h.C0.ESC+"[21;"+(r+1)+"~":h.C0.ESC+"[21~";break;case 122:_.key=r?h.C0.ESC+"[23;"+(r+1)+"~":h.C0.ESC+"[23~";break;case 123:_.key=r?h.C0.ESC+"[24;"+(r+1)+"~":h.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(m&&!C||!l.altKey||l.metaKey)!m||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?_.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(_.key=h.C0.US),l.key==="@"&&(_.key=h.C0.NUL)):l.keyCode===65&&(_.type=1);else{const o=u[l.keyCode],i=o==null?void 0:o[l.shiftKey?1:0];if(i)_.key=h.C0.ESC+i;else if(l.keyCode>=65&&l.keyCode<=90){const n=l.ctrlKey?l.keyCode-64:l.keyCode+32;let f=String.fromCharCode(n);l.shiftKey&&(f=f.toUpperCase()),_.key=h.C0.ESC+f}else if(l.keyCode===32)_.key=h.C0.ESC+(l.ctrlKey?h.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let n=l.code.slice(3,4);l.shiftKey||(n=n.toLowerCase()),_.key=h.C0.ESC+n,_.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?_.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?_.key=h.C0.NUL:l.keyCode>=51&&l.keyCode<=55?_.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?_.key=h.C0.DEL:l.keyCode===219?_.key=h.C0.ESC:l.keyCode===220?_.key=h.C0.FS:l.keyCode===221&&(_.key=h.C0.GS)}return _}},482:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,h=0,u=a.length){let l="";for(let d=h;d<u;++d){let m=a[d];m>65535?(m-=65536,l+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):l+=String.fromCharCode(m)}return l},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,h){const u=a.length;if(!u)return 0;let l=0,d=0;if(this._interim){const m=a.charCodeAt(d++);56320<=m&&m<=57343?h[l++]=1024*(this._interim-55296)+m-56320+65536:(h[l++]=this._interim,h[l++]=m),this._interim=0}for(let m=d;m<u;++m){const C=a.charCodeAt(m);if(55296<=C&&C<=56319){if(++m>=u)return this._interim=C,l;const _=a.charCodeAt(m);56320<=_&&_<=57343?h[l++]=1024*(C-55296)+_-56320+65536:(h[l++]=C,h[l++]=_)}else C!==65279&&(h[l++]=C)}return l}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,h){const u=a.length;if(!u)return 0;let l,d,m,C,_=0,r=0,o=0;if(this.interim[0]){let f=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let b,y=0;for(;(b=63&this.interim[++y])&&y<4;)S<<=6,S|=b;const g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=g-y;for(;o<L;){if(o>=u)return 0;if(b=a[o++],(192&b)!=128){o--,f=!0;break}this.interim[y++]=b,S<<=6,S|=63&b}f||(g===2?S<128?o--:h[_++]=S:g===3?S<2048||S>=55296&&S<=57343||S===65279||(h[_++]=S):S<65536||S>1114111||(h[_++]=S)),this.interim.fill(0)}const i=u-4;let n=o;for(;n<u;){for(;!(!(n<i)||128&(l=a[n])||128&(d=a[n+1])||128&(m=a[n+2])||128&(C=a[n+3]));)h[_++]=l,h[_++]=d,h[_++]=m,h[_++]=C,n+=4;if(l=a[n++],l<128)h[_++]=l;else if((224&l)==192){if(n>=u)return this.interim[0]=l,_;if(d=a[n++],(192&d)!=128){n--;continue}if(r=(31&l)<<6|63&d,r<128){n--;continue}h[_++]=r}else if((240&l)==224){if(n>=u)return this.interim[0]=l,_;if(d=a[n++],(192&d)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=d,_;if(m=a[n++],(192&m)!=128){n--;continue}if(r=(15&l)<<12|(63&d)<<6|63&m,r<2048||r>=55296&&r<=57343||r===65279)continue;h[_++]=r}else if((248&l)==240){if(n>=u)return this.interim[0]=l,_;if(d=a[n++],(192&d)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=d,_;if(m=a[n++],(192&m)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=d,this.interim[2]=m,_;if(C=a[n++],(192&C)!=128){n--;continue}if(r=(7&l)<<18|(63&d)<<12|(63&m)<<6|63&C,r<65536||r>1114111)continue;h[_++]=r}}return _}}},225:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const h=a(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let d;s.UnicodeV6=class{constructor(){if(this.version="6",!d){d=new Uint8Array(65536),d.fill(1),d[0]=0,d.fill(0,1,32),d.fill(0,127,160),d.fill(2,4352,4448),d[9001]=2,d[9002]=2,d.fill(2,11904,42192),d[12351]=1,d.fill(2,44032,55204),d.fill(2,63744,64256),d.fill(2,65040,65050),d.fill(2,65072,65136),d.fill(2,65280,65377),d.fill(2,65504,65511);for(let m=0;m<u.length;++m)d.fill(0,u[m][0],u[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?d[m]:function(C,_){let r,o=0,i=_.length-1;if(C<_[0][0]||C>_[i][1])return!1;for(;i>=o;)if(r=o+i>>1,C>_[r][1])o=r+1;else{if(!(C<_[r][0]))return!0;i=r-1}return!1}(m,l)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}charProperties(m,C){let _=this.wcwidth(m),r=_===0&&C!==0;if(r){const o=h.UnicodeService.extractWidth(C);o===0?r=!1:o>_&&(_=o)}return h.UnicodeService.createPropertyValue(0,_,r)}}},5981:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const h=a(8460),u=a(844);class l extends u.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let _;for(this._isSyncWriting=!0;_=this._writeBuffer.shift();){this._action(_);const r=this._callbacks.shift();r&&r()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(C)}_innerWrite(m=0,C=!0){const _=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const r=this._writeBuffer[this._bufferOffset],o=this._action(r,C);if(o){const n=f=>Date.now()-_>=12?setTimeout(()=>this._innerWrite(0,f)):this._innerWrite(_,f);return void o.catch(f=>(queueMicrotask(()=>{throw f}),Promise.resolve(!1))).then(n)}const i=this._callbacks[this._bufferOffset];if(i&&i(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=l},5941:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function u(l,d){const m=l.toString(16),C=m.length<2?"0"+m:m;switch(d){case 4:return m[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}s.parseColor=function(l){if(!l)return;let d=l.toLowerCase();if(d.indexOf("rgb:")===0){d=d.slice(4);const m=a.exec(d);if(m){const C=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/C*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/C*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/C*255)]}}else if(d.indexOf("#")===0&&(d=d.slice(1),h.exec(d)&&[3,6,9,12].includes(d.length))){const m=d.length/3,C=[0,0,0];for(let _=0;_<3;++_){const r=parseInt(d.slice(m*_,m*_+m),16);C[_]=m===1?r<<4:m===2?r:m===3?r>>4:r>>8}return C}},s.toRgbString=function(l,d=16){const[m,C,_]=l;return`rgb:${u(m,d)}/${u(C,d)}/${u(_,d)}`}},5770:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const h=a(482),u=a(8742),l=a(5770),d=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=d,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}registerHandler(C,_){this._handlers[C]===void 0&&(this._handlers[C]=[]);const r=this._handlers[C];return r.push(_),{dispose:()=>{const o=r.indexOf(_);o!==-1&&r.splice(o,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=d,this._ident=0}hook(C,_){if(this.reset(),this._ident=C,this._active=this._handlers[C]||d,this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(_);else this._handlerFb(this._ident,"HOOK",_)}put(C,_,r){if(this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].put(C,_,r);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(C,_,r))}unhook(C,_=!0){if(this._active.length){let r=!1,o=this._active.length-1,i=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,r=_,i=this._stack.fallThrough,this._stack.paused=!1),!i&&r===!1){for(;o>=0&&(r=this._active[o].unhook(C),r!==!0);o--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,r;o--}for(;o>=0;o--)if(r=this._active[o].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",C);this._active=d,this._ident=0}};const m=new u.Params;m.addParam(0),s.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=m,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():m,this._data="",this._hitLimit=!1}put(C,_,r){this._hitLimit||(this._data+=(0,h.utf32ToString)(C,_,r),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let _=!1;if(this._hitLimit)_=!1;else if(C&&(_=this._handler(this._data,this._params),_ instanceof Promise))return _.then(r=>(this._params=m,this._data="",this._hitLimit=!1,r));return this._params=m,this._data="",this._hitLimit=!1,_}}},2015:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const h=a(844),u=a(8742),l=a(6242),d=a(6351);class m{constructor(o){this.table=new Uint8Array(o)}setDefault(o,i){this.table.fill(o<<4|i)}add(o,i,n,f){this.table[i<<8|o]=n<<4|f}addMany(o,i,n,f){for(let S=0;S<o.length;S++)this.table[i<<8|o[S]]=n<<4|f}}s.TransitionTable=m;const C=160;s.VT500_TRANSITION_TABLE=function(){const r=new m(4095),o=Array.apply(null,Array(256)).map((y,g)=>g),i=(y,g)=>o.slice(y,g),n=i(32,127),f=i(0,24);f.push(25),f.push.apply(f,i(28,32));const S=i(0,14);let b;for(b in r.setDefault(1,0),r.addMany(n,0,2,0),S)r.addMany([24,26,153,154],b,3,0),r.addMany(i(128,144),b,3,0),r.addMany(i(144,152),b,3,0),r.add(156,b,0,0),r.add(27,b,11,1),r.add(157,b,4,8),r.addMany([152,158,159],b,0,7),r.add(155,b,11,3),r.add(144,b,11,9);return r.addMany(f,0,3,0),r.addMany(f,1,3,1),r.add(127,1,0,1),r.addMany(f,8,0,8),r.addMany(f,3,3,3),r.add(127,3,0,3),r.addMany(f,4,3,4),r.add(127,4,0,4),r.addMany(f,6,3,6),r.addMany(f,5,3,5),r.add(127,5,0,5),r.addMany(f,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(n,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(i(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(n,7,0,7),r.addMany(f,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(i(64,127),3,7,0),r.addMany(i(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(i(48,60),4,8,4),r.addMany(i(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(i(32,64),6,0,6),r.add(127,6,0,6),r.addMany(i(64,127),6,0,0),r.addMany(i(32,48),3,9,5),r.addMany(i(32,48),5,9,5),r.addMany(i(48,64),5,0,6),r.addMany(i(64,127),5,7,0),r.addMany(i(32,48),4,9,5),r.addMany(i(32,48),1,9,2),r.addMany(i(32,48),2,9,2),r.addMany(i(48,127),2,10,0),r.addMany(i(48,80),1,10,0),r.addMany(i(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(i(96,127),1,10,0),r.add(80,1,11,9),r.addMany(f,9,0,9),r.add(127,9,0,9),r.addMany(i(28,32),9,0,9),r.addMany(i(32,48),9,9,12),r.addMany(i(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(f,11,0,11),r.addMany(i(32,128),11,0,11),r.addMany(i(28,32),11,0,11),r.addMany(f,10,0,10),r.add(127,10,0,10),r.addMany(i(28,32),10,0,10),r.addMany(i(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(i(32,48),10,9,12),r.addMany(f,12,0,12),r.add(127,12,0,12),r.addMany(i(28,32),12,0,12),r.addMany(i(32,48),12,9,12),r.addMany(i(48,64),12,0,11),r.addMany(i(64,127),12,12,13),r.addMany(i(64,127),10,12,13),r.addMany(i(64,127),9,12,13),r.addMany(f,13,13,13),r.addMany(n,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(C,0,2,0),r.add(C,8,5,8),r.add(C,6,0,6),r.add(C,11,0,11),r.add(C,13,13,13),r}();class _ extends h.Disposable{constructor(o=s.VT500_TRANSITION_TABLE){super(),this._transitions=o,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(i,n,f)=>{},this._executeHandlerFb=i=>{},this._csiHandlerFb=(i,n)=>{},this._escHandlerFb=i=>{},this._errorHandlerFb=i=>i,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new d.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(o,i=[64,126]){let n=0;if(o.prefix){if(o.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=o.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(o.intermediates){if(o.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<o.intermediates.length;++S){const b=o.intermediates.charCodeAt(S);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=b}}if(o.final.length!==1)throw new Error("final must be a single byte");const f=o.final.charCodeAt(0);if(i[0]>f||f>i[1])throw new Error(`final must be in range ${i[0]} .. ${i[1]}`);return n<<=8,n|=f,n}identToString(o){const i=[];for(;o;)i.push(String.fromCharCode(255&o)),o>>=8;return i.reverse().join("")}setPrintHandler(o){this._printHandler=o}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(o,i){const n=this._identifier(o,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);const f=this._escHandlers[n];return f.push(i),{dispose:()=>{const S=f.indexOf(i);S!==-1&&f.splice(S,1)}}}clearEscHandler(o){this._escHandlers[this._identifier(o,[48,126])]&&delete this._escHandlers[this._identifier(o,[48,126])]}setEscHandlerFallback(o){this._escHandlerFb=o}setExecuteHandler(o,i){this._executeHandlers[o.charCodeAt(0)]=i}clearExecuteHandler(o){this._executeHandlers[o.charCodeAt(0)]&&delete this._executeHandlers[o.charCodeAt(0)]}setExecuteHandlerFallback(o){this._executeHandlerFb=o}registerCsiHandler(o,i){const n=this._identifier(o);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);const f=this._csiHandlers[n];return f.push(i),{dispose:()=>{const S=f.indexOf(i);S!==-1&&f.splice(S,1)}}}clearCsiHandler(o){this._csiHandlers[this._identifier(o)]&&delete this._csiHandlers[this._identifier(o)]}setCsiHandlerFallback(o){this._csiHandlerFb=o}registerDcsHandler(o,i){return this._dcsParser.registerHandler(this._identifier(o),i)}clearDcsHandler(o){this._dcsParser.clearHandler(this._identifier(o))}setDcsHandlerFallback(o){this._dcsParser.setHandlerFallback(o)}registerOscHandler(o,i){return this._oscParser.registerHandler(o,i)}clearOscHandler(o){this._oscParser.clearHandler(o)}setOscHandlerFallback(o){this._oscParser.setHandlerFallback(o)}setErrorHandler(o){this._errorHandler=o}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(o,i,n,f,S){this._parseStack.state=o,this._parseStack.handlers=i,this._parseStack.handlerPos=n,this._parseStack.transition=f,this._parseStack.chunkPos=S}parse(o,i,n){let f,S=0,b=0,y=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,y=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const g=this._parseStack.handlers;let L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&L>-1){for(;L>=0&&(f=g[L](this._params),f!==!0);L--)if(f instanceof Promise)return this._parseStack.handlerPos=L,f}this._parseStack.handlers=[];break;case 4:if(n===!1&&L>-1){for(;L>=0&&(f=g[L](),f!==!0);L--)if(f instanceof Promise)return this._parseStack.handlerPos=L,f}this._parseStack.handlers=[];break;case 6:if(S=o[this._parseStack.chunkPos],f=this._dcsParser.unhook(S!==24&&S!==26,n),f)return f;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=o[this._parseStack.chunkPos],f=this._oscParser.end(S!==24&&S!==26,n),f)return f;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,y=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let g=y;g<i;++g){switch(S=o[g],b=this._transitions.table[this.currentState<<8|(S<160?S:C)],b>>4){case 2:for(let A=g+1;;++A){if(A>=i||(S=o[A])<32||S>126&&S<C){this._printHandler(o,g,A),g=A-1;break}if(++A>=i||(S=o[A])<32||S>126&&S<C){this._printHandler(o,g,A),g=A-1;break}if(++A>=i||(S=o[A])<32||S>126&&S<C){this._printHandler(o,g,A),g=A-1;break}if(++A>=i||(S=o[A])<32||S>126&&S<C){this._printHandler(o,g,A),g=A-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const L=this._csiHandlers[this._collect<<8|S];let M=L?L.length-1:-1;for(;M>=0&&(f=L[M](this._params),f!==!0);M--)if(f instanceof Promise)return this._preserveStack(3,L,M,b,g),f;M<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++g<i&&(S=o[g])>47&&S<60);g--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const P=this._escHandlers[this._collect<<8|S];let B=P?P.length-1:-1;for(;B>=0&&(f=P[B](),f!==!0);B--)if(f instanceof Promise)return this._preserveStack(4,P,B,b,g),f;B<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let A=g+1;;++A)if(A>=i||(S=o[A])===24||S===26||S===27||S>127&&S<C){this._dcsParser.put(o,g,A),g=A-1;break}break;case 14:if(f=this._dcsParser.unhook(S!==24&&S!==26),f)return this._preserveStack(6,[],0,b,g),f;S===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=g+1;;A++)if(A>=i||(S=o[A])<32||S>127&&S<C){this._oscParser.put(o,g,A),g=A-1;break}break;case 6:if(f=this._oscParser.end(S!==24&&S!==26),f)return this._preserveStack(5,[],0,b,g),f;S===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&b}}}s.EscapeSequenceParser=_},6242:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const h=a(5770),u=a(482),l=[];s.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(d,m){this._handlers[d]===void 0&&(this._handlers[d]=[]);const C=this._handlers[d];return C.push(m),{dispose:()=>{const _=C.indexOf(m);_!==-1&&C.splice(_,1)}}}clearHandler(d){this._handlers[d]&&delete this._handlers[d]}setHandlerFallback(d){this._handlerFb=d}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let d=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;d>=0;--d)this._active[d].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].start();else this._handlerFb(this._id,"START")}_put(d,m,C){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(d,m,C);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(d,m,C))}start(){this.reset(),this._state=1}put(d,m,C){if(this._state!==3){if(this._state===1)for(;m<C;){const _=d[m++];if(_===59){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+_-48}this._state===2&&C-m>0&&this._put(d,m,C)}}end(d,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,_=this._active.length-1,r=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,C=m,r=this._stack.fallThrough,this._stack.paused=!1),!r&&C===!1){for(;_>=0&&(C=this._active[_].end(d),C!==!0);_--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,C;_--}for(;_>=0;_--)if(C=this._active[_].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",d);this._active=l,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(d){this._handler=d,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(d,m,C){this._hitLimit||(this._data+=(0,u.utf32ToString)(d,m,C),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(d){let m=!1;if(this._hitLimit)m=!1;else if(d&&(m=this._handler(this._data),m instanceof Promise))return m.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,m}}},8742:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const a=2147483647;class h{static fromArray(l){const d=new h;if(!l.length)return d;for(let m=Array.isArray(l[0])?1:0;m<l.length;++m){const C=l[m];if(Array.isArray(C))for(let _=0;_<C.length;++_)d.addSubParam(C[_]);else d.addParam(C)}return d}constructor(l=32,d=32){if(this.maxLength=l,this.maxSubParamsLength=d,d>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(d),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const l=new h(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let d=0;d<this.length;++d){l.push(this.params[d]);const m=this._subParamsIdx[d]>>8,C=255&this._subParamsIdx[d];C-m>0&&l.push(Array.prototype.slice.call(this._subParams,m,C))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>a?a:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>a?a:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const d=this._subParamsIdx[l]>>8,m=255&this._subParamsIdx[l];return m-d>0?this._subParams.subarray(d,m):null}getSubParamsAll(){const l={};for(let d=0;d<this.length;++d){const m=this._subParamsIdx[d]>>8,C=255&this._subParamsIdx[d];C-m>0&&(l[d]=this._subParams.slice(m,C))}return l}addDigit(l){let d;if(this._rejectDigits||!(d=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const m=this._digitIsSub?this._subParams:this.params,C=m[d-1];m[d-1]=~C?Math.min(10*C+l,a):l}}s.Params=h},5741:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,h){const u={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(u),h.dispose=()=>this._wrappedAddonDispose(u),h.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let h=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===a){h=u;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(h,1)}}},8771:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const h=a(3785),u=a(511);s.BufferApiView=class{constructor(l,d){this._buffer=l,this.type=d}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const d=this._buffer.lines.get(l);if(d)return new h.BufferLineApiView(d)}getNullCell(){return new u.CellData}}},3785:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const h=a(511);s.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,l){if(!(u<0||u>=this._line.length))return l?(this._line.loadCell(u,l),l):this._line.loadCell(u,new h.CellData)}translateToString(u,l,d){return this._line.translateToString(u,l,d)}}},8285:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const h=a(8771),u=a(8460),l=a(844);class d extends l.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=d},7975:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,h){return this._core.registerCsiHandler(a,u=>h(u.toArray()))}addCsiHandler(a,h){return this.registerCsiHandler(a,h)}registerDcsHandler(a,h){return this._core.registerDcsHandler(a,(u,l)=>h(u,l.toArray()))}addDcsHandler(a,h){return this.registerDcsHandler(a,h)}registerEscHandler(a,h){return this._core.registerEscHandler(a,h)}addEscHandler(a,h){return this.registerEscHandler(a,h)}registerOscHandler(a,h){return this._core.registerOscHandler(a,h)}addOscHandler(a,h){return this.registerOscHandler(a,h)}}},7090:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(w,s,a){var h=this&&this.__decorate||function(r,o,i,n){var f,S=arguments.length,b=S<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,o,i,n);else for(var y=r.length-1;y>=0;y--)(f=r[y])&&(b=(S<3?f(b):S>3?f(o,i,b):f(o,i))||b);return S>3&&b&&Object.defineProperty(o,i,b),b},u=this&&this.__param||function(r,o){return function(i,n){o(i,n,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const l=a(8460),d=a(844),m=a(5295),C=a(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let _=s.BufferService=class extends d.Disposable{get buffer(){return this.buffers.active}constructor(r){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(r.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(r.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(r,this))}resize(r,o){this.cols=r,this.rows=o,this.buffers.resize(r,o),this._onResize.fire({cols:r,rows:o})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(r,o=!1){const i=this.buffer;let n;n=this._cachedBlankLine,n&&n.length===this.cols&&n.getFg(0)===r.fg&&n.getBg(0)===r.bg||(n=i.getBlankLine(r,o),this._cachedBlankLine=n),n.isWrapped=o;const f=i.ybase+i.scrollTop,S=i.ybase+i.scrollBottom;if(i.scrollTop===0){const b=i.lines.isFull;S===i.lines.length-1?b?i.lines.recycle().copyFrom(n):i.lines.push(n.clone()):i.lines.splice(S+1,0,n.clone()),b?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const b=S-f+1;i.lines.shiftElements(f+1,b-1,-1),i.lines.set(S,n.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(r,o,i){const n=this.buffer;if(r<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else r+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);const f=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+r,n.ybase),0),f!==n.ydisp&&(o||this._onScroll.fire(n.ydisp))}};s.BufferService=_=h([u(0,C.IOptionsService)],_)},7994:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,h){this._charsets[a]=h,this.glevel===a&&(this.charset=h)}}},1753:function(w,s,a){var h=this&&this.__decorate||function(n,f,S,b){var y,g=arguments.length,L=g<3?f:b===null?b=Object.getOwnPropertyDescriptor(f,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(n,f,S,b);else for(var M=n.length-1;M>=0;M--)(y=n[M])&&(L=(g<3?y(L):g>3?y(f,S,L):y(f,S))||L);return g>3&&L&&Object.defineProperty(f,S,L),L},u=this&&this.__param||function(n,f){return function(S,b){f(S,b,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const l=a(2585),d=a(8460),m=a(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:n=>n.button!==4&&n.action===1&&(n.ctrl=!1,n.alt=!1,n.shift=!1,!0)},VT200:{events:19,restrict:n=>n.action!==32},DRAG:{events:23,restrict:n=>n.action!==32||n.button!==3},ANY:{events:31,restrict:n=>!0}};function _(n,f){let S=(n.ctrl?16:0)|(n.shift?4:0)|(n.alt?8:0);return n.button===4?(S|=64,S|=n.action):(S|=3&n.button,4&n.button&&(S|=64),8&n.button&&(S|=128),n.action===32?S|=32:n.action!==0||f||(S|=3)),S}const r=String.fromCharCode,o={DEFAULT:n=>{const f=[_(n,!1)+32,n.col+32,n.row+32];return f[0]>255||f[1]>255||f[2]>255?"":`\x1B[M${r(f[0])}${r(f[1])}${r(f[2])}`},SGR:n=>{const f=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${_(n,!0)};${n.col};${n.row}${f}`},SGR_PIXELS:n=>{const f=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${_(n,!0)};${n.x};${n.y}${f}`}};let i=s.CoreMouseService=class extends m.Disposable{constructor(n,f){super(),this._bufferService=n,this._coreService=f,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new d.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(C))this.addProtocol(S,C[S]);for(const S of Object.keys(o))this.addEncoding(S,o[S]);this.reset()}addProtocol(n,f){this._protocols[n]=f}addEncoding(n,f){this._encodings[n]=f}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(n){if(!this._protocols[n])throw new Error(`unknown protocol "${n}"`);this._activeProtocol=n,this._onProtocolChange.fire(this._protocols[n].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(n){if(!this._encodings[n])throw new Error(`unknown encoding "${n}"`);this._activeEncoding=n}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(n){if(n.col<0||n.col>=this._bufferService.cols||n.row<0||n.row>=this._bufferService.rows||n.button===4&&n.action===32||n.button===3&&n.action!==32||n.button!==4&&(n.action===2||n.action===3)||(n.col++,n.row++,n.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,n,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(n))return!1;const f=this._encodings[this._activeEncoding](n);return f&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(f):this._coreService.triggerDataEvent(f,!0)),this._lastEvent=n,!0}explainEvents(n){return{down:!!(1&n),up:!!(2&n),drag:!!(4&n),move:!!(8&n),wheel:!!(16&n)}}_equalEvents(n,f,S){if(S){if(n.x!==f.x||n.y!==f.y)return!1}else if(n.col!==f.col||n.row!==f.row)return!1;return n.button===f.button&&n.action===f.action&&n.ctrl===f.ctrl&&n.alt===f.alt&&n.shift===f.shift}};s.CoreMouseService=i=h([u(0,l.IBufferService),u(1,l.ICoreService)],i)},6975:function(w,s,a){var h=this&&this.__decorate||function(i,n,f,S){var b,y=arguments.length,g=y<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(i,n,f,S);else for(var L=i.length-1;L>=0;L--)(b=i[L])&&(g=(y<3?b(g):y>3?b(n,f,g):b(n,f))||g);return y>3&&g&&Object.defineProperty(n,f,g),g},u=this&&this.__param||function(i,n){return function(f,S){n(f,S,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const l=a(1439),d=a(8460),m=a(844),C=a(2585),_=Object.freeze({insertMode:!1}),r=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let o=s.CoreService=class extends m.Disposable{constructor(i,n,f){super(),this._bufferService=i,this._logService=n,this._optionsService=f,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new d.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new d.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new d.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new d.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(_),this.decPrivateModes=(0,l.clone)(r)}reset(){this.modes=(0,l.clone)(_),this.decPrivateModes=(0,l.clone)(r)}triggerDataEvent(i,n=!1){if(this._optionsService.rawOptions.disableStdin)return;const f=this._bufferService.buffer;n&&this._optionsService.rawOptions.scrollOnUserInput&&f.ybase!==f.ydisp&&this._onRequestScrollToBottom.fire(),n&&this._onUserInput.fire(),this._logService.debug(`sending data "${i}"`,()=>i.split("").map(S=>S.charCodeAt(0))),this._onData.fire(i)}triggerBinaryEvent(i){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${i}"`,()=>i.split("").map(n=>n.charCodeAt(0))),this._onBinary.fire(i))}};s.CoreService=o=h([u(0,C.IBufferService),u(1,C.ILogService),u(2,C.IOptionsService)],o)},9074:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const h=a(8055),u=a(8460),l=a(844),d=a(6106);let m=0,C=0;class _ extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new d.SortedList(i=>i==null?void 0:i.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(i){if(i.marker.isDisposed)return;const n=new r(i);if(n){const f=n.marker.onDispose(()=>n.dispose());n.onDispose(()=>{n&&(this._decorations.delete(n)&&this._onDecorationRemoved.fire(n),f.dispose())}),this._decorations.insert(n),this._onDecorationRegistered.fire(n)}return n}reset(){for(const i of this._decorations.values())i.dispose();this._decorations.clear()}*getDecorationsAtCell(i,n,f){let S=0,b=0;for(const y of this._decorations.getKeyIterator(n))S=y.options.x??0,b=S+(y.options.width??1),i>=S&&i<b&&(!f||(y.options.layer??"bottom")===f)&&(yield y)}forEachDecorationAtCell(i,n,f,S){this._decorations.forEachByKey(n,b=>{m=b.options.x??0,C=m+(b.options.width??1),i>=m&&i<C&&(!f||(b.options.layer??"bottom")===f)&&S(b)})}}s.DecorationService=_;class r extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(i){super(),this.options=i,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=i.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const h=a(2585),u=a(8343);class l{constructor(...m){this._entries=new Map;for(const[C,_]of m)this.set(C,_)}set(m,C){const _=this._entries.get(m);return this._entries.set(m,C),_}forEach(m){for(const[C,_]of this._entries.entries())m(C,_)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}s.ServiceCollection=l,s.InstantiationService=class{constructor(){this._services=new l,this._services.set(h.IInstantiationService,this)}setService(d,m){this._services.set(d,m)}getService(d){return this._services.get(d)}createInstance(d,...m){const C=(0,u.getServiceDependencies)(d).sort((o,i)=>o.index-i.index),_=[];for(const o of C){const i=this._services.get(o.id);if(!i)throw new Error(`[createInstance] ${d.name} depends on UNKNOWN service ${o.id}.`);_.push(i)}const r=C.length>0?C[0].index:m.length;if(m.length!==r)throw new Error(`[createInstance] First service dependency of ${d.name} at position ${r+1} conflicts with ${m.length} static arguments`);return new d(...m,..._)}}},7866:function(w,s,a){var h=this&&this.__decorate||function(r,o,i,n){var f,S=arguments.length,b=S<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,o,i,n);else for(var y=r.length-1;y>=0;y--)(f=r[y])&&(b=(S<3?f(b):S>3?f(o,i,b):f(o,i))||b);return S>3&&b&&Object.defineProperty(o,i,b),b},u=this&&this.__param||function(r,o){return function(i,n){o(i,n,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const l=a(844),d=a(2585),m={trace:d.LogLevelEnum.TRACE,debug:d.LogLevelEnum.DEBUG,info:d.LogLevelEnum.INFO,warn:d.LogLevelEnum.WARN,error:d.LogLevelEnum.ERROR,off:d.LogLevelEnum.OFF};let C,_=s.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(r){super(),this._optionsService=r,this._logLevel=d.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(r){for(let o=0;o<r.length;o++)typeof r[o]=="function"&&(r[o]=r[o]())}_log(r,o,i){this._evalLazyOptionalParams(i),r.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+o,...i)}trace(r,...o){var i;this._logLevel<=d.LogLevelEnum.TRACE&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.trace.bind(this._optionsService.options.logger))??console.log,r,o)}debug(r,...o){var i;this._logLevel<=d.LogLevelEnum.DEBUG&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.debug.bind(this._optionsService.options.logger))??console.log,r,o)}info(r,...o){var i;this._logLevel<=d.LogLevelEnum.INFO&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.info.bind(this._optionsService.options.logger))??console.info,r,o)}warn(r,...o){var i;this._logLevel<=d.LogLevelEnum.WARN&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.warn.bind(this._optionsService.options.logger))??console.warn,r,o)}error(r,...o){var i;this._logLevel<=d.LogLevelEnum.ERROR&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.error.bind(this._optionsService.options.logger))??console.error,r,o)}};s.LogService=_=h([u(0,d.IOptionsService)],_),s.setTraceLogger=function(r){C=r},s.traceCall=function(r,o,i){if(typeof i.value!="function")throw new Error("not supported");const n=i.value;i.value=function(...f){if(C.logLevel!==d.LogLevelEnum.TRACE)return n.apply(this,f);C.trace(`GlyphRenderer#${n.name}(${f.map(b=>JSON.stringify(b)).join(", ")})`);const S=n.apply(this,f);return C.trace(`GlyphRenderer#${n.name} return`,S),S}}},7302:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const h=a(8460),u=a(844),l=a(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const d=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends u.Disposable{constructor(_){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const r={...s.DEFAULT_OPTIONS};for(const o in _)if(o in r)try{const i=_[o];r[o]=this._sanitizeAndValidateOption(o,i)}catch(i){console.error(i)}this.rawOptions=r,this.options={...r},this._setupOptions(),this.register((0,u.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(_,r){return this.onOptionChange(o=>{o===_&&r(this.rawOptions[_])})}onMultipleOptionChange(_,r){return this.onOptionChange(o=>{_.indexOf(o)!==-1&&r()})}_setupOptions(){const _=o=>{if(!(o in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);return this.rawOptions[o]},r=(o,i)=>{if(!(o in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);i=this._sanitizeAndValidateOption(o,i),this.rawOptions[o]!==i&&(this.rawOptions[o]=i,this._onOptionChange.fire(o))};for(const o in this.rawOptions){const i={get:_.bind(this,o),set:r.bind(this,o)};Object.defineProperty(this.options,o,i)}}_sanitizeAndValidateOption(_,r){switch(_){case"cursorStyle":if(r||(r=s.DEFAULT_OPTIONS[_]),!function(o){return o==="block"||o==="underline"||o==="bar"}(r))throw new Error(`"${r}" is not a valid value for ${_}`);break;case"wordSeparator":r||(r=s.DEFAULT_OPTIONS[_]);break;case"fontWeight":case"fontWeightBold":if(typeof r=="number"&&1<=r&&r<=1e3)break;r=d.includes(r)?r:s.DEFAULT_OPTIONS[_];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(`${_} cannot be less than 1, value: ${r}`);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(`${_} cannot be less than 0, value: ${r}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(`${_} cannot be less than or equal to 0, value: ${r}`);break;case"rows":case"cols":if(!r&&r!==0)throw new Error(`${_} must be numeric, value: ${r}`);break;case"windowsPty":r=r??{}}return r}}s.OptionsService=m},2660:function(w,s,a){var h=this&&this.__decorate||function(m,C,_,r){var o,i=arguments.length,n=i<3?C:r===null?r=Object.getOwnPropertyDescriptor(C,_):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(m,C,_,r);else for(var f=m.length-1;f>=0;f--)(o=m[f])&&(n=(i<3?o(n):i>3?o(C,_,n):o(C,_))||n);return i>3&&n&&Object.defineProperty(C,_,n),n},u=this&&this.__param||function(m,C){return function(_,r){C(_,r,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const l=a(2585);let d=s.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){const C=this._bufferService.buffer;if(m.id===void 0){const f=C.addMarker(C.ybase+C.y),S={data:m,id:this._nextId++,lines:[f]};return f.onDispose(()=>this._removeMarkerFromLink(S,f)),this._dataByLinkId.set(S.id,S),S.id}const _=m,r=this._getEntryIdKey(_),o=this._entriesWithId.get(r);if(o)return this.addLineToLink(o.id,C.ybase+C.y),o.id;const i=C.addMarker(C.ybase+C.y),n={id:this._nextId++,key:this._getEntryIdKey(_),data:_,lines:[i]};return i.onDispose(()=>this._removeMarkerFromLink(n,i)),this._entriesWithId.set(n.key,n),this._dataByLinkId.set(n.id,n),n.id}addLineToLink(m,C){const _=this._dataByLinkId.get(m);if(_&&_.lines.every(r=>r.line!==C)){const r=this._bufferService.buffer.addMarker(C);_.lines.push(r),r.onDispose(()=>this._removeMarkerFromLink(_,r))}}getLinkData(m){var C;return(C=this._dataByLinkId.get(m))==null?void 0:C.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,C){const _=m.lines.indexOf(C);_!==-1&&(m.lines.splice(_,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};s.OscLinkService=d=h([u(0,l.IBufferService)],d)},8343:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const a="di$target",h="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(u){return u[h]||[]},s.createDecorator=function(u){if(s.serviceRegistry.has(u))return s.serviceRegistry.get(u);const l=function(d,m,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(_,r,o){r[a]===r?r[h].push({id:_,index:o}):(r[h]=[{id:_,index:o}],r[a]=r)})(l,d,C)};return l.toString=()=>u,s.serviceRegistry.set(u,l),l}},2585:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const h=a(8343);var u;s.IBufferService=(0,h.createDecorator)("BufferService"),s.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),s.ICoreService=(0,h.createDecorator)("CoreService"),s.ICharsetService=(0,h.createDecorator)("CharsetService"),s.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(u||(s.LogLevelEnum=u={})),s.ILogService=(0,h.createDecorator)("LogService"),s.IOptionsService=(0,h.createDecorator)("OptionsService"),s.IOscLinkService=(0,h.createDecorator)("OscLinkService"),s.IUnicodeService=(0,h.createDecorator)("UnicodeService"),s.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(w,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const h=a(8460),u=a(225);class l{static extractShouldJoin(m){return(1&m)!=0}static extractWidth(m){return m>>1&3}static extractCharKind(m){return m>>3}static createPropertyValue(m,C,_=!1){return(16777215&m)<<3|(3&C)<<1|(_?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const m=new u.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let C=0,_=0;const r=m.length;for(let o=0;o<r;++o){let i=m.charCodeAt(o);if(55296<=i&&i<=56319){if(++o>=r)return C+this.wcwidth(i);const S=m.charCodeAt(o);56320<=S&&S<=57343?i=1024*(i-55296)+S-56320+65536:C+=this.wcwidth(S)}const n=this.charProperties(i,_);let f=l.extractWidth(n);l.extractShouldJoin(n)&&(f-=l.extractWidth(_)),C+=f,_=n}return C}charProperties(m,C){return this._activeProvider.charProperties(m,C)}}s.UnicodeService=l}},v={};function p(w){var s=v[w];if(s!==void 0)return s.exports;var a=v[w]={exports:{}};return c[w].call(a.exports,a,a.exports,p),a.exports}var x={};return(()=>{var w=x;Object.defineProperty(w,"__esModule",{value:!0}),w.Terminal=void 0;const s=p(9042),a=p(3236),h=p(844),u=p(5741),l=p(8285),d=p(7975),m=p(7090),C=["cols","rows"];class _ extends h.Disposable{constructor(o){super(),this._core=this.register(new a.Terminal(o)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const i=f=>this._core.options[f],n=(f,S)=>{this._checkReadonlyOptions(f),this._core.options[f]=S};for(const f in this._core.options){const S={get:i.bind(this,f),set:n.bind(this,f)};Object.defineProperty(this._publicOptions,f,S)}}_checkReadonlyOptions(o){if(C.includes(o))throw new Error(`Option "${o}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new d.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const o=this._core.coreService.decPrivateModes;let i="none";switch(this._core.coreMouseService.activeProtocol){case"X10":i="x10";break;case"VT200":i="vt200";break;case"DRAG":i="drag";break;case"ANY":i="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:i,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}}get options(){return this._publicOptions}set options(o){for(const i in o)this._publicOptions[i]=o[i]}blur(){this._core.blur()}focus(){this._core.focus()}input(o,i=!0){this._core.input(o,i)}resize(o,i){this._verifyIntegers(o,i),this._core.resize(o,i)}open(o){this._core.open(o)}attachCustomKeyEventHandler(o){this._core.attachCustomKeyEventHandler(o)}attachCustomWheelEventHandler(o){this._core.attachCustomWheelEventHandler(o)}registerLinkProvider(o){return this._core.registerLinkProvider(o)}registerCharacterJoiner(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)}deregisterCharacterJoiner(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)}registerMarker(o=0){return this._verifyIntegers(o),this._core.registerMarker(o)}registerDecoration(o){return this._checkProposedApi(),this._verifyPositiveIntegers(o.x??0,o.width??0,o.height??0),this._core.registerDecoration(o)}hasSelection(){return this._core.hasSelection()}select(o,i,n){this._verifyIntegers(o,i,n),this._core.select(o,i,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(o,i){this._verifyIntegers(o,i),this._core.selectLines(o,i)}dispose(){super.dispose()}scrollLines(o){this._verifyIntegers(o),this._core.scrollLines(o)}scrollPages(o){this._verifyIntegers(o),this._core.scrollPages(o)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(o){this._verifyIntegers(o),this._core.scrollToLine(o)}clear(){this._core.clear()}write(o,i){this._core.write(o,i)}writeln(o,i){this._core.write(o),this._core.write(`\r
`,i)}paste(o){this._core.paste(o)}refresh(o,i){this._verifyIntegers(o,i),this._core.refresh(o,i)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(o){this._addonManager.loadAddon(this,o)}static get strings(){return s}_verifyIntegers(...o){for(const i of o)if(i===1/0||isNaN(i)||i%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...o){for(const i of o)if(i&&(i===1/0||isNaN(i)||i%1!=0||i<0))throw new Error("This API only accepts positive integers")}}w.Terminal=_})(),x})())})(en);var Ba=en.exports,sn={exports:{}};(function(e,t){(function(c,v){e.exports=v()})(self,()=>(()=>{var c={};return(()=>{var v=c;Object.defineProperty(v,"__esModule",{value:!0}),v.FitAddon=void 0,v.FitAddon=class{activate(p){this._terminal=p}dispose(){}fit(){const p=this.proposeDimensions();if(!p||!this._terminal||isNaN(p.cols)||isNaN(p.rows))return;const x=this._terminal._core;this._terminal.rows===p.rows&&this._terminal.cols===p.cols||(x._renderService.clear(),this._terminal.resize(p.cols,p.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const p=this._terminal._core,x=p._renderService.dimensions;if(x.css.cell.width===0||x.css.cell.height===0)return;const w=this._terminal.options.scrollback===0?0:p.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(s.getPropertyValue("height")),h=Math.max(0,parseInt(s.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),l=a-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),d=h-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-w;return{cols:Math.max(2,Math.floor(d/x.css.cell.width)),rows:Math.max(1,Math.floor(l/x.css.cell.height))}}}})(),c})())})(sn);var Oa=sn.exports,rn={exports:{}};(function(e,t){(function(c,v){e.exports=v()})(self,()=>(()=>{var c={6:(w,s)=>{function a(u){try{const l=new URL(u),d=l.password&&l.username?`${l.protocol}//${l.username}:${l.password}@${l.host}`:l.username?`${l.protocol}//${l.username}@${l.host}`:`${l.protocol}//${l.host}`;return u.toLocaleLowerCase().startsWith(d.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(s,"__esModule",{value:!0}),s.LinkComputer=s.WebLinkProvider=void 0,s.WebLinkProvider=class{constructor(u,l,d,m={}){this._terminal=u,this._regex=l,this._handler=d,this._options=m}provideLinks(u,l){const d=h.computeLink(u,this._regex,this._terminal,this._handler);l(this._addCallbacks(d))}_addCallbacks(u){return u.map(l=>(l.leave=this._options.leave,l.hover=(d,m)=>{if(this._options.hover){const{range:C}=l;this._options.hover(d,m,C)}},l))}};class h{static computeLink(l,d,m,C){const _=new RegExp(d.source,(d.flags||"")+"g"),[r,o]=h._getWindowedLineStrings(l-1,m),i=r.join("");let n;const f=[];for(;n=_.exec(i);){const S=n[0];if(!a(S))continue;const[b,y]=h._mapStrIdx(m,o,0,n.index),[g,L]=h._mapStrIdx(m,b,y,S.length);if(b===-1||y===-1||g===-1||L===-1)continue;const M={start:{x:y+1,y:b+1},end:{x:L,y:g+1}};f.push({range:M,text:S,activate:C})}return f}static _getWindowedLineStrings(l,d){let m,C=l,_=l,r=0,o="";const i=[];if(m=d.buffer.active.getLine(l)){const n=m.translateToString(!0);if(m.isWrapped&&n[0]!==" "){for(r=0;(m=d.buffer.active.getLine(--C))&&r<2048&&(o=m.translateToString(!0),r+=o.length,i.push(o),m.isWrapped&&o.indexOf(" ")===-1););i.reverse()}for(i.push(n),r=0;(m=d.buffer.active.getLine(++_))&&m.isWrapped&&r<2048&&(o=m.translateToString(!0),r+=o.length,i.push(o),o.indexOf(" ")===-1););}return[i,C]}static _mapStrIdx(l,d,m,C){const _=l.buffer.active,r=_.getNullCell();let o=m;for(;C;){const i=_.getLine(d);if(!i)return[-1,-1];for(let n=o;n<i.length;++n){i.getCell(n,r);const f=r.getChars();if(r.getWidth()&&(C-=f.length||1,n===i.length-1&&f==="")){const S=_.getLine(d+1);S&&S.isWrapped&&(S.getCell(0,r),r.getWidth()===2&&(C+=1))}if(C<0)return[d,n]}d++,o=0}return[d,o]}}s.LinkComputer=h}},v={};function p(w){var s=v[w];if(s!==void 0)return s.exports;var a=v[w]={exports:{}};return c[w](a,a.exports,p),a.exports}var x={};return(()=>{var w=x;Object.defineProperty(w,"__esModule",{value:!0}),w.WebLinksAddon=void 0;const s=p(6),a=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function h(u,l){const d=window.open();if(d){try{d.opener=null}catch{}d.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}w.WebLinksAddon=class{constructor(u=h,l={}){this._handler=u,this._options=l}activate(u){this._terminal=u;const l=this._options,d=l.urlRegex||a;this._linkProvider=this._terminal.registerLinkProvider(new s.WebLinkProvider(this._terminal,d,this._handler,l))}dispose(){var u;(u=this._linkProvider)==null||u.dispose()}}})(),x})())})(rn);var Pa=rn.exports;const Ia=3e4,Ha=100,Fa=3,Wa=1e3;function nn(e={}){const{wasmPath:t="/megaport.wasm",wasmExecPath:c="/wasm_exec.js",debug:v=!1,useWorker:p=!0,initTimeout:x=Ia,maxRetries:w=Fa,retryDelay:s=Wa}=e,a=He(!0),h=He(!1),u=He(null),l=He(null),d=He(new Map);let m=0;const C=(B,...A)=>{v&&console.log(B,...A)},_=(B,...A)=>{console.warn(B,...A)},r=()=>new Promise((B,A)=>{if(window.Go){B();return}const F=document.createElement("script");F.src=c,F.onload=()=>B(),F.onerror=()=>A(new Error("Failed to load wasm_exec.js")),document.head.appendChild(F)}),o=()=>{window.wasmStartSpinner=B=>{const A=`spinner_${Date.now()}_${m++}`;return d.value.set(A,B),Si(d),C(` Spinner started: ${A} - ${B}`),A},window.wasmStopSpinner=B=>{const A=d.value.get(B);d.value.delete(B),Si(d),A&&C(` Spinner stopped: ${B} - ${A}`)},C(" Spinner functions registered on window")},i=async()=>{const B=new Promise((F,U)=>{setTimeout(()=>{U(new Error(`WASM initialization timeout after ${x}ms`))},x)}),A=async()=>{try{if(o(),await r(),!window.Go)throw new Error("Go WASM runtime not loaded");const F=new window.Go,V=await(await fetch(t)).arrayBuffer(),X=await WebAssembly.instantiate(V,F.importObject);if(F.run(X.instance),await new Promise(z=>setTimeout(z,Ha)),!window.executeMegaportCommandAsync)throw new Error("WASM functions not exposed");window.registerPromptHandler&&(window.registerPromptHandler(z=>{C(" Prompt requested:",z),_(" No custom prompt handler registered. Interactive commands require a prompt handler. Use registerPromptHandler() to provide one.")}),C(" Default prompt handler registered (does nothing - override required)")),h.value=!0,a.value=!1,C(" Megaport WASM ready (direct mode)"),C("Available functions:",{executeMegaportCommand:typeof window.executeMegaportCommand,executeMegaportCommandAsync:typeof window.executeMegaportCommandAsync,debugAuthInfo:typeof window.debugAuthInfo})}catch(F){throw u.value=F,a.value=!1,F}};try{await Promise.race([A(),B])}catch(F){throw u.value=F,a.value=!1,F}},n=async B=>{if(!h.value)throw new Error("WASM not ready");return new Promise((A,F)=>{try{if(C(` Executing command: ${B}`),window.executeMegaportCommandAsync)window.executeMegaportCommandAsync(B,U=>{C(" Command result:",U),A(U)});else if(window.executeMegaportCommand){const U=window.executeMegaportCommand(B);A(U)}else F(new Error("No WASM execute function available"))}catch(U){F(U)}})},f=(B,A,F="staging")=>{if(window.setAuthCredentials){const U=window.setAuthCredentials(B,A,F);C(" Auth credentials set securely (in-memory only)"),U&&!U.success&&console.error("Failed to set credentials:",U.error),window.debugAuthInfo&&C("Auth info:",window.debugAuthInfo())}else console.error(" setAuthCredentials function not available. WASM may not be initialized.")},S=()=>{window.clearAuthCredentials?(window.clearAuthCredentials(),C(" Auth credentials cleared from memory")):console.error(" clearAuthCredentials function not available. WASM may not be initialized.")},b=()=>window.debugAuthInfo?window.debugAuthInfo():null,y=()=>{window.resetWasmOutput&&window.resetWasmOutput()},g=()=>window.toggleWasmDebug?window.toggleWasmDebug():!1,L=B=>window.registerPromptHandler?window.registerPromptHandler(B):(_("registerPromptHandler not available - WASM may not be initialized"),!1),M=async()=>{let B=null;for(let F=1;F<=w;F++)try{C(`Attempt ${F}/${w}: Initializing Megaport WASM...`),await i(),C(` WASM initialized successfully on attempt ${F}`);return}catch(U){if(B=U,console.error(` WASM initialization attempt ${F}/${w} failed:`,U),F<w){const V=s*Math.pow(2,F-1);C(`Retrying in ${V}ms...`),await new Promise(X=>setTimeout(X,V))}}const A=new Error(`WASM initialization failed after ${w} attempts. Last error: ${B==null?void 0:B.message}`);throw u.value=A,a.value=!1,A};bs(async()=>{try{p?(_(" Worker mode not fully implemented. Falling back to direct mode."),await M()):await M()}catch(B){console.error("Failed to initialize Megaport WASM after all retries:",B),u.value=B}});const P=()=>{C(" Cleaning up WASM resources"),l.value&&(l.value.terminate(),l.value=null,C("Worker terminated")),d.value.clear(),window.clearAuthCredentials&&window.clearAuthCredentials(),typeof window<"u"&&(delete window.wasmStartSpinner,delete window.wasmStopSpinner),C("Cleanup complete")};return li(()=>{P()}),{isLoading:gt(a),isReady:gt(h),error:gt(u),activeSpinners:gt(d),execute:n,setAuth:f,clearAuth:S,getAuthInfo:b,resetOutput:y,toggleDebug:g,registerPromptHandler:L,cleanup:P}}const Na={class:"megaport-terminal-container"},$a={key:0,class:"terminal-loading"},Ua={key:1,class:"terminal-error"},ja={key:2,class:"terminal-container"},Ka={key:0,class:"spinner-overlay"},za={class:"spinner-content"},Va=14,qa='Menlo, Monaco, "Courier New", monospace',Ga=150,Xa=100,Ja=xr({__name:"MegaportTerminal",props:{wasmPath:{default:"/megaport.wasm"},wasmExecPath:{default:"/wasm_exec.js"},welcomeMessage:{default:`Welcome to Megaport CLI (WebAssembly)
Type "help" for available commands.
`},theme:{default:()=>({background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#aeafad"})}},setup(e,{expose:t}){const c=e,v=He(null);let p=null,x=null,w="",s=0,a=!1;const h=He([]);let u=-1;const{isLoading:l,isReady:d,error:m,execute:C,setAuth:_,registerPromptHandler:r,activeSpinners:o}=nn({wasmPath:c.wasmPath,wasmExecPath:c.wasmExecPath,debug:!0,useWorker:!1}),i=He(null),n=ls(()=>m.value||i.value),f=ls(()=>i.value||m.value);let S=null,b="",y=!1,g=null;const L=(E,R)=>(...T)=>{g&&clearTimeout(g),g=setTimeout(()=>E(...T),R)};Ar((E,R,T)=>(console.error(" Terminal component error:",E),console.error("Error context:",T),i.value=E instanceof Error?E:new Error(String(E)),!1));const M=()=>{if(!r||typeof r!="function"){console.warn("registerPromptHandler not available - WASM may not be initialized");return}r(E=>{p&&(console.log(" Prompt handler called:",E.id,E.message),p.write(`\r
\x1B[36m${E.message}\x1B[0m `),S={id:E.id,resolve:R=>{window.submitPromptResponse&&window.submitPromptResponse(E.id,R)}},console.log(" activePrompt set:",S.id),b="")})},P=()=>{if(!v.value)return;p=new Ba.Terminal({cursorBlink:!0,fontSize:Va,fontFamily:qa,theme:{background:c.theme.background,foreground:c.theme.foreground,cursor:c.theme.cursor}}),x=new Oa.FitAddon,p.loadAddon(x),p.loadAddon(new Pa.WebLinksAddon),p.open(v.value),x.fit(),p.write(c.welcomeMessage),B(),p.onData(R=>{V(R)});const E=L(()=>{x==null||x.fit()},Ga);window.addEventListener("resize",E)},B=()=>{a?(p==null||p.write("\x1B[32mmegaport>\x1B[0m "),a=!1):p==null||p.write(`\r
\x1B[32mmegaport>\x1B[0m `),w="",s=0,u=-1},A=(E,R)=>{if(!p||!S)return!1;if(R===13){p.write(`\r
`);const T=b;return S.resolve(T),b="",!0}return R===127?(b.length>0&&(b=b.slice(0,-1),p.write("\b \b")),!0):R===3?(p.write(`^C\r
`),window.cancelPrompt&&S&&window.cancelPrompt(S.id),S=null,b="",B(),!0):(R>=32&&R<=126&&(b+=E,p.write(E)),!0)},F=E=>{if(!p)return!1;if(E==="\x1B[D")return s>0&&(s--,p.write("\x1B[D")),!0;if(E==="\x1B[C")return s<w.length&&(s++,p.write("\x1B[C")),!0;if(E==="\x1B[A"){if(u<h.value.length-1){u++;const R=h.value[h.value.length-1-u];p.write("\r\x1B[K"),p.write("\x1B[32mmegaport>\x1B[0m "),p.write(R),w=R,s=w.length}return!0}if(E==="\x1B[B"){if(u>0){u--;const R=h.value[h.value.length-1-u];p.write("\r\x1B[K"),p.write("\x1B[32mmegaport>\x1B[0m "),p.write(R),w=R,s=w.length}else u===0&&(u=-1,p.write("\r\x1B[K"),p.write("\x1B[32mmegaport>\x1B[0m "),w="",s=0);return!0}return!1},U=E=>p?E===3?(p.write("^C"),B(),!0):E===12?(p.clear(),p.write("\x1B[H"),a=!0,B(),!0):!1:!1,V=E=>{if(!p)return;const R=E.charCodeAt(0);if(console.log(" Input:",E,"code:",R,"activePrompt:",!!S,"isInInteractiveCommand:",y),S){A(E,R);return}if(!(y&&!S)&&!U(R)&&!F(E)){if(R===13){if(p.write(`\r
`),w.trim()){const T=w.trim();w="",s=0,X(T)}else B();return}if(R===127){s>0&&(w=w.slice(0,s-1)+w.slice(s),s--,p.write("\b \b"));return}R>=32&&R<=126&&(w=w.slice(0,s)+E+w.slice(s),s++,p.write(E))}},X=async E=>{if(!p||!d.value){p==null||p.write("\x1B[31mCLI not ready\x1B[0m"),B();return}E.trim()&&(h.value.length===0||h.value[h.value.length-1]!==E)&&(h.value.push(E),h.value.length>Xa&&h.value.shift());try{if(E==="clear"||E==="cls"){p.clear(),p.write("\x1B[H"),a=!0,B();return}if(E==="help"){p.write(`Available commands:\r
`),p.write(`  port list           - List all ports\r
`),p.write(`  vxc list            - List all VXCs\r
`),p.write(`  mcr list            - List all MCRs\r
`),p.write(`  mve list            - List all MVEs\r
`),p.write(`  location list       - List all locations\r
`),p.write(`  servicekey list     - List all service keys\r
`),p.write(`  partner list        - List partner configurations\r
`),p.write(`  clear               - Clear the terminal\r
`),B();return}const R=E.includes("--interactive")||E.includes("-i");R?y=!0:p.write(`\x1B[90mExecuting...\x1B[0m\r
`);const T=await C(E);if(T.error)p.write(`\x1B[31mError: ${T.error}\x1B[0m\r
`);else if(T.output){let I=T.output;R&&([/^Enter port name \(required\): ?\n?/gm,/^Enter term \([^)]+\) \(required\): ?\n?/gm,/^Enter port speed \([^)]+\) \(required\): ?\n?/gm,/^Enter location ID \(required\): ?\n?/gm,/^Enter marketplace visibility \([^)]+\) \(required\): ?\n?/gm,/^Enter diversity zone \(optional\): ?\n?/gm,/^Enter cost centre \(optional\): ?\n?/gm,/^Enter promo code \(optional\): ?\n?/gm,/^Would you like to add resource tags\? \[y\/N\] ?\n?/gm,/^Tag key \([^)]+\): ?\n?/gm,/^Tag value for '[^']+': ?\n?/gm].forEach(ee=>{I=I.replace(ee,"")}),I=I.replace(/\n{3,}/g,`

`)),I.trim()&&I.split(`
`).forEach(ee=>{p&&p.write(ee+`\r
`)})}else R||p.write(`\x1B[90mCommand completed with no output\x1B[0m\r
`)}catch(R){p&&p.write(`\x1B[31mError: ${R.message}\x1B[0m\r
`)}y=!1,S=null,b="",S||B()},z=()=>{window.location.reload()};return bs(()=>{const E=setInterval(()=>{d.value&&(clearInterval(E),P(),M())},100);setTimeout(()=>clearInterval(E),3e4)}),Rr(()=>{g&&clearTimeout(g),x==null||x.dispose(),p==null||p.dispose()}),t({terminal:p,fitAddon:x,execute:X,setAuth:_}),(E,R)=>{var T;return Me(),Pe("div",Na,[Ne(l)?(Me(),Pe("div",$a,[...R[0]||(R[0]=[ne("div",{class:"spinner"},null,-1),ne("p",null,"Loading Megaport CLI...",-1)])])):n.value?(Me(),Pe("div",Ua,[R[1]||(R[1]=ne("h3",null," Failed to load Megaport CLI",-1)),ne("p",null,pt((T=f.value)==null?void 0:T.message),1),ne("button",{onClick:z},"Retry")])):(Me(),Pe("div",ja,[Ne(o)&&Ne(o).size>0?(Me(),Pe("div",Ka,[ne("div",za,[R[2]||(R[2]=ne("div",{class:"spinner"},null,-1)),(Me(!0),Pe(ze,null,uo(Ne(o),([I,q])=>(Me(),Pe("p",{key:I},pt(q),1))),128))])])):Qt("",!0),ne("div",{ref_key:"terminalRef",ref:v,class:"terminal-wrapper"},null,512)]))])}}}),on=(e,t)=>{const c=e.__vccOpts||e;for(const[v,p]of t)c[v]=p;return c},Ya=on(Ja,[["__scopeId","data-v-1efa5394"]]),Za={id:"app",class:"app-container"},Qa={class:"app-main"},el={key:0,class:"auth-panel"},tl={class:"form-group"},sl={class:"form-group"},il={class:"form-group"},rl={key:1,class:"terminal-section"},nl={key:2,class:"quick-actions"},ol={class:"action-buttons"},al={class:"status-info"},ll={class:"status-item"},cl={class:"status-item"},hl={key:0,class:"status-item"},ul={class:"value error"},fl={key:1,class:"status-item"},dl={class:"value"},_l=xr({__name:"App",setup(e){const{isLoading:t,isReady:c,error:v,setAuth:p,clearAuth:x,getAuthInfo:w}=nn({debug:!0,useWorker:!1}),s=He({accessKey:"",secretKey:"",environment:"staging"}),a=He(!1),h=He(null),u=He(null),l=ls(()=>`Welcome to Megaport CLI (WebAssembly)
Environment: ${s.value.environment}
Type "help" for available commands.

`),d=()=>{var _;p(s.value.accessKey,s.value.secretKey,s.value.environment),a.value=!0,h.value=w(),(_=u.value)!=null&&_.setAuth&&u.value.setAuth(s.value.accessKey,s.value.secretKey,s.value.environment)},m=()=>{x(),a.value=!1,h.value=null,s.value={accessKey:"",secretKey:"",environment:"staging"}},C=_=>{var r;(r=u.value)!=null&&r.execute&&u.value.execute(_)};return bs(()=>{var _,r;h.value=w(),(_=h.value)!=null&&_.accessKeySet&&((r=h.value)!=null&&r.secretKeySet)&&(a.value=!0)}),(_,r)=>(Me(),Pe("div",Za,[r[23]||(r[23]=ne("header",{class:"app-header"},[ne("h1",null," Megaport CLI WebAssembly Demo"),ne("p",null,"Vue 3 + Vite + WASM Integration")],-1)),ne("main",Qa,[a.value?(Me(),Pe("section",rl,[ne("div",{class:"terminal-header"},[r[16]||(r[16]=ne("h2",null,"Interactive Terminal",-1)),ne("button",{onClick:m,class:"btn-secondary"},"  Clear Auth ")]),Ge(Ya,{ref_key:"terminalRef",ref:u,"wasm-path":"/megaport.wasm","wasm-exec-path":"/wasm_exec.js","welcome-message":l.value},null,8,["welcome-message"])])):(Me(),Pe("section",el,[r[14]||(r[14]=ne("h2",null,"Authentication",-1)),r[15]||(r[15]=ne("p",null,"Configure your Megaport API credentials to get started.",-1)),ne("form",{onSubmit:ka(d,["prevent"])},[ne("div",tl,[r[9]||(r[9]=ne("label",{for:"accessKey"},"Access Key:",-1)),Rs(ne("input",{id:"accessKey","onUpdate:modelValue":r[0]||(r[0]=o=>s.value.accessKey=o),type:"password",placeholder:"Enter access key",autocomplete:"off","data-1p-ignore":"",required:""},null,512),[[Vi,s.value.accessKey]])]),ne("div",sl,[r[10]||(r[10]=ne("label",{for:"secretKey"},"Secret Key:",-1)),Rs(ne("input",{id:"secretKey","onUpdate:modelValue":r[1]||(r[1]=o=>s.value.secretKey=o),type:"password",placeholder:"Enter secret key",autocomplete:"off","data-1p-ignore":"",required:""},null,512),[[Vi,s.value.secretKey]])]),ne("div",il,[r[12]||(r[12]=ne("label",{for:"environment"},"Environment:",-1)),Rs(ne("select",{id:"environment","onUpdate:modelValue":r[2]||(r[2]=o=>s.value.environment=o)},[...r[11]||(r[11]=[ne("option",{value:"staging"},"Staging",-1),ne("option",{value:"production"},"Production",-1)])],512),[[Ea,s.value.environment]])]),r[13]||(r[13]=ne("button",{type:"submit",class:"btn-primary"},"Set Credentials",-1))],32)])),a.value?(Me(),Pe("aside",nl,[r[17]||(r[17]=ne("h3",null,"Quick Actions",-1)),ne("div",ol,[ne("button",{onClick:r[3]||(r[3]=o=>C("ports list --output json")),class:"btn-action"},"  List Ports "),ne("button",{onClick:r[4]||(r[4]=o=>C("mcr list --output json")),class:"btn-action"},"  List MCRs "),ne("button",{onClick:r[5]||(r[5]=o=>C("mve list --output json")),class:"btn-action"},"  List MVEs "),ne("button",{onClick:r[6]||(r[6]=o=>C("locations list --output json")),class:"btn-action"},"  List Locations "),ne("button",{onClick:r[7]||(r[7]=o=>C("help")),class:"btn-action"},"  Help "),ne("button",{onClick:r[8]||(r[8]=o=>C("clear")),class:"btn-action"},"  Clear ")])])):Qt("",!0),ne("aside",al,[r[22]||(r[22]=ne("h3",null,"WASM Status",-1)),ne("div",ll,[r[18]||(r[18]=ne("span",{class:"label"},"Loading:",-1)),ne("span",{class:Ft(["value",Ne(t)?"loading":"ready"])},pt(Ne(t)?" Yes":" No"),3)]),ne("div",cl,[r[19]||(r[19]=ne("span",{class:"label"},"Ready:",-1)),ne("span",{class:Ft(["value",Ne(c)?"ready":"not-ready"])},pt(Ne(c)?" Yes":" No"),3)]),Ne(v)?(Me(),Pe("div",hl,[r[20]||(r[20]=ne("span",{class:"label"},"Error:",-1)),ne("span",ul,pt(Ne(v).message),1)])):Qt("",!0),h.value?(Me(),Pe("div",fl,[r[21]||(r[21]=ne("span",{class:"label"},"Environment:",-1)),ne("span",dl,pt(h.value.environment),1)])):Qt("",!0)])]),r[24]||(r[24]=ne("footer",{class:"app-footer"},[ne("p",null,[Ks(" Megaport CLI WASM Integration Demo | "),ne("a",{href:"https://github.com/megaport",target:"_blank"},"GitHub"),Ks(" | "),ne("a",{href:"https://docs.megaport.com",target:"_blank"},"Documentation")])],-1))]))}}),pl=on(_l,[["__scopeId","data-v-8fee4306"]]),gl=Aa(pl);gl.mount("#app");
